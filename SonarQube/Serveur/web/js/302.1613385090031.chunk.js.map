{"version":3,"sources":["webpack:///./src/main/js/components/common/PrivacyBadgeContainer.tsx","webpack:///./src/main/js/components/common/VisibilitySelector.tsx","webpack:///./src/main/js/apps/permissions/project/components/ApplyTemplate.tsx","webpack:///./src/main/js/types/settings.ts","webpack:///./src/main/js/apps/projectsManagement/CreateProjectForm.tsx","webpack:///./src/main/js/apps/projectsManagement/ProjectRow.css?1a9a","webpack:///./src/main/js/apps/projectsManagement/ProjectRow.css","webpack:///./src/main/js/apps/projectsManagement/ChangeDefaultVisibilityForm.tsx","webpack:///./src/main/js/apps/projectsManagement/Header.tsx","webpack:///./src/main/js/apps/projectsManagement/RestoreAccessModal.tsx","webpack:///./src/main/js/apps/projectsManagement/ProjectRowActions.tsx","webpack:///./src/main/js/apps/projectsManagement/ProjectRow.tsx","webpack:///./src/main/js/apps/projectsManagement/Projects.tsx","webpack:///./src/main/js/apps/projectsManagement/BulkApplyTemplateModal.tsx","webpack:///./src/main/js/apps/projectsManagement/DeleteModal.tsx","webpack:///./src/main/js/apps/projectsManagement/Search.tsx","webpack:///./src/main/js/apps/projectsManagement/App.tsx","webpack:///./src/main/js/app/components/embed-docs-modal/Suggestions.tsx","webpack:///./src/main/js/api/permissions.ts","webpack:///./src/main/js/api/settings.ts","webpack:///./src/main/js/components/controls/DateInput.tsx","webpack:///./src/main/js/components/controls/DayPicker.css?d7e1","webpack:///./src/main/js/components/controls/DayPicker.css","webpack:///./src/main/js/components/controls/styles.css?5633","webpack:///./src/main/js/components/controls/styles.css","webpack:///./src/main/js/api/nav.ts"],"names":["PrivacyBadgeContainer","className","qualifier","visibility","overlay","render","this","props","map","key","value","checked","onCheck","onChange","disabled","canTurnToPrivate","showDetails","mounted","state","done","loading","fetchPermissionTemplates","then","permissionTemplates","setState","handleSubmit","permissionTemplate","projectKey","project","templateId","onApply","Promise","reject","undefined","handlePermissionTemplateChange","componentDidMount","componentWillUnmount","header","name","onClose","onSubmit","size","onCloseClick","onFormSubmit","submitting","id","variant","htmlFor","clearable","options","label","onClick","SettingsKey","handleInputChange","event","currentTarget","handleVisibilityChange","handleFormSubmit","preventDefault","data","response","createdProject","onProjectCreated","defaultProjectVisibility","componentDidUpdate","setImmediate","closeButton","focus","contentLabel","onRequestClose","defaultMessage","values","to","innerRef","node","autoFocus","maxLength","required","type","api","content","__esModule","default","module","i","exported","locals","exports","___CSS_LOADER_API_IMPORT___","push","handleConfirmClick","onConfirm","defaultVisibility","Alert","visibilityForm","handleChangeVisibilityClick","closeVisiblityForm","hasProvisionPermission","onProjectCreate","onChangeDefaultProjectVisibility","all","grantPermission","onRestoreAccess","permission","login","currentUser","browse","administer","applyTemplateModal","restoreAccessModal","fetchPermissions","component","configuration","hasAccess","Boolean","showPermissions","canBrowseProject","handleDropdownOpen","handleApplyTemplateClick","handleApplyTemplateClose","handleRestoreAccessClick","handleRestoreAccessClose","handleRestoreAccessDone","onOpen","ActionsDropdown","ApplyTemplate","handleProjectCheck","onProjectCheck","selected","placement","lastAnalysisDate","date","onProjectSelected","onProjectDeselected","ready","projects","selection","includes","analyzedBefore","parameters","length","join","qualifiers","onProvisionedOnly","provisioned","q","query","renderWarning","renderSelect","t","loadPermissionTemplates","QUALIFIERS_ORDER","bulkApplyTemplateModal","deleteModal","getQualifierOptions","topLevelQualifiers","option","indexOf","onAllSelected","onAllDeselected","handleDeleteClick","closeDeleteModal","handleDeleteConfirm","onDeleteProjects","handleBulkApplyTemplateClick","closeBulkApplyTemplateModal","handleQualifierChange","onQualifierChanged","onVisibilityChanged","renderCheckbox","isAllChecked","thirdState","renderQualifierOption","renderQualifierFilter","optionRenderer","searchable","valueRenderer","renderVisibilityFilter","renderTypeFilter","onProvisionedChanged","renderDateFilter","DateInput","inputClassName","onDateChanged","placeholder","minLength","onSearch","title","total","fetchDefaultProjectVisibility","keys","DefaultProjectVisibility","results","handleDefaultProjectVisibilityChange","requestProjects","p","page","ps","r","components","paging","loadMore","newQualifier","newVisibility","handleDateChanged","openCreateProjectForm","createProjectForm","closeCreateProjectForm","appState","Suggestions","suggestions","defer","count","CreateProjectForm","Consumer","addSuggestions","removeSuggestions","SuggestionsInner","prevProps","grantPermissionToUser","catch","revokePermissionFromUser","grantPermissionToGroup","revokePermissionFromGroup","getPermissionTemplates","createPermissionTemplate","updatePermissionTemplate","deletePermissionTemplate","setDefaultPermissionTemplate","applyTemplateToProject","bulkApplyTemplate","grantTemplatePermissionToUser","revokeTemplatePermissionFromUser","grantTemplatePermissionToGroup","revokeTemplatePermissionFromGroup","addProjectCreatorToTemplate","removeProjectCreatorFromTemplate","getPermissionsUsersForComponent","getPermissionsGroupsForComponent","getGlobalPermissionsUsers","getGlobalPermissionsGroups","getPermissionTemplateUsers","getPermissionTemplateGroups","changeProjectVisibility","changeProjectDefaultVisibility","projectVisibility","getDefinitions","getValues","setSettingValue","definition","multiValues","fieldValues","fields","JSON","stringify","resetSettingValue","sendTestEmail","subject","message","checkSecretKey","generateSecretKey","encryptValue","DayPicker","input","openCalendar","handleResetClick","closeCalendar","currentMonth","Date","lastHovered","open","handleDayClick","day","modifiers","handleDayMouseEnter","handleCurrentMonthChange","handleCurrentYearChange","handlePreviousMonthClick","handleNextMonthClick","highlightFrom","highlightTo","minDate","after","maxDate","months","years","getFullYear","selectedDays","lastHoveredOrValue","highlighted","from","weekdaysLong","weekdaysShort","onClickOutside","InputWrapper","onFocus","readOnly","fill","iconProps","month","getMonth","year","String","captionElement","NullComponent","disabledDays","before","firstDayOfWeek","navbarElement","onDayClick","onDayMouseEnter","intl","other","formattedValue","formatDate","ref","getComponentNavigation","getMarketplaceNavigation","getSettingsNavigation"],"mappings":"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","file":"js/302.1613385090031.chunk.js","sourcesContent":["/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport Tooltip from 'sonar-ui-common/components/controls/Tooltip';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\n\ninterface PrivacyBadgeContainerProps {\n  className?: string;\n  qualifier: string;\n  visibility: T.Visibility;\n}\n\nexport default function PrivacyBadgeContainer({\n  className,\n  qualifier,\n  visibility\n}: PrivacyBadgeContainerProps) {\n  if (visibility !== 'private') {\n    return null;\n  }\n\n  return (\n    <Tooltip overlay={translate('visibility', visibility, 'description', qualifier)}>\n      <div className={classNames('badge', className)}>{translate('visibility', visibility)}</div>\n    </Tooltip>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport Radio from 'sonar-ui-common/components/controls/Radio';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\n\ninterface Props {\n  canTurnToPrivate?: boolean;\n  className?: string;\n  onChange: (visibility: T.Visibility) => void;\n  showDetails?: boolean;\n  visibility?: T.Visibility;\n}\n\nexport default class VisibilitySelector extends React.PureComponent<Props> {\n  render() {\n    return (\n      <div className={classNames(this.props.className)}>\n        {['public', 'private'].map(visibility => (\n          <Radio\n            className={`huge-spacer-right visibility-${visibility}`}\n            key={visibility}\n            value={visibility}\n            checked={this.props.visibility === visibility}\n            onCheck={this.props.onChange}\n            disabled={visibility === 'private' && !this.props.canTurnToPrivate}>\n            <div>\n              {translate('visibility', visibility)}\n              {this.props.showDetails && (\n                <p className=\"note\">{translate('visibility', visibility, 'description.long')}</p>\n              )}\n            </div>\n          </Radio>\n        ))}\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ResetButtonLink, SubmitButton } from 'sonar-ui-common/components/controls/buttons';\nimport Select from 'sonar-ui-common/components/controls/Select';\nimport SimpleModal from 'sonar-ui-common/components/controls/SimpleModal';\nimport { Alert } from 'sonar-ui-common/components/ui/Alert';\nimport DeferredSpinner from 'sonar-ui-common/components/ui/DeferredSpinner';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { applyTemplateToProject, getPermissionTemplates } from '../../../../api/permissions';\n\ninterface Props {\n  onApply?: () => void;\n  onClose: () => void;\n  project: { key: string; name: string };\n}\n\ninterface State {\n  done: boolean;\n  loading: boolean;\n  permissionTemplate?: string;\n  permissionTemplates?: T.PermissionTemplate[];\n}\n\nexport default class ApplyTemplate extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { done: false, loading: true };\n\n  componentDidMount() {\n    this.mounted = true;\n    this.fetchPermissionTemplates();\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  fetchPermissionTemplates = () => {\n    getPermissionTemplates().then(\n      ({ permissionTemplates }) => {\n        if (this.mounted) {\n          this.setState({ loading: false, permissionTemplates });\n        }\n      },\n      () => {\n        if (this.mounted) {\n          this.setState({ loading: false });\n        }\n      }\n    );\n  };\n\n  handleSubmit = () => {\n    if (this.state.permissionTemplate) {\n      return applyTemplateToProject({\n        projectKey: this.props.project.key,\n        templateId: this.state.permissionTemplate\n      }).then(() => {\n        if (this.mounted) {\n          if (this.props.onApply) {\n            this.props.onApply();\n          }\n          this.setState({ done: true });\n        }\n      });\n    } else {\n      return Promise.reject(undefined);\n    }\n  };\n\n  handlePermissionTemplateChange = ({ value }: { value: string }) => {\n    this.setState({ permissionTemplate: value });\n  };\n\n  render() {\n    const header = translateWithParameters(\n      'projects_role.apply_template_to_xxx',\n      this.props.project.name\n    );\n\n    return (\n      <SimpleModal\n        header={header}\n        onClose={this.props.onClose}\n        onSubmit={this.handleSubmit}\n        size=\"small\">\n        {({ onCloseClick, onFormSubmit, submitting }) => (\n          <form id=\"project-permissions-apply-template-form\" onSubmit={onFormSubmit}>\n            <header className=\"modal-head\">\n              <h2>{header}</h2>\n            </header>\n\n            <div className=\"modal-body\">\n              {this.state.done ? (\n                <Alert variant=\"success\">{translate('projects_role.apply_template.success')}</Alert>\n              ) : (\n                <>\n                  {this.state.loading ? (\n                    <i className=\"spinner\" />\n                  ) : (\n                    <div className=\"modal-field\">\n                      <label htmlFor=\"project-permissions-template\">\n                        {translate('template')}\n                        <em className=\"mandatory\">*</em>\n                      </label>\n                      {this.state.permissionTemplates && (\n                        <Select\n                          clearable={false}\n                          id=\"project-permissions-template\"\n                          onChange={this.handlePermissionTemplateChange}\n                          options={this.state.permissionTemplates.map(permissionTemplate => ({\n                            label: permissionTemplate.name,\n                            value: permissionTemplate.id\n                          }))}\n                          value={this.state.permissionTemplate}\n                        />\n                      )}\n                    </div>\n                  )}\n                </>\n              )}\n            </div>\n\n            <footer className=\"modal-foot\">\n              <DeferredSpinner className=\"spacer-right\" loading={submitting} />\n              {!this.state.done && (\n                <SubmitButton disabled={submitting || !this.state.permissionTemplate}>\n                  {translate('apply')}\n                </SubmitButton>\n              )}\n              <ResetButtonLink onClick={onCloseClick}>\n                {translate(this.state.done ? 'close' : 'cancel')}\n              </ResetButtonLink>\n            </footer>\n          </form>\n        )}\n      </SimpleModal>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nexport const enum SettingsKey {\n  DaysBeforeDeletingInactiveBranchesAndPRs = 'sonar.dbcleaner.daysBeforeDeletingInactiveBranchesAndPRs',\n  DefaultProjectVisibility = 'projects.default.visibility'\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { FormattedMessage } from 'react-intl';\nimport { Link } from 'react-router';\nimport { ResetButtonLink, SubmitButton } from 'sonar-ui-common/components/controls/buttons';\nimport Modal from 'sonar-ui-common/components/controls/Modal';\nimport { Alert } from 'sonar-ui-common/components/ui/Alert';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { createProject } from '../../api/components';\nimport VisibilitySelector from '../../components/common/VisibilitySelector';\nimport { getProjectUrl } from '../../helpers/urls';\n\ninterface Props {\n  defaultProjectVisibility?: T.Visibility;\n  onClose: () => void;\n  onProjectCreated: () => void;\n}\n\ninterface State {\n  createdProject?: { key: string; name: string };\n  key: string;\n  loading: boolean;\n  name: string;\n  visibility?: T.Visibility;\n  // add index declaration to be able to do `this.setState({ [name]: value });`\n  [x: string]: any;\n}\n\nexport default class CreateProjectForm extends React.PureComponent<Props, State> {\n  closeButton?: HTMLElement | null;\n  mounted = false;\n\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      key: '',\n      loading: false,\n      name: '',\n      visibility: props.defaultProjectVisibility\n    };\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentDidUpdate() {\n    // wrap with `setImmediate` because of https://github.com/reactjs/react-modal/issues/338\n    setImmediate(() => {\n      if (this.closeButton) {\n        this.closeButton.focus();\n      }\n    });\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  handleInputChange = (event: React.SyntheticEvent<HTMLInputElement>) => {\n    const { name, value } = event.currentTarget;\n    this.setState({ [name]: value });\n  };\n\n  handleVisibilityChange = (visibility: T.Visibility) => {\n    this.setState({ visibility });\n  };\n\n  handleFormSubmit = (event: React.SyntheticEvent<HTMLFormElement>) => {\n    event.preventDefault();\n\n    const data = {\n      name: this.state.name,\n      project: this.state.key,\n      visibility: this.state.visibility\n    };\n\n    this.setState({ loading: true });\n    createProject(data).then(\n      response => {\n        if (this.mounted) {\n          this.setState({ createdProject: response.project, loading: false });\n          this.props.onProjectCreated();\n        }\n      },\n      () => {\n        if (this.mounted) {\n          this.setState({ loading: false });\n        }\n      }\n    );\n  };\n\n  render() {\n    const { defaultProjectVisibility } = this.props;\n    const { createdProject } = this.state;\n\n    return (\n      <Modal contentLabel=\"modal form\" onRequestClose={this.props.onClose}>\n        {createdProject ? (\n          <div>\n            <header className=\"modal-head\">\n              <h2>{translate('qualifiers.create.TRK')}</h2>\n            </header>\n\n            <div className=\"modal-body\">\n              <Alert variant=\"success\">\n                <FormattedMessage\n                  defaultMessage={translate(\n                    'projects_management.project_has_been_successfully_created'\n                  )}\n                  id=\"projects_management.project_has_been_successfully_created\"\n                  values={{\n                    project: (\n                      <Link to={getProjectUrl(createdProject.key)}>{createdProject.name}</Link>\n                    )\n                  }}\n                />\n              </Alert>\n            </div>\n\n            <footer className=\"modal-foot\">\n              <ResetButtonLink\n                id=\"create-project-close\"\n                innerRef={node => (this.closeButton = node)}\n                onClick={this.props.onClose}>\n                {translate('close')}\n              </ResetButtonLink>\n            </footer>\n          </div>\n        ) : (\n          <form id=\"create-project-form\" onSubmit={this.handleFormSubmit}>\n            <header className=\"modal-head\">\n              <h2>{translate('qualifiers.create.TRK')}</h2>\n            </header>\n\n            <div className=\"modal-body\">\n              <div className=\"modal-field\">\n                <label htmlFor=\"create-project-name\">\n                  {translate('name')}\n                  <em className=\"mandatory\">*</em>\n                </label>\n                <input\n                  autoFocus={true}\n                  id=\"create-project-name\"\n                  maxLength={2000}\n                  name=\"name\"\n                  onChange={this.handleInputChange}\n                  required={true}\n                  type=\"text\"\n                  value={this.state.name}\n                />\n              </div>\n              <div className=\"modal-field\">\n                <label htmlFor=\"create-project-key\">\n                  {translate('key')}\n                  <em className=\"mandatory\">*</em>\n                </label>\n                <input\n                  id=\"create-project-key\"\n                  maxLength={400}\n                  name=\"key\"\n                  onChange={this.handleInputChange}\n                  required={true}\n                  type=\"text\"\n                  value={this.state.key}\n                />\n              </div>\n              <div className=\"modal-field\">\n                <label>{translate('visibility')}</label>\n                <VisibilitySelector\n                  canTurnToPrivate={defaultProjectVisibility !== undefined}\n                  className=\"little-spacer-top\"\n                  onChange={this.handleVisibilityChange}\n                  visibility={this.state.visibility}\n                />\n              </div>\n            </div>\n\n            <footer className=\"modal-foot\">\n              {this.state.loading && <i className=\"spinner spacer-right\" />}\n              <SubmitButton disabled={this.state.loading} id=\"create-project-submit\">\n                {translate('create')}\n              </SubmitButton>\n              <ResetButtonLink id=\"create-project-cancel\" onClick={this.props.onClose}>\n                {translate('cancel')}\n              </ResetButtonLink>\n            </footer>\n          </form>\n        )}\n      </Modal>\n    );\n  }\n}\n","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./ProjectRow.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".project-row-text-cell{max-width:20em}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Button, ResetButtonLink } from 'sonar-ui-common/components/controls/buttons';\nimport Modal from 'sonar-ui-common/components/controls/Modal';\nimport Radio from 'sonar-ui-common/components/controls/Radio';\nimport { Alert } from 'sonar-ui-common/components/ui/Alert';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\n\nexport interface Props {\n  defaultVisibility: T.Visibility;\n  onClose: () => void;\n  onConfirm: (visiblity: T.Visibility) => void;\n}\n\ninterface State {\n  visibility: T.Visibility;\n}\n\nexport default class ChangeDefaultVisibilityForm extends React.PureComponent<Props, State> {\n  constructor(props: Props) {\n    super(props);\n    this.state = { visibility: props.defaultVisibility };\n  }\n\n  handleConfirmClick = () => {\n    this.props.onConfirm(this.state.visibility);\n    this.props.onClose();\n  };\n\n  handleVisibilityChange = (visibility: T.Visibility) => {\n    this.setState({ visibility });\n  };\n\n  render() {\n    return (\n      <Modal contentLabel=\"modal form\" onRequestClose={this.props.onClose}>\n        <header className=\"modal-head\">\n          <h2>{translate('settings.projects.change_visibility_form.header')}</h2>\n        </header>\n\n        <div className=\"modal-body\">\n          {['public', 'private'].map(visibility => (\n            <div className=\"big-spacer-bottom\" key={visibility}>\n              <Radio\n                value={visibility}\n                checked={this.state.visibility === visibility}\n                onCheck={this.handleVisibilityChange}>\n                <div>\n                  {translate('visibility', visibility)}\n                  <p className=\"text-muted spacer-top\">\n                    {translate('visibility', visibility, 'description.short')}\n                  </p>\n                </div>\n              </Radio>\n            </div>\n          ))}\n\n          <Alert variant=\"warning\">\n            {translate('settings.projects.change_visibility_form.warning')}\n          </Alert>\n        </div>\n\n        <footer className=\"modal-foot\">\n          <Button className=\"js-confirm\" onClick={this.handleConfirmClick}>\n            {translate('settings.projects.change_visibility_form.submit')}\n          </Button>\n          <ResetButtonLink className=\"js-modal-close\" onClick={this.props.onClose}>\n            {translate('cancel')}\n          </ResetButtonLink>\n        </footer>\n      </Modal>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Button, EditButton } from 'sonar-ui-common/components/controls/buttons';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport ChangeDefaultVisibilityForm from './ChangeDefaultVisibilityForm';\n\nexport interface Props {\n  defaultProjectVisibility?: T.Visibility;\n  hasProvisionPermission?: boolean;\n  onProjectCreate: () => void;\n  onChangeDefaultProjectVisibility: (visibility: T.Visibility) => void;\n}\n\ninterface State {\n  visibilityForm: boolean;\n}\n\nexport default class Header extends React.PureComponent<Props, State> {\n  state: State = { visibilityForm: false };\n\n  handleChangeVisibilityClick = () => {\n    this.setState({ visibilityForm: true });\n  };\n\n  closeVisiblityForm = () => {\n    this.setState({ visibilityForm: false });\n  };\n\n  render() {\n    const { defaultProjectVisibility, hasProvisionPermission } = this.props;\n    const { visibilityForm } = this.state;\n\n    return (\n      <header className=\"page-header\">\n        <h1 className=\"page-title\">{translate('projects_management')}</h1>\n\n        <div className=\"page-actions\">\n          <span className=\"big-spacer-right\">\n            <span className=\"text-middle\">\n              {translate('settings.projects.default_visibility_of_new_projects')}{' '}\n              <strong>\n                {defaultProjectVisibility ? translate('visibility', defaultProjectVisibility) : '—'}\n              </strong>\n            </span>\n            <EditButton\n              className=\"js-change-visibility spacer-left button-small\"\n              onClick={this.handleChangeVisibilityClick}\n            />\n          </span>\n\n          {hasProvisionPermission && (\n            <Button id=\"create-project\" onClick={this.props.onProjectCreate}>\n              {translate('qualifiers.create.TRK')}\n            </Button>\n          )}\n        </div>\n\n        <p className=\"page-description\">{translate('projects_management.page.description')}</p>\n\n        {visibilityForm && (\n          <ChangeDefaultVisibilityForm\n            defaultVisibility={defaultProjectVisibility || 'public'}\n            onClose={this.closeVisiblityForm}\n            onConfirm={this.props.onChangeDefaultProjectVisibility}\n          />\n        )}\n      </header>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { FormattedMessage } from 'react-intl';\nimport { ResetButtonLink, SubmitButton } from 'sonar-ui-common/components/controls/buttons';\nimport Modal from 'sonar-ui-common/components/controls/Modal';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { Project } from '../../api/components';\nimport { grantPermissionToUser } from '../../api/permissions';\n\ninterface Props {\n  currentUser: Pick<T.LoggedInUser, 'login'>;\n  onClose: () => void;\n  onRestoreAccess: () => void;\n  project: Project;\n}\n\ninterface State {\n  loading: boolean;\n}\n\nexport default class RestoreAccessModal extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { loading: false };\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  handleFormSubmit = (event: React.SyntheticEvent<HTMLFormElement>) => {\n    event.preventDefault();\n    this.setState({ loading: true });\n    Promise.all([this.grantPermission('user'), this.grantPermission('admin')]).then(\n      this.props.onRestoreAccess,\n      () => {\n        if (this.mounted) {\n          this.setState({ loading: false });\n        }\n      }\n    );\n  };\n\n  grantPermission = (permission: string) =>\n    grantPermissionToUser({\n      projectKey: this.props.project.key,\n      login: this.props.currentUser.login,\n      permission\n    });\n\n  render() {\n    const header = translate('global_permissions.restore_access');\n\n    return (\n      <Modal contentLabel={header} onRequestClose={this.props.onClose}>\n        <form onSubmit={this.handleFormSubmit}>\n          <header className=\"modal-head\">\n            <h2>{header}</h2>\n          </header>\n\n          <div className=\"modal-body\">\n            <FormattedMessage\n              defaultMessage={translate('global_permissions.restore_access.message')}\n              id=\"global_permissions.restore_access.message\"\n              values={{\n                browse: <strong>{translate('projects_role.user')}</strong>,\n                administer: <strong>{translate('projects_role.admin')}</strong>\n              }}\n            />\n          </div>\n\n          <footer className=\"modal-foot\">\n            {this.state.loading && <i className=\"spinner spacer-right\" />}\n            <SubmitButton disabled={this.state.loading}>{translate('restore')}</SubmitButton>\n            <ResetButtonLink onClick={this.props.onClose}>{translate('cancel')}</ResetButtonLink>\n          </footer>\n        </form>\n      </Modal>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport ActionsDropdown, {\n  ActionsDropdownItem\n} from 'sonar-ui-common/components/controls/ActionsDropdown';\nimport DeferredSpinner from 'sonar-ui-common/components/ui/DeferredSpinner';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { Project } from '../../api/components';\nimport { getComponentNavigation } from '../../api/nav';\nimport { getComponentPermissionsUrl } from '../../helpers/urls';\nimport ApplyTemplate from '../permissions/project/components/ApplyTemplate';\nimport RestoreAccessModal from './RestoreAccessModal';\n\nexport interface Props {\n  currentUser: Pick<T.LoggedInUser, 'login'>;\n  project: Project;\n}\n\ninterface State {\n  applyTemplateModal: boolean;\n  hasAccess?: boolean;\n  loading: boolean;\n  restoreAccessModal: boolean;\n}\n\nexport default class ProjectRowActions extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { applyTemplateModal: false, loading: false, restoreAccessModal: false };\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  fetchPermissions = () => {\n    this.setState({ loading: true });\n    getComponentNavigation({ component: this.props.project.key }).then(\n      ({ configuration }) => {\n        if (this.mounted) {\n          const hasAccess = Boolean(\n            configuration && configuration.showPermissions && configuration.canBrowseProject\n          );\n          this.setState({ hasAccess, loading: false });\n        }\n      },\n      () => {\n        if (this.mounted) {\n          this.setState({ loading: false });\n        }\n      }\n    );\n  };\n\n  handleDropdownOpen = () => {\n    if (this.state.hasAccess === undefined && !this.state.loading) {\n      this.fetchPermissions();\n    }\n  };\n\n  handleApplyTemplateClick = () => {\n    this.setState({ applyTemplateModal: true });\n  };\n\n  handleApplyTemplateClose = () => {\n    if (this.mounted) {\n      this.setState({ applyTemplateModal: false });\n    }\n  };\n\n  handleRestoreAccessClick = () => {\n    this.setState({ restoreAccessModal: true });\n  };\n\n  handleRestoreAccessClose = () => this.setState({ restoreAccessModal: false });\n\n  handleRestoreAccessDone = () => {\n    this.setState({ hasAccess: true, restoreAccessModal: false });\n  };\n\n  render() {\n    const { hasAccess, loading } = this.state;\n\n    return (\n      <>\n        <ActionsDropdown onOpen={this.handleDropdownOpen}>\n          {loading ? (\n            <ActionsDropdownItem>\n              <DeferredSpinner />\n            </ActionsDropdownItem>\n          ) : (\n            <>\n              {hasAccess === true && (\n                <ActionsDropdownItem\n                  className=\"js-edit-permissions\"\n                  to={getComponentPermissionsUrl(this.props.project.key)}>\n                  {translate('edit_permissions')}\n                </ActionsDropdownItem>\n              )}\n\n              {hasAccess === false && (\n                <ActionsDropdownItem\n                  className=\"js-restore-access\"\n                  onClick={this.handleRestoreAccessClick}>\n                  {translate('global_permissions.restore_access')}\n                </ActionsDropdownItem>\n              )}\n            </>\n          )}\n\n          <ActionsDropdownItem\n            className=\"js-apply-template\"\n            onClick={this.handleApplyTemplateClick}>\n            {translate('projects_role.apply_template')}\n          </ActionsDropdownItem>\n        </ActionsDropdown>\n\n        {this.state.restoreAccessModal && (\n          <RestoreAccessModal\n            currentUser={this.props.currentUser}\n            onClose={this.handleRestoreAccessClose}\n            onRestoreAccess={this.handleRestoreAccessDone}\n            project={this.props.project}\n          />\n        )}\n\n        {this.state.applyTemplateModal && (\n          <ApplyTemplate onClose={this.handleApplyTemplateClose} project={this.props.project} />\n        )}\n      </>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport Checkbox from 'sonar-ui-common/components/controls/Checkbox';\nimport Tooltip from 'sonar-ui-common/components/controls/Tooltip';\nimport QualifierIcon from 'sonar-ui-common/components/icons/QualifierIcon';\nimport DateFormatter from 'sonar-ui-common/components/intl/DateFormatter';\nimport { Project } from '../../api/components';\nimport PrivacyBadgeContainer from '../../components/common/PrivacyBadgeContainer';\nimport { getComponentOverviewUrl } from '../../helpers/urls';\nimport './ProjectRow.css';\nimport ProjectRowActions from './ProjectRowActions';\n\ninterface Props {\n  currentUser: Pick<T.LoggedInUser, 'login'>;\n  onProjectCheck: (project: Project, checked: boolean) => void;\n  project: Project;\n  selected: boolean;\n}\n\nexport default class ProjectRow extends React.PureComponent<Props> {\n  handleProjectCheck = (checked: boolean) => {\n    this.props.onProjectCheck(this.props.project, checked);\n  };\n\n  render() {\n    const { project, selected } = this.props;\n\n    return (\n      <tr data-project-key={project.key}>\n        <td className=\"thin\">\n          <Checkbox checked={selected} onCheck={this.handleProjectCheck} />\n        </td>\n\n        <td className=\"nowrap hide-overflow project-row-text-cell\">\n          <Link\n            className=\"link-with-icon\"\n            to={getComponentOverviewUrl(project.key, project.qualifier)}>\n            <QualifierIcon className=\"little-spacer-right\" qualifier={project.qualifier} />\n\n            <Tooltip overlay={project.name} placement=\"left\">\n              <span>{project.name}</span>\n            </Tooltip>\n          </Link>\n        </td>\n\n        <td className=\"thin nowrap\">\n          <PrivacyBadgeContainer qualifier={project.qualifier} visibility={project.visibility} />\n        </td>\n\n        <td className=\"nowrap hide-overflow project-row-text-cell\">\n          <Tooltip overlay={project.key} placement=\"left\">\n            <span className=\"note\">{project.key}</span>\n          </Tooltip>\n        </td>\n\n        <td className=\"thin nowrap text-right\">\n          {project.lastAnalysisDate ? (\n            <DateFormatter date={project.lastAnalysisDate} />\n          ) : (\n            <span className=\"note\">—</span>\n          )}\n        </td>\n\n        <td className=\"thin nowrap\">\n          <ProjectRowActions currentUser={this.props.currentUser} project={project} />\n        </td>\n      </tr>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { Project } from '../../api/components';\nimport ProjectRow from './ProjectRow';\n\ninterface Props {\n  currentUser: Pick<T.LoggedInUser, 'login'>;\n  onProjectDeselected: (project: string) => void;\n  onProjectSelected: (project: string) => void;\n  projects: Project[];\n  ready?: boolean;\n  selection: string[];\n}\n\nexport default class Projects extends React.PureComponent<Props> {\n  onProjectCheck = (project: Project, checked: boolean) => {\n    if (checked) {\n      this.props.onProjectSelected(project.key);\n    } else {\n      this.props.onProjectDeselected(project.key);\n    }\n  };\n\n  render() {\n    return (\n      <div className=\"boxed-group boxed-group-inner\">\n        <table\n          className={classNames('data', 'zebra', { 'new-loading': !this.props.ready })}\n          id=\"projects-management-page-projects\">\n          <thead>\n            <tr>\n              <th />\n              <th>{translate('name')}</th>\n              <th />\n              <th>{translate('key')}</th>\n              <th className=\"thin nowrap text-right\">{translate('last_analysis')}</th>\n              <th />\n            </tr>\n          </thead>\n          <tbody>\n            {this.props.projects.map(project => (\n              <ProjectRow\n                currentUser={this.props.currentUser}\n                key={project.key}\n                onProjectCheck={this.onProjectCheck}\n                project={project}\n                selected={this.props.selection.includes(project.key)}\n              />\n            ))}\n          </tbody>\n        </table>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ResetButtonLink, SubmitButton } from 'sonar-ui-common/components/controls/buttons';\nimport Modal from 'sonar-ui-common/components/controls/Modal';\nimport Select from 'sonar-ui-common/components/controls/Select';\nimport { Alert } from 'sonar-ui-common/components/ui/Alert';\nimport { toNotSoISOString } from 'sonar-ui-common/helpers/dates';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { bulkApplyTemplate, getPermissionTemplates } from '../../api/permissions';\n\nexport interface Props {\n  analyzedBefore: Date | undefined;\n  onClose: () => void;\n  provisioned: boolean;\n  qualifier: string;\n  query: string;\n  selection: string[];\n  total: number;\n}\n\ninterface State {\n  done: boolean;\n  loading: boolean;\n  permissionTemplate?: string;\n  permissionTemplates?: T.PermissionTemplate[];\n  submitting: boolean;\n}\n\nexport default class BulkApplyTemplateModal extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { done: false, loading: true, submitting: false };\n\n  componentDidMount() {\n    this.mounted = true;\n    this.loadPermissionTemplates();\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  loadPermissionTemplates() {\n    this.setState({ loading: true });\n    getPermissionTemplates().then(\n      ({ permissionTemplates }) => {\n        if (this.mounted) {\n          this.setState({\n            loading: false,\n            permissionTemplate:\n              permissionTemplates.length > 0 ? permissionTemplates[0].id : undefined,\n            permissionTemplates\n          });\n        }\n      },\n      () => {\n        if (this.mounted) {\n          this.setState({ loading: false });\n        }\n      }\n    );\n  }\n\n  handleConfirmClick = () => {\n    const { analyzedBefore } = this.props;\n    const { permissionTemplate } = this.state;\n    if (permissionTemplate) {\n      this.setState({ submitting: true });\n      const parameters = this.props.selection.length\n        ? {\n            projects: this.props.selection.join(),\n            qualifiers: this.props.qualifier,\n            templateId: permissionTemplate\n          }\n        : {\n            analyzedBefore: analyzedBefore && toNotSoISOString(analyzedBefore),\n            onProvisionedOnly: this.props.provisioned || undefined,\n            qualifiers: this.props.qualifier,\n            q: this.props.query || undefined,\n            templateId: permissionTemplate\n          };\n      bulkApplyTemplate(parameters).then(\n        () => {\n          if (this.mounted) {\n            this.setState({ done: true, submitting: false });\n          }\n        },\n        () => {\n          if (this.mounted) {\n            this.setState({ submitting: false });\n          }\n        }\n      );\n    }\n  };\n\n  handlePermissionTemplateChange = ({ value }: { value: string }) => {\n    this.setState({ permissionTemplate: value });\n  };\n\n  renderWarning = () => (\n    <Alert variant=\"warning\">\n      {this.props.selection.length\n        ? translateWithParameters(\n            'permission_templates.bulk_apply_permission_template.apply_to_selected',\n            this.props.selection.length\n          )\n        : translateWithParameters(\n            'permission_templates.bulk_apply_permission_template.apply_to_all',\n            this.props.total\n          )}\n    </Alert>\n  );\n\n  renderSelect = () => (\n    <div className=\"modal-field\">\n      <label>\n        {translate('template')}\n        <em className=\"mandatory\">*</em>\n      </label>\n      <Select\n        clearable={false}\n        disabled={this.state.submitting}\n        onChange={this.handlePermissionTemplateChange}\n        options={this.state.permissionTemplates!.map(t => ({ label: t.name, value: t.id }))}\n        value={this.state.permissionTemplate}\n      />\n    </div>\n  );\n\n  render() {\n    const { done, loading, permissionTemplates, submitting } = this.state;\n    const header = translate('permission_templates.bulk_apply_permission_template');\n\n    return (\n      <Modal contentLabel={header} onRequestClose={this.props.onClose} size=\"small\">\n        <header className=\"modal-head\">\n          <h2>{header}</h2>\n        </header>\n\n        <div className=\"modal-body\">\n          {done && (\n            <Alert variant=\"success\">{translate('projects_role.apply_template.success')}</Alert>\n          )}\n\n          {loading && <i className=\"spinner\" />}\n\n          {!loading && !done && permissionTemplates && this.renderWarning()}\n          {!loading && !done && permissionTemplates && this.renderSelect()}\n        </div>\n\n        <footer className=\"modal-foot\">\n          {submitting && <i className=\"spinner spacer-right\" />}\n          {!loading && !done && permissionTemplates && (\n            <SubmitButton disabled={submitting} onClick={this.handleConfirmClick}>\n              {translate('apply')}\n            </SubmitButton>\n          )}\n          <ResetButtonLink onClick={this.props.onClose}>\n            {done ? translate('close') : translate('cancel')}\n          </ResetButtonLink>\n        </footer>\n      </Modal>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ResetButtonLink, SubmitButton } from 'sonar-ui-common/components/controls/buttons';\nimport Modal from 'sonar-ui-common/components/controls/Modal';\nimport { Alert } from 'sonar-ui-common/components/ui/Alert';\nimport { toNotSoISOString } from 'sonar-ui-common/helpers/dates';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { bulkDeleteProjects } from '../../api/components';\n\nexport interface Props {\n  analyzedBefore: Date | undefined;\n  onClose: () => void;\n  onConfirm: () => void;\n  provisioned: boolean;\n  qualifier: string;\n  query: string;\n  selection: string[];\n  total: number;\n}\n\ninterface State {\n  loading: boolean;\n}\n\nexport default class DeleteModal extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { loading: false };\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  handleConfirmClick = () => {\n    this.setState({ loading: true });\n    const { analyzedBefore } = this.props;\n    const parameters = this.props.selection.length\n      ? {\n          projects: this.props.selection.join()\n        }\n      : {\n          analyzedBefore: analyzedBefore && toNotSoISOString(analyzedBefore),\n          onProvisionedOnly: this.props.provisioned || undefined,\n          qualifiers: this.props.qualifier,\n          q: this.props.query || undefined\n        };\n    bulkDeleteProjects(parameters).then(\n      () => {\n        if (this.mounted) {\n          this.props.onConfirm();\n        }\n      },\n      () => {\n        if (this.mounted) {\n          this.setState({ loading: false });\n        }\n      }\n    );\n  };\n\n  renderWarning = () => (\n    <Alert variant=\"warning\">\n      {this.props.selection.length\n        ? translateWithParameters(\n            'projects_management.delete_selected_warning',\n            this.props.selection.length\n          )\n        : translateWithParameters('projects_management.delete_all_warning', this.props.total)}\n    </Alert>\n  );\n\n  render() {\n    const header = translate('qualifiers.delete', this.props.qualifier);\n\n    return (\n      <Modal contentLabel={header} onRequestClose={this.props.onClose}>\n        <header className=\"modal-head\">\n          <h2>{header}</h2>\n        </header>\n\n        <div className=\"modal-body\">\n          {this.renderWarning()}\n          {translate('qualifiers.delete_confirm', this.props.qualifier)}\n        </div>\n\n        <footer className=\"modal-foot\">\n          {this.state.loading && <i className=\"spinner spacer-right\" />}\n          <SubmitButton\n            className=\"button-red\"\n            disabled={this.state.loading}\n            onClick={this.handleConfirmClick}>\n            {translate('delete')}\n          </SubmitButton>\n          <ResetButtonLink onClick={this.props.onClose}>{translate('cancel')}</ResetButtonLink>\n        </footer>\n      </Modal>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { sortBy } from 'lodash';\nimport * as React from 'react';\nimport { Button } from 'sonar-ui-common/components/controls/buttons';\nimport Checkbox from 'sonar-ui-common/components/controls/Checkbox';\nimport HelpTooltip from 'sonar-ui-common/components/controls/HelpTooltip';\nimport SearchBox from 'sonar-ui-common/components/controls/SearchBox';\nimport Select from 'sonar-ui-common/components/controls/Select';\nimport QualifierIcon from 'sonar-ui-common/components/icons/QualifierIcon';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { Project } from '../../api/components';\nimport DateInput from '../../components/controls/DateInput';\nimport BulkApplyTemplateModal from './BulkApplyTemplateModal';\nimport DeleteModal from './DeleteModal';\n\nexport interface Props {\n  analyzedBefore: Date | undefined;\n  onAllDeselected: () => void;\n  onAllSelected: () => void;\n  onDateChanged: (analyzedBefore: Date | undefined) => void;\n  onDeleteProjects: () => void;\n  onProvisionedChanged: (provisioned: boolean) => void;\n  onQualifierChanged: (qualifier: string) => void;\n  onVisibilityChanged: (qualifier: string) => void;\n  onSearch: (query: string) => void;\n  projects: Project[];\n  provisioned: boolean;\n  qualifiers: string;\n  query: string;\n  ready: boolean;\n  selection: any[];\n  topLevelQualifiers: string[];\n  total: number;\n  visibility?: T.Visibility;\n}\n\ninterface State {\n  bulkApplyTemplateModal: boolean;\n  deleteModal: boolean;\n}\n\nconst QUALIFIERS_ORDER = ['TRK', 'VW', 'APP'];\n\nexport default class Search extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { bulkApplyTemplateModal: false, deleteModal: false };\n\n  getQualifierOptions = () => {\n    const options = this.props.topLevelQualifiers.map(q => ({\n      label: translate('qualifiers', q),\n      value: q\n    }));\n    return sortBy(options, option => QUALIFIERS_ORDER.indexOf(option.value));\n  };\n\n  onCheck = (checked: boolean) => {\n    if (checked) {\n      this.props.onAllSelected();\n    } else {\n      this.props.onAllDeselected();\n    }\n  };\n\n  handleDeleteClick = () => {\n    this.setState({ deleteModal: true });\n  };\n\n  closeDeleteModal = () => {\n    this.setState({ deleteModal: false });\n  };\n\n  handleDeleteConfirm = () => {\n    this.closeDeleteModal();\n    this.props.onDeleteProjects();\n  };\n\n  handleBulkApplyTemplateClick = () => {\n    this.setState({ bulkApplyTemplateModal: true });\n  };\n\n  closeBulkApplyTemplateModal = () => {\n    this.setState({ bulkApplyTemplateModal: false });\n  };\n\n  handleQualifierChange = ({ value }: { value: string }) => this.props.onQualifierChanged(value);\n\n  handleVisibilityChange = ({ value }: { value: string }) => this.props.onVisibilityChanged(value);\n\n  renderCheckbox = () => {\n    const isAllChecked =\n      this.props.projects.length > 0 && this.props.selection.length === this.props.projects.length;\n    const thirdState =\n      this.props.projects.length > 0 &&\n      this.props.selection.length > 0 &&\n      this.props.selection.length < this.props.projects.length;\n    const checked = isAllChecked || thirdState;\n    return (\n      <Checkbox\n        checked={checked}\n        id=\"projects-selection\"\n        onCheck={this.onCheck}\n        thirdState={thirdState}\n      />\n    );\n  };\n\n  renderQualifierOption = (option: { label: string; value: string }) => (\n    <span>\n      <QualifierIcon className=\"little-spacer-right\" qualifier={option.value} />\n      {option.label}\n    </span>\n  );\n\n  renderQualifierFilter = () => {\n    const options = this.getQualifierOptions();\n    if (options.length < 2) {\n      return null;\n    }\n    return (\n      <td className=\"thin nowrap text-middle\">\n        <Select\n          className=\"input-medium\"\n          clearable={false}\n          disabled={!this.props.ready}\n          name=\"projects-qualifier\"\n          onChange={this.handleQualifierChange}\n          optionRenderer={this.renderQualifierOption}\n          options={this.getQualifierOptions()}\n          searchable={false}\n          value={this.props.qualifiers}\n          valueRenderer={this.renderQualifierOption}\n        />\n      </td>\n    );\n  };\n\n  renderVisibilityFilter = () => {\n    return (\n      <td className=\"thin nowrap text-middle\">\n        <Select\n          className=\"input-small\"\n          clearable={false}\n          disabled={!this.props.ready}\n          name=\"projects-visibility\"\n          onChange={this.handleVisibilityChange}\n          options={[\n            { value: 'all', label: translate('visibility.both') },\n            { value: 'public', label: translate('visibility.public') },\n            { value: 'private', label: translate('visibility.private') }\n          ]}\n          searchable={false}\n          value={this.props.visibility || 'all'}\n        />\n      </td>\n    );\n  };\n\n  renderTypeFilter = () =>\n    this.props.qualifiers === 'TRK' ? (\n      <td className=\"thin nowrap text-middle\">\n        <Checkbox\n          checked={this.props.provisioned}\n          className=\"link-checkbox-control\"\n          id=\"projects-provisioned\"\n          onCheck={this.props.onProvisionedChanged}>\n          <span className=\"text-middle little-spacer-left\">\n            {translate('provisioning.only_provisioned')}\n          </span>\n        </Checkbox>\n        <HelpTooltip\n          className=\"spacer-left\"\n          overlay={translate('provisioning.only_provisioned.tooltip')}\n        />\n      </td>\n    ) : null;\n\n  renderDateFilter = () => {\n    return (\n      <td className=\"thin nowrap text-middle\">\n        <DateInput\n          inputClassName=\"input-medium\"\n          name=\"analyzed-before\"\n          onChange={this.props.onDateChanged}\n          placeholder={translate('last_analysis_before')}\n          value={this.props.analyzedBefore}\n        />\n      </td>\n    );\n  };\n\n  render() {\n    return (\n      <div className=\"big-spacer-bottom\">\n        <table className=\"data\">\n          <tbody>\n            <tr>\n              <td className=\"thin text-middle\">\n                {this.props.ready ? this.renderCheckbox() : <i className=\"spinner\" />}\n              </td>\n              {this.renderQualifierFilter()}\n              {this.renderDateFilter()}\n              {this.renderVisibilityFilter()}\n              {this.renderTypeFilter()}\n              <td className=\"text-middle\">\n                <SearchBox\n                  minLength={3}\n                  onChange={this.props.onSearch}\n                  placeholder={translate('search.search_by_name_or_key')}\n                  value={this.props.query}\n                />\n              </td>\n              <td className=\"thin nowrap text-middle\">\n                <Button\n                  className=\"js-bulk-apply-permission-template\"\n                  disabled={this.props.selection.length === 0}\n                  onClick={this.handleBulkApplyTemplateClick}>\n                  {translate('permission_templates.bulk_apply_permission_template')}\n                </Button>\n                {this.props.qualifiers === 'TRK' && (\n                  <Button\n                    className=\"js-delete spacer-left button-red\"\n                    disabled={this.props.selection.length === 0}\n                    onClick={this.handleDeleteClick}\n                    title={\n                      this.props.selection.length === 0\n                        ? translate('permission_templates.select_to_delete')\n                        : translate('permission_templates.delete_selected')\n                    }>\n                    {translate('delete')}\n                  </Button>\n                )}\n              </td>\n            </tr>\n          </tbody>\n        </table>\n\n        {this.state.bulkApplyTemplateModal && (\n          <BulkApplyTemplateModal\n            analyzedBefore={this.props.analyzedBefore}\n            onClose={this.closeBulkApplyTemplateModal}\n            provisioned={this.props.provisioned}\n            qualifier={this.props.qualifiers}\n            query={this.props.query}\n            selection={this.props.selection}\n            total={this.props.total}\n          />\n        )}\n\n        {this.state.deleteModal && (\n          <DeleteModal\n            analyzedBefore={this.props.analyzedBefore}\n            onClose={this.closeDeleteModal}\n            onConfirm={this.handleDeleteConfirm}\n            provisioned={this.props.provisioned}\n            qualifier={this.props.qualifiers}\n            query={this.props.query}\n            selection={this.props.selection}\n            total={this.props.total}\n          />\n        )}\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { debounce, uniq, without } from 'lodash';\nimport * as React from 'react';\nimport { Helmet } from 'react-helmet-async';\nimport { connect } from 'react-redux';\nimport ListFooter from 'sonar-ui-common/components/controls/ListFooter';\nimport { toShortNotSoISOString } from 'sonar-ui-common/helpers/dates';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { getComponents, Project } from '../../api/components';\nimport { changeProjectDefaultVisibility } from '../../api/permissions';\nimport { getValues } from '../../api/settings';\nimport Suggestions from '../../app/components/embed-docs-modal/Suggestions';\nimport { hasGlobalPermission } from '../../helpers/users';\nimport { getAppState, getCurrentUser, Store } from '../../store/rootReducer';\nimport { SettingsKey } from '../../types/settings';\nimport CreateProjectForm from './CreateProjectForm';\nimport Header from './Header';\nimport Projects from './Projects';\nimport Search from './Search';\n\nexport interface Props {\n  currentUser: T.LoggedInUser;\n  appState: Pick<T.AppState, 'qualifiers'>;\n}\n\ninterface State {\n  analyzedBefore?: Date;\n  createProjectForm: boolean;\n  defaultProjectVisibility?: T.Visibility;\n  page: number;\n  projects: Project[];\n  provisioned: boolean;\n  qualifiers: string;\n  query: string;\n  ready: boolean;\n  selection: string[];\n  total: number;\n  visibility?: T.Visibility;\n}\n\nconst PAGE_SIZE = 50;\n\nexport class App extends React.PureComponent<Props, State> {\n  mounted = false;\n\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      createProjectForm: false,\n      ready: false,\n      projects: [],\n      provisioned: false,\n      total: 0,\n      page: 1,\n      query: '',\n      qualifiers: 'TRK',\n      selection: []\n    };\n    this.requestProjects = debounce(this.requestProjects, 250);\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n    this.requestProjects();\n    this.fetchDefaultProjectVisibility();\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  fetchDefaultProjectVisibility = async () => {\n    const results = await getValues({ keys: SettingsKey.DefaultProjectVisibility });\n\n    if (this.mounted && results.length > 0 && results[0].value) {\n      this.setState({ defaultProjectVisibility: results[0].value as T.Visibility });\n    }\n  };\n\n  handleDefaultProjectVisibilityChange = async (visibility: T.Visibility) => {\n    await changeProjectDefaultVisibility(visibility);\n\n    if (this.mounted) {\n      this.setState({ defaultProjectVisibility: visibility });\n    }\n  };\n\n  requestProjects = () => {\n    const { analyzedBefore } = this.state;\n    const parameters = {\n      analyzedBefore: analyzedBefore && toShortNotSoISOString(analyzedBefore),\n      onProvisionedOnly: this.state.provisioned || undefined,\n      p: this.state.page !== 1 ? this.state.page : undefined,\n      ps: PAGE_SIZE,\n      q: this.state.query || undefined,\n      qualifiers: this.state.qualifiers,\n      visibility: this.state.visibility\n    };\n    return getComponents(parameters).then(r => {\n      if (this.mounted) {\n        let projects: Project[] = r.components;\n        if (this.state.page > 1) {\n          projects = [...this.state.projects, ...projects];\n        }\n        this.setState({ ready: true, projects, selection: [], total: r.paging.total });\n      }\n    });\n  };\n\n  loadMore = () => {\n    this.setState(({ page }) => ({ ready: false, page: page + 1 }), this.requestProjects);\n  };\n\n  onSearch = (query: string) => {\n    this.setState({ ready: false, page: 1, query, selection: [] }, this.requestProjects);\n  };\n\n  onProvisionedChanged = (provisioned: boolean) => {\n    this.setState(\n      { ready: false, page: 1, query: '', provisioned, qualifiers: 'TRK', selection: [] },\n      this.requestProjects\n    );\n  };\n\n  onQualifierChanged = (newQualifier: string) => {\n    this.setState(\n      {\n        ready: false,\n        page: 1,\n        provisioned: false,\n        query: '',\n        qualifiers: newQualifier,\n        selection: []\n      },\n      this.requestProjects\n    );\n  };\n\n  onVisibilityChanged = (newVisibility: T.Visibility | 'all') => {\n    this.setState(\n      {\n        ready: false,\n        page: 1,\n        provisioned: false,\n        query: '',\n        visibility: newVisibility === 'all' ? undefined : newVisibility,\n        selection: []\n      },\n      this.requestProjects\n    );\n  };\n\n  handleDateChanged = (analyzedBefore: Date | undefined) =>\n    this.setState({ ready: false, page: 1, analyzedBefore }, this.requestProjects);\n\n  onProjectSelected = (project: string) => {\n    this.setState(({ selection }) => ({ selection: uniq([...selection, project]) }));\n  };\n\n  onProjectDeselected = (project: string) => {\n    this.setState(({ selection }) => ({ selection: without(selection, project) }));\n  };\n\n  onAllSelected = () => {\n    this.setState(({ projects }) => ({ selection: projects.map(project => project.key) }));\n  };\n\n  onAllDeselected = () => {\n    this.setState({ selection: [] });\n  };\n\n  openCreateProjectForm = () => {\n    this.setState({ createProjectForm: true });\n  };\n\n  closeCreateProjectForm = () => {\n    this.setState({ createProjectForm: false });\n  };\n\n  render() {\n    const { appState, currentUser } = this.props;\n    const { defaultProjectVisibility } = this.state;\n    return (\n      <div className=\"page page-limited\" id=\"projects-management-page\">\n        <Suggestions suggestions=\"projects_management\" />\n        <Helmet defer={false} title={translate('projects_management')} />\n\n        <Header\n          defaultProjectVisibility={defaultProjectVisibility}\n          hasProvisionPermission={hasGlobalPermission(currentUser, 'provisioning')}\n          onChangeDefaultProjectVisibility={this.handleDefaultProjectVisibilityChange}\n          onProjectCreate={this.openCreateProjectForm}\n        />\n\n        <Search\n          analyzedBefore={this.state.analyzedBefore}\n          onAllDeselected={this.onAllDeselected}\n          onAllSelected={this.onAllSelected}\n          onDateChanged={this.handleDateChanged}\n          onDeleteProjects={this.requestProjects}\n          onProvisionedChanged={this.onProvisionedChanged}\n          onQualifierChanged={this.onQualifierChanged}\n          onSearch={this.onSearch}\n          onVisibilityChanged={this.onVisibilityChanged}\n          projects={this.state.projects}\n          provisioned={this.state.provisioned}\n          qualifiers={this.state.qualifiers}\n          query={this.state.query}\n          ready={this.state.ready}\n          selection={this.state.selection}\n          topLevelQualifiers={appState.qualifiers}\n          total={this.state.total}\n          visibility={this.state.visibility}\n        />\n\n        <Projects\n          currentUser={this.props.currentUser}\n          onProjectDeselected={this.onProjectDeselected}\n          onProjectSelected={this.onProjectSelected}\n          projects={this.state.projects}\n          ready={this.state.ready}\n          selection={this.state.selection}\n        />\n\n        <ListFooter\n          count={this.state.projects.length}\n          loadMore={this.loadMore}\n          ready={this.state.ready}\n          total={this.state.total}\n        />\n\n        {this.state.createProjectForm && (\n          <CreateProjectForm\n            defaultProjectVisibility={defaultProjectVisibility}\n            onClose={this.closeCreateProjectForm}\n            onProjectCreated={this.requestProjects}\n          />\n        )}\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (state: Store) => ({\n  appState: getAppState(state),\n  currentUser: getCurrentUser(state) as T.LoggedInUser\n});\n\nexport default connect(mapStateToProps)(App);\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { SuggestionsContext } from './SuggestionsContext';\n\ninterface Props {\n  suggestions: string;\n}\n\nexport default function Suggestions({ suggestions }: Props) {\n  return (\n    <SuggestionsContext.Consumer>\n      {({ addSuggestions, removeSuggestions }) => (\n        <SuggestionsInner\n          addSuggestions={addSuggestions}\n          removeSuggestions={removeSuggestions}\n          suggestions={suggestions}\n        />\n      )}\n    </SuggestionsContext.Consumer>\n  );\n}\n\ninterface SuggestionsInnerProps {\n  addSuggestions: (key: string) => void;\n  removeSuggestions: (key: string) => void;\n  suggestions: string;\n}\n\nclass SuggestionsInner extends React.PureComponent<SuggestionsInnerProps> {\n  componentDidMount() {\n    this.props.addSuggestions(this.props.suggestions);\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (prevProps.suggestions !== this.props.suggestions) {\n      this.props.removeSuggestions(this.props.suggestions);\n      this.props.addSuggestions(prevProps.suggestions);\n    }\n  }\n\n  componentWillUnmount() {\n    this.props.removeSuggestions(this.props.suggestions);\n  }\n\n  render() {\n    return null;\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { getJSON, post, postJSON, RequestData } from 'sonar-ui-common/helpers/request';\nimport throwGlobalError from '../app/utils/throwGlobalError';\nimport { BaseSearchProjectsParameters } from './components';\n\nconst PAGE_SIZE = 100;\n\nexport function grantPermissionToUser(data: {\n  projectKey?: string;\n  login: string;\n  permission: string;\n}) {\n  return post('/api/permissions/add_user', data).catch(throwGlobalError);\n}\n\nexport function revokePermissionFromUser(data: {\n  projectKey?: string;\n  login: string;\n  permission: string;\n}) {\n  return post('/api/permissions/remove_user', data).catch(throwGlobalError);\n}\n\nexport function grantPermissionToGroup(data: {\n  projectKey?: string;\n  groupName: string;\n  permission: string;\n}) {\n  return post('/api/permissions/add_group', data).catch(throwGlobalError);\n}\n\nexport function revokePermissionFromGroup(data: {\n  projectKey?: string;\n  groupName: string;\n  permission: string;\n}) {\n  return post('/api/permissions/remove_group', data).catch(throwGlobalError);\n}\n\ninterface GetPermissionTemplatesResponse {\n  permissionTemplates: T.PermissionTemplate[];\n  defaultTemplates: Array<{ templateId: string; qualifier: string }>;\n  permissions: Array<{ key: string; name: string; description: string }>;\n}\n\nexport function getPermissionTemplates(): Promise<GetPermissionTemplatesResponse> {\n  const url = '/api/permissions/search_templates';\n  return getJSON(url);\n}\n\nexport function createPermissionTemplate(data: RequestData) {\n  return postJSON('/api/permissions/create_template', data);\n}\n\nexport function updatePermissionTemplate(data: RequestData): Promise<void> {\n  return post('/api/permissions/update_template', data);\n}\n\nexport function deletePermissionTemplate(data: RequestData) {\n  return post('/api/permissions/delete_template', data).catch(throwGlobalError);\n}\n\n/**\n * Set default permission template for a given qualifier\n */\nexport function setDefaultPermissionTemplate(templateId: string, qualifier: string): Promise<void> {\n  return post('/api/permissions/set_default_template', { templateId, qualifier });\n}\n\nexport function applyTemplateToProject(data: RequestData) {\n  return post('/api/permissions/apply_template', data).catch(throwGlobalError);\n}\n\nexport function bulkApplyTemplate(data: BaseSearchProjectsParameters): Promise<void> {\n  return post('/api/permissions/bulk_apply_template', data);\n}\n\nexport function grantTemplatePermissionToUser(data: {\n  templateId: string;\n  login: string;\n  permission: string;\n}): Promise<void> {\n  return post('/api/permissions/add_user_to_template', data);\n}\n\nexport function revokeTemplatePermissionFromUser(data: {\n  templateId: string;\n  login: string;\n  permission: string;\n}): Promise<void> {\n  return post('/api/permissions/remove_user_from_template', data);\n}\n\nexport function grantTemplatePermissionToGroup(data: RequestData): Promise<void> {\n  return post('/api/permissions/add_group_to_template', data);\n}\n\nexport function revokeTemplatePermissionFromGroup(data: RequestData): Promise<void> {\n  return post('/api/permissions/remove_group_from_template', data);\n}\n\nexport function addProjectCreatorToTemplate(templateId: string, permission: string): Promise<void> {\n  return post('/api/permissions/add_project_creator_to_template', { templateId, permission });\n}\n\nexport function removeProjectCreatorFromTemplate(\n  templateId: string,\n  permission: string\n): Promise<void> {\n  return post('/api/permissions/remove_project_creator_from_template', { templateId, permission });\n}\n\nexport function getPermissionsUsersForComponent(data: {\n  projectKey: string;\n  q?: string;\n  permission?: string;\n  p?: number;\n  ps?: number;\n}): Promise<{ paging: T.Paging; users: T.PermissionUser[] }> {\n  if (!data.ps) {\n    data.ps = PAGE_SIZE;\n  }\n  return getJSON('/api/permissions/users', data).catch(throwGlobalError);\n}\n\nexport function getPermissionsGroupsForComponent(data: {\n  projectKey: string;\n  q?: string;\n  permission?: string;\n  p?: number;\n  ps?: number;\n}): Promise<{ paging: T.Paging; groups: T.PermissionGroup[] }> {\n  if (!data.ps) {\n    data.ps = PAGE_SIZE;\n  }\n  return getJSON('/api/permissions/groups', data).catch(throwGlobalError);\n}\n\nexport function getGlobalPermissionsUsers(data: {\n  q?: string;\n  permission?: string;\n  p?: number;\n  ps?: number;\n}): Promise<{ paging: T.Paging; users: T.PermissionUser[] }> {\n  if (!data.ps) {\n    data.ps = PAGE_SIZE;\n  }\n  return getJSON('/api/permissions/users', data);\n}\n\nexport function getGlobalPermissionsGroups(data: {\n  q?: string;\n  permission?: string;\n  p?: number;\n  ps?: number;\n}): Promise<{ paging: T.Paging; groups: T.PermissionGroup[] }> {\n  if (!data.ps) {\n    data.ps = PAGE_SIZE;\n  }\n  return getJSON('/api/permissions/groups', data);\n}\n\nexport function getPermissionTemplateUsers(\n  templateId: string,\n  query?: string,\n  permission?: string\n): Promise<any> {\n  const data: RequestData = { templateId, ps: PAGE_SIZE };\n  if (query) {\n    data.q = query;\n  }\n  if (permission) {\n    data.permission = permission;\n  }\n  return getJSON('/api/permissions/template_users', data).then(r => r.users);\n}\n\nexport function getPermissionTemplateGroups(\n  templateId: string,\n  query?: string,\n  permission?: string\n): Promise<any> {\n  const data: RequestData = { templateId, ps: PAGE_SIZE };\n  if (query) {\n    data.q = query;\n  }\n  if (permission) {\n    data.permission = permission;\n  }\n  return getJSON('/api/permissions/template_groups', data).then(r => r.groups);\n}\n\nexport function changeProjectVisibility(\n  project: string,\n  visibility: T.Visibility\n): Promise<void | Response> {\n  return post('/api/projects/update_visibility', { project, visibility }).catch(throwGlobalError);\n}\n\nexport function changeProjectDefaultVisibility(\n  projectVisibility: T.Visibility\n): Promise<void | Response> {\n  return post('/api/projects/update_default_visibility', { projectVisibility }).catch(\n    throwGlobalError\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { omitBy } from 'lodash';\nimport { getJSON, post, postJSON, RequestData } from 'sonar-ui-common/helpers/request';\nimport throwGlobalError from '../app/utils/throwGlobalError';\nimport { isCategoryDefinition } from '../apps/settings/utils';\nimport { BranchParameters } from '../types/branch-like';\n\nexport function getDefinitions(component?: string): Promise<T.SettingCategoryDefinition[]> {\n  return getJSON('/api/settings/list_definitions', { component }).then(\n    r => r.definitions,\n    throwGlobalError\n  );\n}\n\nexport function getValues(\n  data: { keys: string; component?: string } & BranchParameters\n): Promise<T.SettingValue[]> {\n  return getJSON('/api/settings/values', data).then(r => r.settings);\n}\n\nexport function setSettingValue(\n  definition: T.SettingDefinition,\n  value: any,\n  component?: string\n): Promise<void> {\n  const { key } = definition;\n  const data: RequestData = { key, component };\n\n  if (isCategoryDefinition(definition) && definition.multiValues) {\n    data.values = value;\n  } else if (definition.type === 'PROPERTY_SET') {\n    data.fieldValues = value\n      .map((fields: any) => omitBy(fields, value => value == null))\n      .map(JSON.stringify);\n  } else {\n    data.value = value;\n  }\n\n  return post('/api/settings/set', data);\n}\n\nexport function setSimpleSettingValue(\n  data: { component?: string; value: string; key: string } & BranchParameters\n): Promise<void | Response> {\n  return post('/api/settings/set', data).catch(throwGlobalError);\n}\n\nexport function resetSettingValue(\n  data: { keys: string; component?: string } & BranchParameters\n): Promise<void> {\n  return post('/api/settings/reset', data);\n}\n\nexport function sendTestEmail(to: string, subject: string, message: string): Promise<void> {\n  return post('/api/emails/send', { to, subject, message });\n}\n\nexport function checkSecretKey(): Promise<{ secretKeyAvailable: boolean }> {\n  return getJSON('/api/settings/check_secret_key').catch(throwGlobalError);\n}\n\nexport function generateSecretKey(): Promise<{ secretKey: string }> {\n  return postJSON('/api/settings/generate_secret_key').catch(throwGlobalError);\n}\n\nexport function encryptValue(value: string): Promise<{ encryptedValue: string }> {\n  return postJSON('/api/settings/encrypt', { value }).catch(throwGlobalError);\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as addMonths from 'date-fns/add_months';\nimport * as setMonth from 'date-fns/set_month';\nimport * as setYear from 'date-fns/set_year';\nimport * as subMonths from 'date-fns/sub_months';\nimport { range } from 'lodash';\nimport * as React from 'react';\nimport { DayModifiers, Modifier, Modifiers } from 'react-day-picker';\nimport { InjectedIntlProps, injectIntl } from 'react-intl';\nimport { ButtonIcon, ClearButton } from 'sonar-ui-common/components/controls/buttons';\nimport OutsideClickHandler from 'sonar-ui-common/components/controls/OutsideClickHandler';\nimport Select from 'sonar-ui-common/components/controls/Select';\nimport CalendarIcon from 'sonar-ui-common/components/icons/CalendarIcon';\nimport ChevronLeftIcon from 'sonar-ui-common/components/icons/ChevronLeftIcon';\nimport ChevronRightIcon from 'sonar-ui-common/components/icons/ChevronRightIcon';\nimport { lazyLoadComponent } from 'sonar-ui-common/components/lazyLoadComponent';\nimport {\n  getShortMonthName,\n  getShortWeekDayName,\n  getWeekDayName\n} from 'sonar-ui-common/helpers/l10n';\nimport './DayPicker.css';\nimport './styles.css';\n\nconst DayPicker = lazyLoadComponent(() => import('react-day-picker'), 'DayPicker');\n\ninterface Props {\n  className?: string;\n  currentMonth?: Date;\n  highlightFrom?: Date;\n  highlightTo?: Date;\n  inputClassName?: string;\n  maxDate?: Date;\n  minDate?: Date;\n  name?: string;\n  onChange: (date: Date | undefined) => void;\n  placeholder: string;\n  value?: Date;\n}\n\ninterface State {\n  currentMonth: Date;\n  open: boolean;\n  lastHovered?: Date;\n}\n\ntype Week = [string, string, string, string, string, string, string];\n\nexport default class DateInput extends React.PureComponent<Props, State> {\n  input?: HTMLInputElement | null;\n\n  constructor(props: Props) {\n    super(props);\n    this.state = { currentMonth: props.value || props.currentMonth || new Date(), open: false };\n  }\n\n  focus = () => {\n    if (this.input) {\n      this.input.focus();\n    }\n    this.openCalendar();\n  };\n\n  handleResetClick = () => {\n    this.closeCalendar();\n    this.props.onChange(undefined);\n  };\n\n  openCalendar = () => {\n    this.setState({\n      currentMonth: this.props.value || this.props.currentMonth || new Date(),\n      lastHovered: undefined,\n      open: true\n    });\n  };\n\n  closeCalendar = () => {\n    this.setState({ open: false });\n  };\n\n  handleDayClick = (day: Date, modifiers: DayModifiers) => {\n    if (!modifiers.disabled) {\n      this.closeCalendar();\n      this.props.onChange(day);\n    }\n  };\n\n  handleDayMouseEnter = (day: Date, modifiers: DayModifiers) => {\n    this.setState({ lastHovered: modifiers.disabled ? undefined : day });\n  };\n\n  handleCurrentMonthChange = ({ value }: { value: number }) => {\n    this.setState((state: State) => ({ currentMonth: setMonth(state.currentMonth, value) }));\n  };\n\n  handleCurrentYearChange = ({ value }: { value: number }) => {\n    this.setState(state => ({ currentMonth: setYear(state.currentMonth, value) }));\n  };\n\n  handlePreviousMonthClick = () => {\n    this.setState(state => ({ currentMonth: subMonths(state.currentMonth, 1) }));\n  };\n\n  handleNextMonthClick = () => {\n    this.setState(state => ({ currentMonth: addMonths(state.currentMonth, 1) }));\n  };\n\n  render() {\n    const { highlightFrom, highlightTo, minDate, value } = this.props;\n    const { lastHovered } = this.state;\n\n    const after = this.props.maxDate || new Date();\n\n    const months = range(12);\n    const years = range(new Date().getFullYear() - 10, new Date().getFullYear() + 1);\n\n    const selectedDays: Modifier[] = value ? [value] : [];\n    let modifiers: Partial<Modifiers> | undefined;\n    const lastHoveredOrValue = lastHovered || value;\n\n    if (highlightFrom && lastHoveredOrValue) {\n      modifiers = { highlighted: { from: highlightFrom, to: lastHoveredOrValue } };\n      selectedDays.push(highlightFrom);\n    }\n    if (highlightTo && lastHoveredOrValue) {\n      modifiers = { highlighted: { from: lastHoveredOrValue, to: highlightTo } };\n      selectedDays.push(highlightTo);\n    }\n\n    const weekdaysLong = range(7).map(getWeekDayName) as Week;\n    const weekdaysShort = range(7).map(getShortWeekDayName) as Week;\n\n    return (\n      <OutsideClickHandler onClickOutside={this.closeCalendar}>\n        <span className={classNames('date-input-control', this.props.className)}>\n          <InputWrapper\n            className={classNames('date-input-control-input', this.props.inputClassName, {\n              'is-filled': this.props.value !== undefined\n            })}\n            innerRef={node => (this.input = node)}\n            name={this.props.name}\n            onFocus={this.openCalendar}\n            placeholder={this.props.placeholder}\n            readOnly={true}\n            type=\"text\"\n            value={value}\n          />\n          <CalendarIcon className=\"date-input-control-icon\" fill=\"\" />\n          {this.props.value !== undefined && (\n            <ClearButton\n              className=\"button-tiny date-input-control-reset\"\n              iconProps={{ size: 12 }}\n              onClick={this.handleResetClick}\n            />\n          )}\n          {this.state.open && (\n            <div className=\"date-input-calendar\">\n              <nav className=\"date-input-calendar-nav\">\n                <ButtonIcon className=\"button-small\" onClick={this.handlePreviousMonthClick}>\n                  <ChevronLeftIcon />\n                </ButtonIcon>\n                <div className=\"date-input-calender-month\">\n                  <Select\n                    className=\"date-input-calender-month-select\"\n                    onChange={this.handleCurrentMonthChange}\n                    options={months.map(month => ({\n                      label: getShortMonthName(month),\n                      value: month\n                    }))}\n                    value={this.state.currentMonth.getMonth()}\n                  />\n                  <Select\n                    className=\"date-input-calender-month-select spacer-left\"\n                    onChange={this.handleCurrentYearChange}\n                    options={years.map(year => ({ label: String(year), value: year }))}\n                    value={this.state.currentMonth.getFullYear()}\n                  />\n                </div>\n                <ButtonIcon className=\"button-small\" onClick={this.handleNextMonthClick}>\n                  <ChevronRightIcon />\n                </ButtonIcon>\n              </nav>\n              <DayPicker\n                captionElement={<NullComponent />}\n                disabledDays={{ after, before: minDate }}\n                firstDayOfWeek={1}\n                modifiers={modifiers}\n                month={this.state.currentMonth}\n                navbarElement={<NullComponent />}\n                onDayClick={this.handleDayClick}\n                onDayMouseEnter={this.handleDayMouseEnter}\n                selectedDays={selectedDays}\n                weekdaysLong={weekdaysLong}\n                weekdaysShort={weekdaysShort}\n              />\n            </div>\n          )}\n        </span>\n      </OutsideClickHandler>\n    );\n  }\n}\n\nfunction NullComponent() {\n  return null;\n}\n\ntype InputWrapperProps = T.Omit<React.InputHTMLAttributes<HTMLInputElement>, 'value'> &\n  InjectedIntlProps & {\n    innerRef: React.Ref<HTMLInputElement>;\n    value: Date | undefined;\n  };\n\nconst InputWrapper = injectIntl(({ innerRef, intl, value, ...other }: InputWrapperProps) => {\n  const formattedValue =\n    value && intl.formatDate(value, { year: 'numeric', month: 'short', day: 'numeric' });\n  return <input {...other} ref={innerRef} value={formattedValue || ''} />;\n});\n","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./DayPicker.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".DayPicker{display:inline-block}.DayPicker-wrapper{position:relative;-webkit-user-select:none;-ms-user-select:none;user-select:none;padding-bottom:8px;flex-direction:row}.DayPicker-Months{display:flex;flex-wrap:wrap;justify-content:center}.DayPicker-Month{display:table;border-collapse:collapse;border-spacing:0;-webkit-user-select:none;-ms-user-select:none;user-select:none;margin:8px 8px 0}.DayPicker-Weekdays{display:table-header-group}.DayPicker-WeekdaysRow{display:table-row}.DayPicker-Weekday{display:table-cell;padding:8px;font-size:12px;text-align:center;color:#999}.DayPicker-Weekday abbr[title]{border-bottom:none;text-decoration:none}.DayPicker-Body{display:table-row-group}.DayPicker-Week{display:table-row}.DayPicker-Day{display:table-cell;line-height:15px;padding:8px;text-align:center;cursor:pointer;vertical-align:top;outline:none}.DayPicker--interactionDisabled .DayPicker-Day{cursor:default}.DayPicker-Footer{padding-top:8px}.DayPicker-Day--today{font-weight:700}.DayPicker-Day--outside{cursor:default;color:#8b9898}.DayPicker-Day--disabled{color:#cdcdcd;cursor:not-allowed}.DayPicker-Day--sunday{background-color:#f7f8f8}.DayPicker-Day--sunday:not(.DayPicker-Day--today){color:#dce0e0}.DayPicker-Day--selected:not(.DayPicker-Day--disabled):not(.DayPicker-Day--outside){background-color:#4b9fd5;color:#fff}.DayPicker:not(.DayPicker--interactionDisabled) .DayPicker-Day:not(.DayPicker-Day--disabled):not(.DayPicker-Day--selected):not(.DayPicker-Day--highlighted):not(.DayPicker-Day--outside):hover{background-color:#f3f3f3}.DayPicker-Day--highlighted:not(.DayPicker-Day--disabled):not(.DayPicker-Day--selected):not(.DayPicker-Day--outside){background-color:#cae3f2}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./styles.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".date-input-control{position:relative;display:inline-block;cursor:pointer}.date-input-control-input{width:130px;padding-left:24px!important;cursor:pointer}.date-input-control-input.is-filled{padding-right:16px!important}.date-input-control-icon{position:absolute;top:4px;left:4px}.date-input-control-icon path{fill:#cdcdcd;transition:fill .3s ease}.date-input-control-input:focus+.date-input-control-icon path{fill:#4b9fd5}.date-input-control-reset{position:absolute;top:4px;right:4px;border:none}.date-input-calendar{position:absolute;z-index:7500;top:100%;left:0;border:1px solid #e6e6e6;background-color:#fff;box-shadow:0 6px 12px rgba(0,0,0,.175)}.date-input-calendar-nav{display:flex;justify-content:space-between;align-items:center;padding-top:8px;padding-left:8px;padding-right:8px}.date-input-calender-month-select{width:70px}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { getJSON } from 'sonar-ui-common/helpers/request';\nimport throwGlobalError from '../app/utils/throwGlobalError';\nimport { BranchParameters } from '../types/branch-like';\n\ntype NavComponent = T.Omit<T.Component, 'alm' | 'qualifier' | 'leakPeriodDate' | 'path' | 'tags'>;\n\nexport function getComponentNavigation(\n  data: { component: string } & BranchParameters\n): Promise<NavComponent> {\n  return getJSON('/api/navigation/component', data).catch(throwGlobalError);\n}\n\nexport function getMarketplaceNavigation(): Promise<{ serverId: string; ncloc: number }> {\n  return getJSON('/api/navigation/marketplace').catch(throwGlobalError);\n}\n\nexport function getSettingsNavigation(): Promise<any> {\n  return getJSON('/api/navigation/settings').catch(throwGlobalError);\n}\n"],"sourceRoot":""}