{"version":3,"sources":["webpack:///./src/main/js/types/issues.ts","webpack:///./src/main/js/api/metrics.ts","webpack:///./src/main/js/helpers/editions.ts","webpack:///./src/main/js/types/editions.ts","webpack:///./src/main/js/app/components/indexation/PageUnavailableDueToIndexation.tsx","webpack:///./src/main/js/app/components/GlobalMessagesContainer.tsx","webpack:///./src/main/js/app/components/RecentHistory.ts","webpack:///./src/main/js/apps/coding-rules/query.ts","webpack:///./src/main/js/apps/settings/store/settingsPage.ts","webpack:///./src/main/js/apps/settings/store/values.ts","webpack:///./src/main/js/store/languages.ts","webpack:///./src/main/js/components/SourceViewer/helpers/getCoverageStatus.ts","webpack:///./src/main/js/apps/projects/query.ts","webpack:///./src/main/js/app/components/indexation/IndexationContext.ts","webpack:///./src/main/js/apps/settings/store/definitions.ts","webpack:///./src/main/js/store/branches.ts","webpack:///./src/main/js/store/metrics.ts","webpack:///./src/main/js/helpers/qualityGates.ts","webpack:///./src/main/js/components/hoc/withIndexationGuard.tsx","webpack:///./src/main/js/components/hoc/withIndexationContext.tsx","webpack:///./src/main/js/app/components/search/utils.ts","webpack:///./src/main/js/api/marketplace.ts","webpack:///./src/main/js/components/workspace/Workspace.tsx","webpack:///./src/main/js/components/workspace/WorkspacePortal.tsx","webpack:///./src/main/js/app/components/a11y/A11yProvider.tsx","webpack:///./src/main/js/app/components/a11y/A11ySkipLinks.tsx","webpack:///./src/main/js/types/indexation.ts","webpack:///./src/main/js/app/components/embed-docs-modal/SuggestionsProvider.tsx","webpack:///./src/main/js/app/components/indexation/IndexationNotificationHelper.ts","webpack:///./src/main/js/app/components/indexation/IndexationContextProvider.tsx","webpack:///./src/main/js/app/components/indexation/IndexationNotificationRenderer.tsx","webpack:///./src/main/js/app/components/indexation/IndexationNotification.tsx","webpack:///./src/main/js/app/components/embed-docs-modal/EmbedDocsPopupHelper.tsx","webpack:///./src/main/js/app/components/search/Search.tsx","webpack:///./src/main/js/app/components/nav/global/GlobalNavBranding.tsx","webpack:///./src/main/js/app/components/nav/global/GlobalNavMenu.tsx","webpack:///./src/main/js/app/components/nav/global/GlobalNavUser.tsx","webpack:///./src/main/js/app/components/nav/global/GlobalNav.tsx","webpack:///./src/main/js/app/components/StartupModal.tsx","webpack:///./src/main/js/app/components/GlobalContainer.tsx","webpack:///./src/main/js/components/workspace/styles.css?fbff","webpack:///./src/main/js/components/workspace/styles.css","webpack:///./src/main/js/app/components/a11y/A11ySkipLinks.css?0925","webpack:///./src/main/js/app/components/a11y/A11ySkipLinks.css","webpack:///./src/main/js/app/components/indexation/IndexationNotification.css?9ebc","webpack:///./src/main/js/app/components/indexation/IndexationNotification.css","webpack:///./src/main/js/app/components/search/Search.css?68ff","webpack:///./src/main/js/app/components/search/Search.css","webpack:///./src/main/js/app/components/nav/global/GlobalNav.css?9f79","webpack:///./src/main/js/app/components/nav/global/GlobalNav.css","webpack:///./src/main/js/apps/about/routes.ts","webpack:///./src/main/js/apps/account/routes.ts","webpack:///./src/main/js/apps/application-console/routes.ts","webpack:///./src/main/js/apps/background-tasks/routes.ts","webpack:///./src/main/js/apps/code/routes.ts","webpack:///./src/main/js/apps/coding-rules/routes.ts","webpack:///./src/main/js/apps/component-measures/routes.ts","webpack:///./src/main/js/apps/custom-measures/routes.ts","webpack:///./src/main/js/apps/custom-metrics/routes.ts","webpack:///./src/main/js/apps/documentation/routes.ts","webpack:///./src/main/js/apps/groups/routes.ts","webpack:///./src/main/js/apps/issues/components/AppContainer.tsx","webpack:///./src/main/js/apps/maintenance/routes.tsx","webpack:///./src/main/js/apps/marketplace/routes.ts","webpack:///./src/main/js/apps/overview/routes.ts","webpack:///./src/main/js/apps/permission-templates/routes.ts","webpack:///./src/main/js/apps/permissions/routes.ts","webpack:///./src/main/js/apps/portfolio/routes.ts","webpack:///./src/main/js/apps/projectActivity/routes.ts","webpack:///./src/main/js/apps/projectBaseline/routes.ts","webpack:///./src/main/js/apps/projectBranches/routes.ts","webpack:///./src/main/js/apps/projectQualityGate/routes.ts","webpack:///./src/main/js/apps/projectQualityProfiles/routes.ts","webpack:///./src/main/js/apps/projects/components/AllProjectsContainer.tsx","webpack:///./src/main/js/apps/projects/components/DefaultPageSelector.tsx","webpack:///./src/main/js/apps/projects/components/DefaultPageSelectorContainer.tsx","webpack:///./src/main/js/apps/projects/routes.ts","webpack:///./src/main/js/apps/projects/components/FavoriteProjectsContainer.tsx","webpack:///./src/main/js/apps/projectsManagement/routes.ts","webpack:///./src/main/js/apps/quality-gates/routes.ts","webpack:///./src/main/js/apps/quality-profiles/routes.ts","webpack:///./src/main/js/apps/sessions/routes.ts","webpack:///./src/main/js/apps/settings/routes.ts","webpack:///./src/main/js/apps/system/routes.ts","webpack:///./src/main/js/apps/tutorials/routes.ts","webpack:///./src/main/js/apps/users/routes.ts","webpack:///./src/main/js/apps/web-api/routes.ts","webpack:///./src/main/js/apps/webhooks/routes.ts","webpack:///./src/main/js/app/components/KeyboardShortcutsModal.tsx","webpack:///./src/main/js/app/components/App.tsx","webpack:///./src/main/js/app/components/MigrationContainer.tsx","webpack:///./src/main/js/app/utils/startReactApp.tsx","webpack:///./src/main/js/helpers/urls.ts","webpack:///./src/main/js/app/utils/throwGlobalError.ts","webpack:///./src/main/js/apps/settings/store/rootReducer.ts","webpack:///./src/main/js/store/rootReducer.ts","webpack:///./src/main/js/helpers/branch-like.ts","webpack:///./src/main/js/types/component.ts","webpack:///./src/main/js/app/theme.js","webpack:///./src/main/js/helpers/users.ts","webpack:///./src/main/js/helpers/measures.ts","webpack:///./src/main/js/api/issues.ts","webpack:///./src/main/js/components/hoc/withRouter.tsx","webpack:///./src/main/js/api/components.ts","webpack:///./src/main/js/app/components/embed-docs-modal/SuggestionsContext.ts","webpack:///./src/main/js/helpers/constants.ts","webpack:///./src/main/js/types/alm-settings.ts","webpack:///./src/main/js/components/ui/Avatar.tsx","webpack:///./src/main/js/types/metrics.ts","webpack:///./src/main/js/app/utils/getStore.ts","webpack:///./src/main/js/store/utils/configureStore.ts","webpack:///./src/main/js/store/globalMessages.ts","webpack:///./src/main/js/app/components/a11y/A11yContext.tsx","webpack:///./src/main/js/components/hoc/withCurrentUser.tsx","webpack:///./src/main/js/components/hoc/withAppState.tsx","webpack:///./src/main/js/apps/settings/utils.ts","webpack:///./src/main/js/api/users.ts","webpack:///./src/main/js/apps/issues/utils.ts","webpack:///./src/main/js/api/rules.ts","webpack:///./src/main/js/components/common/InstanceMessage.tsx","webpack:///./src/main/js/apps/quality-profiles/utils.ts","webpack:///./src/main/js/api/quality-gates.ts","webpack:///./src/main/js/api/auth.ts","webpack:///./src/main/js/store/rootActions.ts","webpack:///./src/main/js/api/languages.ts","webpack:///./src/main/js/app/components/GlobalFooterBranding.tsx","webpack:///./src/main/js/app/components/GlobalFooterContainer.tsx","webpack:///./src/main/js/app/components/GlobalFooter.tsx","webpack:///./src/main/js/api/measures.ts","webpack:///./src/main/js/components/hoc/utils.ts","webpack:///./src/main/js/store/appState.ts","webpack:///./src/main/js/helpers/issues.ts","webpack:///./src/main/js/apps/projects/utils.ts","webpack:///./src/main/js/types/tasks.ts","webpack:///./src/main/js/store/users.ts","webpack:///./src/main/js/api/ce.ts","webpack:///./src/main/js/types/security.ts","webpack:///./src/main/js/components/workspace/context.ts"],"names":["IssueType","IssueScope","getMetrics","data","catch","getAllMetrics","inner","prev","ps","then","r","result","metrics","concat","p","total","getMetricDomains","getMetricTypes","createMetric","updateMetric","deleteMetric","EDITIONS","community","key","name","homeUrl","downloadProperty","developer","enterprise","datacenter","getEdition","editionKey","getAllEditionsAbove","currentEdition","editions","Object","values","currentEditionIdx","findIndex","edition","slice","getEditionUrl","url","query","getEditionDownloadUrl","lastUpgrade","downloadUrl","getEditionDownloadFilename","replace","EditionKey","PageContext","componentDidUpdate","this","props","indexationContext","status","isCompleted","hasFailures","window","location","reload","render","pageContext","component","messageKey","className","id","defaultMessage","componentQualifier","qualifier","componentName","variant","PageUnavailableDueToIndexation","mapDispatchToProps","closeGlobalMessage","state","messages","get","history","JSON","parse","set","newHistory","stringify","clear","add","componentKey","icon","sonarHistory","RecentHistory","newEntry","filter","entry","unshift","remove","parseQuery","activation","activationSeverities","active_severities","availableSince","available_since","compareToProfile","cwe","inheritance","parseAsInheritance","languages","owaspTop10","profile","qprofile","repositories","ruleKey","rule_key","sansTop25","searchQuery","q","severities","sonarsourceSecurity","statuses","tags","template","is_template","types","serializeQuery","areQueriesEqual","a","b","shouldRequestFacet","facet","includes","getServerFacet","getAppFacet","serverFacet","getOpen","open","hasRuleKey","Boolean","value","Actions","cancelChange","type","CancelChange","changeValue","ChangeValue","failValidation","message","FailValidation","passValidation","PassValidation","startLoading","StartLoading","stopLoading","StopLoading","getChangedValue","changedValues","getValidationMessage","validationMessages","isLoading","loading","action","receiveValues","settings","getValue","components","global","settingsByKey","SetAppState","keys","appState","forEach","receiveLanguages","getLanguages","getLanguageByKey","getCoverageStatus","s","lineHits","conditions","coveredConditions","parseUrlQuery","urlQuery","gate","getAsLevel","reliability","getAsNumericRating","new_reliability","security","new_security","security_review_rating","new_security_review_rating","maintainability","new_maintainability","coverage","new_coverage","duplications","new_duplications","size","new_lines","getAsStringArray","undefined","search","getAsString","sort","view","getView","visualization","getVisualization","convertToFilter","isFavorite","push","mapPropertyToMetric","property","pushMetricToArray","convertCoverage","convertDuplications","convertSize","convertArrayMetric","join","visualizationParams","hasFilterParams","some","hasVisualizationParams","isNaN","num","Number","split","convertIssuesRating","metric","rating","analysis_date","conditionsArray","convertFunction","items","Array","isArray","length","IndexationContext","receiveDefinitions","definitions","ReceiveDefinitions","getDefinition","getAllDefinitions","map","getDefinitionsForCategory","category","definition","toLowerCase","getAllCategories","getDefaultCategory","categories","registerBranchStatusAction","branchLike","ignoredConditions","RegisterBranchStatus","getBranchStatusByBranchLike","branchLikeKey","byComponent","receiveMetrics","byKey","getMetricsKey","getMetricByKey","f","extractStatusConditionsFromProjectStatus","projectStatus","c","actual","actualValue","error","errorThreshold","level","metricKey","op","comparator","period","periodIndex","extractStatusConditionsFromApplicationStatusChildProject","withIndexationGuard","WrappedComponent","Consumer","context","withIndexationContext","displayName","ORDER","Developper","Portfolio","SubPortfolio","Application","Project","SubProject","sortQualifiers","qualifiers","indexOf","isValidLicense","showLicense","response","WorkspaceTypes","el","document","createElement","classList","componentDidMount","body","appendChild","componentWillUnmount","removeChild","children","WorkspaceNav","lazyLoadComponent","WorkspaceRuleViewer","WorkspaceComponentViewer","mounted","fetchRuleNames","externalRulesRepoNames","startsWith","setState","loadWorkspace","x","rules","saveWorkspace","Component","Rule","handleOpenComponent","handleComponentReopen","handleOpenRule","rule","handleRuleReopen","handleComponentClose","handleRuleClose","handleComponentLoad","details","handleRuleLoad","handleCollapse","handleMaximize","maximized","handleMinimize","handleResize","deltaY","minHeight","innerHeight","maxHeight","height","Math","min","max","_","prevState","openComponent","find","openRule","actualHeight","Provider","onComponentClose","onComponentOpen","onRuleClose","onRuleOpen","onClose","onCollapse","onLoad","onMaximize","onMinimize","onResize","links","addA11ySkipLink","link","weight","removeA11ySkipLink","l","A11yContext","href","IndexationNotificationType","suggestions","fetchSuggestions","jsonList","suggestion","scope","addSuggestions","newKey","removeSuggestions","oldKey","SuggestionsContext","startPolling","onNewStatus","stopPolling","poll","interval","setInterval","clearInterval","markCompletedNotificationAsToDisplay","toString","markCompletedNotificationAsDisplayed","shouldDisplayCompletedNotification","handleNewStatus","newIndexationStatus","needIssueSync","percentCompleted","withAppState","NOTIFICATION_VARIANTS","InProgress","InProgressWithFailure","Completed","CompletedWithFailure","IndexationNotificationRenderer","Alert","display","isSystemAdmin","renderBackgroundTasksPageLink","renderCompletedWithFailureBanner","renderInProgressBanner","renderInProgressWithFailureBanner","hasError","text","to","pathname","taskType","IssueSync","Failed","currentUser","refreshNotification","prevProps","notificationType","withCurrentUser","EmbedDocsPopup","helpOpen","setHelpDisplay","handleClick","toggleHelp","closeHelp","onRequestClose","overlay","onClick","title","SearchResults","SearchResult","focusInput","input","focus","handleClickOutside","closeSearch","handleFocus","documentElement","click","openSearch","blur","more","projects","results","selected","shortQuery","getPlainComponentsList","reduce","next","recentlyBrowsed","group","item","warning","searchMore","loadingMore","handleQueryChange","selectPrevious","list","index","selectNext","openSelected","substr","router","scrollToSelected","node","nodes","topOffset","bottomOffset","parent","handleKeyDown","event","keyCode","preventDefault","handleSelect","innerRef","searchInputRef","renderResult","onSelect","renderNoResults","componentWillUpdate","_prevProps","autoFocus","minLength","onChange","onFocus","onKeyDown","placeholder","Dropdown","noPadding","ref","allowMore","onMoreClick","shortcut","onClickOutside","GlobalNavBranding","customLogoUrl","customLogoWidth","width","alt","src","renderGlobalPageLink","renderProjects","active","renderPortfolios","activeClassName","renderIssuesLink","isLoggedIn","resolved","myIssues","renderRulesLink","renderProfilesLink","renderQualityGatesLink","renderAdministrationLink","canAdmin","renderMore","withoutPortfolios","page","tagName","onToggleClick","role","governanceInstalled","handleLogin","returnTo","encodeURIComponent","hash","handleLogout","renderAuthenticated","email","Avatar","avatar","globalNavContentHeightRaw","renderAnonymous","withRouter","globalNavHeightRaw","LicensePromptModal","LICENSE_PROMPT","closeLicense","tryAutoOpenLicense","hasLicenseManager","hasLicensedEdition","lastPrompt","login","Date","license","isValidEdition","GlobalContainer","footer","GlobalFooterContainer","GlobalMessagesContainer","api","content","__esModule","default","module","i","options","exported","locals","exports","___CSS_LOADER_API_IMPORT___","indexRoute","childRoutes","path","onEnter","nextState","part","tokens","decodeURIComponent","parseHash","normalizedQuery","params","domainName","graph","custom_metrics","IssuesAppContainer","additionalFields","timeZone","Intl","DateTimeFormat","resolvedOptions","parsedIssues","issues","issue","users","throwGlobalError","fetchBranchStatus","fetchIssues","maintenanceRoutes","setupRoutes","globalPermissionsRoutes","projectPermissionsRoutes","isFavoriteSet","isAllSet","defineIfShouldBeRedirected","shouldBeRedirected","shouldForceSorting","paging","AllProjectsContainer","DefaultPageSelectorContainer","CATEGORIES","shortcuts","renderShortcuts","k","KeyboardShortcutsModal","setDisplay","handleKeyPress","target","d","addEventListener","removeEventListener","contentLabel","PageTracker","setScrollbarWidth","outer","style","visibility","setProperty","widthNoScroll","offsetWidth","overflow","widthWithScroll","parentNode","renderPreconnectLink","parser","gravatarServerUrl","hostname","origin","rel","fetchLanguages","enableGravatar","return_to","handleUpdate","scrollTo","RouteWithChildRoutes","startReactApp","lang","getElementById","store","getStore","defaultLocale","locale","theme","onUpdate","from","Issues","assignedToMe","getComponentOverviewUrl","branchParameters","getPortfolioUrl","getProjectQueryUrl","getComponentAdminUrl","getApplicationAdminUrl","getProjectUrl","project","branch","getComponentBackgroundTaskUrl","getBranchLikeUrl","getPullRequestUrl","getBranchUrl","pullRequest","getIssuesUrl","getComponentIssuesUrl","getComponentSecurityHotspotsUrl","sinceLeakPeriod","hotspots","SONARSOURCE","OWASP_TOP10","SANS_TOP25","getComponentDrilldownUrl","selectionKey","treemapView","listView","getComponentDrilldownUrlWithSelection","getMeasureTreemapUrl","getActivityUrl","getMeasureHistoryUrl","getComponentPermissionsUrl","getQualityProfileUrl","language","getQualityGateUrl","getQualityGatesUrl","getRulesUrl","getDeprecatedActiveRulesUrl","getRuleUrl","getFormattingHelpUrl","getCodeUrl","line","getHomePageUrl","homepage","param","Response","console","warn","dispatch","Promise","reject","settingsPage","globalMessages","branches","settingsApp","getAppState","getCurrentUserSetting","getCurrentUser","getGlobalSettingValue","getSettingsAppDefinition","getSettingsAppAllCategories","getSettingsAppDefaultCategory","getSettingsAppSettingsForCategory","getSettingsAppChangedValue","isSettingsAppLoading","getSettingsAppValidationMessage","isBranch","isMain","isMainBranch","sortBranches","isPullRequest","sortPullRequests","pullRequests","pr","getPullRequestDisplayName","getBranchLikeDisplayName","getBranchLikeKey","isSameBranchLike","getBrancheLikesAsTree","branchLikes","mainBranch","parentlessPullRequests","isOrphan","orphanPullRequests","tree","branchTree","getPullRequests","mainBranchTree","base","getBranchLikeQuery","fillBranchLike","Visibility","ComponentQualifier","ProjectKeyValidationResult","isPortfolioLike","isApplication","colors","blue","veryLightBlue","lightBlue","darkBlue","veryDarkBlue","green","lightGreen","veryLightGreen","yellow","orange","red","purple","white","gray94","gray80","gray71","gray67","gray60","gray40","transparentWhite","transparentGray","transparentBlack","disableGrayText","disableGrayBorder","disableGrayBg","barBackgroundColor","barBackgroundColorHighlight","barBorderColor","globalNavBarBg","rowHoverHighlight","baseFontColor","secondFontColor","mandatoryFieldColor","leakPrimaryColor","leakSecondaryColor","issueBgColor","hotspotBgColor","issueLocationSelected","issueLocationHighlighted","conciseIssueRed","conciseIssueRedSelected","lineCoverageRed","lineCoverageGreen","warningIconColor","alertBorderError","alertBackgroundError","alertTextError","alertIconError","alertBorderWarning","alertBackgroundWarning","alertTextWarning","alertIconWarning","alertBorderSuccess","alertBackgroundSuccess","alertTextSuccess","alertIconSuccess","alertBorderInfo","alertBackgroundInfo","alertTextInfo","alertIconInfo","badgeBlueBackground","badgeBlueColor","badgeRedBackgroundOnIssue","azure","bitbucket","github","codeBackground","sonarcloudOrange500","sonarcloudOrange600","sonarcloudOrange700","sonarcloudBlack100","sonarcloudBlack200","sonarcloudBlack250","sonarcloudBlack300","sonarcloudBlack500","sonarcloudBlack700","sonarcloudBlack800","sonarcloudBlack900","sonarcloudBlue500","sonarcloudBlue600","sonarcloudBlue900","sonarcloudBorderGray","sizes","gridSize","grid","baseFontSize","verySmallFontSize","smallFontSize","mediumFontSize","bigFontSize","hugeFontSize","giganticFontSize","hugeControlHeight","largeControlHeight","controlHeight","smallControlHeight","tinyControlHeight","globalNavHeight","globalNavContentHeight","maxPageWidth","minPageWidth","pagePadding","rawSizes","contextNavHeightRaw","fonts","baseFontFamily","systemFontFamily","sourceCodeFontFamily","zIndexes","aboveNormalZIndex","normalZIndex","belowNormalZIndex","pageMainZIndex","pageSideZIndex","pageHeaderZIndex","globalBannerZIndex","contextbarZIndex","tooltipZIndex","dropdownMenuZIndex","processContainerZIndex","modalZIndex","modalOverlayZIndex","popupZIndex","others","defaultShadow","hasGlobalPermission","user","permission","permissions","isUserActive","maintainabilityRatingGrid","localizeMetric","getShortType","enhanceMeasuresWithMetrics","measures","measure","enhanceConditionWithMeasure","condition","m","isPeriodBestValue","bestValue","isDiffMetric","getMaintainabilityRatingGrid","settingValue","numbers","getState","parseFloat","n","getRatingTooltip","ratingLetter","finalMetricKey","maintainabilityGrid","maintainabilityRatingThreshold","floor","getMaintainabilityRatingTooltip","getDisplayMetrics","hidden","findMeasure","searchIssues","getFacets","facets","getFacet","searchIssueTags","getIssueChangelog","addIssueComment","deleteIssueComment","editIssueComment","setIssueAssignee","setIssueSeverity","setIssueTags","setIssueTransition","setIssueType","bulkChangeIssues","issueKeys","searchIssueAuthors","getIssueFlowSnippets","issueKey","sources","lineMap","coverageStatus","getComponents","parameters","bulkDeleteProjects","deleteProject","deletePortfolio","portfolio","createProject","searchProjectTags","setApplicationTags","setProjectTags","getComponentTree","strategy","additional","metricKeys","getChildren","getComponentLeaves","getComponent","getTree","getFiles","getDirectories","getComponentData","doesComponentExists","getComponentShow","getParents","getBreadcrumbs","reversedAncestors","ancestors","reverse","getMyProjects","searchProjects","changeKey","getSuggestions","getComponentForSourceViewer","getSources","getDuplications","SEVERITIES","ISSUE_TYPES","Bug","Vulnerability","CodeSmell","SecurityHotspot","SOURCE_SCOPES","Main","File","Test","TestFile","RULE_TYPES","RULE_STATUSES","RATING_COLORS","PROJECT_KEY_MAX_LEN","ALM_DOCUMENTATION_PATHS","Azure","BitbucketServer","BitbucketCloud","GitHub","GitLab","IMPORT_COMPATIBLE_ALMS","AlmKeys","AlmSettingsBindingStatusType","isProjectBitbucketBindingResponse","binding","alm","isProjectGitHubBindingResponse","isProjectGitLabBindingResponse","isProjectAzureBindingResponse","isBitbucketBindingDefinition","isBitbucketCloudBindingDefinition","clientId","workspace","isGithubBindingDefinition","appId","String","MetricKey","isMetricKey","middlewares","finalCreateStore","rootReducer","initialState","configureStore","MessageLevel","closeAllGlobalMessages","addGlobalMessage","addGlobalMessageActionCreator","setTimeout","addGlobalErrorMessage","Error","addGlobalSuccessMessage","Success","getGlobalMessages","Wrapper","DEFAULT_CATEGORY","sanitizeTranslation","html","ALLOWED_TAGS","getPropertyName","getPropertyDescription","description","getCategoryName","getSubCategoryName","subCategory","getSubCategoryDescription","getUniqueName","indexSuffix","getSettingValue","fieldValues","isCategoryDefinition","multiValues","isEmptyValue","fields","getEmptyValue","field","isDefaultOrInherited","setting","inherited","getDefaultValue","parentFieldValues","parentValue","parentValues","defaultValue","changePassword","getUserGroups","getIdentityProviders","searchUsers","createUser","updateUser","scmAccount","deactivateUser","setHomePage","setUserSetting","STANDARDS","STANDARD_TYPES","CWE","assigned","assignees","authors","createdAfter","createdAt","createdBefore","createdInLast","directories","files","modules","moduleUuids","resolutions","scopes","areMyIssuesSelected","mapFacet","parseFacets","propertyMapping","val","count","finalProperty","formatFacetStat","stat","searchAssignees","isMySet","saveMyIssues","getLocations","selectedFlowIndex","flows","secondaryLocations","getSelectedLocation","selectedLocationIndex","locations","scrollToIssue","smooth","element","querySelector","shouldOpenStandardsFacet","openFacets","isFilteredBySecurityIssueTypes","isOneStandardChildFacetOpen","shouldOpenStandardsChildFacet","standardType","shouldOpenSonarSourceSecurityFacet","getRulesApp","searchRules","takeFacet","getRuleDetails","getRuleTags","createRule","deleteRule","updateRule","InstanceMessage","transformedMessage","sortProfiles","profiles","sorted","putProfile","depth","parentKey","childrenCount","child","isStagnant","rulesUpdatedAt","updateDate","PROFILE_PATH","getProfilesForLanguagePath","getProfilePath","getProfileComparePath","withKey","assign","getProfileChangelogPath","since","fetchQualityGates","fetchQualityGate","createQualityGate","deleteQualityGate","renameQualityGate","copyQualityGate","setQualityGateAsDefault","createCondition","updateCondition","deleteCondition","getGateForProject","qualityGate","isDefault","associateGateWithProject","dissociateGateWithProject","getApplicationQualityGate","getQualityGateProjectStatus","basicCheckStatus","resolve","fetchMetrics","projectKey","doLogin","password","request","setMethod","setData","submit","doLogout","requireAuthorization","registerBranchStatus","GlobalFooterBranding","productionDatabase","sonarqubeEdition","sonarqubeVersion","version","hideLoggedInInfo","COMPONENT_URL","getMeasures","getMeasuresWithMetrics","getMeasuresWithPeriod","getMeasuresWithPeriodAndMetrics","getMeasuresForProjects","projectKeys","getCustomMeasures","customMeasures","pageIndex","pageSize","createCustomMeasure","updateCustomMeasure","deleteCustomMeasure","getWrappedDisplayName","hocName","setAppState","setAdminPages","adminPages","SetAdminPages","RequireAuthorization","authenticationError","authorizationError","sortByType","injectRelational","source","baseField","lookupField","newFields","baseValue","candidate","charAt","toUpperCase","reverseLocations","parseIssueFromResponse","parsedFlows","flow","textRange","every","splitFlows","comments","comment","commentWithAuthor","author","injectCommentsRelational","prepareClosed","startLine","endLine","startOffset","endOffset","ensureTextRange","ISSUETYPE_METRIC_KEYS_MAP","code_smells","newMetric","new_code_smells","sqale_rating","newRating","new_maintainability_rating","ratingName","iconClass","vulnerabilities","new_vulnerabilities","security_rating","new_security_rating","bugs","new_bugs","reliability_rating","new_reliability_rating","security_hotspots","new_security_hotspots","PROJECTS_DEFAULT_FILTER","PROJECTS_FAVORITE","PROJECTS_ALL","SORTING_METRICS","SORTING_LEAK_METRICS","class","SORTING_SWITCH","security_review","new_security_review","VIEWS","label","VISUALIZATIONS","METRICS","alert_status","security_hotspots_reviewed","duplicated_lines_density","ncloc","ncloc_language_distribution","LEAK_METRICS","new_security_hotspots_reviewed","new_duplicated_lines_density","METRICS_BY_VISUALIZATION","risk","sqale_index","reliability_remediation_effort","security_remediation_effort","complexity","uncovered_lines","duplicated_blocks","FACETS","LEAK_FACETS","REVERSED_FACETS","localizeSorting","parseSorting","desc","sortValue","sortDesc","fetchProjects","defaultData","propertyToMetricMap","asc","convertToSorting","convertToQueryData","defineFacets","all","fetchProjectMeasures","getFacetsMap","componentMeasures","defineMetrics","metricToPropertyMap","mapFacetValues","formatDuration","ms","years","months","days","hours","periods","lastId","format","TaskTypes","TaskStatuses","receiveCurrentUser","ReceiveCurrentUser","setCurrentUserSettingAction","SetCurrentUserSetting","SetHomePageAction","setHomePageAction","setCurrentUserSetting","oldSetting","usersByLogin","userLogins","getAnalysisStatus","getActivity","getStatus","componentId","getTask","cancelTask","cancelAllTasks","getTasksForComponent","getTypes","getWorkers","setWorkerCount","getIndexationStatus","dismissAnalysisWarning","SecurityStandard","WorkspaceContext"],"mappings":"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Kzc,EACLuc,MAAO5b,EAAM6I,OAcJ,iBATS,SAACvH,GACvB,IAAM0iB,EAAiB,gCAAsB1iB,EAAO,2BAC9CqiB,EAAoB,gCAAsBriB,EAAO,8BACvD,MAAO,CACL0iB,eAAgB9e,QAAQ8e,GAA2C,SAAzBA,EAAe7e,OACzDwe,kBAAoBA,GAAqBA,EAAkBxe,OAAU,MAI1D,CAAyBwY,I,iCC/CxC,IAAYkd,EAiIN,SAAUC,EAAY58B,GAC1B,OAAQY,OAAOC,OAAO87B,GAAwBl2B,SAASzG,GArJzD,oEAmBA,SAAY28B,GACV,8BACA,0CACA,oCACA,cACA,gCACA,kCACA,sCACA,oBACA,4BACA,8CACA,gCACA,0CACA,gDACA,0BACA,gDACA,oDACA,4CACA,sCACA,sBACA,4CACA,sCACA,4BACA,wCACA,sCACA,sCACA,sDACA,wCACA,sFACA,gDACA,gDACA,oCACA,8DACA,gCACA,8CACA,gBACA,4CACA,sEACA,wBACA,oCACA,oCACA,oCACA,gFACA,4EACA,wEACA,kEACA,gFACA,sCACA,gCACA,gCACA,gBACA,kCACA,gEACA,sCACA,sCACA,gBACA,0BACA,4DACA,kDACA,4CACA,sBACA,oCACA,oDACA,8BACA,oDACA,8CACA,gDACA,8CACA,8DACA,4CACA,wCACA,wBACA,0CACA,0DACA,8CACA,8CACA,kDACA,0EACA,gDACA,kEACA,4CACA,oEACA,0DACA,8CACA,0CACA,sDACA,4CACA,kCACA,4CACA,4BACA,sBACA,0BACA,gEACA,oDACA,8CACA,sCACA,8CACA,8CACA,0CACA,wDACA,kEACA,oCACA,wCACA,0DACA,oCACA,kDACA,4DACA,kDACA,gEACA,gCACA,0CACA,sCACA,4BACA,8BACA,0BACA,4CACA,wBACA,4BACA,4CACA,gCACA,8CACA,gBACA,8CACA,oCACA,0BACA,oCACA,oCA9HF,CAAYA,MAAS,M,4CCMjBrW,E,4NCAEuW,EAAc,C,QAAC,GAQfC,EAAmB,IAAO,gBAAC,IAAe,aAAID,IAPnC,IAOQ,CAAsD,KDN/E,IAAM,EAAc,SAACtkB,EAA6B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","file":"js/app.1613385090031.chunk.js","sourcesContent":["/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nexport enum IssueType {\n  CodeSmell = 'CODE_SMELL',\n  Vulnerability = 'VULNERABILITY',\n  Bug = 'BUG',\n  SecurityHotspot = 'SECURITY_HOTSPOT'\n}\n\nexport enum IssueScope {\n  Main = 'MAIN',\n  Test = 'TEST'\n}\n\ninterface Comment {\n  createdAt: string;\n  htmlText: string;\n  key: string;\n  login: string;\n  markdown: string;\n  updatable: boolean;\n}\n\nexport interface RawIssue {\n  assignee?: string;\n  author?: string;\n  comments?: Array<Comment>;\n  component: string;\n  flows?: Array<{\n    // `componentName` is not available in RawIssue\n    locations?: Array<T.Omit<T.FlowLocation, 'componentName'>>;\n  }>;\n  key: string;\n  line?: number;\n  project: string;\n  rule: string;\n  severity: string;\n  status: string;\n  subProject?: string;\n  textRange?: T.TextRange;\n}\n\nexport interface IssueResponse {\n  components?: Array<{ key: string; name: string }>;\n  issue: RawIssue;\n  rules?: Array<{}>;\n  users?: Array<T.UserBase>;\n}\n\nexport interface RawIssuesResponse {\n  components: ReferencedComponent[];\n  effortTotal: number;\n  facets: RawFacet[];\n  issues: RawIssue[];\n  languages: ReferencedLanguage[];\n  paging: T.Paging;\n  rules?: Array<{}>;\n  users?: Array<T.UserBase>;\n}\n\nexport interface FetchIssuesPromise {\n  components: ReferencedComponent[];\n  effortTotal: number;\n  facets: RawFacet[];\n  issues: T.Issue[];\n  languages: ReferencedLanguage[];\n  paging: T.Paging;\n  rules: ReferencedRule[];\n  users: T.UserBase[];\n}\n\nexport interface ReferencedComponent {\n  key: string;\n  name: string;\n  path?: string;\n  uuid: string;\n}\n\nexport interface ReferencedLanguage {\n  name: string;\n}\n\nexport interface ReferencedRule {\n  langName?: string;\n  name: string;\n}\n\nexport interface RawFacet {\n  property: string;\n  values: Array<{ val: string; count: number }>;\n}\n\nexport interface Facet {\n  [value: string]: number;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { getJSON, post, postJSON } from 'sonar-ui-common/helpers/request';\nimport throwGlobalError from '../app/utils/throwGlobalError';\n\nexport interface MetricsResponse {\n  metrics: T.Metric[];\n  p: number;\n  ps: number;\n  total: number;\n}\n\nexport function getMetrics(data?: {\n  isCustom?: boolean;\n  p?: number;\n  ps?: number;\n}): Promise<MetricsResponse> {\n  return getJSON('/api/metrics/search', data).catch(throwGlobalError);\n}\n\nexport function getAllMetrics(data?: {\n  isCustom?: boolean;\n  p?: number;\n  ps?: number;\n}): Promise<T.Metric[]> {\n  return inner(data);\n\n  function inner(\n    data: { p?: number; ps?: number } = { ps: 500 },\n    prev?: MetricsResponse\n  ): Promise<T.Metric[]> {\n    return getMetrics(data).then(r => {\n      const result = prev ? prev.metrics.concat(r.metrics) : r.metrics;\n      if (r.p * r.ps >= r.total) {\n        return result;\n      }\n      return inner({ ...data, p: r.p + 1 }, { ...r, metrics: result });\n    });\n  }\n}\n\nexport function getMetricDomains(): Promise<string[]> {\n  return getJSON('/api/metrics/domains').then(r => r.domains, throwGlobalError);\n}\n\nexport function getMetricTypes(): Promise<string[]> {\n  return getJSON('/api/metrics/types').then(r => r.types, throwGlobalError);\n}\n\nexport function createMetric(data: {\n  description?: string;\n  domain?: string;\n  key: string;\n  name: string;\n  type: string;\n}): Promise<T.Metric> {\n  return postJSON('/api/metrics/create', data).catch(throwGlobalError);\n}\n\nexport function updateMetric(data: {\n  description?: string;\n  domain?: string;\n  id: string;\n  key?: string;\n  name?: string;\n  type?: string;\n}) {\n  return post('/api/metrics/update', data).catch(throwGlobalError);\n}\n\nexport function deleteMetric(data: { keys: string }) {\n  return post('/api/metrics/delete', data).catch(throwGlobalError);\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { stringify } from 'querystring';\nimport { omitNil } from 'sonar-ui-common/helpers/request';\nimport { Edition, EditionKey } from '../types/editions';\nimport { SystemUpgrade } from '../types/system';\n\nconst EDITIONS: { [x in EditionKey]: Edition } = {\n  community: {\n    key: EditionKey.community,\n    name: 'Community Edition',\n    homeUrl: 'https://redirect.sonarsource.com/editions/community.html',\n    downloadProperty: 'downloadUrl'\n  },\n  developer: {\n    key: EditionKey.developer,\n    name: 'Developer Edition',\n    homeUrl: 'https://redirect.sonarsource.com/editions/developer.html',\n    downloadProperty: 'downloadDeveloperUrl'\n  },\n  enterprise: {\n    key: EditionKey.enterprise,\n    name: 'Enterprise Edition',\n    homeUrl: 'https://redirect.sonarsource.com/editions/enterprise.html',\n    downloadProperty: 'downloadEnterpriseUrl'\n  },\n  datacenter: {\n    key: EditionKey.datacenter,\n    name: 'Data Center Edition',\n    homeUrl: 'https://redirect.sonarsource.com/editions/datacenter.html',\n    downloadProperty: 'downloadDatacenterUrl'\n  }\n};\n\nexport function getEdition(editionKey: EditionKey) {\n  return EDITIONS[editionKey];\n}\n\nexport function getAllEditionsAbove(currentEdition?: EditionKey) {\n  const editions = Object.values(EDITIONS);\n  const currentEditionIdx = editions.findIndex(edition => edition.key === currentEdition);\n  return editions.slice(currentEditionIdx + 1);\n}\n\nexport function getEditionUrl(\n  edition: Edition,\n  data: { serverId?: string; ncloc?: number; sourceEdition?: EditionKey }\n) {\n  let url = edition.homeUrl;\n  const query = stringify(omitNil(data));\n  if (query) {\n    url += '?' + query;\n  }\n  return url;\n}\n\nexport function getEditionDownloadUrl(edition: Edition, lastUpgrade: SystemUpgrade) {\n  return lastUpgrade[edition.downloadProperty] || lastUpgrade.downloadUrl;\n}\n\nexport function getEditionDownloadFilename(url: string) {\n  return url.replace(/^.+\\/(sonarqube-[\\w\\-.]+\\.zip)$/, '$1');\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { SystemUpgradeDownloadUrls } from './system';\n\nexport enum EditionKey {\n  community = 'community',\n  developer = 'developer',\n  enterprise = 'enterprise',\n  datacenter = 'datacenter'\n}\n\nexport interface Edition {\n  downloadProperty: keyof SystemUpgradeDownloadUrls;\n  homeUrl: string;\n  key: EditionKey;\n  name: string;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { FormattedMessage } from 'react-intl';\nimport { Alert } from 'sonar-ui-common/components/ui/Alert';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport withIndexationContext, {\n  WithIndexationContextProps\n} from '../../../components/hoc/withIndexationContext';\n\ninterface Props extends WithIndexationContextProps {\n  pageContext?: PageContext;\n  component?: Pick<T.Component, 'qualifier' | 'name'>;\n}\n\nexport enum PageContext {\n  Issues = 'issues',\n  Portfolios = 'portfolios'\n}\n\nexport class PageUnavailableDueToIndexation extends React.PureComponent<Props> {\n  componentDidUpdate() {\n    if (\n      this.props.indexationContext.status.isCompleted &&\n      !this.props.indexationContext.status.hasFailures\n    ) {\n      window.location.reload();\n    }\n  }\n\n  render() {\n    const { pageContext, component } = this.props;\n    let messageKey = 'indexation.page_unavailable.title';\n\n    if (pageContext) {\n      messageKey = `${messageKey}.${pageContext}`;\n    }\n\n    return (\n      <div className=\"page-wrapper-simple\">\n        <div className=\"page-simple\">\n          <h1 className=\"big-spacer-bottom\">\n            <FormattedMessage\n              id={messageKey}\n              defaultMessage={translate(messageKey)}\n              values={{\n                componentQualifier: translate('qualifier', component?.qualifier ?? ''),\n                componentName: <em>{component?.name}</em>\n              }}\n            />\n          </h1>\n          <Alert variant=\"info\">\n            <p>{translate('indexation.page_unavailable.description')}</p>\n            <p className=\"spacer-top\">\n              {translate('indexation.page_unavailable.description.additional_information')}\n            </p>\n          </Alert>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default withIndexationContext(PageUnavailableDueToIndexation);\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { connect } from 'react-redux';\nimport GlobalMessages from 'sonar-ui-common/components/controls/GlobalMessages';\nimport { closeGlobalMessage } from '../../store/globalMessages';\nimport { getGlobalMessages, Store } from '../../store/rootReducer';\n\nconst mapStateToProps = (state: Store) => ({\n  messages: getGlobalMessages(state)\n});\n\nconst mapDispatchToProps = { closeGlobalMessage };\n\nexport default connect(mapStateToProps, mapDispatchToProps)(GlobalMessages);\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { get, remove, save } from 'sonar-ui-common/helpers/storage';\n\nconst RECENT_HISTORY = 'sonar_recent_history';\nconst HISTORY_LIMIT = 10;\n\nexport type History = Array<{\n  key: string;\n  name: string;\n  icon: string;\n}>;\n\nexport default class RecentHistory {\n  static get(): History {\n    const history = get(RECENT_HISTORY);\n    if (history == null) {\n      return [];\n    } else {\n      try {\n        return JSON.parse(history);\n      } catch {\n        remove(RECENT_HISTORY);\n        return [];\n      }\n    }\n  }\n\n  static set(newHistory: History) {\n    save(RECENT_HISTORY, JSON.stringify(newHistory));\n  }\n\n  static clear() {\n    remove(RECENT_HISTORY);\n  }\n\n  static add(componentKey: string, componentName: string, icon: string) {\n    const sonarHistory = RecentHistory.get();\n    const newEntry = { key: componentKey, name: componentName, icon };\n    let newHistory = sonarHistory.filter(entry => entry.key !== newEntry.key);\n    newHistory.unshift(newEntry);\n    newHistory = newHistory.slice(0, HISTORY_LIMIT);\n    RecentHistory.set(newHistory);\n  }\n\n  static remove(componentKey: string) {\n    const history = RecentHistory.get();\n    const newHistory = history.filter(entry => entry.key !== componentKey);\n    RecentHistory.set(newHistory);\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport {\n  cleanQuery,\n  parseAsArray,\n  parseAsDate,\n  parseAsOptionalBoolean,\n  parseAsOptionalString,\n  parseAsString,\n  queriesEqual,\n  serializeDateShort,\n  serializeOptionalBoolean,\n  serializeString,\n  serializeStringArray\n} from 'sonar-ui-common/helpers/query';\n\nexport interface Query {\n  activation: boolean | undefined;\n  activationSeverities: string[];\n  availableSince: Date | undefined;\n  compareToProfile: string | undefined;\n  cwe: string[];\n  inheritance: T.RuleInheritance | undefined;\n  languages: string[];\n  owaspTop10: string[];\n  profile: string | undefined;\n  repositories: string[];\n  ruleKey: string | undefined;\n  sansTop25: string[];\n  searchQuery: string | undefined;\n  severities: string[];\n  sonarsourceSecurity: string[];\n  statuses: string[];\n  tags: string[];\n  template: boolean | undefined;\n  types: string[];\n}\n\nexport type FacetKey = keyof Query;\n\nexport interface Facet {\n  [value: string]: number;\n}\n\nexport type Facets = { [F in FacetKey]?: Facet };\n\nexport type OpenFacets = T.Dict<boolean>;\n\nexport interface Activation {\n  inherit: T.RuleInheritance;\n  severity: string;\n}\n\nexport interface Actives {\n  [rule: string]: {\n    [profile: string]: Activation;\n  };\n}\n\nexport function parseQuery(query: T.RawQuery): Query {\n  return {\n    activation: parseAsOptionalBoolean(query.activation),\n    activationSeverities: parseAsArray(query.active_severities, parseAsString),\n    availableSince: parseAsDate(query.available_since),\n    compareToProfile: parseAsOptionalString(query.compareToProfile),\n    cwe: parseAsArray(query.cwe, parseAsString),\n    inheritance: parseAsInheritance(query.inheritance),\n    languages: parseAsArray(query.languages, parseAsString),\n    owaspTop10: parseAsArray(query.owaspTop10, parseAsString),\n    profile: parseAsOptionalString(query.qprofile),\n    repositories: parseAsArray(query.repositories, parseAsString),\n    ruleKey: parseAsOptionalString(query.rule_key),\n    sansTop25: parseAsArray(query.sansTop25, parseAsString),\n    searchQuery: parseAsOptionalString(query.q),\n    severities: parseAsArray(query.severities, parseAsString),\n    sonarsourceSecurity: parseAsArray(query.sonarsourceSecurity, parseAsString),\n    statuses: parseAsArray(query.statuses, parseAsString),\n    tags: parseAsArray(query.tags, parseAsString),\n    template: parseAsOptionalBoolean(query.is_template),\n    types: parseAsArray(query.types, parseAsString)\n  };\n}\n\nexport function serializeQuery(query: Query): T.RawQuery {\n  return cleanQuery({\n    activation: serializeOptionalBoolean(query.activation),\n    active_severities: serializeStringArray(query.activationSeverities),\n    available_since: serializeDateShort(query.availableSince),\n    compareToProfile: serializeString(query.compareToProfile),\n    cwe: serializeStringArray(query.cwe),\n    inheritance: serializeInheritance(query.inheritance),\n    is_template: serializeOptionalBoolean(query.template),\n    languages: serializeStringArray(query.languages),\n    owaspTop10: serializeStringArray(query.owaspTop10),\n    q: serializeString(query.searchQuery),\n    qprofile: serializeString(query.profile),\n    repositories: serializeStringArray(query.repositories),\n    rule_key: serializeString(query.ruleKey),\n    sansTop25: serializeStringArray(query.sansTop25),\n    severities: serializeStringArray(query.severities),\n    sonarsourceSecurity: serializeStringArray(query.sonarsourceSecurity),\n    statuses: serializeStringArray(query.statuses),\n    tags: serializeStringArray(query.tags),\n    types: serializeStringArray(query.types)\n  });\n}\n\nexport function areQueriesEqual(a: T.RawQuery, b: T.RawQuery) {\n  return queriesEqual(parseQuery(a), parseQuery(b));\n}\n\nexport function shouldRequestFacet(facet: string): facet is FacetKey {\n  const facetsToRequest = [\n    'activationSeverities',\n    'cwe',\n    'languages',\n    'owaspTop10',\n    'repositories',\n    'sansTop25',\n    'severities',\n    'sonarsourceSecurity',\n    'standard',\n    'statuses',\n    'tags',\n    'types'\n  ];\n  return facetsToRequest.includes(facet);\n}\n\nexport function getServerFacet(facet: FacetKey) {\n  return facet === 'activationSeverities' ? 'active_severities' : facet;\n}\n\nexport function getAppFacet(serverFacet: string): FacetKey {\n  return serverFacet === 'active_severities' ? 'activationSeverities' : (serverFacet as FacetKey);\n}\n\nexport function getOpen(query: T.RawQuery) {\n  return query.open;\n}\n\nexport function hasRuleKey(query: T.RawQuery) {\n  return Boolean(query.rule_key);\n}\n\nfunction parseAsInheritance(value?: string): T.RuleInheritance | undefined {\n  if (value === 'INHERITED' || value === 'NONE' || value === 'OVERRIDES') {\n    return value;\n  } else {\n    return undefined;\n  }\n}\n\nfunction serializeInheritance(value: T.RuleInheritance | undefined): string | undefined {\n  return value;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { omit } from 'lodash';\nimport { combineReducers } from 'redux';\nimport { ActionType } from '../../../store/utils/actions';\n\nconst enum Actions {\n  CancelChange = 'settingsPage/CANCEL_CHANGE',\n  ChangeValue = 'settingsPage/CHANGE_VALUE',\n  FailValidation = 'settingsPage/FAIL_VALIDATION',\n  PassValidation = 'settingsPage/PASS_VALIDATION',\n  StartLoading = 'settingsPage/START_LOADING',\n  StopLoading = 'settingsPage/STOP_LOADING'\n}\n\ntype Action =\n  | ActionType<typeof cancelChange, Actions.CancelChange>\n  | ActionType<typeof changeValue, Actions.ChangeValue>\n  | ActionType<typeof failValidation, Actions.FailValidation>\n  | ActionType<typeof passValidation, Actions.PassValidation>\n  | ActionType<typeof startLoading, Actions.StartLoading>\n  | ActionType<typeof stopLoading, Actions.StopLoading>;\n\nexport interface State {\n  changedValues: T.Dict<any>;\n  loading: T.Dict<boolean>;\n  validationMessages: T.Dict<string>;\n}\n\nexport function cancelChange(key: string) {\n  return { type: Actions.CancelChange, key };\n}\n\nexport function changeValue(key: string, value: any) {\n  return { type: Actions.ChangeValue, key, value };\n}\n\nfunction changedValues(state: State['changedValues'] = {}, action: Action) {\n  if (action.type === Actions.ChangeValue) {\n    return { ...state, [action.key]: action.value };\n  }\n  if (action.type === Actions.CancelChange) {\n    return omit(state, action.key);\n  }\n  return state;\n}\n\nexport function failValidation(key: string, message: string) {\n  return { type: Actions.FailValidation, key, message };\n}\n\nexport function passValidation(key: string) {\n  return { type: Actions.PassValidation, key };\n}\n\nfunction validationMessages(state: State['validationMessages'] = {}, action: Action) {\n  if (action.type === Actions.FailValidation) {\n    return { ...state, [action.key]: action.message };\n  }\n  if (action.type === Actions.PassValidation) {\n    return omit(state, action.key);\n  }\n  return state;\n}\n\nexport function startLoading(key: string) {\n  return { type: Actions.StartLoading, key };\n}\n\nexport function stopLoading(key: string) {\n  return { type: Actions.StopLoading, key };\n}\n\nfunction loading(state: State['loading'] = {}, action: Action) {\n  if (action.type === Actions.StartLoading) {\n    return { ...state, [action.key]: true };\n  }\n  if (action.type === Actions.StopLoading) {\n    return { ...state, [action.key]: false };\n  }\n  return state;\n}\n\nexport default combineReducers({ changedValues, loading, validationMessages });\n\nexport function getChangedValue(state: State, key: string) {\n  return state.changedValues[key];\n}\n\nexport function getValidationMessage(state: State, key: string): string | undefined {\n  return state.validationMessages[key];\n}\n\nexport function isLoading(state: State, key: string) {\n  return Boolean(state.loading[key]);\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { keyBy } from 'lodash';\nimport { combineReducers } from 'redux';\nimport { Action as AppStateAction, Actions as AppStateActions } from '../../../store/appState';\nimport { ActionType } from '../../../store/utils/actions';\n\nenum Actions {\n  receiveValues = 'RECEIVE_VALUES'\n}\n\ntype Action = ActionType<typeof receiveValues, Actions.receiveValues>;\n\ntype SettingsState = T.Dict<T.SettingValue>;\n\nexport interface State {\n  components: T.Dict<SettingsState>;\n  global: SettingsState;\n}\n\nexport function receiveValues(\n  settings: Array<{ key: string; value?: string }>,\n  component?: string\n) {\n  return { type: Actions.receiveValues, settings, component };\n}\n\nfunction components(state: State['components'] = {}, action: Action) {\n  const { component: key } = action;\n  if (!key) {\n    return state;\n  }\n  if (action.type === Actions.receiveValues) {\n    const settingsByKey = keyBy(action.settings, 'key');\n    return { ...state, [key]: { ...(state[key] || {}), ...settingsByKey } };\n  }\n  return state;\n}\n\nfunction global(state: State['components'] = {}, action: Action | AppStateAction) {\n  if (action.type === Actions.receiveValues) {\n    if (action.component) {\n      return state;\n    }\n    const settingsByKey = keyBy(action.settings, 'key');\n    return { ...state, ...settingsByKey };\n  }\n  if (action.type === AppStateActions.SetAppState) {\n    const settingsByKey: SettingsState = {};\n    Object.keys(action.appState.settings).forEach(\n      key => (settingsByKey[key] = { key, value: action.appState.settings[key] })\n    );\n    return { ...state, ...settingsByKey };\n  }\n  return state;\n}\n\nexport default combineReducers({ components, global });\n\nexport function getValue(\n  state: State,\n  key: string,\n  component?: string\n): T.SettingValue | undefined {\n  if (component) {\n    return state.components[component] && state.components[component][key];\n  }\n  return state.global[key];\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { keyBy } from 'lodash';\nimport { ActionType } from './utils/actions';\n\nexport function receiveLanguages(languages: Array<{ key: string; name: string }>) {\n  return { type: 'RECEIVE_LANGUAGES', languages };\n}\n\ntype Action = ActionType<typeof receiveLanguages, 'RECEIVE_LANGUAGES'>;\n\nexport default function(state: T.Languages = {}, action: Action): T.Languages {\n  if (action.type === 'RECEIVE_LANGUAGES') {\n    return keyBy(action.languages, 'key');\n  }\n\n  return state;\n}\n\nexport function getLanguages(state: T.Languages) {\n  return state;\n}\n\nexport function getLanguageByKey(state: T.Languages, key: string) {\n  return state[key];\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nexport default function getCoverageStatus(s: T.SourceLine): T.SourceLineCoverageStatus | undefined {\n  let status: T.SourceLineCoverageStatus | undefined;\n  if (s.lineHits != null && s.lineHits > 0) {\n    status = 'partially-covered';\n  }\n  if (s.lineHits != null && s.lineHits > 0 && s.conditions === s.coveredConditions) {\n    status = 'covered';\n  }\n  if (s.lineHits === 0 || s.coveredConditions === 0) {\n    status = 'uncovered';\n  }\n  return status;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { ComponentQualifier } from '../../types/component';\nimport { VISUALIZATIONS } from './utils';\n\ntype Level = 'ERROR' | 'WARN' | 'OK';\n\nexport interface Query {\n  gate?: Level;\n  reliability?: number;\n  new_reliability?: number;\n  security?: number;\n  new_security?: number;\n  security_review_rating?: number;\n  new_security_review_rating?: number;\n  maintainability?: number;\n  new_maintainability?: number;\n  coverage?: number;\n  new_coverage?: number;\n  duplications?: number;\n  new_duplications?: number;\n  size?: number;\n  new_lines?: number;\n  languages?: string[];\n  qualifier?: ComponentQualifier;\n  tags?: string[];\n  search?: string;\n  sort?: string;\n  view?: string;\n  visualization?: string;\n  [x: string]: string | number | string[] | undefined;\n}\n\nexport function parseUrlQuery(urlQuery: T.RawQuery): Query {\n  return {\n    gate: getAsLevel(urlQuery['gate']),\n    reliability: getAsNumericRating(urlQuery['reliability']),\n    new_reliability: getAsNumericRating(urlQuery['new_reliability']),\n    security: getAsNumericRating(urlQuery['security']),\n    new_security: getAsNumericRating(urlQuery['new_security']),\n    security_review_rating: getAsNumericRating(urlQuery['security_review']),\n    new_security_review_rating: getAsNumericRating(urlQuery['new_security_review']),\n    maintainability: getAsNumericRating(urlQuery['maintainability']),\n    new_maintainability: getAsNumericRating(urlQuery['new_maintainability']),\n    coverage: getAsNumericRating(urlQuery['coverage']),\n    new_coverage: getAsNumericRating(urlQuery['new_coverage']),\n    duplications: getAsNumericRating(urlQuery['duplications']),\n    new_duplications: getAsNumericRating(urlQuery['new_duplications']),\n    size: getAsNumericRating(urlQuery['size']),\n    new_lines: getAsNumericRating(urlQuery['new_lines']),\n    languages: getAsStringArray(urlQuery['languages']),\n    tags: getAsStringArray(urlQuery['tags']),\n    qualifier: getAsQualifier(urlQuery['qualifier']),\n    search: getAsString(urlQuery['search']),\n    sort: getAsString(urlQuery['sort']),\n    view: getView(urlQuery['view']),\n    visualization: getVisualization(urlQuery['visualization'])\n  };\n}\n\nexport function convertToFilter(query: Query, isFavorite: boolean): string {\n  const conditions: string[] = [];\n\n  if (isFavorite) {\n    conditions.push('isFavorite');\n  }\n\n  if (query['gate'] != null) {\n    conditions.push(mapPropertyToMetric('gate') + ' = ' + query['gate']);\n  }\n\n  ['coverage', 'new_coverage'].forEach(property =>\n    pushMetricToArray(query, property, conditions, convertCoverage)\n  );\n\n  ['duplications', 'new_duplications'].forEach(property =>\n    pushMetricToArray(query, property, conditions, convertDuplications)\n  );\n\n  ['size', 'new_lines'].forEach(property =>\n    pushMetricToArray(query, property, conditions, convertSize)\n  );\n\n  [\n    'reliability',\n    'security',\n    'security_review_rating',\n    'maintainability',\n    'new_reliability',\n    'new_security',\n    'new_security_review_rating',\n    'new_maintainability'\n  ].forEach(property => pushMetricToArray(query, property, conditions, convertIssuesRating));\n\n  ['languages', 'tags', 'qualifier'].forEach(property =>\n    pushMetricToArray(query, property, conditions, convertArrayMetric)\n  );\n\n  if (query['search'] != null) {\n    conditions.push(`${mapPropertyToMetric('search')} = \"${query['search']}\"`);\n  }\n\n  return conditions.join(' and ');\n}\n\nconst visualizationParams = ['sort', 'view', 'visualization'];\n\nexport function hasFilterParams(query: Query) {\n  return Object.keys(query)\n    .filter(key => !visualizationParams.includes(key))\n    .some(key => query[key] !== undefined);\n}\n\nexport function hasVisualizationParams(query: Query) {\n  return Object.keys(query)\n    .filter(key => visualizationParams.includes(key))\n    .some(key => query[key] !== undefined);\n}\n\nfunction getAsNumericRating(value: any): number | undefined {\n  if (value === '' || value == null || isNaN(value)) {\n    return undefined;\n  }\n  const num = Number(value);\n  return num > 0 && num < 7 ? num : undefined;\n}\n\nfunction getAsLevel(value: any): Level | undefined {\n  if (value === 'ERROR' || value === 'WARN' || value === 'OK') {\n    return value;\n  }\n  return undefined;\n}\n\nfunction getAsString(value: any): string | undefined {\n  if (typeof value !== 'string' || !value) {\n    return undefined;\n  }\n  return value;\n}\n\nfunction getAsStringArray(value: any): string[] | undefined {\n  if (typeof value !== 'string' || !value) {\n    return undefined;\n  }\n  return value.split(',');\n}\n\nfunction getAsQualifier(value: string | undefined): ComponentQualifier | undefined {\n  return value ? (value as ComponentQualifier) : undefined;\n}\n\nfunction getView(value: any): string | undefined {\n  return typeof value !== 'string' || value === 'overall' ? undefined : value;\n}\n\nfunction getVisualization(value: string): string | undefined {\n  return VISUALIZATIONS.includes(value) ? value : undefined;\n}\n\nfunction convertIssuesRating(metric: string, rating: number): string {\n  if (rating > 1 && rating < 5) {\n    return `${metric} >= ${rating}`;\n  } else {\n    return `${metric} = ${rating}`;\n  }\n}\n\nfunction convertCoverage(metric: string, coverage: number): string {\n  switch (coverage) {\n    case 1:\n      return metric + ' >= 80';\n    case 2:\n      return metric + ' < 80';\n    case 3:\n      return metric + ' < 70';\n    case 4:\n      return metric + ' < 50';\n    case 5:\n      return metric + ' < 30';\n    case 6:\n      return metric + '= NO_DATA';\n    default:\n      return '';\n  }\n}\n\nfunction convertDuplications(metric: string, duplications: number): string {\n  switch (duplications) {\n    case 1:\n      return metric + ' < 3';\n    case 2:\n      return metric + ' >= 3';\n    case 3:\n      return metric + ' >= 5';\n    case 4:\n      return metric + ' >= 10';\n    case 5:\n      return metric + ' >= 20';\n    case 6:\n      return metric + '= NO_DATA';\n    default:\n      return '';\n  }\n}\n\nfunction convertSize(metric: string, size: number): string {\n  switch (size) {\n    case 1:\n      return metric + ' < 1000';\n    case 2:\n      return metric + ' >= 1000';\n    case 3:\n      return metric + ' >= 10000';\n    case 4:\n      return metric + ' >= 100000';\n    case 5:\n      return metric + ' >= 500000';\n    default:\n      return '';\n  }\n}\n\nfunction mapPropertyToMetric(property?: string): string | undefined {\n  const map: T.Dict<string> = {\n    analysis_date: 'analysisDate',\n    reliability: 'reliability_rating',\n    new_reliability: 'new_reliability_rating',\n    security: 'security_rating',\n    new_security: 'new_security_rating',\n    security_review_rating: 'security_review_rating',\n    new_security_review_rating: 'new_security_review_rating',\n    maintainability: 'sqale_rating',\n    new_maintainability: 'new_maintainability_rating',\n    coverage: 'coverage',\n    new_coverage: 'new_coverage',\n    duplications: 'duplicated_lines_density',\n    new_duplications: 'new_duplicated_lines_density',\n    size: 'ncloc',\n    new_lines: 'new_lines',\n    gate: 'alert_status',\n    languages: 'languages',\n    tags: 'tags',\n    search: 'query',\n    qualifier: 'qualifier'\n  };\n  return property && map[property];\n}\n\nfunction pushMetricToArray(\n  query: Query,\n  property: string,\n  conditionsArray: string[],\n  convertFunction: (metric: string, value: any) => string\n): void {\n  const metric = mapPropertyToMetric(property);\n  if (query[property] != null && metric) {\n    conditionsArray.push(convertFunction(metric, query[property]));\n  }\n}\n\nfunction convertArrayMetric(metric: string, items: string | string[]): string {\n  if (!Array.isArray(items) || items.length < 2) {\n    return metric + ' = ' + items;\n  }\n  return `${metric} IN (${items.join(', ')})`;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { createContext } from 'react';\nimport { IndexationContextInterface } from '../../../types/indexation';\n\nexport const IndexationContext = createContext<IndexationContextInterface | null>(null);\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { keyBy, sortBy, uniqBy } from 'lodash';\nimport { ActionType } from '../../../store/utils/actions';\nimport { DEFAULT_CATEGORY, getCategoryName } from '../utils';\n\nconst enum Actions {\n  ReceiveDefinitions = 'RECEIVE_DEFINITIONS'\n}\n\ntype Action = ActionType<typeof receiveDefinitions, Actions.ReceiveDefinitions>;\n\nexport type State = T.Dict<T.SettingCategoryDefinition>;\n\nexport function receiveDefinitions(definitions: T.SettingCategoryDefinition[]) {\n  return { type: Actions.ReceiveDefinitions, definitions };\n}\n\nexport default function components(state: State = {}, action: Action) {\n  if (action.type === Actions.ReceiveDefinitions) {\n    return keyBy(action.definitions, 'key');\n  }\n  return state;\n}\n\nexport function getDefinition(state: State, key: string) {\n  return state[key];\n}\n\nexport function getAllDefinitions(state: State) {\n  return Object.keys(state).map(key => state[key]);\n}\n\nexport function getDefinitionsForCategory(state: State, category: string) {\n  return getAllDefinitions(state).filter(\n    definition => definition.category.toLowerCase() === category.toLowerCase()\n  );\n}\n\nexport function getAllCategories(state: State) {\n  return uniqBy(\n    getAllDefinitions(state).map(definition => definition.category),\n    category => category.toLowerCase()\n  );\n}\n\nexport function getDefaultCategory(state: State) {\n  const categories = getAllCategories(state);\n  if (categories.includes(DEFAULT_CATEGORY)) {\n    return DEFAULT_CATEGORY;\n  } else {\n    const sortedCategories = sortBy(categories, category =>\n      getCategoryName(category).toLowerCase()\n    );\n    return sortedCategories[0];\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { getBranchLikeKey } from '../helpers/branch-like';\nimport { BranchLike } from '../types/branch-like';\nimport { QualityGateStatusCondition } from '../types/quality-gates';\nimport { ActionType } from './utils/actions';\n\nexport interface BranchStatusData {\n  conditions?: QualityGateStatusCondition[];\n  ignoredConditions?: boolean;\n  status?: T.Status;\n}\n\nexport interface State {\n  byComponent: T.Dict<T.Dict<BranchStatusData>>;\n}\n\nconst enum Actions {\n  RegisterBranchStatus = 'REGISTER_BRANCH_STATUS'\n}\n\ntype Action = ActionType<typeof registerBranchStatusAction, Actions.RegisterBranchStatus>;\n\nexport function registerBranchStatusAction(\n  branchLike: BranchLike,\n  component: string,\n  status: T.Status,\n  conditions?: QualityGateStatusCondition[],\n  ignoredConditions?: boolean\n) {\n  return {\n    type: Actions.RegisterBranchStatus,\n    branchLike,\n    component,\n    conditions,\n    ignoredConditions,\n    status\n  };\n}\n\nexport default function(state: State = { byComponent: {} }, action: Action): State {\n  if (action.type === Actions.RegisterBranchStatus) {\n    const { component, conditions, branchLike, ignoredConditions, status } = action;\n    const branchLikeKey = getBranchLikeKey(branchLike);\n    return {\n      byComponent: {\n        ...state.byComponent,\n        [component]: {\n          ...(state.byComponent[component] || {}),\n          [branchLikeKey]: {\n            conditions,\n            ignoredConditions,\n            status\n          }\n        }\n      }\n    };\n  }\n\n  return state;\n}\n\nexport function getBranchStatusByBranchLike(\n  state: State,\n  component: string,\n  branchLike: BranchLike\n): BranchStatusData {\n  const branchLikeKey = getBranchLikeKey(branchLike);\n  return state.byComponent[component] && state.byComponent[component][branchLikeKey];\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { keyBy } from 'lodash';\nimport { combineReducers } from 'redux';\nimport { ActionType } from './utils/actions';\n\nexport function receiveMetrics(metrics: T.Metric[]) {\n  return { type: 'RECEIVE_METRICS', metrics };\n}\n\ntype Action = ActionType<typeof receiveMetrics, 'RECEIVE_METRICS'>;\n\nexport type State = { byKey: T.Dict<T.Metric>; keys: string[] };\n\nconst byKey = (state: State['byKey'] = {}, action: Action) => {\n  if (action.type === 'RECEIVE_METRICS') {\n    return keyBy(action.metrics, 'key');\n  }\n  return state;\n};\n\nconst keys = (state: State['keys'] = [], action: Action) => {\n  if (action.type === 'RECEIVE_METRICS') {\n    return action.metrics.map(f => f.key);\n  }\n\n  return state;\n};\n\nexport default combineReducers({ byKey, keys });\n\nexport function getMetrics(state: State) {\n  return state.byKey;\n}\n\nexport function getMetricsKey(state: State) {\n  return state.keys;\n}\n\nexport function getMetricByKey(state: State, key: string) {\n  return state.byKey[key];\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport {\n  QualityGateApplicationStatusChildProject,\n  QualityGateProjectStatus,\n  QualityGateStatusCondition\n} from '../types/quality-gates';\n\nexport function extractStatusConditionsFromProjectStatus(\n  projectStatus: QualityGateProjectStatus\n): QualityGateStatusCondition[] {\n  const { conditions } = projectStatus;\n  return conditions\n    ? conditions.map(c => ({\n        actual: c.actualValue,\n        error: c.errorThreshold,\n        level: c.status,\n        metric: c.metricKey,\n        op: c.comparator,\n        period: c.periodIndex\n      }))\n    : [];\n}\n\nexport function extractStatusConditionsFromApplicationStatusChildProject(\n  projectStatus: QualityGateApplicationStatusChildProject\n): QualityGateStatusCondition[] {\n  const { conditions } = projectStatus;\n  return conditions\n    ? conditions.map(c => ({\n        actual: c.value,\n        error: c.errorThreshold,\n        level: c.status,\n        metric: c.metric,\n        op: c.comparator,\n        period: c.periodIndex\n      }))\n    : [];\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { IndexationContext } from '../../app/components/indexation/IndexationContext';\nimport PageUnavailableDueToIndexation, {\n  PageContext\n} from '../../app/components/indexation/PageUnavailableDueToIndexation';\n\nexport default function withIndexationGuard<P>(\n  WrappedComponent: React.ComponentType<P>,\n  pageContext: PageContext\n) {\n  return class WithIndexationGuard extends React.PureComponent<P> {\n    render() {\n      return (\n        <IndexationContext.Consumer>\n          {context =>\n            context?.status.isCompleted && !context?.status.hasFailures ? (\n              <WrappedComponent {...this.props} />\n            ) : (\n              <PageUnavailableDueToIndexation pageContext={pageContext} />\n            )\n          }\n        </IndexationContext.Consumer>\n      );\n    }\n  };\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { IndexationContext } from '../../app/components/indexation/IndexationContext';\nimport { IndexationContextInterface } from '../../types/indexation';\nimport { getWrappedDisplayName } from './utils';\n\nexport interface WithIndexationContextProps {\n  indexationContext: IndexationContextInterface;\n}\n\nexport default function withIndexationContext<P>(\n  WrappedComponent: React.ComponentType<P & WithIndexationContextProps>\n) {\n  return class WithIndexationContext extends React.PureComponent<\n    Omit<P, keyof WithIndexationContextProps>\n  > {\n    static displayName = getWrappedDisplayName(WrappedComponent, 'withIndexationContext');\n\n    render() {\n      return (\n        <IndexationContext.Consumer>\n          {indexationContext => {\n            if (indexationContext) {\n              return (\n                <WrappedComponent indexationContext={indexationContext} {...(this.props as P)} />\n              );\n            }\n\n            return null;\n          }}\n        </IndexationContext.Consumer>\n      );\n    }\n  };\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { sortBy } from 'lodash';\nimport { ComponentQualifier } from '../../../../js/types/component';\n\nconst ORDER = [\n  ComponentQualifier.Developper,\n  ComponentQualifier.Portfolio,\n  ComponentQualifier.SubPortfolio,\n  ComponentQualifier.Application,\n  ComponentQualifier.Project,\n  ComponentQualifier.SubProject\n];\n\nexport function sortQualifiers(qualifiers: string[]) {\n  return sortBy(qualifiers, qualifier => ORDER.indexOf(qualifier as ComponentQualifier));\n}\n\nexport interface ComponentResult {\n  isFavorite?: boolean;\n  isRecentlyBrowsed?: boolean;\n  key: string;\n  match?: string;\n  name: string;\n  project?: string;\n  qualifier: string;\n}\n\nexport interface Results {\n  [qualifier: string]: ComponentResult[];\n}\n\nexport interface More {\n  [qualifier: string]: number;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { getJSON } from 'sonar-ui-common/helpers/request';\nimport throwGlobalError from '../app/utils/throwGlobalError';\n\nexport interface License {\n  contactEmail: string;\n  edition: string;\n  expiresAt: string;\n  isExpired: boolean;\n  isOfficialDistribution: boolean;\n  isSupported: boolean;\n  isValidEdition: boolean;\n  isValidServerId: boolean;\n  loc: number;\n  maxLoc: number;\n  plugins: string[];\n  remainingLocThreshold: number;\n  serverId: string;\n  type: string;\n}\n\nexport function isValidLicense(): Promise<{ isValidLicense: boolean }> {\n  return getJSON('/api/editions/is_valid_license');\n}\n\nexport function showLicense(): Promise<License> {\n  return getJSON('/api/editions/show_license').catch((response: Response) => {\n    if (response && response.status === 404) {\n      return undefined;\n    }\n    return throwGlobalError(response);\n  });\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { omit, uniqBy } from 'lodash';\nimport * as React from 'react';\nimport { lazyLoadComponent } from 'sonar-ui-common/components/lazyLoadComponent';\nimport { get, save } from 'sonar-ui-common/helpers/storage';\nimport { getRulesApp } from '../../api/rules';\nimport { ComponentDescriptor, RuleDescriptor, WorkspaceContext } from './context';\nimport './styles.css';\nimport WorkspacePortal from './WorkspacePortal';\n\nconst WORKSPACE = 'sonarqube-workspace';\nconst WorkspaceNav = lazyLoadComponent(() => import('./WorkspaceNav'), 'WorkspaceNav');\nconst WorkspaceRuleViewer = lazyLoadComponent(\n  () => import('./WorkspaceRuleViewer'),\n  'WorkspaceRuleViewer'\n);\nconst WorkspaceComponentViewer = lazyLoadComponent(\n  () => import('./WorkspaceComponentViewer'),\n  'WorkspaceComponentViewer'\n);\n\ninterface State {\n  components: ComponentDescriptor[];\n  externalRulesRepoNames: T.Dict<string>;\n  height: number;\n  maximized?: boolean;\n  open: { component?: string; rule?: string };\n  rules: RuleDescriptor[];\n}\n\nexport const MIN_HEIGHT = 0.05;\nexport const MAX_HEIGHT = 0.85;\nexport const INITIAL_HEIGHT = 300;\n\nexport const TYPE_KEY = '__type__';\nexport enum WorkspaceTypes {\n  Rule = 'rule',\n  Component = 'component'\n}\n\nexport default class Workspace extends React.PureComponent<{}, State> {\n  mounted = false;\n\n  constructor(props: {}) {\n    super(props);\n    this.state = {\n      externalRulesRepoNames: {},\n      height: INITIAL_HEIGHT,\n      open: {},\n      ...this.loadWorkspace()\n    };\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n    this.fetchRuleNames();\n  }\n\n  componentDidUpdate(_: {}, prevState: State) {\n    if (prevState.components !== this.state.components || prevState.rules !== this.state.rules) {\n      this.saveWorkspace();\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  fetchRuleNames = async () => {\n    const { repositories } = await getRulesApp();\n    const externalRulesRepoNames: T.Dict<string> = {};\n    repositories\n      .filter(({ key }) => key.startsWith('external_'))\n      .forEach(({ key, name }) => {\n        externalRulesRepoNames[key.replace('external_', '')] = name;\n      });\n    this.setState({ externalRulesRepoNames });\n  };\n\n  loadWorkspace = () => {\n    try {\n      const data: any[] = JSON.parse(get(WORKSPACE) || '');\n      const components: ComponentDescriptor[] = data.filter(\n        x => x[TYPE_KEY] === WorkspaceTypes.Component\n      );\n      const rules: RuleDescriptor[] = data.filter(x => x[TYPE_KEY] === WorkspaceTypes.Rule);\n      return { components, rules };\n    } catch {\n      // Fail silently.\n      return { components: [], rules: [] };\n    }\n  };\n\n  saveWorkspace = () => {\n    const data = [\n      // Do not save line number, next time the file is open, it should be open\n      // on the first line.\n      ...this.state.components.map(x =>\n        omit({ ...x, [TYPE_KEY]: WorkspaceTypes.Component }, 'line')\n      ),\n      ...this.state.rules.map(x => ({ ...x, [TYPE_KEY]: WorkspaceTypes.Rule }))\n    ];\n    save(WORKSPACE, JSON.stringify(data));\n  };\n\n  handleOpenComponent = (component: ComponentDescriptor) => {\n    this.setState((state: State) => ({\n      components: uniqBy([...state.components, component], c => c.key),\n      open: { component: component.key }\n    }));\n  };\n\n  handleComponentReopen = (componentKey: string) => {\n    this.setState({ open: { component: componentKey } });\n  };\n\n  handleOpenRule = (rule: RuleDescriptor) => {\n    this.setState((state: State) => ({\n      open: { rule: rule.key },\n      rules: uniqBy([...state.rules, rule], r => r.key)\n    }));\n  };\n\n  handleRuleReopen = (ruleKey: string) => {\n    this.setState({ open: { rule: ruleKey } });\n  };\n\n  handleComponentClose = (componentKey: string) => {\n    this.setState((state: State) => ({\n      components: state.components.filter(x => x.key !== componentKey),\n      open: {\n        ...state.open,\n        component: state.open.component === componentKey ? undefined : state.open.component\n      }\n    }));\n  };\n\n  handleRuleClose = (ruleKey: string) => {\n    this.setState((state: State) => ({\n      rules: state.rules.filter(x => x.key !== ruleKey),\n      open: {\n        ...state.open,\n        rule: state.open.rule === ruleKey ? undefined : state.open.rule\n      }\n    }));\n  };\n\n  handleComponentLoad = (details: { key: string; name: string; qualifier: string }) => {\n    if (this.mounted) {\n      const { key, name, qualifier } = details;\n      this.setState((state: State) => ({\n        components: state.components.map(component =>\n          component.key === key ? { ...component, name, qualifier } : component\n        )\n      }));\n    }\n  };\n\n  handleRuleLoad = (details: { key: string; name: string }) => {\n    if (this.mounted) {\n      const { key, name } = details;\n      this.setState((state: State) => ({\n        rules: state.rules.map(rule => (rule.key === key ? { ...rule, name } : rule))\n      }));\n    }\n  };\n\n  handleCollapse = () => {\n    this.setState({ open: {} });\n  };\n\n  handleMaximize = () => {\n    this.setState({ maximized: true });\n  };\n\n  handleMinimize = () => {\n    this.setState({ maximized: false });\n  };\n\n  handleResize = (deltaY: number) => {\n    const minHeight = window.innerHeight * MIN_HEIGHT;\n    const maxHeight = window.innerHeight * MAX_HEIGHT;\n    this.setState((state: State) => ({\n      height: Math.min(maxHeight, Math.max(minHeight, state.height - deltaY))\n    }));\n  };\n\n  render() {\n    const { components, externalRulesRepoNames, height, maximized, open, rules } = this.state;\n\n    const openComponent = open.component && components.find(x => x.key === open.component);\n    const openRule = open.rule && rules.find(x => x.key === open.rule);\n\n    const actualHeight = maximized ? window.innerHeight * MAX_HEIGHT : height;\n\n    return (\n      <WorkspaceContext.Provider\n        value={{\n          externalRulesRepoNames,\n          openComponent: this.handleOpenComponent,\n          openRule: this.handleOpenRule\n        }}>\n        {this.props.children}\n        <WorkspacePortal>\n          {(components.length > 0 || rules.length > 0) && (\n            <WorkspaceNav\n              components={components}\n              onComponentClose={this.handleComponentClose}\n              onComponentOpen={this.handleComponentReopen}\n              onRuleClose={this.handleRuleClose}\n              onRuleOpen={this.handleRuleReopen}\n              open={open}\n              rules={rules}\n            />\n          )}\n          {openComponent && (\n            <WorkspaceComponentViewer\n              component={openComponent}\n              height={actualHeight}\n              maximized={maximized}\n              onClose={this.handleComponentClose}\n              onCollapse={this.handleCollapse}\n              onLoad={this.handleComponentLoad}\n              onMaximize={this.handleMaximize}\n              onMinimize={this.handleMinimize}\n              onResize={this.handleResize}\n            />\n          )}\n          {openRule && (\n            <WorkspaceRuleViewer\n              height={actualHeight}\n              maximized={maximized}\n              onClose={this.handleRuleClose}\n              onCollapse={this.handleCollapse}\n              onLoad={this.handleRuleLoad}\n              onMaximize={this.handleMaximize}\n              onMinimize={this.handleMinimize}\n              onResize={this.handleResize}\n              rule={openRule}\n            />\n          )}\n        </WorkspacePortal>\n      </WorkspaceContext.Provider>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { createPortal } from 'react-dom';\n\nexport default class WorkspacePortal extends React.PureComponent {\n  el: HTMLElement;\n\n  constructor(props: {}) {\n    super(props);\n    this.el = document.createElement('div');\n    this.el.classList.add('workspace');\n  }\n\n  componentDidMount() {\n    document.body.appendChild(this.el);\n  }\n\n  componentWillUnmount() {\n    document.body.removeChild(this.el);\n  }\n\n  render() {\n    return createPortal(this.props.children, this.el);\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { sortBy } from 'lodash';\nimport * as React from 'react';\nimport { A11yContext } from './A11yContext';\n\ninterface State {\n  links: T.A11ySkipLink[];\n}\n\nexport default class A11yProvider extends React.Component<{}, State> {\n  keys: string[] = [];\n  state: State = { links: [] };\n\n  addA11ySkipLink = (link: T.A11ySkipLink) => {\n    this.setState(prevState => {\n      const links = [...prevState.links];\n      links.push({ ...link, weight: link.weight || 0 });\n      return { links };\n    });\n  };\n\n  removeA11ySkipLink = (link: T.A11ySkipLink) => {\n    this.setState(prevState => {\n      const links = prevState.links.filter(l => l.key !== link.key);\n      return { links };\n    });\n  };\n\n  render() {\n    const links = sortBy(this.state.links, 'weight');\n    return (\n      <A11yContext.Provider\n        value={{\n          addA11ySkipLink: this.addA11ySkipLink,\n          links,\n          removeA11ySkipLink: this.removeA11ySkipLink\n        }}>\n        {this.props.children}\n      </A11yContext.Provider>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { A11yContext } from './A11yContext';\nimport './A11ySkipLinks.css';\n\nexport default function A11ySkipLinks() {\n  return (\n    <A11yContext.Consumer>\n      {({ links }) =>\n        links.map(link => (\n          <a className=\"a11y-skip-link\" href={`#a11y_target__${link.key}`} key={link.key}>\n            {link.label}\n          </a>\n        ))\n      }\n    </A11yContext.Consumer>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nexport interface IndexationStatus {\n  isCompleted: boolean;\n  percentCompleted: number;\n  hasFailures: boolean;\n}\n\nexport interface IndexationContextInterface {\n  status: IndexationStatus;\n}\n\nexport enum IndexationNotificationType {\n  InProgress = 'InProgress',\n  InProgressWithFailure = 'InProgressWithFailure',\n  Completed = 'Completed',\n  CompletedWithFailure = 'CompletedWithFailure'\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport suggestionsJson from 'Docs/EmbedDocsSuggestions.json';\nimport * as React from 'react';\nimport { isSonarCloud } from '../../../helpers/system';\nimport { SuggestionsContext } from './SuggestionsContext';\n\ntype SuggestionsJson = T.Dict<T.SuggestionLink[]>;\n\ninterface State {\n  suggestions: T.SuggestionLink[];\n}\n\nexport default class SuggestionsProvider extends React.Component<{}, State> {\n  keys: string[] = [];\n  state: State = { suggestions: [] };\n\n  fetchSuggestions = () => {\n    const jsonList = suggestionsJson as SuggestionsJson;\n    let suggestions: T.SuggestionLink[] = [];\n    this.keys.forEach(key => {\n      if (jsonList[key]) {\n        suggestions = [...jsonList[key], ...suggestions];\n      }\n    });\n    if (!isSonarCloud()) {\n      suggestions = suggestions.filter(suggestion => suggestion.scope !== 'sonarcloud');\n    }\n    this.setState({ suggestions });\n  };\n\n  addSuggestions = (newKey: string) => {\n    this.keys = [...this.keys, newKey];\n    this.fetchSuggestions();\n  };\n\n  removeSuggestions = (oldKey: string) => {\n    this.keys = this.keys.filter(key => key !== oldKey);\n    this.fetchSuggestions();\n  };\n\n  render() {\n    return (\n      <SuggestionsContext.Provider\n        value={{\n          addSuggestions: this.addSuggestions,\n          removeSuggestions: this.removeSuggestions,\n          suggestions: this.state.suggestions\n        }}>\n        {this.props.children}\n      </SuggestionsContext.Provider>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { get, remove, save } from 'sonar-ui-common/helpers/storage';\nimport { getIndexationStatus } from '../../../api/ce';\nimport { IndexationStatus } from '../../../types/indexation';\n\nconst POLLING_INTERVAL_MS = 5000;\nconst LS_INDEXATION_COMPLETED_NOTIFICATION_SHOULD_BE_DISPLAYED =\n  'display_indexation_completed_notification';\n\nexport default class IndexationNotificationHelper {\n  private static interval?: NodeJS.Timeout;\n\n  static startPolling(onNewStatus: (status: IndexationStatus) => void) {\n    this.stopPolling();\n\n    // eslint-disable-next-line promise/catch-or-return\n    this.poll(onNewStatus).then(status => {\n      if (!status.isCompleted) {\n        this.interval = setInterval(() => this.poll(onNewStatus), POLLING_INTERVAL_MS);\n      }\n    });\n  }\n\n  static stopPolling() {\n    if (this.interval) {\n      clearInterval(this.interval);\n    }\n  }\n\n  static async poll(onNewStatus: (status: IndexationStatus) => void) {\n    const status = await getIndexationStatus();\n\n    onNewStatus(status);\n\n    if (status.isCompleted) {\n      this.stopPolling();\n    }\n\n    return status;\n  }\n\n  static markCompletedNotificationAsToDisplay() {\n    save(LS_INDEXATION_COMPLETED_NOTIFICATION_SHOULD_BE_DISPLAYED, true.toString());\n  }\n\n  static markCompletedNotificationAsDisplayed() {\n    remove(LS_INDEXATION_COMPLETED_NOTIFICATION_SHOULD_BE_DISPLAYED);\n  }\n\n  static shouldDisplayCompletedNotification() {\n    return JSON.parse(\n      get(LS_INDEXATION_COMPLETED_NOTIFICATION_SHOULD_BE_DISPLAYED) || false.toString()\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n/* eslint-disable react/no-unused-state */\nimport * as React from 'react';\nimport { withAppState } from '../../../components/hoc/withAppState';\nimport { IndexationContextInterface, IndexationStatus } from '../../../types/indexation';\nimport { IndexationContext } from './IndexationContext';\nimport IndexationNotificationHelper from './IndexationNotificationHelper';\n\ninterface Props {\n  appState: Pick<T.AppState, 'needIssueSync'>;\n}\n\nexport class IndexationContextProvider extends React.PureComponent<\n  React.PropsWithChildren<Props>,\n  IndexationContextInterface\n> {\n  mounted = false;\n\n  componentDidMount() {\n    this.mounted = true;\n\n    if (this.props.appState.needIssueSync) {\n      IndexationNotificationHelper.startPolling(this.handleNewStatus);\n    } else {\n      this.setState({ status: { isCompleted: true, percentCompleted: 100, hasFailures: false } });\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n\n    IndexationNotificationHelper.stopPolling();\n  }\n\n  handleNewStatus = (newIndexationStatus: IndexationStatus) => {\n    if (this.mounted) {\n      this.setState({ status: newIndexationStatus });\n    }\n  };\n\n  render() {\n    return (\n      <IndexationContext.Provider value={this.state}>\n        {this.props.children}\n      </IndexationContext.Provider>\n    );\n  }\n}\n\nexport default withAppState(IndexationContextProvider);\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { FormattedMessage } from 'react-intl';\nimport { Link } from 'react-router';\nimport { Alert, AlertProps } from 'sonar-ui-common/components/ui/Alert';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { IndexationNotificationType } from '../../../types/indexation';\nimport { TaskStatuses, TaskTypes } from '../../../types/tasks';\n\nexport interface IndexationNotificationRendererProps {\n  type: IndexationNotificationType;\n  percentCompleted: number;\n  isSystemAdmin: boolean;\n}\n\nconst NOTIFICATION_VARIANTS: { [key in IndexationNotificationType]: AlertProps['variant'] } = {\n  [IndexationNotificationType.InProgress]: 'warning',\n  [IndexationNotificationType.InProgressWithFailure]: 'error',\n  [IndexationNotificationType.Completed]: 'success',\n  [IndexationNotificationType.CompletedWithFailure]: 'error'\n};\n\nexport default function IndexationNotificationRenderer(props: IndexationNotificationRendererProps) {\n  const { type } = props;\n\n  return (\n    <div className=\"indexation-notification-wrapper\">\n      <Alert\n        className=\"indexation-notification-banner\"\n        display=\"banner\"\n        variant={NOTIFICATION_VARIANTS[type]}>\n        <div className=\"display-flex-center\">\n          {type === IndexationNotificationType.Completed && renderCompletedBanner(props)}\n          {type === IndexationNotificationType.CompletedWithFailure &&\n            renderCompletedWithFailureBanner(props)}\n          {type === IndexationNotificationType.InProgress && renderInProgressBanner(props)}\n          {type === IndexationNotificationType.InProgressWithFailure &&\n            renderInProgressWithFailureBanner(props)}\n        </div>\n      </Alert>\n    </div>\n  );\n}\n\nfunction renderCompletedBanner(_props: IndexationNotificationRendererProps) {\n  return <span className=\"spacer-right\">{translate('indexation.completed')}</span>;\n}\n\nfunction renderCompletedWithFailureBanner(props: IndexationNotificationRendererProps) {\n  const { isSystemAdmin } = props;\n\n  return (\n    <span className=\"spacer-right\">\n      <FormattedMessage\n        id=\"indexation.completed_with_error\"\n        defaultMessage={translate('indexation.completed_with_error')}\n        values={{\n          link: isSystemAdmin\n            ? renderBackgroundTasksPageLink(true, translate('indexation.completed_with_error.link'))\n            : translate('indexation.completed_with_error.link')\n        }}\n      />\n    </span>\n  );\n}\n\nfunction renderInProgressBanner(props: IndexationNotificationRendererProps) {\n  const { percentCompleted, isSystemAdmin } = props;\n\n  return (\n    <>\n      <span className=\"spacer-right\">{translate('indexation.in_progress')}</span>\n      <i className=\"spinner spacer-right\" />\n      <span className=\"spacer-right\">\n        {translateWithParameters('indexation.progression', percentCompleted)}\n      </span>\n      {isSystemAdmin && (\n        <span className=\"spacer-right\">\n          <FormattedMessage\n            id=\"indexation.admin_link\"\n            defaultMessage={translate('indexation.admin_link')}\n            values={{\n              link: renderBackgroundTasksPageLink(false, translate('background_tasks.page'))\n            }}\n          />\n        </span>\n      )}\n    </>\n  );\n}\n\nfunction renderInProgressWithFailureBanner(props: IndexationNotificationRendererProps) {\n  const { percentCompleted, isSystemAdmin } = props;\n\n  return (\n    <>\n      <span className=\"spacer-right\">{translate('indexation.in_progress')}</span>\n      <i className=\"spinner spacer-right\" />\n      <span className=\"spacer-right\">\n        <FormattedMessage\n          id=\"indexation.progression_with_error\"\n          defaultMessage={translateWithParameters(\n            'indexation.progression_with_error',\n            percentCompleted\n          )}\n          values={{\n            link: isSystemAdmin\n              ? renderBackgroundTasksPageLink(\n                  true,\n                  translate('indexation.progression_with_error.link')\n                )\n              : translate('indexation.progression_with_error.link')\n          }}\n        />\n      </span>\n    </>\n  );\n}\n\nfunction renderBackgroundTasksPageLink(hasError: boolean, text: string) {\n  return (\n    <Link\n      to={{\n        pathname: '/admin/background_tasks',\n        query: {\n          taskType: TaskTypes.IssueSync,\n          status: hasError ? TaskStatuses.Failed : undefined\n        }\n      }}>\n      {text}\n    </Link>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { withCurrentUser } from '../../../components/hoc/withCurrentUser';\nimport withIndexationContext, {\n  WithIndexationContextProps\n} from '../../../components/hoc/withIndexationContext';\nimport { hasGlobalPermission, isLoggedIn } from '../../../helpers/users';\nimport { IndexationNotificationType } from '../../../types/indexation';\nimport './IndexationNotification.css';\nimport IndexationNotificationHelper from './IndexationNotificationHelper';\nimport IndexationNotificationRenderer from './IndexationNotificationRenderer';\n\ninterface Props extends WithIndexationContextProps {\n  currentUser: T.CurrentUser;\n}\n\ninterface State {\n  notificationType?: IndexationNotificationType;\n}\n\nexport class IndexationNotification extends React.PureComponent<Props, State> {\n  state: State = {};\n  isSystemAdmin = false;\n\n  constructor(props: Props) {\n    super(props);\n\n    this.isSystemAdmin =\n      isLoggedIn(this.props.currentUser) && hasGlobalPermission(this.props.currentUser, 'admin');\n  }\n\n  componentDidMount() {\n    this.refreshNotification();\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (prevProps.indexationContext.status !== this.props.indexationContext.status) {\n      this.refreshNotification();\n    }\n  }\n\n  refreshNotification() {\n    const { isCompleted, hasFailures } = this.props.indexationContext.status;\n\n    if (!isCompleted) {\n      IndexationNotificationHelper.markCompletedNotificationAsToDisplay();\n      this.setState({\n        notificationType: hasFailures\n          ? IndexationNotificationType.InProgressWithFailure\n          : IndexationNotificationType.InProgress\n      });\n    } else if (hasFailures) {\n      this.setState({ notificationType: IndexationNotificationType.CompletedWithFailure });\n    } else if (IndexationNotificationHelper.shouldDisplayCompletedNotification()) {\n      this.setState({\n        notificationType: IndexationNotificationType.Completed\n      });\n      IndexationNotificationHelper.markCompletedNotificationAsDisplayed();\n    } else {\n      this.setState({ notificationType: undefined });\n    }\n  }\n\n  render() {\n    const { notificationType } = this.state;\n    const {\n      indexationContext: {\n        status: { percentCompleted }\n      }\n    } = this.props;\n\n    if (notificationType === undefined) {\n      return null;\n    }\n\n    return (\n      <IndexationNotificationRenderer\n        type={notificationType}\n        percentCompleted={percentCompleted}\n        isSystemAdmin={this.isSystemAdmin}\n      />\n    );\n  }\n}\n\nexport default withCurrentUser(withIndexationContext(IndexationNotification));\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ButtonLink } from 'sonar-ui-common/components/controls/buttons';\nimport Toggler from 'sonar-ui-common/components/controls/Toggler';\nimport HelpIcon from 'sonar-ui-common/components/icons/HelpIcon';\nimport { lazyLoadComponent } from 'sonar-ui-common/components/lazyLoadComponent';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\n\nconst EmbedDocsPopup = lazyLoadComponent(() => import('./EmbedDocsPopup'));\n\ninterface State {\n  helpOpen: boolean;\n}\n\nexport default class EmbedDocsPopupHelper extends React.PureComponent<{}, State> {\n  mounted = false;\n  state: State = { helpOpen: false };\n\n  setHelpDisplay = (helpOpen: boolean) => {\n    this.setState({ helpOpen });\n  };\n\n  handleClick = () => {\n    this.toggleHelp();\n  };\n\n  toggleHelp = () => {\n    this.setState(state => {\n      return { helpOpen: !state.helpOpen };\n    });\n  };\n\n  closeHelp = () => {\n    this.setState({ helpOpen: false });\n  };\n\n  render() {\n    return (\n      <li className=\"dropdown\">\n        <Toggler\n          onRequestClose={this.closeHelp}\n          open={this.state.helpOpen}\n          overlay={<EmbedDocsPopup onClose={this.closeHelp} />}>\n          <ButtonLink\n            aria-expanded={this.state.helpOpen}\n            aria-haspopup={true}\n            className=\"navbar-help navbar-icon\"\n            onClick={this.handleClick}\n            title={translate('help')}>\n            <HelpIcon />\n          </ButtonLink>\n        </Toggler>\n      </li>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as key from 'keymaster';\nimport { debounce, keyBy, uniqBy } from 'lodash';\nimport * as React from 'react';\nimport { FormattedMessage } from 'react-intl';\nimport { withRouter, WithRouterProps } from 'react-router';\nimport { DropdownOverlay } from 'sonar-ui-common/components/controls/Dropdown';\nimport OutsideClickHandler from 'sonar-ui-common/components/controls/OutsideClickHandler';\nimport SearchBox from 'sonar-ui-common/components/controls/SearchBox';\nimport ClockIcon from 'sonar-ui-common/components/icons/ClockIcon';\nimport { lazyLoadComponent } from 'sonar-ui-common/components/lazyLoadComponent';\nimport DeferredSpinner from 'sonar-ui-common/components/ui/DeferredSpinner';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { scrollToElement } from 'sonar-ui-common/helpers/scrolling';\nimport { getSuggestions } from '../../../api/components';\nimport { getComponentOverviewUrl } from '../../../helpers/urls';\nimport { ComponentQualifier } from '../../../types/component';\nimport RecentHistory from '../RecentHistory';\nimport './Search.css';\nimport { ComponentResult, More, Results, sortQualifiers } from './utils';\n\nconst SearchResults = lazyLoadComponent(() => import('./SearchResults'));\nconst SearchResult = lazyLoadComponent(() => import('./SearchResult'));\n\ninterface OwnProps {\n  currentUser: T.CurrentUser;\n}\n\ntype Props = OwnProps & WithRouterProps;\n\ninterface State {\n  loading: boolean;\n  loadingMore?: string;\n  more: More;\n  open: boolean;\n  projects: T.Dict<{ name: string }>;\n  query: string;\n  results: Results;\n  selected?: string;\n  shortQuery: boolean;\n}\n\nexport class Search extends React.PureComponent<Props, State> {\n  input?: HTMLInputElement | null;\n  node?: HTMLElement | null;\n  nodes: T.Dict<HTMLElement>;\n  mounted = false;\n\n  constructor(props: Props) {\n    super(props);\n    this.nodes = {};\n    this.search = debounce(this.search, 250);\n    this.state = {\n      loading: false,\n      more: {},\n      open: false,\n      projects: {},\n      query: '',\n      results: {},\n      shortQuery: false\n    };\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n    key('s', () => {\n      this.focusInput();\n      this.openSearch();\n      return false;\n    });\n  }\n\n  componentWillUpdate() {\n    this.nodes = {};\n  }\n\n  componentDidUpdate(_prevProps: Props, prevState: State) {\n    if (prevState.selected !== this.state.selected) {\n      this.scrollToSelected();\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n    key.unbind('s');\n  }\n\n  focusInput = () => {\n    if (this.input) {\n      this.input.focus();\n    }\n  };\n\n  handleClickOutside = () => {\n    this.closeSearch(false);\n  };\n\n  handleFocus = () => {\n    if (!this.state.open) {\n      // simulate click to close any other dropdowns\n      const body = document.documentElement;\n      if (body) {\n        body.click();\n      }\n    }\n    this.openSearch();\n  };\n\n  openSearch = () => {\n    if (!this.state.open && !this.state.query) {\n      this.search('');\n    }\n    this.setState({ open: true });\n  };\n\n  closeSearch = (clear = true) => {\n    if (this.input) {\n      this.input.blur();\n    }\n    if (clear) {\n      this.setState({\n        more: {},\n        open: false,\n        projects: {},\n        query: '',\n        results: {},\n        selected: undefined,\n        shortQuery: false\n      });\n    } else {\n      this.setState({ open: false });\n    }\n  };\n\n  getPlainComponentsList = (results: Results, more: More) =>\n    sortQualifiers(Object.keys(results)).reduce((components, qualifier) => {\n      const next = [...components, ...results[qualifier].map(component => component.key)];\n      if (more[qualifier]) {\n        next.push('qualifier###' + qualifier);\n      }\n      return next;\n    }, []);\n\n  stopLoading = () => {\n    if (this.mounted) {\n      this.setState({ loading: false });\n    }\n  };\n\n  search = (query: string) => {\n    if (query.length === 0 || query.length >= 2) {\n      this.setState({ loading: true });\n      const recentlyBrowsed = RecentHistory.get().map(component => component.key);\n      getSuggestions(query, recentlyBrowsed).then(response => {\n        // compare `this.state.query` and `query` to handle two request done almost at the same time\n        // in this case only the request that matches the current query should be taken\n        if (this.mounted && this.state.query === query) {\n          const results: Results = {};\n          const more: More = {};\n          response.results.forEach(group => {\n            results[group.q] = group.items.map(item => ({ ...item, qualifier: group.q }));\n            more[group.q] = group.more;\n          });\n          const list = this.getPlainComponentsList(results, more);\n          this.setState(state => ({\n            loading: false,\n            more,\n            projects: { ...state.projects, ...keyBy(response.projects, 'key') },\n            results,\n            selected: list.length > 0 ? list[0] : undefined,\n            shortQuery: query.length > 2 && response.warning === 'short_input'\n          }));\n        }\n      }, this.stopLoading);\n    } else {\n      this.setState({ loading: false });\n    }\n  };\n\n  searchMore = (qualifier: string) => {\n    const { query } = this.state;\n    if (query.length === 1) {\n      return;\n    }\n\n    this.setState({ loading: true, loadingMore: qualifier });\n    const recentlyBrowsed = RecentHistory.get().map(component => component.key);\n    getSuggestions(query, recentlyBrowsed, qualifier).then(response => {\n      if (this.mounted) {\n        const group = response.results.find(group => group.q === qualifier);\n        const moreResults = (group ? group.items : []).map(item => ({ ...item, qualifier }));\n        this.setState(state => ({\n          loading: false,\n          loadingMore: undefined,\n          more: { ...state.more, [qualifier]: 0 },\n          projects: { ...state.projects, ...keyBy(response.projects, 'key') },\n          results: {\n            ...state.results,\n            [qualifier]: uniqBy([...state.results[qualifier], ...moreResults], 'key')\n          },\n          selected: moreResults.length > 0 ? moreResults[0].key : state.selected\n        }));\n        this.focusInput();\n      }\n    }, this.stopLoading);\n  };\n\n  handleQueryChange = (query: string) => {\n    this.setState({ query, shortQuery: query.length === 1 });\n    this.search(query);\n  };\n\n  selectPrevious = () => {\n    this.setState(({ more, results, selected }) => {\n      if (selected) {\n        const list = this.getPlainComponentsList(results, more);\n        const index = list.indexOf(selected);\n        return index > 0 ? { selected: list[index - 1] } : null;\n      } else {\n        return null;\n      }\n    });\n  };\n\n  selectNext = () => {\n    this.setState(({ more, results, selected }) => {\n      if (selected) {\n        const list = this.getPlainComponentsList(results, more);\n        const index = list.indexOf(selected);\n        return index >= 0 && index < list.length - 1 ? { selected: list[index + 1] } : null;\n      } else {\n        return null;\n      }\n    });\n  };\n\n  openSelected = () => {\n    const { results, selected } = this.state;\n\n    if (!selected) {\n      return;\n    }\n\n    if (selected.startsWith('qualifier###')) {\n      this.searchMore(selected.substr(12));\n    } else {\n      let qualifier = ComponentQualifier.Project;\n\n      if ((results[ComponentQualifier.Portfolio] ?? []).find(r => r.key === selected)) {\n        qualifier = ComponentQualifier.Portfolio;\n      } else if ((results[ComponentQualifier.SubPortfolio] ?? []).find(r => r.key === selected)) {\n        qualifier = ComponentQualifier.SubPortfolio;\n      }\n\n      this.props.router.push(getComponentOverviewUrl(selected, qualifier));\n\n      this.closeSearch();\n    }\n  };\n\n  scrollToSelected = () => {\n    if (this.state.selected) {\n      const node = this.nodes[this.state.selected];\n      if (node && this.node) {\n        scrollToElement(node, { topOffset: 30, bottomOffset: 30, parent: this.node });\n      }\n    }\n  };\n\n  handleKeyDown = (event: React.KeyboardEvent) => {\n    switch (event.keyCode) {\n      case 13:\n        event.preventDefault();\n        this.openSelected();\n        return;\n      case 38:\n        event.preventDefault();\n        this.selectPrevious();\n        return;\n      case 40:\n        event.preventDefault();\n        this.selectNext();\n        // keep this return to prevent fall-through in case more cases will be adder later\n        // eslint-disable-next-line no-useless-return\n        return;\n    }\n  };\n\n  handleSelect = (selected: string) => {\n    this.setState({ selected });\n  };\n\n  innerRef = (component: string, node: HTMLElement | null) => {\n    if (node) {\n      this.nodes[component] = node;\n    }\n  };\n\n  searchInputRef = (node: HTMLInputElement | null) => {\n    this.input = node;\n  };\n\n  renderResult = (component: ComponentResult) => (\n    <SearchResult\n      component={component}\n      innerRef={this.innerRef}\n      key={component.key}\n      onClose={this.closeSearch}\n      onSelect={this.handleSelect}\n      projects={this.state.projects}\n      selected={this.state.selected === component.key}\n    />\n  );\n\n  renderNoResults = () => (\n    <div className=\"navbar-search-no-results\">\n      {translateWithParameters('no_results_for_x', this.state.query)}\n    </div>\n  );\n\n  render() {\n    const search = (\n      <li className=\"navbar-search dropdown\">\n        <DeferredSpinner className=\"navbar-search-icon\" loading={this.state.loading} />\n\n        <SearchBox\n          autoFocus={this.state.open}\n          innerRef={this.searchInputRef}\n          minLength={2}\n          onChange={this.handleQueryChange}\n          onFocus={this.handleFocus}\n          onKeyDown={this.handleKeyDown}\n          placeholder={translate('search.placeholder')}\n          value={this.state.query}\n        />\n\n        {this.state.shortQuery && (\n          <span className=\"navbar-search-input-hint\">\n            {translateWithParameters('select2.tooShort', 2)}\n          </span>\n        )}\n\n        {this.state.open && Object.keys(this.state.results).length > 0 && (\n          <DropdownOverlay noPadding={true}>\n            <div className=\"global-navbar-search-dropdown\" ref={node => (this.node = node)}>\n              <SearchResults\n                allowMore={this.state.query.length !== 1}\n                loadingMore={this.state.loadingMore}\n                more={this.state.more}\n                onMoreClick={this.searchMore}\n                onSelect={this.handleSelect}\n                renderNoResults={this.renderNoResults}\n                renderResult={this.renderResult}\n                results={this.state.results}\n                selected={this.state.selected}\n              />\n              <div className=\"dropdown-bottom-hint\">\n                <div className=\"pull-right\">\n                  <ClockIcon className=\"little-spacer-right\" size={12} />\n                  {translate('recently_browsed')}\n                </div>\n                <FormattedMessage\n                  defaultMessage={translate('search.shortcut_hint')}\n                  id=\"search.shortcut_hint\"\n                  values={{\n                    shortcut: <span className=\"shortcut-button shortcut-button-small\">s</span>\n                  }}\n                />\n              </div>\n            </div>\n          </DropdownOverlay>\n        )}\n      </li>\n    );\n\n    return this.state.open ? (\n      <OutsideClickHandler onClickOutside={this.handleClickOutside}>{search}</OutsideClickHandler>\n    ) : (\n      search\n    );\n  }\n}\n\nexport default withRouter<OwnProps>(Search);\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { connect } from 'react-redux';\nimport { Link } from 'react-router';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { getBaseUrl } from 'sonar-ui-common/helpers/urls';\nimport { getGlobalSettingValue, Store } from '../../../../store/rootReducer';\n\ninterface StateProps {\n  customLogoUrl?: string;\n  customLogoWidth?: string | number;\n}\n\nexport function GlobalNavBranding({ customLogoUrl, customLogoWidth }: StateProps) {\n  const title = translate('layout.sonar.slogan');\n  const url = customLogoUrl || `${getBaseUrl()}/images/logo.svg?v=6.6`;\n  const width = customLogoUrl ? customLogoWidth || 100 : 83;\n\n  return (\n    <Link className=\"navbar-brand\" to=\"/\">\n      <img alt={title} height={30} src={url} title={title} width={width} />\n    </Link>\n  );\n}\n\nexport function SonarCloudNavBranding() {\n  return (\n    <GlobalNavBranding\n      customLogoUrl={`${getBaseUrl()}/images/sonarcloud-logo.svg`}\n      customLogoWidth={105}\n    />\n  );\n}\n\nconst mapStateToProps = (state: Store): StateProps => {\n  const customLogoUrl = getGlobalSettingValue(state, 'sonar.lf.logoUrl');\n  const customLogoWidth = getGlobalSettingValue(state, 'sonar.lf.logoWidthPx');\n  return {\n    customLogoUrl: customLogoUrl && customLogoUrl.value,\n    customLogoWidth: customLogoWidth && customLogoWidth.value\n  };\n};\n\nexport default connect(mapStateToProps)(GlobalNavBranding);\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport Dropdown from 'sonar-ui-common/components/controls/Dropdown';\nimport DropdownIcon from 'sonar-ui-common/components/icons/DropdownIcon';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { isMySet } from '../../../../apps/issues/utils';\nimport { getQualityGatesUrl } from '../../../../helpers/urls';\nimport { ComponentQualifier } from '../../../../types/component';\n\ninterface Props {\n  appState: Pick<T.AppState, 'canAdmin' | 'globalPages' | 'qualifiers'>;\n  currentUser: T.CurrentUser;\n  location: { pathname: string };\n}\n\nexport default class GlobalNavMenu extends React.PureComponent<Props> {\n  renderProjects() {\n    const active =\n      this.props.location.pathname.startsWith('/projects') &&\n      this.props.location.pathname !== '/projects/create';\n\n    return (\n      <li>\n        <Link className={classNames({ active })} to=\"/projects\">\n          {translate('projects.page')}\n        </Link>\n      </li>\n    );\n  }\n\n  renderPortfolios() {\n    return (\n      <li>\n        <Link activeClassName=\"active\" to=\"/portfolios\">\n          {translate('portfolios.page')}\n        </Link>\n      </li>\n    );\n  }\n\n  renderIssuesLink() {\n    const active = this.props.location.pathname.startsWith('/issues');\n\n    const query =\n      this.props.currentUser.isLoggedIn && isMySet()\n        ? { resolved: 'false', myIssues: 'true' }\n        : { resolved: 'false' };\n    return (\n      <li>\n        <Link className={classNames({ active })} to={{ pathname: '/issues', query }}>\n          {translate('issues.page')}\n        </Link>\n      </li>\n    );\n  }\n\n  renderRulesLink() {\n    return (\n      <li>\n        <Link activeClassName=\"active\" to=\"/coding_rules\">\n          {translate('coding_rules.page')}\n        </Link>\n      </li>\n    );\n  }\n\n  renderProfilesLink() {\n    return (\n      <li>\n        <Link activeClassName=\"active\" to=\"/profiles\">\n          {translate('quality_profiles.page')}\n        </Link>\n      </li>\n    );\n  }\n\n  renderQualityGatesLink() {\n    return (\n      <li>\n        <Link activeClassName=\"active\" to={getQualityGatesUrl()}>\n          {translate('quality_gates.page')}\n        </Link>\n      </li>\n    );\n  }\n\n  renderAdministrationLink() {\n    if (!this.props.appState.canAdmin) {\n      return null;\n    }\n\n    return (\n      <li>\n        <Link activeClassName=\"active\" to=\"/admin\">\n          {translate('layout.settings')}\n        </Link>\n      </li>\n    );\n  }\n\n  renderGlobalPageLink = ({ key, name }: T.Extension) => {\n    return (\n      <li key={key}>\n        <Link to={`/extension/${key}`}>{name}</Link>\n      </li>\n    );\n  };\n\n  renderMore() {\n    const { globalPages = [] } = this.props.appState;\n    const withoutPortfolios = globalPages.filter(page => page.key !== 'governance/portfolios');\n    if (withoutPortfolios.length === 0) {\n      return null;\n    }\n    return (\n      <Dropdown\n        overlay={<ul className=\"menu\">{withoutPortfolios.map(this.renderGlobalPageLink)}</ul>}\n        tagName=\"li\">\n        {({ onToggleClick, open }) => (\n          <a\n            aria-expanded={open}\n            aria-haspopup=\"menu\"\n            role=\"button\"\n            className={classNames('dropdown-toggle', { active: open })}\n            href=\"#\"\n            id=\"global-navigation-more\"\n            onClick={onToggleClick}>\n            {translate('more')}\n            <DropdownIcon className=\"little-spacer-left text-middle\" />\n          </a>\n        )}\n      </Dropdown>\n    );\n  }\n\n  render() {\n    const governanceInstalled = this.props.appState.qualifiers.includes(\n      ComponentQualifier.Portfolio\n    );\n\n    return (\n      <ul className=\"global-navbar-menu\">\n        {this.renderProjects()}\n        {governanceInstalled && this.renderPortfolios()}\n        {this.renderIssuesLink()}\n        {this.renderRulesLink()}\n        {this.renderProfilesLink()}\n        {this.renderQualityGatesLink()}\n        {this.renderAdministrationLink()}\n        {this.renderMore()}\n      </ul>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport Dropdown from 'sonar-ui-common/components/controls/Dropdown';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { getBaseUrl } from 'sonar-ui-common/helpers/urls';\nimport { Router, withRouter } from '../../../../components/hoc/withRouter';\nimport Avatar from '../../../../components/ui/Avatar';\nimport { isLoggedIn } from '../../../../helpers/users';\nimport { rawSizes } from '../../../theme';\n\ninterface Props {\n  currentUser: T.CurrentUser;\n  router: Pick<Router, 'push'>;\n}\n\nexport class GlobalNavUser extends React.PureComponent<Props> {\n  handleLogin = (event: React.SyntheticEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    const shouldReturnToCurrentPage = window.location.pathname !== `${getBaseUrl()}/about`;\n    if (shouldReturnToCurrentPage) {\n      const returnTo = encodeURIComponent(window.location.pathname + window.location.search);\n      window.location.href =\n        getBaseUrl() + `/sessions/new?return_to=${returnTo}${window.location.hash}`;\n    } else {\n      window.location.href = `${getBaseUrl()}/sessions/new`;\n    }\n  };\n\n  handleLogout = (event: React.SyntheticEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    this.props.router.push('/sessions/logout');\n  };\n\n  renderAuthenticated() {\n    const currentUser = this.props.currentUser as T.LoggedInUser;\n    return (\n      <Dropdown\n        className=\"js-user-authenticated\"\n        overlay={\n          <ul className=\"menu\">\n            <li className=\"menu-item\">\n              <div className=\"text-ellipsis text-muted\" title={currentUser.name}>\n                <strong>{currentUser.name}</strong>\n              </div>\n              {currentUser.email != null && (\n                <div\n                  className=\"little-spacer-top text-ellipsis text-muted\"\n                  title={currentUser.email}>\n                  {currentUser.email}\n                </div>\n              )}\n            </li>\n            <li className=\"divider\" />\n            <li>\n              <Link to=\"/account\">{translate('my_account.page')}</Link>\n            </li>\n            <li>\n              <a href=\"#\" onClick={this.handleLogout}>\n                {translate('layout.logout')}\n              </a>\n            </li>\n          </ul>\n        }\n        tagName=\"li\">\n        <a className=\"dropdown-toggle navbar-avatar\" href=\"#\" title={currentUser.name}>\n          <Avatar\n            hash={currentUser.avatar}\n            name={currentUser.name}\n            size={rawSizes.globalNavContentHeightRaw}\n          />\n        </a>\n      </Dropdown>\n    );\n  }\n\n  renderAnonymous() {\n    return (\n      <li>\n        <a className=\"navbar-login\" href=\"/sessions/new\" onClick={this.handleLogin}>\n          {translate('layout.login')}\n        </a>\n      </li>\n    );\n  }\n\n  render() {\n    return isLoggedIn(this.props.currentUser) ? this.renderAuthenticated() : this.renderAnonymous();\n  }\n}\n\nexport default withRouter(GlobalNavUser);\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { connect } from 'react-redux';\nimport NavBar from 'sonar-ui-common/components/ui/NavBar';\nimport { getAppState, getCurrentUser, Store } from '../../../../store/rootReducer';\nimport { rawSizes } from '../../../theme';\nimport EmbedDocsPopupHelper from '../../embed-docs-modal/EmbedDocsPopupHelper';\nimport Search from '../../search/Search';\nimport './GlobalNav.css';\nimport GlobalNavBranding from './GlobalNavBranding';\nimport GlobalNavMenu from './GlobalNavMenu';\nimport GlobalNavUser from './GlobalNavUser';\n\nexport interface GlobalNavProps {\n  appState: Pick<T.AppState, 'canAdmin' | 'globalPages' | 'qualifiers'>;\n  currentUser: T.CurrentUser;\n  location: { pathname: string };\n}\n\nexport function GlobalNav(props: GlobalNavProps) {\n  const { appState, currentUser, location } = props;\n  return (\n    <NavBar className=\"navbar-global\" height={rawSizes.globalNavHeightRaw} id=\"global-navigation\">\n      <GlobalNavBranding />\n\n      <GlobalNavMenu appState={appState} currentUser={currentUser} location={location} />\n\n      <ul className=\"global-navbar-menu global-navbar-menu-right\">\n        <EmbedDocsPopupHelper />\n        <Search currentUser={currentUser} />\n        <GlobalNavUser currentUser={currentUser} />\n      </ul>\n    </NavBar>\n  );\n}\n\nconst mapStateToProps = (state: Store) => {\n  return {\n    currentUser: getCurrentUser(state),\n    appState: getAppState(state)\n  };\n};\n\nexport default connect(mapStateToProps)(GlobalNav);\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as differenceInDays from 'date-fns/difference_in_days';\nimport * as React from 'react';\nimport { connect } from 'react-redux';\nimport { lazyLoadComponent } from 'sonar-ui-common/components/lazyLoadComponent';\nimport { parseDate, toShortNotSoISOString } from 'sonar-ui-common/helpers/dates';\nimport { hasMessage } from 'sonar-ui-common/helpers/l10n';\nimport { get, save } from 'sonar-ui-common/helpers/storage';\nimport { showLicense } from '../../api/marketplace';\nimport { Location, Router, withRouter } from '../../components/hoc/withRouter';\nimport { isLoggedIn } from '../../helpers/users';\nimport { getAppState, getCurrentUser, Store } from '../../store/rootReducer';\nimport { EditionKey } from '../../types/editions';\n\nconst LicensePromptModal = lazyLoadComponent(\n  () => import('../../apps/marketplace/components/LicensePromptModal'),\n  'LicensePromptModal'\n);\n\ninterface StateProps {\n  canAdmin?: boolean;\n  currentEdition?: EditionKey;\n  currentUser: T.CurrentUser;\n}\n\ninterface OwnProps {\n  children?: React.ReactNode;\n}\n\ninterface WithRouterProps {\n  location: Pick<Location, 'pathname'>;\n  router: Pick<Router, 'push'>;\n}\n\ntype Props = StateProps & OwnProps & WithRouterProps;\n\ninterface State {\n  open?: boolean;\n}\n\nconst LICENSE_PROMPT = 'sonarqube.license.prompt';\n\nexport class StartupModal extends React.PureComponent<Props, State> {\n  state: State = {};\n\n  componentDidMount() {\n    this.tryAutoOpenLicense();\n  }\n\n  closeLicense = () => {\n    this.setState({ open: false });\n  };\n\n  tryAutoOpenLicense = () => {\n    const { canAdmin, currentEdition, currentUser } = this.props;\n    const hasLicenseManager = hasMessage('license.prompt.title');\n    const hasLicensedEdition = currentEdition && currentEdition !== EditionKey.community;\n\n    if (canAdmin && hasLicensedEdition && isLoggedIn(currentUser) && hasLicenseManager) {\n      const lastPrompt = get(LICENSE_PROMPT, currentUser.login);\n\n      if (!lastPrompt || differenceInDays(new Date(), parseDate(lastPrompt)) >= 1) {\n        showLicense()\n          .then(license => {\n            if (!license || !license.isValidEdition) {\n              save(LICENSE_PROMPT, toShortNotSoISOString(new Date()), currentUser.login);\n              this.setState({ open: true });\n            }\n          })\n          .catch(() => {});\n      }\n    }\n  };\n\n  render() {\n    const { open } = this.state;\n    return (\n      <>\n        {this.props.children}\n        {open && <LicensePromptModal onClose={this.closeLicense} />}\n      </>\n    );\n  }\n}\n\nconst mapStateToProps = (state: Store): StateProps => ({\n  canAdmin: getAppState(state).canAdmin,\n  currentEdition: getAppState(state).edition as EditionKey, // TODO: Fix once AppState is no longer ambiant.\n  currentUser: getCurrentUser(state)\n});\n\nexport default connect(mapStateToProps)(withRouter(StartupModal));\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Workspace from '../../components/workspace/Workspace';\nimport A11yProvider from './a11y/A11yProvider';\nimport A11ySkipLinks from './a11y/A11ySkipLinks';\nimport SuggestionsProvider from './embed-docs-modal/SuggestionsProvider';\nimport GlobalFooterContainer from './GlobalFooterContainer';\nimport GlobalMessagesContainer from './GlobalMessagesContainer';\nimport IndexationContextProvider from './indexation/IndexationContextProvider';\nimport IndexationNotification from './indexation/IndexationNotification';\nimport GlobalNav from './nav/global/GlobalNav';\nimport StartupModal from './StartupModal';\n\nexport interface Props {\n  children: React.ReactNode;\n  footer?: React.ReactNode;\n  location: { pathname: string };\n}\n\nexport default function GlobalContainer(props: Props) {\n  // it is important to pass `location` down to `GlobalNav` to trigger render on url change\n  const { footer = <GlobalFooterContainer /> } = props;\n  return (\n    <SuggestionsProvider>\n      <A11yProvider>\n        <StartupModal>\n          <A11ySkipLinks />\n\n          <div className=\"global-container\">\n            <div className=\"page-wrapper\" id=\"container\">\n              <div className=\"page-container\">\n                <Workspace>\n                  <IndexationContextProvider>\n                    <GlobalNav location={props.location} />\n                    <GlobalMessagesContainer />\n                    <IndexationNotification />\n                    {props.children}\n                  </IndexationContextProvider>\n                </Workspace>\n              </div>\n            </div>\n            {footer}\n          </div>\n        </StartupModal>\n      </A11yProvider>\n    </SuggestionsProvider>\n  );\n}\n","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./styles.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".workspace-nav{position:fixed;z-index:451;bottom:0;right:0;height:28px}.workspace-nav-list{float:right}.workspace-nav-item{position:relative;display:inline-flex;align-items:center;margin-right:8px}.workspace-nav-item-link{display:inline-flex;align-items:center;height:28px;padding:0 28px 0 8px;border:none;background-color:#404040;color:#fff;font-size:12px}.workspace-nav-item-link:focus,.workspace-nav-item-link:hover{color:#fff;opacity:.9}.workspace-nav-item-close{position:absolute;right:4px;top:4px}.workspace-viewer{position:fixed;z-index:450;bottom:0;left:0;right:0;box-sizing:border-box;background-color:#fff;box-shadow:0 -6px 12px rgba(0,0,0,.175)}.workspace-viewer-header{position:relative;height:30px;padding:3px 10px;box-sizing:border-box;background-color:#404040;color:#fff;font-weight:300}.workspace-viewer-name{float:left;line-height:24px;color:#fff;font-weight:400}.workspace-viewer-name i{margin-top:3px}.workspace-viewer-resize{position:absolute;top:3px;left:50%;width:30px;height:5px;margin-left:-15px;background-image:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAiIGhlaWdodD0iNSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLW1pdGVybGltaXQ9IjEuNDE0Ij48cGF0aCBmaWxsPSIjNzc3IiBmaWxsLW9wYWNpdHk9Ii41IiBkPSJNMCAwaDJ2Mkgwek00IDBoMnYySDR6TTggMGgydjJIOHpNMTIgMGgydjJoLTJ6TTE2IDBoMnYyaC0yek0yMCAwaDJ2MmgtMnpNMjQgMGgydjJoLTJ6TTI4IDBoMnYyaC0yek0wIDNoMnYySDB6TTQgM2gydjJINHpNOCAzaDJ2Mkg4ek0xMiAzaDJ2MmgtMnpNMTYgM2gydjJoLTJ6TTIwIDNoMnYyaC0yek0yNCAzaDJ2MmgtMnpNMjggM2gydjJoLTJ6Ii8+PHBhdGggZmlsbD0iIzc3NyIgZmlsbC1vcGFjaXR5PSIuNSIgZD0iTTAgMGgydjJIMHpNNCAwaDJ2Mkg0ek04IDBoMnYySDh6TTEyIDBoMnYyaC0yek0xNiAwaDJ2MmgtMnpNMjAgMGgydjJoLTJ6TTI0IDBoMnYyaC0yek0yOCAwaDJ2MmgtMnoiLz48L3N2Zz4=);cursor:ns-resize}.workspace-viewer-actions{float:right}.workspace-viewer-actions a{color:inherit}.workspace-header-icon:focus path,.workspace-header-icon:hover path{color:#404040}.workspace-viewer-container{height:calc(40vh - 30px);min-height:100px;max-height:calc(95vh - 30px);padding:5px 10px;overflow-y:scroll;overflow-x:auto;box-sizing:border-box}.with-workspace .source-viewer{padding-bottom:40vh}.with-workspace .workspace-viewer .source-viewer{padding-bottom:0}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","var api = require(\"!../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../../node_modules/postcss-loader/src/index.js??postcss!./A11ySkipLinks.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".a11y-skip-link{width:0;height:0;padding:8px;position:absolute;left:-9999px;top:-9999px;border:0;font-size:1rem;text-align:center;z-index:999}.a11y-skip-link:focus{width:auto;height:auto;left:6px;top:6px;color:#fff;background-color:#262626;text-decoration:underline}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","var api = require(\"!../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../../node_modules/postcss-loader/src/index.js??postcss!./IndexationNotification.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".indexation-notification-wrapper{height:34px}.indexation-notification-banner{position:fixed;width:100%;z-index:60;margin-bottom:0!important}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","var api = require(\"!../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../../node_modules/postcss-loader/src/index.js??postcss!./Search.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".navbar-search{position:relative;padding:8px 0}.navbar-search .search-box,.navbar-search .search-box-input{width:26vw;max-width:310px;min-width:260px;height:32px}.navbar-search .search-box-input{border-color:#fff}.navbar-search .search-box-note{line-height:30px}.navbar-search .search-box-clear,.navbar-search .search-box-magnifier{top:8px}.navbar-search-input{vertical-align:middle;width:310px;margin-top:3px;margin-bottom:3px;padding-left:26px!important}.navbar-search-input-hint{position:absolute;top:1px;right:27px;line-height:24px;font-size:12px;color:#777}.navbar-search-icon{position:relative;z-index:3;vertical-align:middle;width:16px;margin-left:4px;margin-right:-20px;background-color:#fff;color:#777}.navbar-search-icon:before{font-size:14px}.navbar-search-item-link{display:flex!important}.navbar-search-item-match{flex-grow:5;overflow:hidden;text-overflow:ellipsis}.navbar-search-item-right{flex-grow:1;padding-left:10px;text-align:right}.navbar-search-item-icons{position:relative;flex-shrink:0;width:16px;height:16px}.navbar-search-item-icons>*{position:absolute;z-index:5;top:0;left:0}.navbar-search-item-icons>.icon-clock,.navbar-search-item-icons>.icon-outline{z-index:6;top:-4px;left:-5px}.navbar-search-no-results{margin-top:4px;padding:5px 10px}.global-navbar-search-dropdown{top:100%!important;max-height:80vh;width:440px;padding:0!important;overflow-y:auto;overflow-x:hidden}.global-navbar-search-dropdown .dropdown-bottom-hint{margin-bottom:0}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","var api = require(\"!../../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../../../node_modules/postcss-loader/src/index.js??postcss!./GlobalNav.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".navbar-global,.navbar-global .navbar-inner{background-color:#262626;z-index:421}.navbar-global .navbar-limited{display:flex}.navbar-brand{display:flex;justify-content:center;align-items:center;height:48px;margin-left:-8px;padding-top:4px;padding-left:8px;padding-right:8px;border-bottom:4px solid transparent}.navbar-login{margin-right:-10px;white-space:nowrap}.navbar-avatar{margin-right:-8px;padding:8px!important;border:none!important}.navbar-icon{display:inline-block;height:48px;padding:16px 12px!important;border-bottom:none!important;color:#fff!important}.navbar-plus{margin-right:-8px;position:relative;z-index:3}.global-navbar-menu{display:flex;align-items:center;height:48px}.global-navbar-menu>li>a{display:block;height:48px;padding:8px 10px;line-height:32px;border-bottom:4px solid transparent;box-sizing:border-box;color:#ccc;font-size:13px;letter-spacing:.05em;white-space:nowrap}.global-navbar-menu>.dropdown.open>a,.global-navbar-menu>li>a.active,.global-navbar-menu>li>a:focus,.global-navbar-menu>li>a:hover,.navbar-brand:focus,.navbar-brand:hover{background-color:#020202}.global-navbar-menu>li>a.active{border-bottom-color:#646464}.global-navbar-menu-right{flex:1;justify-content:flex-end;margin-left:40px}.global-navbar-menu-right .navbar-search{flex:0 1 240px;min-width:0}.global-navbar-menu-right .navbar-search .search-box,.global-navbar-menu-right .navbar-search .search-box-input{min-width:0;width:100%}@media print{.navbar-global{display:none!important}}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { lazyLoadComponent } from 'sonar-ui-common/components/lazyLoadComponent';\n\nconst routes = [\n  { indexRoute: { component: lazyLoadComponent(() => import('./components/AboutApp')) } }\n];\n\nexport default routes;\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { lazyLoadComponent } from 'sonar-ui-common/components/lazyLoadComponent';\n\nconst routes = [\n  {\n    component: lazyLoadComponent(() => import('./components/Account')),\n    childRoutes: [\n      {\n        indexRoute: { component: lazyLoadComponent(() => import('./profile/Profile')) }\n      },\n      {\n        path: 'security',\n        component: lazyLoadComponent(() => import('./components/Security'))\n      },\n      {\n        path: 'projects',\n        component: lazyLoadComponent(() => import('./projects/ProjectsContainer'))\n      },\n      {\n        path: 'notifications',\n        component: lazyLoadComponent(() => import('./notifications/Notifications'))\n      }\n    ]\n  }\n];\n\nexport default routes;\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { lazyLoadComponent } from 'sonar-ui-common/components/lazyLoadComponent';\n\nconst routes = [\n  {\n    indexRoute: { component: lazyLoadComponent(() => import('./ApplicationConsoleApp')) }\n  }\n];\n\nexport default routes;\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { lazyLoadComponent } from 'sonar-ui-common/components/lazyLoadComponent';\n\nconst routes = [\n  {\n    indexRoute: { component: lazyLoadComponent(() => import('./components/BackgroundTasksApp')) }\n  }\n];\n\nexport default routes;\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { lazyLoadComponent } from 'sonar-ui-common/components/lazyLoadComponent';\n\nconst routes = [\n  {\n    indexRoute: { component: lazyLoadComponent(() => import('./components/App')) }\n  }\n];\n\nexport default routes;\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { RedirectFunction, RouterState } from 'react-router';\nimport { lazyLoadComponent } from 'sonar-ui-common/components/lazyLoadComponent';\nimport { parseQuery, serializeQuery } from './query';\n\nfunction parseHash(hash: string): T.RawQuery {\n  const query: T.RawQuery = {};\n  const parts = hash.split('|');\n  parts.forEach(part => {\n    const tokens = part.split('=');\n    if (tokens.length === 2) {\n      query[decodeURIComponent(tokens[0])] = decodeURIComponent(tokens[1]);\n    }\n  });\n  return query;\n}\n\nconst routes = [\n  {\n    indexRoute: {\n      onEnter: (nextState: RouterState, replace: RedirectFunction) => {\n        const { hash } = window.location;\n        if (hash.length > 1) {\n          const query = parseHash(hash.substr(1));\n          const normalizedQuery = {\n            ...serializeQuery(parseQuery(query)),\n            open: query.open\n          };\n          replace({ pathname: nextState.location.pathname, query: normalizedQuery });\n        }\n      },\n      component: lazyLoadComponent(() => import('./components/App'))\n    }\n  }\n];\n\nexport default routes;\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { RedirectFunction, RouterState } from 'react-router';\nimport { lazyLoadComponent } from 'sonar-ui-common/components/lazyLoadComponent';\n\nconst routes = [\n  {\n    indexRoute: { component: lazyLoadComponent(() => import('./components/App')) }\n  },\n  {\n    path: 'domain/:domainName',\n    onEnter(nextState: RouterState, replace: RedirectFunction) {\n      replace({\n        pathname: '/component_measures',\n        query: {\n          ...nextState.location.query,\n          metric: nextState.params.domainName\n        }\n      });\n    }\n  },\n  {\n    path: 'metric/:metricKey(/:view)',\n    onEnter(nextState: RouterState, replace: RedirectFunction) {\n      if (nextState.params.view === 'history') {\n        replace({\n          pathname: '/project/activity',\n          query: {\n            id: nextState.location.query.id,\n            graph: 'custom',\n            custom_metrics: nextState.params.metricKey\n          }\n        });\n      } else {\n        replace({\n          pathname: '/component_measures',\n          query: {\n            ...nextState.location.query,\n            metric: nextState.params.metricKey,\n            view: nextState.params.view\n          }\n        });\n      }\n    }\n  }\n];\n\nexport default routes;\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { lazyLoadComponent } from 'sonar-ui-common/components/lazyLoadComponent';\n\nconst routes = [\n  {\n    indexRoute: { component: lazyLoadComponent(() => import('./components/App')) }\n  }\n];\n\nexport default routes;\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { lazyLoadComponent } from 'sonar-ui-common/components/lazyLoadComponent';\n\nconst routes = [\n  {\n    indexRoute: { component: lazyLoadComponent(() => import('./components/App')) }\n  }\n];\n\nexport default routes;\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { lazyLoadComponent } from 'sonar-ui-common/components/lazyLoadComponent';\n\nconst App = lazyLoadComponent(() => import(/* webpackChunkName: \"docs\" */ './components/App'));\n\nconst routes = [{ indexRoute: { component: App } }, { path: '**', indexRoute: { component: App } }];\n\nexport default routes;\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { lazyLoadComponent } from 'sonar-ui-common/components/lazyLoadComponent';\n\nconst routes = [\n  {\n    indexRoute: { component: lazyLoadComponent(() => import('./components/App')) }\n  }\n];\n\nexport default routes;\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { connect } from 'react-redux';\nimport { lazyLoadComponent } from 'sonar-ui-common/components/lazyLoadComponent';\nimport { searchIssues } from '../../../api/issues';\nimport throwGlobalError from '../../../app/utils/throwGlobalError';\nimport { withRouter } from '../../../components/hoc/withRouter';\nimport { parseIssueFromResponse } from '../../../helpers/issues';\nimport { fetchBranchStatus } from '../../../store/rootActions';\nimport { getCurrentUser, Store } from '../../../store/rootReducer';\n\nconst IssuesAppContainer = lazyLoadComponent(() => import('./App'), 'IssuesAppContainer');\n\nconst mapStateToProps = (state: Store) => ({\n  currentUser: getCurrentUser(state),\n  fetchIssues\n});\n\nconst fetchIssues = (query: T.RawQuery) => {\n  return searchIssues({\n    ...query,\n    additionalFields: '_all',\n    timeZone: Intl.DateTimeFormat().resolvedOptions().timeZone\n  })\n    .then(response => {\n      const parsedIssues = response.issues.map(issue =>\n        parseIssueFromResponse(issue, response.components, response.users, response.rules)\n      );\n      return { ...response, issues: parsedIssues };\n    })\n    .catch(throwGlobalError);\n};\n\nconst mapDispatchToProps = { fetchBranchStatus };\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(IssuesAppContainer));\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { IndexRoute } from 'react-router';\nimport { lazyLoadComponent } from 'sonar-ui-common/components/lazyLoadComponent';\n\nexport const maintenanceRoutes = (\n  <IndexRoute component={lazyLoadComponent(() => import('./components/MaintenanceAppContainer'))} />\n);\n\nexport const setupRoutes = (\n  <IndexRoute component={lazyLoadComponent(() => import('./components/SetupAppContainer'))} />\n);\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { lazyLoadComponent } from 'sonar-ui-common/components/lazyLoadComponent';\n\nconst routes = [\n  {\n    indexRoute: { component: lazyLoadComponent(() => import('./AppContainer')) }\n  }\n];\n\nexport default routes;\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { lazyLoadComponent } from 'sonar-ui-common/components/lazyLoadComponent';\n\nconst routes = [\n  {\n    indexRoute: { component: lazyLoadComponent(() => import('./components/App')) }\n  }\n];\n\nexport default routes;\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { lazyLoadComponent } from 'sonar-ui-common/components/lazyLoadComponent';\n\nconst routes = [\n  {\n    indexRoute: { component: lazyLoadComponent(() => import('./components/App')) }\n  }\n];\n\nexport default routes;\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { lazyLoadComponent } from 'sonar-ui-common/components/lazyLoadComponent';\n\nexport const globalPermissionsRoutes = [\n  {\n    indexRoute: { component: lazyLoadComponent(() => import('./global/components/App')) }\n  }\n];\n\nexport const projectPermissionsRoutes = [\n  {\n    indexRoute: { component: lazyLoadComponent(() => import('./project/components/AppContainer')) }\n  }\n];\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { lazyLoadComponent } from 'sonar-ui-common/components/lazyLoadComponent';\n\nconst routes = [\n  {\n    indexRoute: { component: lazyLoadComponent(() => import('./components/App')) }\n  }\n];\n\nexport default routes;\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { lazyLoadComponent } from 'sonar-ui-common/components/lazyLoadComponent';\n\nconst routes = [\n  {\n    indexRoute: {\n      component: lazyLoadComponent(() => import('./components/ProjectActivityAppContainer'))\n    }\n  }\n];\n\nexport default routes;\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { lazyLoadComponent } from 'sonar-ui-common/components/lazyLoadComponent';\n\nconst routes = [\n  {\n    indexRoute: { component: lazyLoadComponent(() => import('./components/AppContainer')) }\n  }\n];\n\nexport default routes;\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { lazyLoadComponent } from 'sonar-ui-common/components/lazyLoadComponent';\n\nconst routes = [\n  {\n    indexRoute: { component: lazyLoadComponent(() => import('./components/App')) }\n  }\n];\n\nexport default routes;\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { lazyLoadComponent } from 'sonar-ui-common/components/lazyLoadComponent';\n\nconst routes = [\n  {\n    indexRoute: { component: lazyLoadComponent(() => import('./ProjectQualityGateApp')) }\n  }\n];\n\nexport default routes;\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { lazyLoadComponent } from 'sonar-ui-common/components/lazyLoadComponent';\n\nconst routes = [\n  {\n    indexRoute: {\n      component: lazyLoadComponent(() => import('./ProjectQualityProfilesApp'))\n    }\n  }\n];\n\nexport default routes;\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { connect } from 'react-redux';\nimport { lazyLoadComponent } from 'sonar-ui-common/components/lazyLoadComponent';\nimport { getAppState, getCurrentUser, Store } from '../../../store/rootReducer';\nimport { ComponentQualifier } from '../../../types/component';\n\nconst stateToProps = (state: Store) => ({\n  currentUser: getCurrentUser(state),\n  qualifiers: getAppState(state).qualifiers as ComponentQualifier[]\n});\n\nexport default connect(stateToProps)(lazyLoadComponent(() => import('./AllProjects')));\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { get } from 'sonar-ui-common/helpers/storage';\nimport { searchProjects } from '../../../api/components';\nimport { Location, Router, withRouter } from '../../../components/hoc/withRouter';\nimport { isLoggedIn } from '../../../helpers/users';\nimport { PROJECTS_ALL, PROJECTS_DEFAULT_FILTER, PROJECTS_FAVORITE } from '../utils';\nimport AllProjectsContainer from './AllProjectsContainer';\n\ninterface Props {\n  currentUser: T.CurrentUser;\n  location: Pick<Location, 'pathname' | 'query'>;\n  router: Pick<Router, 'replace'>;\n}\n\ninterface State {\n  shouldBeRedirected?: boolean;\n  shouldForceSorting?: string;\n}\n\nexport class DefaultPageSelector extends React.PureComponent<Props, State> {\n  state: State = {};\n\n  componentDidMount() {\n    this.defineIfShouldBeRedirected();\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (prevProps.location !== this.props.location) {\n      this.defineIfShouldBeRedirected();\n    } else if (this.state.shouldBeRedirected === true) {\n      this.props.router.replace({ ...this.props.location, pathname: '/projects/favorite' });\n    } else if (this.state.shouldForceSorting != null) {\n      this.props.router.replace({\n        ...this.props.location,\n        query: {\n          ...this.props.location.query,\n          sort: this.state.shouldForceSorting\n        }\n      });\n    }\n  }\n\n  isFavoriteSet = (): boolean => {\n    const setting = get(PROJECTS_DEFAULT_FILTER);\n    return setting === PROJECTS_FAVORITE;\n  };\n\n  isAllSet = (): boolean => {\n    const setting = get(PROJECTS_DEFAULT_FILTER);\n    return setting === PROJECTS_ALL;\n  };\n\n  defineIfShouldBeRedirected() {\n    if (Object.keys(this.props.location.query).length > 0) {\n      // show ALL projects when there are some filters\n      this.setState({ shouldBeRedirected: false, shouldForceSorting: undefined });\n    } else if (!isLoggedIn(this.props.currentUser)) {\n      // show ALL projects if user is anonymous\n      if (!this.props.location.query || !this.props.location.query.sort) {\n        // force default sorting to last analysis date\n        this.setState({ shouldBeRedirected: false, shouldForceSorting: '-analysis_date' });\n      } else {\n        this.setState({ shouldBeRedirected: false, shouldForceSorting: undefined });\n      }\n    } else if (this.isFavoriteSet()) {\n      // show FAVORITE projects if \"favorite\" setting is explicitly set\n      this.setState({ shouldBeRedirected: true, shouldForceSorting: undefined });\n    } else if (this.isAllSet()) {\n      // show ALL projects if \"all\" setting is explicitly set\n      this.setState({ shouldBeRedirected: false, shouldForceSorting: undefined });\n    } else {\n      // otherwise, request favorites\n      this.setState({ shouldBeRedirected: undefined, shouldForceSorting: undefined });\n      searchProjects({ filter: 'isFavorite', ps: 1 }).then(r => {\n        // show FAVORITE projects if there are any\n        this.setState({ shouldBeRedirected: r.paging.total > 0, shouldForceSorting: undefined });\n      });\n    }\n  }\n\n  render() {\n    const { shouldBeRedirected, shouldForceSorting } = this.state;\n\n    if (\n      shouldBeRedirected !== undefined &&\n      shouldBeRedirected !== true &&\n      shouldForceSorting === undefined\n    ) {\n      return <AllProjectsContainer isFavorite={false} />;\n    }\n\n    return null;\n  }\n}\n\nexport default withRouter(DefaultPageSelector);\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { connect } from 'react-redux';\nimport { getCurrentUser, Store } from '../../../store/rootReducer';\nimport DefaultPageSelector from './DefaultPageSelector';\n\nconst stateToProps = (state: Store) => ({\n  currentUser: getCurrentUser(state)\n});\n\nexport default connect(stateToProps)(DefaultPageSelector);\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { RedirectFunction, RouterState } from 'react-router';\nimport { lazyLoadComponent } from 'sonar-ui-common/components/lazyLoadComponent';\nimport { save } from 'sonar-ui-common/helpers/storage';\nimport { isDefined } from 'sonar-ui-common/helpers/types';\nimport DefaultPageSelectorContainer from './components/DefaultPageSelectorContainer';\nimport FavoriteProjectsContainer from './components/FavoriteProjectsContainer';\nimport { PROJECTS_ALL, PROJECTS_DEFAULT_FILTER } from './utils';\n\nconst routes = [\n  { indexRoute: { component: DefaultPageSelectorContainer } },\n  {\n    path: 'all',\n    onEnter(_: RouterState, replace: RedirectFunction) {\n      save(PROJECTS_DEFAULT_FILTER, PROJECTS_ALL);\n      replace('/projects');\n    }\n  },\n  { path: 'favorite', component: FavoriteProjectsContainer },\n  {\n    path: 'create',\n    component: lazyLoadComponent(() => import('../create/project/CreateProjectPage'))\n  }\n].filter(isDefined);\n\nexport default routes;\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport AllProjectsContainer from './AllProjectsContainer';\n\nexport default function FavoriteProjectsContainer(props: any) {\n  return <AllProjectsContainer isFavorite={true} {...props} />;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { lazyLoadComponent } from 'sonar-ui-common/components/lazyLoadComponent';\n\nconst routes = [\n  {\n    indexRoute: { component: lazyLoadComponent(() => import('./App')) }\n  }\n];\n\nexport default routes;\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { lazyLoadComponent } from 'sonar-ui-common/components/lazyLoadComponent';\n\nconst App = lazyLoadComponent(() => import('./components/App'));\n\nconst routes = [{ indexRoute: { component: App } }, { path: 'show/:id', component: App }];\n\nexport default routes;\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { lazyLoadComponent } from 'sonar-ui-common/components/lazyLoadComponent';\n\nconst routes = [\n  {\n    component: lazyLoadComponent(() => import('./components/AppContainer')),\n    indexRoute: { component: lazyLoadComponent(() => import('./home/HomeContainer')) },\n    childRoutes: [\n      {\n        component: lazyLoadComponent(() => import('./components/ProfileContainer')),\n        childRoutes: [\n          {\n            path: 'show',\n            component: lazyLoadComponent(() => import('./details/ProfileDetails'))\n          },\n          {\n            path: 'changelog',\n            component: lazyLoadComponent(() => import('./changelog/ChangelogContainer'))\n          },\n          {\n            path: 'compare',\n            component: lazyLoadComponent(() => import('./compare/ComparisonContainer'))\n          }\n        ]\n      }\n    ]\n  }\n];\n\nexport default routes;\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { lazyLoadComponent } from 'sonar-ui-common/components/lazyLoadComponent';\n\nconst routes = [\n  {\n    path: 'new',\n    component: lazyLoadComponent(() => import('./components/LoginContainer'))\n  },\n  {\n    path: 'logout',\n    component: lazyLoadComponent(() => import('./components/Logout'))\n  },\n  {\n    path: 'unauthorized',\n    component: lazyLoadComponent(() => import('./components/Unauthorized'))\n  },\n  {\n    path: 'email_already_exists',\n    component: lazyLoadComponent(() => import('./components/EmailAlreadyExists'))\n  }\n];\n\nexport default routes;\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { lazyLoadComponent } from 'sonar-ui-common/components/lazyLoadComponent';\n\nconst routes = [\n  {\n    indexRoute: { component: lazyLoadComponent(() => import('./components/AppContainer')) }\n  },\n  {\n    path: 'encryption',\n    component: lazyLoadComponent(() => import('./encryption/EncryptionApp'))\n  }\n];\n\nexport default routes;\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { lazyLoadComponent } from 'sonar-ui-common/components/lazyLoadComponent';\n\nconst routes = [\n  {\n    indexRoute: { component: lazyLoadComponent(() => import('./components/App')) }\n  }\n];\n\nexport default routes;\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n\nimport { lazyLoadComponent } from 'sonar-ui-common/components/lazyLoadComponent';\n\nconst routes = [\n  {\n    indexRoute: { component: lazyLoadComponent(() => import('./components/TutorialsApp')) }\n  }\n];\n\nexport default routes;\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { lazyLoadComponent } from 'sonar-ui-common/components/lazyLoadComponent';\n\nconst routes = [\n  {\n    indexRoute: { component: lazyLoadComponent(() => import('./UsersApp')) }\n  }\n];\n\nexport default routes;\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { lazyLoadComponent } from 'sonar-ui-common/components/lazyLoadComponent';\n\nconst routes = [\n  {\n    indexRoute: { component: lazyLoadComponent(() => import('./components/WebApiApp')) }\n  },\n  {\n    path: '**',\n    component: lazyLoadComponent(() => import('./components/WebApiApp'))\n  }\n];\n\nexport default routes;\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { lazyLoadComponent } from 'sonar-ui-common/components/lazyLoadComponent';\n\nconst routes = [\n  {\n    indexRoute: { component: lazyLoadComponent(() => import('./components/App')) }\n  }\n];\n\nexport default routes;\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Button } from 'sonar-ui-common/components/controls/buttons';\nimport Modal from 'sonar-ui-common/components/controls/Modal';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\n\ntype Shortcuts = Array<{\n  category: string;\n  shortcuts: Array<{\n    keys: string[];\n    action: string;\n  }>;\n}>;\n\nconst CATEGORIES: { left: Shortcuts; right: Shortcuts } = {\n  left: [\n    {\n      category: 'global',\n      shortcuts: [\n        { keys: ['s'], action: 'search' },\n        { keys: ['?'], action: 'open_shortcuts' }\n      ]\n    },\n    {\n      category: 'issues_page',\n      shortcuts: [\n        { keys: ['↑', '↓'], action: 'navigate' },\n        { keys: ['→'], action: 'source_code' },\n        { keys: ['←'], action: 'back' },\n        { keys: ['alt', '+', '↑', '↓'], action: 'navigate_locations' },\n        { keys: ['alt', '+', '←', '→'], action: 'switch_flows' },\n        { keys: ['f'], action: 'transition' },\n        { keys: ['a'], action: 'assign' },\n        { keys: ['m'], action: 'assign_to_me' },\n        { keys: ['i'], action: 'severity' },\n        { keys: ['c'], action: 'comment' },\n        { keys: ['ctrl', '+', 'enter'], action: 'submit_comment' },\n        { keys: ['t'], action: 'tags' }\n      ]\n    }\n  ],\n  right: [\n    {\n      category: 'code_page',\n      shortcuts: [\n        { keys: ['↑', '↓'], action: 'select_files' },\n        { keys: ['→'], action: 'open_file' },\n        { keys: ['←'], action: 'back' }\n      ]\n    },\n    {\n      category: 'measures_page',\n      shortcuts: [\n        { keys: ['↑', '↓'], action: 'select_files' },\n        { keys: ['→'], action: 'open_file' },\n        { keys: ['←'], action: 'back' }\n      ]\n    },\n    {\n      category: 'rules_page',\n      shortcuts: [\n        { keys: ['↑', '↓'], action: 'navigate' },\n        { keys: ['→'], action: 'rule_details' },\n        { keys: ['←'], action: 'back' }\n      ]\n    }\n  ]\n};\n\nfunction renderShortcuts(list: Shortcuts) {\n  return (\n    <>\n      {list.map(({ category, shortcuts }) => (\n        <div key={category} className=\"spacer-bottom\">\n          <h3 className=\"null-spacer-top\">{translate('keyboard_shortcuts', category, 'title')}</h3>\n          <table>\n            <thead>\n              <tr>\n                <th>{translate('keyboard_shortcuts.shortcut')}</th>\n                <th>{translate('keyboard_shortcuts.action')}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {shortcuts.map(({ action, keys }) => (\n                <tr key={action}>\n                  <td>\n                    {keys.map(k =>\n                      k === '+' ? (\n                        <span key={k} className=\"little-spacer-right\">\n                          {k}\n                        </span>\n                      ) : (\n                        <code key={k} className=\"little-spacer-right\">\n                          {k}\n                        </code>\n                      )\n                    )}\n                  </td>\n                  <td>{translate('keyboard_shortcuts', category, action)}</td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n      ))}\n    </>\n  );\n}\n\nexport default function KeyboardShortcutsModal() {\n  const [display, setDisplay] = React.useState(false);\n\n  React.useEffect(() => {\n    const handleKeyPress = (event: KeyboardEvent) => {\n      const { tagName } = event.target as HTMLElement;\n\n      if (['INPUT', 'SELECT', 'TEXTAREA'].includes(tagName)) {\n        return; // Ignore keys when typed in an input\n      }\n\n      if (event.key === '?') {\n        setDisplay(d => !d);\n      }\n    };\n\n    window.addEventListener('keypress', handleKeyPress);\n\n    return () => {\n      window.removeEventListener('keypress', handleKeyPress);\n    };\n  }, [setDisplay]);\n\n  if (!display) {\n    return null;\n  }\n\n  const title = translate('keyboard_shortcuts.title');\n\n  return (\n    <Modal contentLabel={title} onRequestClose={() => setDisplay(false)} size=\"medium\">\n      <div className=\"modal-head\">\n        <h2>{title}</h2>\n      </div>\n\n      <div className=\"modal-body modal-container markdown display-flex-start shortcuts-modal\">\n        <div className=\"flex-1\">{renderShortcuts(CATEGORIES.left)}</div>\n        <div className=\"flex-1 huge-spacer-left\">{renderShortcuts(CATEGORIES.right)}</div>\n      </div>\n\n      <div className=\"modal-foot\">\n        <Button onClick={() => setDisplay(false)}>{translate('close')}</Button>\n      </div>\n    </Modal>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { connect } from 'react-redux';\nimport { lazyLoadComponent } from 'sonar-ui-common/components/lazyLoadComponent';\nimport { fetchLanguages } from '../../store/rootActions';\nimport { getGlobalSettingValue, Store } from '../../store/rootReducer';\nimport KeyboardShortcutsModal from './KeyboardShortcutsModal';\n\nconst PageTracker = lazyLoadComponent(() => import('./PageTracker'));\n\ninterface Props {\n  fetchLanguages: () => void;\n  enableGravatar: boolean;\n  gravatarServerUrl: string;\n}\n\nexport class App extends React.PureComponent<Props> {\n  mounted = false;\n\n  componentDidMount() {\n    this.mounted = true;\n    this.props.fetchLanguages();\n    this.setScrollbarWidth();\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  setScrollbarWidth = () => {\n    // See https://stackoverflow.com/questions/13382516/getting-scroll-bar-width-using-javascript\n    const outer = document.createElement('div');\n    outer.style.visibility = 'hidden';\n    outer.style.width = '100px';\n    outer.style.setProperty('msOverflowStyle', 'scrollbar');\n\n    document.body.appendChild(outer);\n\n    const widthNoScroll = outer.offsetWidth;\n    outer.style.overflow = 'scroll';\n\n    const inner = document.createElement('div');\n    inner.style.width = '100%';\n    outer.appendChild(inner);\n\n    const widthWithScroll = inner.offsetWidth;\n\n    if (outer.parentNode) {\n      outer.parentNode.removeChild(outer);\n    }\n\n    document.body.style.setProperty('--sbw', `${widthNoScroll - widthWithScroll}px`);\n  };\n\n  renderPreconnectLink = () => {\n    const parser = document.createElement('a');\n    parser.href = this.props.gravatarServerUrl;\n    if (parser.hostname !== window.location.hostname) {\n      return <link href={parser.origin} rel=\"preconnect\" />;\n    } else {\n      return null;\n    }\n  };\n\n  render() {\n    return (\n      <>\n        <PageTracker>{this.props.enableGravatar && this.renderPreconnectLink()}</PageTracker>\n        {this.props.children}\n        <KeyboardShortcutsModal />\n      </>\n    );\n  }\n}\n\nconst mapStateToProps = (state: Store) => {\n  const enableGravatar = getGlobalSettingValue(state, 'sonar.lf.enableGravatar');\n  const gravatarServerUrl = getGlobalSettingValue(state, 'sonar.lf.gravatarServerUrl');\n  return {\n    enableGravatar: Boolean(enableGravatar && enableGravatar.value === 'true'),\n    gravatarServerUrl: (gravatarServerUrl && gravatarServerUrl.value) || ''\n  };\n};\n\nconst mapDispatchToProps = { fetchLanguages };\n\nexport default connect(mapStateToProps, mapDispatchToProps)(App);\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { WithRouterProps } from 'react-router';\nimport { getSystemStatus } from '../../helpers/system';\n\nexport default class MigrationContainer extends React.PureComponent<WithRouterProps> {\n  componentDidMount() {\n    if (getSystemStatus() !== 'UP') {\n      this.props.router.push({\n        pathname: '/maintenance',\n        query: {\n          return_to: window.location.pathname + window.location.search + window.location.hash\n        }\n      });\n    }\n  }\n\n  render() {\n    if (getSystemStatus() !== 'UP') {\n      return null;\n    }\n    return this.props.children;\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n/* eslint-disable react/jsx-sort-props */\nimport { Location } from 'history';\nimport { pick } from 'lodash';\nimport * as React from 'react';\nimport { render } from 'react-dom';\nimport { HelmetProvider } from 'react-helmet-async';\nimport { IntlProvider } from 'react-intl';\nimport { Provider } from 'react-redux';\nimport { IndexRoute, Redirect, Route, RouteConfig, RouteProps, Router } from 'react-router';\nimport { lazyLoadComponent } from 'sonar-ui-common/components/lazyLoadComponent';\nimport { ThemeProvider } from 'sonar-ui-common/components/theme';\nimport getHistory from 'sonar-ui-common/helpers/getHistory';\nimport aboutRoutes from '../../apps/about/routes';\nimport accountRoutes from '../../apps/account/routes';\nimport applicationConsoleRoutes from '../../apps/application-console/routes';\nimport backgroundTasksRoutes from '../../apps/background-tasks/routes';\nimport codeRoutes from '../../apps/code/routes';\nimport codingRulesRoutes from '../../apps/coding-rules/routes';\nimport componentMeasuresRoutes from '../../apps/component-measures/routes';\nimport customMeasuresRoutes from '../../apps/custom-measures/routes';\nimport customMetricsRoutes from '../../apps/custom-metrics/routes';\nimport documentationRoutes from '../../apps/documentation/routes';\nimport groupsRoutes from '../../apps/groups/routes';\nimport Issues from '../../apps/issues/components/AppContainer';\nimport { maintenanceRoutes, setupRoutes } from '../../apps/maintenance/routes';\nimport marketplaceRoutes from '../../apps/marketplace/routes';\nimport overviewRoutes from '../../apps/overview/routes';\nimport permissionTemplatesRoutes from '../../apps/permission-templates/routes';\nimport { globalPermissionsRoutes, projectPermissionsRoutes } from '../../apps/permissions/routes';\nimport portfolioRoutes from '../../apps/portfolio/routes';\nimport projectActivityRoutes from '../../apps/projectActivity/routes';\nimport projectBaselineRoutes from '../../apps/projectBaseline/routes';\nimport projectBranchesRoutes from '../../apps/projectBranches/routes';\nimport projectQualityGateRoutes from '../../apps/projectQualityGate/routes';\nimport projectQualityProfilesRoutes from '../../apps/projectQualityProfiles/routes';\nimport projectsRoutes from '../../apps/projects/routes';\nimport projectsManagementRoutes from '../../apps/projectsManagement/routes';\nimport qualityGatesRoutes from '../../apps/quality-gates/routes';\nimport qualityProfilesRoutes from '../../apps/quality-profiles/routes';\nimport sessionsRoutes from '../../apps/sessions/routes';\nimport settingsRoutes from '../../apps/settings/routes';\nimport systemRoutes from '../../apps/system/routes';\nimport tutorialsRoutes from '../../apps/tutorials/routes';\nimport usersRoutes from '../../apps/users/routes';\nimport webAPIRoutes from '../../apps/web-api/routes';\nimport webhooksRoutes from '../../apps/webhooks/routes';\nimport withIndexationGuard from '../../components/hoc/withIndexationGuard';\nimport App from '../components/App';\nimport GlobalContainer from '../components/GlobalContainer';\nimport { PageContext } from '../components/indexation/PageUnavailableDueToIndexation';\nimport MigrationContainer from '../components/MigrationContainer';\nimport * as theme from '../theme';\nimport getStore from './getStore';\n\nfunction handleUpdate(this: { state: { location: Location } }) {\n  const { action } = this.state.location;\n\n  if (action === 'PUSH') {\n    window.scrollTo(0, 0);\n  }\n}\n\n// this is not an official api\nconst RouteWithChildRoutes = Route as React.ComponentClass<\n  RouteProps & { childRoutes: RouteConfig }\n>;\n\nfunction renderRedirects() {\n  return (\n    <>\n      <Route\n        path=\"/account/issues\"\n        onEnter={(_, replace) => {\n          replace({ pathname: '/issues', query: { myIssues: 'true', resolved: 'false' } });\n        }}\n      />\n\n      <Route\n        path=\"/codingrules\"\n        onEnter={(_, replace) => {\n          replace(`/coding_rules${window.location.hash}`);\n        }}\n      />\n\n      <Route\n        path=\"/dashboard/index/:key\"\n        onEnter={(nextState, replace) => {\n          replace({ pathname: '/dashboard', query: { id: nextState.params.key } });\n        }}\n      />\n\n      <Route\n        path=\"/issues/search\"\n        onEnter={(_, replace) => {\n          replace(`/issues${window.location.hash}`);\n        }}\n      />\n\n      <Redirect from=\"/admin\" to=\"/admin/settings\" />\n      <Redirect from=\"/background_tasks\" to=\"/admin/background_tasks\" />\n      <Redirect from=\"/component/index\" to=\"/component\" />\n      <Redirect from=\"/component_issues\" to=\"/project/issues\" />\n      <Redirect from=\"/dashboard/index\" to=\"/dashboard\" />\n      <Redirect\n        from=\"/documentation/analysis/languages/vb\"\n        to=\"/documentation/analysis/languages/vbnet/\"\n      />\n      <Redirect from=\"/governance\" to=\"/portfolio\" />\n      <Redirect from=\"/groups\" to=\"/admin/groups\" />\n      <Redirect from=\"/extension/governance/portfolios\" to=\"/portfolios\" />\n      <Redirect from=\"/metrics\" to=\"/admin/custom_metrics\" />\n      <Redirect from=\"/permission_templates\" to=\"/admin/permission_templates\" />\n      <Redirect from=\"/profiles/index\" to=\"/profiles\" />\n      <Redirect from=\"/projects_admin\" to=\"/admin/projects_management\" />\n      <Redirect from=\"/quality_gates/index\" to=\"/quality_gates\" />\n      <Redirect from=\"/roles/global\" to=\"/admin/permissions\" />\n      <Redirect from=\"/admin/roles/global\" to=\"/admin/permissions\" />\n      <Redirect from=\"/settings\" to=\"/admin/settings\" />\n      <Redirect from=\"/settings/encryption\" to=\"/admin/settings/encryption\" />\n      <Redirect from=\"/settings/index\" to=\"/admin/settings\" />\n      <Redirect from=\"/sessions/login\" to=\"/sessions/new\" />\n      <Redirect from=\"/system\" to=\"/admin/system\" />\n      <Redirect from=\"/system/index\" to=\"/admin/system\" />\n      <Redirect from=\"/view\" to=\"/portfolio\" />\n      <Redirect from=\"/users\" to=\"/admin/users\" />\n      <Redirect from=\"/onboarding\" to=\"/projects/create\" />\n      <Redirect from=\"markdown/help\" to=\"formatting/help\" />\n    </>\n  );\n}\n\nfunction renderComponentRoutes() {\n  return (\n    <Route component={lazyLoadComponent(() => import('../components/ComponentContainer'))}>\n      <RouteWithChildRoutes path=\"code\" childRoutes={codeRoutes} />\n      <RouteWithChildRoutes path=\"component_measures\" childRoutes={componentMeasuresRoutes} />\n      <RouteWithChildRoutes path=\"dashboard\" childRoutes={overviewRoutes} />\n      <RouteWithChildRoutes path=\"portfolio\" childRoutes={portfolioRoutes} />\n      <RouteWithChildRoutes path=\"project/activity\" childRoutes={projectActivityRoutes} />\n      <Route\n        path=\"project/extension/:pluginKey/:extensionKey\"\n        component={lazyLoadComponent(() => import('../components/extensions/ProjectPageExtension'))}\n      />\n      <Route\n        path=\"project/issues\"\n        component={Issues}\n        onEnter={({ location: { query } }, replace) => {\n          if (query.types) {\n            if (query.types === 'SECURITY_HOTSPOT') {\n              replace({\n                pathname: '/security_hotspots',\n                query: { ...pick(query, ['id', 'branch', 'pullRequest']), assignedToMe: false }\n              });\n            } else {\n              query.types = query.types\n                .split(',')\n                .filter((type: string) => type !== 'SECURITY_HOTSPOT')\n                .join(',');\n            }\n          }\n        }}\n      />\n      <Route\n        path=\"security_hotspots\"\n        component={lazyLoadComponent(() =>\n          import('../../apps/security-hotspots/SecurityHotspotsApp')\n        )}\n      />\n      <RouteWithChildRoutes path=\"project/quality_gate\" childRoutes={projectQualityGateRoutes} />\n      <RouteWithChildRoutes\n        path=\"project/quality_profiles\"\n        childRoutes={projectQualityProfilesRoutes}\n      />\n      <RouteWithChildRoutes path=\"tutorials\" childRoutes={tutorialsRoutes} />\n      <Route component={lazyLoadComponent(() => import('../components/ProjectAdminContainer'))}>\n        <RouteWithChildRoutes path=\"custom_measures\" childRoutes={customMeasuresRoutes} />\n        <Route\n          path=\"project/admin/extension/:pluginKey/:extensionKey\"\n          component={lazyLoadComponent(() =>\n            import('../components/extensions/ProjectAdminPageExtension')\n          )}\n        />\n        <RouteWithChildRoutes path=\"project/background_tasks\" childRoutes={backgroundTasksRoutes} />\n        <RouteWithChildRoutes path=\"project/baseline\" childRoutes={projectBaselineRoutes} />\n        <RouteWithChildRoutes path=\"project/branches\" childRoutes={projectBranchesRoutes} />\n        <RouteWithChildRoutes path=\"project/settings\" childRoutes={settingsRoutes} />\n        <RouteWithChildRoutes path=\"project_roles\" childRoutes={projectPermissionsRoutes} />\n        <RouteWithChildRoutes path=\"application/console\" childRoutes={applicationConsoleRoutes} />\n        <RouteWithChildRoutes path=\"project/webhooks\" childRoutes={webhooksRoutes} />\n        <Route\n          path=\"project/deletion\"\n          component={lazyLoadComponent(() => import('../../apps/projectDeletion/App'))}\n        />\n        <Route\n          path=\"project/links\"\n          component={lazyLoadComponent(() => import('../../apps/projectLinks/App'))}\n        />\n        <Route\n          path=\"project/key\"\n          component={lazyLoadComponent(() => import('../../apps/projectKey/Key'))}\n        />\n      </Route>\n    </Route>\n  );\n}\n\nfunction renderAdminRoutes() {\n  return (\n    <Route component={lazyLoadComponent(() => import('../components/AdminContainer'))} path=\"admin\">\n      <Route\n        path=\"extension/:pluginKey/:extensionKey\"\n        component={lazyLoadComponent(() =>\n          import('../components/extensions/GlobalAdminPageExtension')\n        )}\n      />\n      <RouteWithChildRoutes path=\"background_tasks\" childRoutes={backgroundTasksRoutes} />\n      <RouteWithChildRoutes path=\"custom_metrics\" childRoutes={customMetricsRoutes} />\n      <RouteWithChildRoutes path=\"groups\" childRoutes={groupsRoutes} />\n      <RouteWithChildRoutes path=\"permission_templates\" childRoutes={permissionTemplatesRoutes} />\n      <RouteWithChildRoutes path=\"permissions\" childRoutes={globalPermissionsRoutes} />\n      <RouteWithChildRoutes path=\"projects_management\" childRoutes={projectsManagementRoutes} />\n      <RouteWithChildRoutes path=\"settings\" childRoutes={settingsRoutes} />\n      <RouteWithChildRoutes path=\"system\" childRoutes={systemRoutes} />\n      <RouteWithChildRoutes path=\"marketplace\" childRoutes={marketplaceRoutes} />\n      <RouteWithChildRoutes path=\"users\" childRoutes={usersRoutes} />\n      <RouteWithChildRoutes path=\"webhooks\" childRoutes={webhooksRoutes} />\n    </Route>\n  );\n}\n\nexport default function startReactApp(\n  lang: string,\n  currentUser?: T.CurrentUser,\n  appState?: T.AppState\n) {\n  const el = document.getElementById('content');\n\n  const history = getHistory();\n  const store = getStore(currentUser, appState);\n\n  render(\n    <HelmetProvider>\n      <Provider store={store}>\n        <IntlProvider defaultLocale={lang} locale={lang}>\n          <ThemeProvider theme={theme}>\n            <Router history={history} onUpdate={handleUpdate}>\n              {renderRedirects()}\n\n              <Route\n                path=\"formatting/help\"\n                component={lazyLoadComponent(() => import('../components/FormattingHelp'))}\n              />\n\n              <Route component={lazyLoadComponent(() => import('../components/SimpleContainer'))}>\n                <Route path=\"maintenance\">{maintenanceRoutes}</Route>\n                <Route path=\"setup\">{setupRoutes}</Route>\n              </Route>\n\n              <Route component={MigrationContainer}>\n                <Route\n                  component={lazyLoadComponent(() =>\n                    import('../components/SimpleSessionsContainer')\n                  )}>\n                  <RouteWithChildRoutes path=\"/sessions\" childRoutes={sessionsRoutes} />\n                </Route>\n\n                <Route path=\"/\" component={App}>\n                  <IndexRoute\n                    component={lazyLoadComponent(() => import('../components/Landing'))}\n                  />\n                  <RouteWithChildRoutes path=\"about\" childRoutes={aboutRoutes} />\n\n                  <Route component={GlobalContainer}>\n                    <RouteWithChildRoutes path=\"account\" childRoutes={accountRoutes} />\n                    <RouteWithChildRoutes path=\"coding_rules\" childRoutes={codingRulesRoutes} />\n                    <RouteWithChildRoutes path=\"documentation\" childRoutes={documentationRoutes} />\n                    <Route\n                      path=\"extension/:pluginKey/:extensionKey\"\n                      component={lazyLoadComponent(() =>\n                        import('../components/extensions/GlobalPageExtension')\n                      )}\n                    />\n                    <Route\n                      path=\"issues\"\n                      component={withIndexationGuard(Issues, PageContext.Issues)}\n                    />\n                    <RouteWithChildRoutes path=\"projects\" childRoutes={projectsRoutes} />\n                    <RouteWithChildRoutes path=\"quality_gates\" childRoutes={qualityGatesRoutes} />\n                    <Route\n                      path=\"portfolios\"\n                      component={lazyLoadComponent(() =>\n                        import('../components/extensions/PortfoliosPage')\n                      )}\n                    />\n                    <RouteWithChildRoutes path=\"profiles\" childRoutes={qualityProfilesRoutes} />\n                    <RouteWithChildRoutes path=\"web_api\" childRoutes={webAPIRoutes} />\n\n                    {renderComponentRoutes()}\n\n                    {renderAdminRoutes()}\n                  </Route>\n                  <Route\n                    // We don't want this route to have any menu.\n                    // That is why we can not have it under the accountRoutes\n                    path=\"account/reset_password\"\n                    component={lazyLoadComponent(() => import('../components/ResetPassword'))}\n                  />\n                  <Route\n                    path=\"not_found\"\n                    component={lazyLoadComponent(() => import('../components/NotFound'))}\n                  />\n                  <Route\n                    path=\"*\"\n                    component={lazyLoadComponent(() => import('../components/NotFound'))}\n                  />\n                </Route>\n              </Route>\n            </Router>\n          </ThemeProvider>\n        </IntlProvider>\n      </Provider>\n    </HelmetProvider>,\n    el\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { pick } from 'lodash';\nimport { getBaseUrl, Location } from 'sonar-ui-common/helpers/urls';\nimport { getProfilePath } from '../apps/quality-profiles/utils';\nimport { BranchLike, BranchParameters } from '../types/branch-like';\nimport { ComponentQualifier, isApplication, isPortfolioLike } from '../types/component';\nimport { GraphType } from '../types/project-activity';\nimport { SecurityStandard } from '../types/security';\nimport { getBranchLikeQuery, isBranch, isMainBranch, isPullRequest } from './branch-like';\n\ntype Query = Location['query'];\n\nexport function getComponentOverviewUrl(\n  componentKey: string,\n  componentQualifier: ComponentQualifier | string,\n  branchParameters?: BranchParameters\n) {\n  return isPortfolioLike(componentQualifier)\n    ? getPortfolioUrl(componentKey)\n    : getProjectQueryUrl(componentKey, branchParameters);\n}\n\nexport function getComponentAdminUrl(\n  componentKey: string,\n  componentQualifier: ComponentQualifier | string\n) {\n  if (isPortfolioLike(componentQualifier)) {\n    return getPortfolioAdminUrl(componentKey);\n  } else if (isApplication(componentQualifier)) {\n    return getApplicationAdminUrl(componentKey);\n  } else {\n    return getProjectUrl(componentKey);\n  }\n}\n\nexport function getProjectUrl(project: string, branch?: string): Location {\n  return { pathname: '/dashboard', query: { id: project, branch } };\n}\n\nexport function getProjectQueryUrl(project: string, branchParameters?: BranchParameters): Location {\n  return { pathname: '/dashboard', query: { id: project, ...branchParameters } };\n}\n\nexport function getPortfolioUrl(key: string): Location {\n  return { pathname: '/portfolio', query: { id: key } };\n}\n\nexport function getPortfolioAdminUrl(key: string) {\n  return {\n    pathname: '/project/admin/extension/governance/console',\n    query: { id: key, qualifier: ComponentQualifier.Portfolio }\n  };\n}\n\nexport function getApplicationAdminUrl(key: string) {\n  return { pathname: '/application/console', query: { id: key } };\n}\n\nexport function getComponentBackgroundTaskUrl(componentKey: string, status?: string): Location {\n  return { pathname: '/project/background_tasks', query: { id: componentKey, status } };\n}\n\nexport function getBranchLikeUrl(project: string, branchLike?: BranchLike): Location {\n  if (isPullRequest(branchLike)) {\n    return getPullRequestUrl(project, branchLike.key);\n  } else if (isBranch(branchLike) && !isMainBranch(branchLike)) {\n    return getBranchUrl(project, branchLike.name);\n  } else {\n    return getProjectUrl(project);\n  }\n}\n\nexport function getBranchUrl(project: string, branch: string): Location {\n  return { pathname: '/dashboard', query: { branch, id: project } };\n}\n\nexport function getPullRequestUrl(project: string, pullRequest: string): Location {\n  return { pathname: '/dashboard', query: { id: project, pullRequest } };\n}\n\n/**\n * Generate URL for a global issues page\n */\nexport function getIssuesUrl(query: Query): Location {\n  const pathname = '/issues';\n  return { pathname, query };\n}\n\n/**\n * Generate URL for a component's issues page\n */\nexport function getComponentIssuesUrl(componentKey: string, query?: Query): Location {\n  return { pathname: '/project/issues', query: { ...(query || {}), id: componentKey } };\n}\n\n/**\n * Generate URL for a component's security hotspot page\n */\nexport function getComponentSecurityHotspotsUrl(componentKey: string, query: Query = {}): Location {\n  const { branch, pullRequest, sinceLeakPeriod, hotspots, assignedToMe } = query;\n  return {\n    pathname: '/security_hotspots',\n    query: {\n      id: componentKey,\n      branch,\n      pullRequest,\n      sinceLeakPeriod,\n      hotspots,\n      assignedToMe,\n      ...pick(query, [\n        SecurityStandard.SONARSOURCE,\n        SecurityStandard.OWASP_TOP10,\n        SecurityStandard.SANS_TOP25\n      ])\n    }\n  };\n}\n\n/**\n * Generate URL for a component's drilldown page\n */\nexport function getComponentDrilldownUrl(options: {\n  componentKey: string;\n  metric: string;\n  branchLike?: BranchLike;\n  selectionKey?: string;\n  treemapView?: boolean;\n  listView?: boolean;\n}): Location {\n  const { componentKey, metric, branchLike, selectionKey, treemapView, listView } = options;\n  const query: Query = { id: componentKey, metric, ...getBranchLikeQuery(branchLike) };\n  if (treemapView) {\n    query.view = 'treemap';\n  }\n  if (listView) {\n    query.view = 'list';\n  }\n  if (selectionKey) {\n    query.selected = selectionKey;\n  }\n  return { pathname: '/component_measures', query };\n}\n\nexport function getComponentDrilldownUrlWithSelection(\n  componentKey: string,\n  selectionKey: string,\n  metric: string,\n  branchLike?: BranchLike\n): Location {\n  return getComponentDrilldownUrl({ componentKey, selectionKey, metric, branchLike });\n}\n\nexport function getMeasureTreemapUrl(componentKey: string, metric: string) {\n  return getComponentDrilldownUrl({ componentKey, metric, treemapView: true });\n}\n\nexport function getActivityUrl(component: string, branchLike?: BranchLike, graph?: GraphType) {\n  return {\n    pathname: '/project/activity',\n    query: { id: component, graph, ...getBranchLikeQuery(branchLike) }\n  };\n}\n\n/**\n * Generate URL for a component's measure history\n */\nexport function getMeasureHistoryUrl(component: string, metric: string, branchLike?: BranchLike) {\n  return {\n    pathname: '/project/activity',\n    query: {\n      id: component,\n      graph: 'custom',\n      custom_metrics: metric,\n      ...getBranchLikeQuery(branchLike)\n    }\n  };\n}\n\n/**\n * Generate URL for a component's permissions page\n */\nexport function getComponentPermissionsUrl(componentKey: string): Location {\n  return { pathname: '/project_roles', query: { id: componentKey } };\n}\n\n/**\n * Generate URL for a quality profile\n */\nexport function getQualityProfileUrl(name: string, language: string): Location {\n  return getProfilePath(name, language);\n}\n\nexport function getQualityGateUrl(key: string): Location {\n  return {\n    pathname: '/quality_gates/show/' + encodeURIComponent(key)\n  };\n}\n\nexport function getQualityGatesUrl(): Location {\n  return {\n    pathname: '/quality_gates'\n  };\n}\n\n/**\n * Generate URL for the rules page\n */\nexport function getRulesUrl(query: Query): Location {\n  return { pathname: '/coding_rules', query };\n}\n\n/**\n * Generate URL for the rules page filtering only active deprecated rules\n */\nexport function getDeprecatedActiveRulesUrl(query: Query = {}): Location {\n  const baseQuery = { activation: 'true', statuses: 'DEPRECATED' };\n  return getRulesUrl({ ...query, ...baseQuery });\n}\n\nexport function getRuleUrl(rule: string) {\n  return getRulesUrl({ open: rule, rule_key: rule });\n}\n\nexport function getFormattingHelpUrl(): string {\n  return getBaseUrl() + '/formatting/help';\n}\n\nexport function getCodeUrl(\n  project: string,\n  branchLike?: BranchLike,\n  selected?: string,\n  line?: number\n) {\n  return {\n    pathname: '/code',\n    query: { id: project, ...getBranchLikeQuery(branchLike), selected, line }\n  };\n}\n\nexport function getHomePageUrl(homepage: T.HomePage) {\n  switch (homepage.type) {\n    case 'APPLICATION':\n      return homepage.branch\n        ? getProjectUrl(homepage.component, homepage.branch)\n        : getProjectUrl(homepage.component);\n    case 'PROJECT':\n      return homepage.branch\n        ? getBranchUrl(homepage.component, homepage.branch)\n        : getProjectUrl(homepage.component);\n    case 'PORTFOLIO':\n      return getPortfolioUrl(homepage.component);\n    case 'PORTFOLIOS':\n      return '/portfolios';\n    case 'MY_PROJECTS':\n      return '/projects';\n    case 'ISSUES':\n    case 'MY_ISSUES':\n      return { pathname: '/issues', query: { resolved: 'false' } };\n  }\n\n  // should never happen, but just in case...\n  return '/projects';\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { parseError } from 'sonar-ui-common/helpers/request';\nimport { addGlobalErrorMessage } from '../../store/globalMessages';\nimport getStore from './getStore';\n\nexport default function throwGlobalError(param: Response | any): Promise<Response | any> {\n  const store = getStore();\n\n  if (param.response instanceof Response) {\n    /* eslint-disable-next-line no-console */\n    console.warn('DEPRECATED: response should not be wrapped, pass it directly.');\n    param = param.response;\n  }\n\n  if (param instanceof Response) {\n    return parseError(param)\n      .then(\n        message => {\n          store.dispatch(addGlobalErrorMessage(message));\n        },\n        () => {}\n      )\n      .then(() => Promise.reject(param));\n  }\n\n  return Promise.reject(param);\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { combineReducers } from 'redux';\nimport globalMessages, * as fromGlobalMessages from '../../../store/globalMessages';\nimport definitions, * as fromDefinitions from './definitions';\nimport settingsPage, * as fromSettingsPage from './settingsPage';\nimport values, * as fromValues from './values';\n\ninterface State {\n  definitions: fromDefinitions.State;\n  globalMessages: fromGlobalMessages.State;\n  settingsPage: fromSettingsPage.State;\n  values: fromValues.State;\n}\n\nexport default combineReducers({ definitions, values, settingsPage, globalMessages });\n\nexport function getDefinition(state: State, key: string) {\n  return fromDefinitions.getDefinition(state.definitions, key);\n}\n\nexport function getAllCategories(state: State) {\n  return fromDefinitions.getAllCategories(state.definitions);\n}\n\nexport function getDefaultCategory(state: State) {\n  return fromDefinitions.getDefaultCategory(state.definitions);\n}\n\nexport function getValue(state: State, key: string, component?: string) {\n  return fromValues.getValue(state.values, key, component);\n}\n\nexport function getSettingsForCategory(state: State, category: string, component?: string) {\n  return fromDefinitions.getDefinitionsForCategory(state.definitions, category).map(definition => ({\n    key: definition.key,\n    ...getValue(state, definition.key, component),\n    definition\n  }));\n}\n\nexport function getChangedValue(state: State, key: string) {\n  return fromSettingsPage.getChangedValue(state.settingsPage, key);\n}\n\nexport function isLoading(state: State, key: string) {\n  return fromSettingsPage.isLoading(state.settingsPage, key);\n}\n\nexport function getValidationMessage(state: State, key: string) {\n  return fromSettingsPage.getValidationMessage(state.settingsPage, key);\n}\n\nexport function getGlobalMessages(state: State) {\n  return fromGlobalMessages.getGlobalMessages(state.globalMessages);\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { combineReducers } from 'redux';\nimport settingsApp, * as fromSettingsApp from '../apps/settings/store/rootReducer';\nimport { BranchLike } from '../types/branch-like';\nimport appState from './appState';\nimport branches, * as fromBranches from './branches';\nimport globalMessages, * as fromGlobalMessages from './globalMessages';\nimport languages, * as fromLanguages from './languages';\nimport metrics, * as fromMetrics from './metrics';\nimport users, * as fromUsers from './users';\n\nexport type Store = {\n  appState: T.AppState;\n  branches: fromBranches.State;\n  globalMessages: fromGlobalMessages.State;\n  languages: T.Languages;\n  metrics: fromMetrics.State;\n  users: fromUsers.State;\n\n  // apps\n  settingsApp: any;\n};\n\nexport default combineReducers<Store>({\n  appState,\n  branches,\n  globalMessages,\n  languages,\n  metrics,\n  users,\n\n  // apps\n  settingsApp\n});\n\nexport function getAppState(state: Store) {\n  return state.appState;\n}\n\nexport function getGlobalMessages(state: Store) {\n  return fromGlobalMessages.getGlobalMessages(state.globalMessages);\n}\n\nexport function getLanguages(state: Store) {\n  return fromLanguages.getLanguages(state.languages);\n}\n\nexport function getCurrentUserSetting(state: Store, key: T.CurrentUserSettingNames) {\n  return fromUsers.getCurrentUserSetting(state.users, key);\n}\n\nexport function getCurrentUser(state: Store) {\n  return fromUsers.getCurrentUser(state.users);\n}\n\nexport function getMetrics(state: Store) {\n  return fromMetrics.getMetrics(state.metrics);\n}\n\nexport function getMetricsKey(state: Store) {\n  return fromMetrics.getMetricsKey(state.metrics);\n}\n\nexport function getMetricByKey(state: Store, key: string) {\n  return fromMetrics.getMetricByKey(state.metrics, key);\n}\n\nexport function getGlobalSettingValue(state: Store, key: string) {\n  return fromSettingsApp.getValue(state.settingsApp, key);\n}\n\nexport function getSettingsAppDefinition(state: Store, key: string) {\n  return fromSettingsApp.getDefinition(state.settingsApp, key);\n}\n\nexport function getSettingsAppAllCategories(state: Store) {\n  return fromSettingsApp.getAllCategories(state.settingsApp);\n}\n\nexport function getSettingsAppDefaultCategory(state: Store) {\n  return fromSettingsApp.getDefaultCategory(state.settingsApp);\n}\n\nexport function getSettingsAppSettingsForCategory(\n  state: Store,\n  category: string,\n  component?: string\n) {\n  return fromSettingsApp.getSettingsForCategory(state.settingsApp, category, component);\n}\n\nexport function getSettingsAppChangedValue(state: Store, key: string) {\n  return fromSettingsApp.getChangedValue(state.settingsApp, key);\n}\n\nexport function isSettingsAppLoading(state: Store, key: string) {\n  return fromSettingsApp.isLoading(state.settingsApp, key);\n}\n\nexport function getSettingsAppValidationMessage(state: Store, key: string) {\n  return fromSettingsApp.getValidationMessage(state.settingsApp, key);\n}\n\nexport function getBranchStatusByBranchLike(\n  state: Store,\n  component: string,\n  branchLike: BranchLike\n) {\n  return fromBranches.getBranchStatusByBranchLike(state.branches, component, branchLike);\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { orderBy } from 'lodash';\nimport {\n  Branch,\n  BranchLike,\n  BranchLikeTree,\n  BranchParameters,\n  MainBranch,\n  PullRequest\n} from '../types/branch-like';\n\nexport function isBranch(branchLike?: BranchLike): branchLike is Branch {\n  return branchLike !== undefined && (branchLike as Branch).isMain !== undefined;\n}\n\nexport function isMainBranch(branchLike?: BranchLike): branchLike is MainBranch {\n  return isBranch(branchLike) && branchLike.isMain;\n}\n\nexport function sortBranches(branches: Branch[]) {\n  return orderBy(branches, [b => b.isMain, b => b.name], ['desc', 'asc']);\n}\n\nexport function isPullRequest(branchLike?: BranchLike): branchLike is PullRequest {\n  return branchLike !== undefined && (branchLike as PullRequest).key !== undefined;\n}\n\nexport function sortPullRequests(pullRequests: PullRequest[]) {\n  return orderBy(pullRequests, pr => getPullRequestDisplayName(pr));\n}\n\nexport function getPullRequestDisplayName(pullRequest: PullRequest) {\n  return `${pullRequest.key} – ${pullRequest.title}`;\n}\n\nexport function getBranchLikeDisplayName(branchLike: BranchLike) {\n  return isPullRequest(branchLike) ? getPullRequestDisplayName(branchLike) : branchLike.name;\n}\n\nexport function getBranchLikeKey(branchLike: BranchLike) {\n  return isPullRequest(branchLike) ? `pull-request-${branchLike.key}` : `branch-${branchLike.name}`;\n}\n\nexport function isSameBranchLike(a: BranchLike | undefined, b: BranchLike | undefined) {\n  // main branches are always equal\n  if (isMainBranch(a) && isMainBranch(b)) {\n    return true;\n  }\n\n  // Branches are compared by name\n  if (isBranch(a) && isBranch(b)) {\n    return a.name === b.name;\n  }\n\n  // pull requests are compared by id\n  if (isPullRequest(a) && isPullRequest(b)) {\n    return a.key === b.key;\n  }\n\n  // finally if both parameters are `undefined`, consider them equal\n  return a === b;\n}\n\nexport function getBrancheLikesAsTree(branchLikes: BranchLike[]): BranchLikeTree {\n  const mainBranch = branchLikes.find(isMainBranch);\n  const branches = orderBy(\n    branchLikes.filter(isBranch).filter(b => !isMainBranch(b)),\n    b => b.name\n  );\n  const pullRequests = orderBy(branchLikes.filter(isPullRequest), b => b.key);\n  const parentlessPullRequests = pullRequests.filter(\n    pr => !pr.isOrphan && ![mainBranch, ...branches].find(b => !!b && b.name === pr.base)\n  );\n  const orphanPullRequests = pullRequests.filter(pr => pr.isOrphan);\n\n  const tree: BranchLikeTree = {\n    branchTree: branches.map(b => ({ branch: b, pullRequests: getPullRequests(b) })),\n    parentlessPullRequests,\n    orphanPullRequests\n  };\n\n  if (mainBranch) {\n    tree.mainBranchTree = {\n      branch: mainBranch,\n      pullRequests: getPullRequests(mainBranch)\n    };\n  }\n\n  return tree;\n\n  function getPullRequests(branch: Branch) {\n    return pullRequests.filter(pr => !pr.isOrphan && pr.base === branch.name);\n  }\n}\n\nexport function getBranchLikeQuery(branchLike?: BranchLike): BranchParameters {\n  if (isBranch(branchLike) && !isMainBranch(branchLike)) {\n    return { branch: branchLike.name };\n  } else if (isPullRequest(branchLike)) {\n    return { pullRequest: branchLike.key };\n  } else {\n    return {};\n  }\n}\n\n// Create branch object from branch name or pull request key\nexport function fillBranchLike(\n  branch?: string,\n  pullRequest?: string\n): Branch | PullRequest | undefined {\n  if (branch) {\n    return {\n      isMain: false,\n      name: branch\n    } as Branch;\n  } else if (pullRequest) {\n    return { base: '', branch: '', key: pullRequest, title: '' } as PullRequest;\n  }\n  return undefined;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nexport enum Visibility {\n  Public = 'public',\n  Private = 'private'\n}\n\nexport enum ComponentQualifier {\n  Application = 'APP',\n  Directory = 'DIR',\n  Developper = 'DEV',\n  File = 'FIL',\n  Portfolio = 'VW',\n  Project = 'TRK',\n  SubPortfolio = 'SVW',\n  SubProject = 'BRC',\n  TestFile = 'UTS'\n}\n\nexport enum ProjectKeyValidationResult {\n  Valid = 'valid',\n  Empty = 'empty',\n  TooLong = 'too_long',\n  InvalidChar = 'invalid_char',\n  OnlyDigits = 'only_digits'\n}\n\nexport interface TreeComponent extends T.LightComponent {\n  id?: string;\n  name: string;\n  path?: string;\n  refId?: string;\n  refKey?: string;\n  tags?: string[];\n  visibility: T.Visibility;\n}\n\nexport interface TreeComponentWithPath extends TreeComponent {\n  path: string;\n}\n\nexport function isPortfolioLike(\n  componentQualifier?: string | ComponentQualifier\n): componentQualifier is ComponentQualifier.Portfolio | ComponentQualifier.SubPortfolio {\n  return Boolean(\n    componentQualifier &&\n      [\n        ComponentQualifier.Portfolio.toString(),\n        ComponentQualifier.SubPortfolio.toString()\n      ].includes(componentQualifier)\n  );\n}\n\nexport function isApplication(\n  componentQualifier?: string | ComponentQualifier\n): componentQualifier is ComponentQualifier.Application {\n  return componentQualifier === ComponentQualifier.Application;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n// IMPORTANT: any change in this file requires restart of the dev server\nconst grid = 8;\n\nmodule.exports = {\n  colors: {\n    blue: '#4b9fd5',\n    veryLightBlue: '#f2faff',\n    lightBlue: '#cae3f2',\n    darkBlue: '#236a97',\n    veryDarkBlue: '#0E516F',\n    green: '#00aa00',\n    lightGreen: '#b0d513',\n    veryLightGreen: '#f5f9fc',\n    yellow: '#eabe06',\n    orange: '#ed7d20',\n    red: '#d4333f',\n    purple: '#9139d4',\n    white: '#ffffff',\n\n    gray94: '#efefef',\n    gray80: '#cdcdcd',\n    gray71: '#b4b4b4',\n    gray67: '#aaa',\n    gray60: '#999',\n    gray40: '#404040',\n\n    transparentWhite: 'rgba(255,255,255,0.62)',\n    transparentGray: 'rgba(200, 200, 200, 0.5)',\n    transparentBlack: 'rgba(0, 0, 0, 0.25)',\n\n    disableGrayText: '#bbb',\n    disableGrayBorder: '#ddd',\n    disableGrayBg: '#ebebeb',\n\n    barBackgroundColor: '#f3f3f3',\n    barBackgroundColorHighlight: '#f8f8f8',\n    barBorderColor: '#e6e6e6',\n\n    globalNavBarBg: '#262626',\n\n    // table\n    rowHoverHighlight: '#ecf6fe',\n\n    // fonts\n    baseFontColor: '#444',\n    secondFontColor: '#777',\n\n    // forms\n    mandatoryFieldColor: '#a4030f',\n\n    // leak\n    leakPrimaryColor: '#fbf3d5',\n    leakSecondaryColor: '#f1e8cb',\n\n    // issues\n    issueBgColor: '#f2dede',\n    hotspotBgColor: '#eeeff4',\n    issueLocationSelected: '#f4b1b0',\n    issueLocationHighlighted: '#e1e1f2',\n    conciseIssueRed: '#d18582',\n    conciseIssueRedSelected: '#a4030f',\n\n    // coverage\n    lineCoverageRed: '#a4030f',\n    lineCoverageGreen: '#b4dd78',\n\n    // alerts\n    warningIconColor: '#eabe06',\n\n    alertBorderError: '#f4b1b0',\n    alertBackgroundError: '#f2dede',\n    alertTextError: '#862422',\n    alertIconError: '#a4030f',\n\n    alertBorderWarning: '#faebcc',\n    alertBackgroundWarning: '#fcf8e3',\n    alertTextWarning: '#6f4f17',\n    alertIconWarning: '#db781a',\n\n    alertBorderSuccess: '#d6e9c6',\n    alertBackgroundSuccess: '#dff0d8',\n    alertTextSuccess: '#215821',\n    alertIconSuccess: '#6d9867',\n\n    alertBorderInfo: '#b1dff3',\n    alertBackgroundInfo: '#d9edf7',\n    alertTextInfo: '#0e516f',\n    alertIconInfo: '#0271b9',\n\n    // badge\n    badgeBlueBackground: '#2E7CB5',\n    badgeBlueColor: '#FFFFFF',\n    badgeRedBackgroundOnIssue: '#EEC8C8',\n\n    // alm\n    azure: '#0078d7',\n    bitbucket: '#0052CC',\n    github: '#e1e4e8',\n\n    // code/pre\n    codeBackground: '#e6e6e6',\n\n    // sonarcloud\n    sonarcloudOrange500: '#fd6a00',\n    sonarcloudOrange600: '#e26003',\n    sonarcloudOrange700: '#db5700',\n\n    sonarcloudBlack100: '#ffffff',\n    sonarcloudBlack200: '#f9f9fb',\n    sonarcloudBlack250: '#e6e8ea',\n    sonarcloudBlack300: '#cfd3d7',\n    sonarcloudBlack500: '#8a8c8f',\n    sonarcloudBlack700: '#434447',\n    sonarcloudBlack800: '#2d3032',\n    sonarcloudBlack900: '#070706',\n\n    sonarcloudBlue500: '#4c9bd6',\n    sonarcloudBlue600: '#327bb3',\n    sonarcloudBlue900: '#0b3c62',\n\n    sonarcloudBorderGray: 'rgba(207, 211, 215, 0.5)'\n  },\n\n  sizes: {\n    gridSize: `${grid}px`,\n\n    baseFontSize: '13px',\n    verySmallFontSize: '10px',\n    smallFontSize: '12px',\n    mediumFontSize: '14px',\n    bigFontSize: '16px',\n    hugeFontSize: '24px',\n    giganticFontSize: '36px',\n\n    hugeControlHeight: `${5 * grid}px`,\n    largeControlHeight: `${4 * grid}px`,\n    controlHeight: `${3 * grid}px`,\n    smallControlHeight: `${2.5 * grid}px`,\n    tinyControlHeight: `${2 * grid}px`,\n\n    globalNavHeight: `${6 * grid}px`,\n\n    globalNavContentHeight: `${4 * grid}px`,\n\n    maxPageWidth: '1320px',\n    minPageWidth: '1080px',\n    pagePadding: '20px'\n  },\n\n  rawSizes: {\n    grid,\n    globalNavHeightRaw: 6 * grid,\n    globalNavContentHeightRaw: 4 * grid,\n    contextNavHeightRaw: 9 * grid\n  },\n\n  fonts: {\n    baseFontFamily: \"'Helvetica Neue', Helvetica, Arial, sans-serif\",\n    systemFontFamily: \"-apple-system,'BlinkMacSystemFont','Helvetica','Arial',sans-serif\",\n    sourceCodeFontFamily: \"Consolas, 'Ubuntu Mono', 'Liberation Mono', Menlo, Courier, monospace\"\n  },\n\n  // z-index\n  // =======\n  //    1 -  100  for page elements (e.g. sidebars, panels)\n  //  101 -  500  for generic page fixed elements (e.g. navigation, workspace)\n  //  501 - 3000  for page ui elements\n  // 3001 - 8000  for generic ui elements (e.g. dropdowns, tooltips)\n  zIndexes: {\n    // common\n    aboveNormalZIndex: '3',\n    normalZIndex: '2',\n    belowNormalZIndex: '1',\n\n    // ui elements\n    pageMainZIndex: '50',\n    pageSideZIndex: '51',\n    pageHeaderZIndex: '55',\n\n    globalBannerZIndex: '60',\n\n    contextbarZIndex: '420',\n\n    tooltipZIndex: '8000',\n\n    dropdownMenuZIndex: '7500',\n\n    processContainerZIndex: '7000',\n\n    modalZIndex: '6001',\n    modalOverlayZIndex: '6000',\n\n    popupZIndex: '5000'\n  },\n\n  others: {\n    defaultShadow: '0 6px 12px rgba(0, 0, 0, 0.175)'\n  }\n};\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nexport function hasGlobalPermission(user: T.CurrentUser, permission: string): boolean {\n  if (!user.permissions) {\n    return false;\n  }\n  return user.permissions.global.includes(permission);\n}\n\nexport function isLoggedIn(user: T.CurrentUser): user is T.LoggedInUser {\n  return user.isLoggedIn;\n}\n\nexport function isUserActive(user: T.UserBase): user is T.UserActive {\n  return user.active !== false && Boolean(user.name);\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { formatMeasure } from 'sonar-ui-common/helpers/measures';\nimport { isDefined } from 'sonar-ui-common/helpers/types';\nimport { MetricKey } from '../types/metrics';\nimport {\n  QualityGateStatusCondition,\n  QualityGateStatusConditionEnhanced\n} from '../types/quality-gates';\n\n/** Return a localized metric name */\nexport function localizeMetric(metricKey: MetricKey | string): string {\n  return translate('metric', metricKey, 'name');\n}\n\n/** Return corresponding \"short\" for better display in UI */\nexport function getShortType(type: string): string {\n  if (type === 'INT') {\n    return 'SHORT_INT';\n  } else if (type === 'WORK_DUR') {\n    return 'SHORT_WORK_DUR';\n  }\n  return type;\n}\n\nexport function enhanceMeasuresWithMetrics(\n  measures: T.Measure[],\n  metrics: T.Metric[]\n): T.MeasureEnhanced[] {\n  return measures\n    .map(measure => {\n      const metric = metrics.find(metric => metric.key === measure.metric);\n      return metric && { ...measure, metric };\n    })\n    .filter(isDefined);\n}\n\nexport function enhanceConditionWithMeasure(\n  condition: QualityGateStatusCondition,\n  measures: T.MeasureEnhanced[]\n): QualityGateStatusConditionEnhanced | undefined {\n  const measure = measures.find(m => m.metric.key === condition.metric);\n\n  // Make sure we have a period index. This is necessary when dealing with\n  // applications.\n  let { period } = condition;\n  if (measure && measure.period && !period) {\n    period = measure.period.index;\n  }\n\n  return measure && { ...condition, period, measure };\n}\n\nexport function isPeriodBestValue(measure: T.Measure | T.MeasureEnhanced): boolean {\n  return measure.period?.bestValue || false;\n}\n\n/** Check if metric is differential */\nexport function isDiffMetric(metricKey: MetricKey | string): boolean {\n  return metricKey.indexOf('new_') === 0;\n}\n\nfunction getRatingGrid(): string {\n  // workaround cyclic dependencies\n  const getStore = require('../app/utils/getStore').default;\n  const { getGlobalSettingValue } = require('../store/rootReducer');\n\n  const store = getStore();\n  const settingValue = getGlobalSettingValue(store.getState(), 'sonar.technicalDebt.ratingGrid');\n  return settingValue ? settingValue.value : '';\n}\n\nlet maintainabilityRatingGrid: number[];\n\nfunction getMaintainabilityRatingGrid(): number[] {\n  if (maintainabilityRatingGrid) {\n    return maintainabilityRatingGrid;\n  }\n\n  const str = getRatingGrid();\n  const numbers = str\n    .split(',')\n    .map(s => parseFloat(s))\n    .filter(n => !isNaN(n));\n\n  if (numbers.length === 4) {\n    maintainabilityRatingGrid = numbers;\n  } else {\n    maintainabilityRatingGrid = [0, 0, 0, 0];\n  }\n\n  return maintainabilityRatingGrid;\n}\n\nfunction getMaintainabilityRatingTooltip(rating: number): string {\n  const maintainabilityGrid = getMaintainabilityRatingGrid();\n  const maintainabilityRatingThreshold = maintainabilityGrid[Math.floor(rating) - 2];\n\n  if (rating < 2) {\n    return translateWithParameters(\n      'metric.sqale_rating.tooltip.A',\n      formatMeasure(maintainabilityGrid[0] * 100, 'PERCENT')\n    );\n  }\n\n  const ratingLetter = formatMeasure(rating, 'RATING');\n\n  return translateWithParameters(\n    'metric.sqale_rating.tooltip',\n    ratingLetter,\n    formatMeasure(maintainabilityRatingThreshold * 100, 'PERCENT')\n  );\n}\n\nexport function getRatingTooltip(metricKey: MetricKey | string, value: number | string): string {\n  const ratingLetter = formatMeasure(value, 'RATING');\n\n  const finalMetricKey = isDiffMetric(metricKey) ? metricKey.substr(4) : metricKey;\n\n  return finalMetricKey === 'sqale_rating' || finalMetricKey === 'maintainability_rating'\n    ? getMaintainabilityRatingTooltip(Number(value))\n    : translate('metric', finalMetricKey, 'tooltip', ratingLetter);\n}\n\nexport function getDisplayMetrics(metrics: T.Metric[]) {\n  return metrics.filter(metric => !metric.hidden && !['DATA', 'DISTRIB'].includes(metric.type));\n}\n\nexport function findMeasure(measures: T.MeasureEnhanced[], metric: MetricKey | string) {\n  return measures.find(measure => measure.metric.key === metric);\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { getJSON, post, postJSON, RequestData } from 'sonar-ui-common/helpers/request';\nimport throwGlobalError from '../app/utils/throwGlobalError';\nimport getCoverageStatus from '../components/SourceViewer/helpers/getCoverageStatus';\nimport { IssueResponse, RawIssuesResponse } from '../types/issues';\n\ntype FacetName =\n  | 'assigned_to_me'\n  | 'assignees'\n  | 'authors'\n  | 'createdAt'\n  | 'cwe'\n  | 'directories'\n  | 'files'\n  | 'languages'\n  | 'modules'\n  | 'owaspTop10'\n  | 'projects'\n  | 'reporters'\n  | 'resolutions'\n  | 'rules'\n  | 'sansTop25'\n  | 'severities'\n  | 'statuses'\n  | 'tags'\n  | 'types';\n\nexport function searchIssues(query: RequestData): Promise<RawIssuesResponse> {\n  return getJSON('/api/issues/search', query);\n}\n\nexport function getFacets(\n  query: RequestData,\n  facets: FacetName[]\n): Promise<{\n  facets: Array<{ property: string; values: T.FacetValue[] }>;\n  response: RawIssuesResponse;\n}> {\n  const data = {\n    ...query,\n    facets: facets.join(),\n    ps: 1,\n    additionalFields: '_all'\n  };\n  return searchIssues(data).then(r => {\n    return { facets: r.facets, response: r };\n  });\n}\n\nexport function getFacet(\n  query: RequestData,\n  facet: FacetName\n): Promise<{ facet: { count: number; val: string }[]; response: RawIssuesResponse }> {\n  return getFacets(query, [facet]).then(r => {\n    return { facet: r.facets[0].values, response: r.response };\n  });\n}\n\nexport function searchIssueTags(data: {\n  project?: string;\n  ps?: number;\n  q?: string;\n}): Promise<string[]> {\n  return getJSON('/api/issues/tags', data)\n    .then(r => r.tags)\n    .catch(throwGlobalError);\n}\n\nexport function getIssueChangelog(issue: string): Promise<{ changelog: T.IssueChangelog[] }> {\n  return getJSON('/api/issues/changelog', { issue }).catch(throwGlobalError);\n}\n\nexport function getIssueFilters() {\n  return getJSON('/api/issue_filters/search').then(r => r.issueFilters);\n}\n\nexport function addIssueComment(data: { issue: string; text: string }): Promise<IssueResponse> {\n  return postJSON('/api/issues/add_comment', data);\n}\n\nexport function deleteIssueComment(data: { comment: string }): Promise<IssueResponse> {\n  return postJSON('/api/issues/delete_comment', data);\n}\n\nexport function editIssueComment(data: { comment: string; text: string }): Promise<IssueResponse> {\n  return postJSON('/api/issues/edit_comment', data);\n}\n\nexport function setIssueAssignee(data: {\n  issue: string;\n  assignee?: string;\n}): Promise<IssueResponse> {\n  return postJSON('/api/issues/assign', data);\n}\n\nexport function setIssueSeverity(data: { issue: string; severity: string }): Promise<any> {\n  return postJSON('/api/issues/set_severity', data);\n}\n\nexport function setIssueTags(data: { issue: string; tags: string }): Promise<IssueResponse> {\n  return postJSON('/api/issues/set_tags', data);\n}\n\nexport function setIssueTransition(data: {\n  issue: string;\n  transition: string;\n}): Promise<IssueResponse> {\n  return postJSON('/api/issues/do_transition', data);\n}\n\nexport function setIssueType(data: { issue: string; type: string }): Promise<IssueResponse> {\n  return postJSON('/api/issues/set_type', data);\n}\n\nexport function bulkChangeIssues(issueKeys: string[], query: RequestData): Promise<void> {\n  return post('/api/issues/bulk_change', { issues: issueKeys.join(), ...query });\n}\n\nexport function searchIssueAuthors(data: {\n  project?: string;\n  ps?: number;\n  q?: string;\n}): Promise<string[]> {\n  return getJSON('/api/issues/authors', data).then(r => r.authors, throwGlobalError);\n}\n\nexport function getIssueFlowSnippets(issueKey: string): Promise<T.Dict<T.SnippetsByComponent>> {\n  return getJSON('/api/sources/issue_snippets', { issueKey }).then(result => {\n    Object.keys(result).forEach(k => {\n      if (result[k].sources) {\n        result[k].sources = result[k].sources.reduce(\n          (lineMap: T.Dict<T.SourceLine>, line: T.SourceLine) => {\n            line.coverageStatus = getCoverageStatus(line);\n            lineMap[line.line] = line;\n            return lineMap;\n          },\n          {}\n        );\n      }\n    });\n    return result;\n  });\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { withRouter as originalWithRouter, WithRouterProps } from 'react-router';\n\nexport type Location = WithRouterProps['location'];\nexport type Router = WithRouterProps['router'];\n\ninterface InjectedProps {\n  location?: Partial<Location>;\n  router?: Partial<Router>;\n}\n\nexport function withRouter<P extends InjectedProps>(\n  WrappedComponent: React.ComponentType<P & InjectedProps>\n): React.ComponentType<T.Omit<P, keyof InjectedProps>> {\n  return originalWithRouter(WrappedComponent as any);\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { getJSON, post, postJSON, RequestData } from 'sonar-ui-common/helpers/request';\nimport throwGlobalError from '../app/utils/throwGlobalError';\nimport { BranchParameters } from '../types/branch-like';\nimport { ComponentQualifier, TreeComponent, TreeComponentWithPath } from '../types/component';\n\nexport interface BaseSearchProjectsParameters {\n  analyzedBefore?: string;\n  onProvisionedOnly?: boolean;\n  projects?: string;\n  q?: string;\n  qualifiers?: string;\n  visibility?: T.Visibility;\n}\n\nexport interface ProjectBase {\n  key: string;\n  name: string;\n  qualifier: string;\n  visibility: T.Visibility;\n}\n\nexport interface Project extends ProjectBase {\n  id: string;\n  lastAnalysisDate?: string;\n}\n\nexport interface SearchProjectsParameters extends BaseSearchProjectsParameters {\n  p?: number;\n  ps?: number;\n}\n\nexport function getComponents(\n  parameters: SearchProjectsParameters\n): Promise<{\n  components: Project[];\n  paging: T.Paging;\n}> {\n  return getJSON('/api/projects/search', parameters);\n}\n\nexport function bulkDeleteProjects(\n  parameters: BaseSearchProjectsParameters\n): Promise<void | Response> {\n  return post('/api/projects/bulk_delete', parameters).catch(throwGlobalError);\n}\n\nexport function deleteProject(project: string): Promise<void | Response> {\n  return post('/api/projects/delete', { project }).catch(throwGlobalError);\n}\n\nexport function deletePortfolio(portfolio: string): Promise<void | Response> {\n  return post('/api/views/delete', { key: portfolio }).catch(throwGlobalError);\n}\n\nexport function createProject(data: {\n  name: string;\n  project: string;\n  visibility?: T.Visibility;\n}): Promise<{ project: ProjectBase }> {\n  return postJSON('/api/projects/create', data).catch(throwGlobalError);\n}\n\nexport function searchProjectTags(data?: { ps?: number; q?: string }): Promise<any> {\n  return getJSON('/api/project_tags/search', data).catch(throwGlobalError);\n}\n\nexport function setApplicationTags(data: { application: string; tags: string }): Promise<void> {\n  return post('/api/applications/set_tags', data);\n}\n\nexport function setProjectTags(data: { project: string; tags: string }): Promise<void> {\n  return post('/api/project_tags/set', data);\n}\n\nexport function getComponentTree(\n  strategy: string,\n  component: string,\n  metrics: string[] = [],\n  additional: RequestData = {}\n): Promise<{\n  baseComponent: T.ComponentMeasure;\n  components: T.ComponentMeasure[];\n  metrics: T.Metric[];\n  paging: T.Paging;\n}> {\n  const url = '/api/measures/component_tree';\n  const data = { ...additional, component, metricKeys: metrics.join(','), strategy };\n  return getJSON(url, data).catch(throwGlobalError);\n}\n\nexport function getChildren(\n  component: string,\n  metrics: string[] = [],\n  additional: RequestData = {}\n) {\n  return getComponentTree('children', component, metrics, additional);\n}\n\nexport function getComponentLeaves(\n  component: string,\n  metrics: string[] = [],\n  additional: RequestData = {}\n) {\n  return getComponentTree('leaves', component, metrics, additional);\n}\n\nexport function getComponent(\n  data: { component: string; metricKeys: string } & BranchParameters\n): Promise<{ component: T.ComponentMeasure }> {\n  return getJSON('/api/measures/component', data);\n}\n\ntype GetTreeParams = {\n  asc?: boolean;\n  component: string;\n  p?: number;\n  ps?: number;\n  q?: string;\n  s?: string;\n  strategy?: 'all' | 'leaves' | 'children';\n} & BranchParameters;\n\nexport function getTree<T = TreeComponent>(\n  data: GetTreeParams & { qualifiers?: string }\n): Promise<{ baseComponent: TreeComponent; components: T[]; paging: T.Paging }> {\n  return getJSON('/api/components/tree', data).catch(throwGlobalError);\n}\n\nexport function getFiles(data: GetTreeParams) {\n  return getTree<TreeComponentWithPath>({ ...data, qualifiers: 'FIL' });\n}\n\nexport function getDirectories(data: GetTreeParams) {\n  return getTree<TreeComponentWithPath>({ ...data, qualifiers: 'DIR' });\n}\n\nexport function getComponentData(data: { component: string } & BranchParameters): Promise<any> {\n  return getJSON('/api/components/show', data);\n}\n\nexport function doesComponentExists(\n  data: { component: string } & BranchParameters\n): Promise<boolean> {\n  return getComponentData(data).then(\n    ({ component }) => component !== undefined,\n    () => false\n  );\n}\n\nexport function getComponentShow(data: { component: string } & BranchParameters): Promise<any> {\n  return getComponentData(data).catch(throwGlobalError);\n}\n\nexport function getParents(component: string): Promise<any> {\n  return getComponentShow({ component }).then(r => r.ancestors);\n}\n\nexport function getBreadcrumbs(data: { component: string } & BranchParameters): Promise<any> {\n  return getComponentShow(data).then(r => {\n    const reversedAncestors = [...r.ancestors].reverse();\n    return [...reversedAncestors, r.component];\n  });\n}\n\nexport function getMyProjects(data: {\n  p?: number;\n  ps?: number;\n}): Promise<{ paging: T.Paging; projects: T.MyProject[] }> {\n  return getJSON('/api/projects/search_my_projects', data);\n}\n\nexport interface Component {\n  id: string;\n  key: string;\n  name: string;\n  isFavorite?: boolean;\n  analysisDate?: string;\n  qualifier: ComponentQualifier;\n  tags: string[];\n  visibility: T.Visibility;\n  leakPeriodDate?: string;\n  needIssueSync?: boolean;\n}\n\nexport interface Facet {\n  property: string;\n  values: Array<{ val: string; count: number }>;\n}\n\nexport function searchProjects(\n  data: RequestData\n): Promise<{\n  components: Component[];\n  facets: Facet[];\n  paging: T.Paging;\n}> {\n  const url = '/api/components/search_projects';\n  return getJSON(url, data);\n}\n\nexport function searchComponents(data?: {\n  q?: string;\n  qualifiers?: string;\n  ps?: number;\n}): Promise<any> {\n  return getJSON('/api/components/search', data);\n}\n\nexport function changeKey(data: { from: string; to: string }) {\n  return post('/api/projects/update_key', data).catch(throwGlobalError);\n}\n\nexport interface SuggestionsResponse {\n  projects: Array<{ key: string; name: string }>;\n  results: Array<{\n    items: Array<{\n      isFavorite: boolean;\n      isRecentlyBrowsed: boolean;\n      key: string;\n      match: string;\n      name: string;\n      project: string;\n    }>;\n    more: number;\n    q: string;\n  }>;\n  warning?: string;\n}\n\nexport function getSuggestions(\n  query?: string,\n  recentlyBrowsed?: string[],\n  more?: string\n): Promise<SuggestionsResponse> {\n  const data: RequestData = {};\n  if (query) {\n    data.s = query;\n  }\n  if (recentlyBrowsed) {\n    data.recentlyBrowsed = recentlyBrowsed.join();\n  }\n  if (more) {\n    data.more = more;\n  }\n  return getJSON('/api/components/suggestions', data).catch(throwGlobalError);\n}\n\nexport function getComponentForSourceViewer(\n  data: { component: string } & BranchParameters\n): Promise<T.SourceViewerFile> {\n  return getJSON('/api/components/app', data);\n}\n\nexport function getSources(\n  data: { key: string; from?: number; to?: number } & BranchParameters\n): Promise<T.SourceLine[]> {\n  return getJSON('/api/sources/lines', data).then(r => r.sources);\n}\n\nexport function getDuplications(\n  data: { key: string } & BranchParameters\n): Promise<{ duplications: T.Duplication[]; files: T.Dict<T.DuplicatedFile> }> {\n  return getJSON('/api/duplications/show', data).catch(throwGlobalError);\n}\n\nexport function getTests(\n  data: { sourceFileKey: string; sourceFileLineNumber: number | string } & BranchParameters\n): Promise<any> {\n  return getJSON('/api/tests/list', data).then(r => r.tests);\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { createContext } from 'react';\n\ninterface SuggestionsContextShape {\n  addSuggestions: (key: string) => void;\n  removeSuggestions: (key: string) => void;\n  suggestions: T.SuggestionLink[];\n}\n\nexport const SuggestionsContext = createContext<SuggestionsContextShape>({\n  addSuggestions: () => {},\n  removeSuggestions: () => {},\n  suggestions: []\n});\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { colors } from '../app/theme';\nimport { AlmKeys } from '../types/alm-settings';\nimport { ComponentQualifier } from '../types/component';\nimport { IssueScope, IssueType } from '../types/issues';\n\nexport const SEVERITIES = ['BLOCKER', 'CRITICAL', 'MAJOR', 'MINOR', 'INFO'];\nexport const STATUSES = ['OPEN', 'REOPENED', 'CONFIRMED', 'RESOLVED', 'CLOSED'];\nexport const ISSUE_TYPES: T.IssueType[] = [\n  IssueType.Bug,\n  IssueType.Vulnerability,\n  IssueType.CodeSmell,\n  IssueType.SecurityHotspot\n];\nexport const SOURCE_SCOPES = [\n  { scope: IssueScope.Main, qualifier: ComponentQualifier.File },\n  { scope: IssueScope.Test, qualifier: ComponentQualifier.TestFile }\n];\nexport const RULE_TYPES: T.RuleType[] = ['BUG', 'VULNERABILITY', 'CODE_SMELL', 'SECURITY_HOTSPOT'];\nexport const RULE_STATUSES = ['READY', 'BETA', 'DEPRECATED'];\n\nexport const CHART_COLORS_RANGE_PERCENT = [\n  colors.green,\n  colors.lightGreen,\n  colors.yellow,\n  colors.orange,\n  colors.red\n];\n\nexport const CHART_REVERSED_COLORS_RANGE_PERCENT = [\n  colors.red,\n  colors.orange,\n  colors.yellow,\n  colors.lightGreen,\n  colors.green\n];\n\nexport const RATING_COLORS = [\n  colors.green,\n  colors.lightGreen,\n  colors.yellow,\n  colors.orange,\n  colors.red\n];\n\nexport const PROJECT_KEY_MAX_LEN = 400;\n\nexport const ALM_DOCUMENTATION_PATHS = {\n  [AlmKeys.Azure]: '/documentation/analysis/azuredevops-integration/',\n  [AlmKeys.BitbucketServer]: '/documentation/analysis/bitbucket-integration/',\n  [AlmKeys.BitbucketCloud]: '/documentation/analysis/bitbucket-cloud-integration/',\n  [AlmKeys.GitHub]: '/documentation/analysis/github-integration/',\n  [AlmKeys.GitLab]: '/documentation/analysis/gitlab-integration/'\n};\n\nexport const IMPORT_COMPATIBLE_ALMS = [\n  AlmKeys.Azure,\n  AlmKeys.BitbucketServer,\n  AlmKeys.GitHub,\n  AlmKeys.GitLab\n];\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nexport const enum AlmKeys {\n  Azure = 'azure',\n  BitbucketServer = 'bitbucket',\n  BitbucketCloud = 'bitbucketcloud',\n  GitHub = 'github',\n  GitLab = 'gitlab'\n}\n\nexport interface AlmBindingDefinition {\n  key: string;\n  url?: string;\n}\n\nexport interface AzureBindingDefinition extends AlmBindingDefinition {\n  personalAccessToken: string;\n  url?: string;\n}\n\nexport interface BitbucketBindingDefinition extends AlmBindingDefinition {\n  personalAccessToken: string;\n  url: string;\n}\n\nexport interface BitbucketCloudBindingDefinition extends AlmBindingDefinition {\n  clientId: string;\n  clientSecret: string;\n  workspace: string;\n}\n\nexport interface GithubBindingDefinition extends AlmBindingDefinition {\n  appId: string;\n  clientId: string;\n  clientSecret: string;\n  privateKey: string;\n  url: string;\n}\n\nexport interface GitlabBindingDefinition extends AlmBindingDefinition {\n  personalAccessToken: string;\n  url?: string;\n}\n\nexport interface ProjectAlmBindingResponse {\n  alm: AlmKeys;\n  key: string;\n  repository?: string;\n  slug?: string;\n  summaryCommentEnabled?: boolean;\n  monorepo?: boolean;\n}\n\nexport interface ProjectAzureBindingResponse extends ProjectAlmBindingResponse {\n  alm: AlmKeys.Azure;\n  repository: string;\n  slug: string;\n  url: string;\n  monorepo: boolean;\n}\n\nexport interface ProjectBitbucketBindingResponse extends ProjectAlmBindingResponse {\n  alm: AlmKeys.BitbucketServer;\n  repository: string;\n  slug: string;\n  monorepo: boolean;\n}\n\nexport interface ProjectGitHubBindingResponse extends ProjectAlmBindingResponse {\n  alm: AlmKeys.GitHub;\n  repository: string;\n  monorepo: boolean;\n}\n\nexport interface ProjectGitLabBindingResponse extends ProjectAlmBindingResponse {\n  alm: AlmKeys.GitLab;\n  repository: string;\n  url: string;\n  monorepo: boolean;\n}\n\nexport interface ProjectAlmBindingParams {\n  almSetting: string;\n  project: string;\n}\n\nexport interface AzureProjectAlmBindingParams extends ProjectAlmBindingParams {\n  projectName: string;\n  repositoryName: string;\n  monorepo: boolean;\n}\n\nexport interface BitbucketProjectAlmBindingParams extends ProjectAlmBindingParams {\n  repository: string;\n  slug: string;\n  monorepo: boolean;\n}\n\nexport interface BitbucketCloudProjectAlmBindingParams extends ProjectAlmBindingParams {\n  repository: string;\n}\n\nexport interface GithubProjectAlmBindingParams extends ProjectAlmBindingParams {\n  repository: string;\n  summaryCommentEnabled: boolean;\n  monorepo: boolean;\n}\n\nexport interface GitlabProjectAlmBindingParams extends ProjectAlmBindingParams {\n  repository?: string;\n  monorepo: boolean;\n}\n\nexport interface AlmSettingsInstance {\n  alm: AlmKeys;\n  key: string;\n  url?: string;\n}\n\nexport interface AlmSettingsBindingDefinitions {\n  [AlmKeys.Azure]: AzureBindingDefinition[];\n  [AlmKeys.BitbucketServer]: BitbucketBindingDefinition[];\n  [AlmKeys.BitbucketCloud]: BitbucketCloudBindingDefinition[];\n  [AlmKeys.GitHub]: GithubBindingDefinition[];\n  [AlmKeys.GitLab]: GitlabBindingDefinition[];\n}\n\nexport interface AlmSettingsBindingStatus {\n  alertSuccess: boolean;\n  failureMessage: string;\n  type: AlmSettingsBindingStatusType;\n}\n\nexport enum AlmSettingsBindingStatusType {\n  Validating,\n  Success,\n  Failure,\n  Warning\n}\n\nexport function isProjectBitbucketBindingResponse(\n  binding: ProjectAlmBindingResponse\n): binding is ProjectBitbucketBindingResponse {\n  return binding.alm === AlmKeys.BitbucketServer;\n}\n\nexport function isProjectGitHubBindingResponse(\n  binding: ProjectAlmBindingResponse\n): binding is ProjectGitHubBindingResponse {\n  return binding.alm === AlmKeys.GitHub;\n}\n\nexport function isProjectGitLabBindingResponse(\n  binding: ProjectAlmBindingResponse\n): binding is ProjectGitLabBindingResponse {\n  return binding.alm === AlmKeys.GitLab;\n}\n\nexport function isProjectAzureBindingResponse(\n  binding: ProjectAlmBindingResponse\n): binding is ProjectAzureBindingResponse {\n  return binding.alm === AlmKeys.Azure;\n}\n\nexport function isBitbucketBindingDefinition(\n  binding?: AlmBindingDefinition & { url?: string }\n): binding is BitbucketBindingDefinition {\n  return binding !== undefined && binding.url !== undefined;\n}\n\nexport function isBitbucketCloudBindingDefinition(\n  binding?: AlmBindingDefinition & { clientId?: string; workspace?: string }\n): binding is BitbucketCloudBindingDefinition {\n  return binding !== undefined && binding.clientId !== undefined && binding.workspace !== undefined;\n}\n\nexport function isGithubBindingDefinition(\n  binding?: AlmBindingDefinition & { appId?: string; url?: string }\n): binding is GithubBindingDefinition {\n  return binding !== undefined && binding.appId !== undefined && binding.url !== undefined;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport { connect } from 'react-redux';\nimport GenericAvatar from 'sonar-ui-common/components/ui/GenericAvatar';\nimport { getGlobalSettingValue, Store } from '../../store/rootReducer';\n\ninterface Props {\n  className?: string;\n  enableGravatar: boolean;\n  gravatarServerUrl: string;\n  hash?: string;\n  name?: string;\n  size: number;\n}\n\nfunction Avatar(props: Props) {\n  if (!props.enableGravatar || !props.hash) {\n    if (!props.name) {\n      return null;\n    }\n    return <GenericAvatar className={props.className} name={props.name} size={props.size} />;\n  }\n\n  const url = props.gravatarServerUrl\n    .replace('{EMAIL_MD5}', props.hash)\n    .replace('{SIZE}', String(props.size * 2));\n\n  return (\n    <img\n      alt={props.name}\n      className={classNames(props.className, 'rounded')}\n      height={props.size}\n      src={url}\n      width={props.size}\n    />\n  );\n}\n\nconst mapStateToProps = (state: Store) => {\n  const enableGravatar = getGlobalSettingValue(state, 'sonar.lf.enableGravatar');\n  const gravatarServerUrl = getGlobalSettingValue(state, 'sonar.lf.gravatarServerUrl');\n  return {\n    enableGravatar: Boolean(enableGravatar && enableGravatar.value === 'true'),\n    gravatarServerUrl: (gravatarServerUrl && gravatarServerUrl.value) || ''\n  };\n};\n\nexport default connect(mapStateToProps)(Avatar);\n\nexport const unconnectedAvatar = Avatar;\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nexport enum MetricKey {\n  alert_status = 'alert_status',\n  blocker_violations = 'blocker_violations',\n  branch_coverage = 'branch_coverage',\n  bugs = 'bugs',\n  burned_budget = 'burned_budget',\n  business_value = 'business_value',\n  class_complexity = 'class_complexity',\n  classes = 'classes',\n  code_smells = 'code_smells',\n  cognitive_complexity = 'cognitive_complexity',\n  comment_lines = 'comment_lines',\n  comment_lines_data = 'comment_lines_data',\n  comment_lines_density = 'comment_lines_density',\n  complexity = 'complexity',\n  complexity_in_classes = 'complexity_in_classes',\n  complexity_in_functions = 'complexity_in_functions',\n  conditions_to_cover = 'conditions_to_cover',\n  confirmed_issues = 'confirmed_issues',\n  coverage = 'coverage',\n  critical_violations = 'critical_violations',\n  development_cost = 'development_cost',\n  directories = 'directories',\n  duplicated_blocks = 'duplicated_blocks',\n  duplicated_files = 'duplicated_files',\n  duplicated_lines = 'duplicated_lines',\n  duplicated_lines_density = 'duplicated_lines_density',\n  duplications_data = 'duplications_data',\n  effort_to_reach_maintainability_rating_a = 'effort_to_reach_maintainability_rating_a',\n  executable_lines_data = 'executable_lines_data',\n  false_positive_issues = 'false_positive_issues',\n  file_complexity = 'file_complexity',\n  file_complexity_distribution = 'file_complexity_distribution',\n  filename_size = 'filename_size',\n  filename_size_rating = 'filename_size_rating',\n  files = 'files',\n  function_complexity = 'function_complexity',\n  function_complexity_distribution = 'function_complexity_distribution',\n  functions = 'functions',\n  generated_lines = 'generated_lines',\n  generated_ncloc = 'generated_ncloc',\n  info_violations = 'info_violations',\n  last_change_on_maintainability_rating = 'last_change_on_maintainability_rating',\n  last_change_on_releasability_rating = 'last_change_on_releasability_rating',\n  last_change_on_reliability_rating = 'last_change_on_reliability_rating',\n  last_change_on_security_rating = 'last_change_on_security_rating',\n  last_change_on_security_review_rating = 'last_change_on_security_review_rating',\n  last_commit_date = 'last_commit_date',\n  leak_projects = 'leak_projects',\n  line_coverage = 'line_coverage',\n  lines = 'lines',\n  lines_to_cover = 'lines_to_cover',\n  maintainability_rating_effort = 'maintainability_rating_effort',\n  major_violations = 'major_violations',\n  minor_violations = 'minor_violations',\n  ncloc = 'ncloc',\n  ncloc_data = 'ncloc_data',\n  ncloc_language_distribution = 'ncloc_language_distribution',\n  new_blocker_violations = 'new_blocker_violations',\n  new_branch_coverage = 'new_branch_coverage',\n  new_bugs = 'new_bugs',\n  new_code_smells = 'new_code_smells',\n  new_conditions_to_cover = 'new_conditions_to_cover',\n  new_coverage = 'new_coverage',\n  new_critical_violations = 'new_critical_violations',\n  new_development_cost = 'new_development_cost',\n  new_duplicated_blocks = 'new_duplicated_blocks',\n  new_duplicated_lines = 'new_duplicated_lines',\n  new_duplicated_lines_density = 'new_duplicated_lines_density',\n  new_info_violations = 'new_info_violations',\n  new_line_coverage = 'new_line_coverage',\n  new_lines = 'new_lines',\n  new_lines_to_cover = 'new_lines_to_cover',\n  new_maintainability_rating = 'new_maintainability_rating',\n  new_major_violations = 'new_major_violations',\n  new_minor_violations = 'new_minor_violations',\n  new_reliability_rating = 'new_reliability_rating',\n  new_reliability_remediation_effort = 'new_reliability_remediation_effort',\n  new_security_hotspots = 'new_security_hotspots',\n  new_security_hotspots_reviewed = 'new_security_hotspots_reviewed',\n  new_security_rating = 'new_security_rating',\n  new_security_remediation_effort = 'new_security_remediation_effort',\n  new_security_review_rating = 'new_security_review_rating',\n  new_sqale_debt_ratio = 'new_sqale_debt_ratio',\n  new_technical_debt = 'new_technical_debt',\n  new_uncovered_conditions = 'new_uncovered_conditions',\n  new_uncovered_lines = 'new_uncovered_lines',\n  new_violations = 'new_violations',\n  new_vulnerabilities = 'new_vulnerabilities',\n  open_issues = 'open_issues',\n  projects = 'projects',\n  public_api = 'public_api',\n  public_documented_api_density = 'public_documented_api_density',\n  public_undocumented_api = 'public_undocumented_api',\n  quality_gate_details = 'quality_gate_details',\n  quality_profiles = 'quality_profiles',\n  releasability_effort = 'releasability_effort',\n  releasability_rating = 'releasability_rating',\n  reliability_rating = 'reliability_rating',\n  reliability_rating_effort = 'reliability_rating_effort',\n  reliability_remediation_effort = 'reliability_remediation_effort',\n  reopened_issues = 'reopened_issues',\n  security_hotspots = 'security_hotspots',\n  security_hotspots_reviewed = 'security_hotspots_reviewed',\n  security_rating = 'security_rating',\n  security_rating_effort = 'security_rating_effort',\n  security_remediation_effort = 'security_remediation_effort',\n  security_review_rating = 'security_review_rating',\n  security_review_rating_effort = 'security_review_rating_effort',\n  skipped_tests = 'skipped_tests',\n  sonarjava_feedback = 'sonarjava_feedback',\n  sqale_debt_ratio = 'sqale_debt_ratio',\n  sqale_index = 'sqale_index',\n  sqale_rating = 'sqale_rating',\n  statements = 'statements',\n  team_at_sonarsource = 'team_at_sonarsource',\n  team_size = 'team_size',\n  test_errors = 'test_errors',\n  test_execution_time = 'test_execution_time',\n  test_failures = 'test_failures',\n  test_success_density = 'test_success_density',\n  tests = 'tests',\n  uncovered_conditions = 'uncovered_conditions',\n  uncovered_lines = 'uncovered_lines',\n  violations = 'violations',\n  vulnerabilities = 'vulnerabilities',\n  wont_fix_issues = 'wont_fix_issues'\n}\n\nexport function isMetricKey(key: string): key is MetricKey {\n  return (Object.values(MetricKey) as string[]).includes(key);\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { Store } from 'redux';\nimport { setAppState } from '../../store/appState';\nimport rootReducer, { Store as State } from '../../store/rootReducer';\nimport { receiveCurrentUser } from '../../store/users';\nimport configureStore from '../../store/utils/configureStore';\n\nlet store: Store<State, any>;\n\nconst createStore = (currentUser?: T.CurrentUser, appState?: T.AppState) => {\n  store = configureStore(rootReducer);\n  if (currentUser) {\n    store.dispatch(receiveCurrentUser(currentUser));\n  }\n  if (appState) {\n    store.dispatch(setAppState(appState));\n  }\n  return store;\n};\n\nexport default (currentUser?: T.CurrentUser, appState?: T.AppState) =>\n  store ? store : createStore(currentUser, appState);\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { applyMiddleware, compose, createStore } from 'redux';\nimport thunk, { ThunkMiddleware } from 'redux-thunk';\n\ntype RootReducer = typeof import('../rootReducer').default;\ntype State = import('../rootReducer').Store;\n\nconst middlewares = [thunk as ThunkMiddleware<State, any>];\nconst composed = [];\n\nif (process.env.NODE_ENV === 'development') {\n  const { __REDUX_DEVTOOLS_EXTENSION__ } = window as any;\n  composed.push(__REDUX_DEVTOOLS_EXTENSION__ ? __REDUX_DEVTOOLS_EXTENSION__() : (f: Function) => f);\n}\n\nconst finalCreateStore = compose(applyMiddleware(...middlewares), ...composed)(createStore);\n\nexport default function configureStore(rootReducer: RootReducer, initialState?: State) {\n  return finalCreateStore(rootReducer, initialState);\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { uniqueId } from 'lodash';\nimport { Dispatch } from 'redux';\nimport { ActionType } from './utils/actions';\n\nenum MessageLevel {\n  Error = 'ERROR',\n  Success = 'SUCCESS'\n}\n\ninterface Message {\n  id: string;\n  message: string;\n  level: MessageLevel;\n}\n\nfunction addGlobalMessageActionCreator(id: string, message: string, level: MessageLevel) {\n  return { type: 'ADD_GLOBAL_MESSAGE', message, level, id };\n}\n\nexport function closeGlobalMessage(id: string) {\n  return { type: 'CLOSE_GLOBAL_MESSAGE', id };\n}\n\nexport function closeAllGlobalMessages() {\n  return { type: 'CLOSE_ALL_GLOBAL_MESSAGES' };\n}\n\ntype Action =\n  | ActionType<typeof addGlobalMessageActionCreator, 'ADD_GLOBAL_MESSAGE'>\n  | ActionType<typeof closeGlobalMessage, 'CLOSE_GLOBAL_MESSAGE'>\n  | ActionType<typeof closeAllGlobalMessages, 'CLOSE_ALL_GLOBAL_MESSAGES'>;\n\nfunction addGlobalMessage(message: string, level: MessageLevel) {\n  return (dispatch: Dispatch) => {\n    const id = uniqueId('global-message-');\n    dispatch(addGlobalMessageActionCreator(id, message, level));\n    setTimeout(() => dispatch(closeGlobalMessage(id)), 5000);\n  };\n}\n\nexport function addGlobalErrorMessage(message: string) {\n  return addGlobalMessage(message, MessageLevel.Error);\n}\n\nexport function addGlobalSuccessMessage(message: string) {\n  return addGlobalMessage(message, MessageLevel.Success);\n}\n\nexport type State = Message[];\n\nexport default function(state: State = [], action: Action): State {\n  switch (action.type) {\n    case 'ADD_GLOBAL_MESSAGE':\n      return [{ id: action.id, message: action.message, level: action.level }];\n\n    case 'CLOSE_GLOBAL_MESSAGE':\n      return state.filter(message => message.id !== action.id);\n\n    case 'CLOSE_ALL_GLOBAL_MESSAGES':\n      return [];\n    default:\n      return state;\n  }\n}\n\nexport function getGlobalMessages(state: State) {\n  return state;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { createContext } from 'react';\n\nexport interface A11yContextShape {\n  addA11ySkipLink: (link: T.A11ySkipLink) => void;\n  removeA11ySkipLink: (link: T.A11ySkipLink) => void;\n  links: T.A11ySkipLink[];\n}\n\nexport const A11yContext = createContext<A11yContextShape>({\n  addA11ySkipLink: () => {},\n  removeA11ySkipLink: () => {},\n  links: []\n});\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { connect } from 'react-redux';\nimport { getCurrentUser, Store } from '../../store/rootReducer';\nimport { getWrappedDisplayName } from './utils';\n\nexport function withCurrentUser<P>(\n  WrappedComponent: React.ComponentType<P & { currentUser: T.CurrentUser }>\n) {\n  class Wrapper extends React.Component<P & { currentUser: T.CurrentUser }> {\n    static displayName = getWrappedDisplayName(WrappedComponent, 'withCurrentUser');\n\n    render() {\n      return <WrappedComponent {...this.props} />;\n    }\n  }\n\n  function mapStateToProps(state: Store) {\n    return { currentUser: getCurrentUser(state) };\n  }\n\n  return connect(mapStateToProps)(Wrapper);\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { connect } from 'react-redux';\nimport { getAppState, Store } from '../../store/rootReducer';\nimport { getWrappedDisplayName } from './utils';\n\nexport function withAppState<P>(\n  WrappedComponent: React.ComponentType<P & { appState: Partial<T.AppState> }>\n) {\n  class Wrapper extends React.Component<P & { appState: T.AppState }> {\n    static displayName = getWrappedDisplayName(WrappedComponent, 'withAppState');\n\n    render() {\n      return <WrappedComponent {...this.props} />;\n    }\n  }\n\n  function mapStateToProps(state: Store) {\n    return { appState: getAppState(state) };\n  }\n\n  return connect(mapStateToProps)(Wrapper);\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { sanitize } from 'dompurify';\nimport { hasMessage, translate } from 'sonar-ui-common/helpers/l10n';\n\nexport const DEFAULT_CATEGORY = 'general';\n\nexport type DefaultSpecializedInputProps = T.Omit<DefaultInputProps, 'setting'> & {\n  isDefault: boolean;\n  name: string;\n};\n\nexport interface DefaultInputProps {\n  hasValueChanged?: boolean;\n  onCancel?: () => void;\n  onChange: (value: any) => void;\n  onSave?: () => void;\n  setting: T.Setting;\n  value: any;\n}\n\nexport function sanitizeTranslation(html: string) {\n  return sanitize(html, {\n    ALLOWED_TAGS: ['b', 'br', 'code', 'i', 'li', 'p', 'strong', 'ul']\n  });\n}\n\nexport function getPropertyName(definition: T.SettingDefinition) {\n  const key = `property.${definition.key}.name`;\n  return hasMessage(key) ? translate(key) : definition.name;\n}\n\nexport function getPropertyDescription(definition: T.SettingDefinition) {\n  const key = `property.${definition.key}.description`;\n  return hasMessage(key) ? translate(key) : definition.description;\n}\n\nexport function getCategoryName(category: string) {\n  const key = `property.category.${category}`;\n  return hasMessage(key) ? translate(key) : category;\n}\n\nexport function getSubCategoryName(category: string, subCategory: string) {\n  const key = `property.category.${category}.${subCategory}`;\n  return hasMessage(key) ? translate(key) : getCategoryName(subCategory);\n}\n\nexport function getSubCategoryDescription(category: string, subCategory: string) {\n  const key = `property.category.${category}.${subCategory}.description`;\n  return hasMessage(key) ? translate(key) : null;\n}\n\nexport function getUniqueName(definition: T.SettingDefinition, index?: string) {\n  const indexSuffix = index ? `[${index}]` : '';\n  return `settings[${definition.key}]${indexSuffix}`;\n}\n\nexport function getSettingValue({ definition, fieldValues, value, values }: T.Setting) {\n  if (isCategoryDefinition(definition) && definition.multiValues) {\n    return values;\n  } else if (definition.type === 'PROPERTY_SET') {\n    return fieldValues;\n  } else {\n    return value;\n  }\n}\n\nexport function isEmptyValue(definition: T.SettingDefinition, value: any) {\n  if (value == null) {\n    return true;\n  } else if (definition.type === 'BOOLEAN') {\n    return false;\n  } else {\n    return value.length === 0;\n  }\n}\n\nexport function isCategoryDefinition(\n  item: T.SettingDefinition\n): item is T.SettingCategoryDefinition {\n  return Boolean((item as any).fields);\n}\n\nexport function getEmptyValue(item: T.SettingDefinition | T.SettingCategoryDefinition): any {\n  if (isCategoryDefinition(item)) {\n    if (item.multiValues) {\n      return [getEmptyValue({ ...item, multiValues: false })];\n    }\n\n    if (item.type === 'PROPERTY_SET') {\n      const value: T.Dict<string> = {};\n      item.fields.forEach(field => (value[field.key] = getEmptyValue(field)));\n      return [value];\n    }\n  }\n\n  if (item.type === 'BOOLEAN' || item.type === 'SINGLE_SELECT_LIST') {\n    return null;\n  }\n  return '';\n}\n\nexport function isDefaultOrInherited(setting: T.Setting) {\n  return Boolean(setting.inherited);\n}\n\nexport function getDefaultValue(setting: T.Setting) {\n  const { definition, parentFieldValues, parentValue, parentValues } = setting;\n\n  if (definition.type === 'PASSWORD') {\n    return translate('settings.default.password');\n  }\n\n  if (definition.type === 'BOOLEAN' && parentValue) {\n    const isTrue = parentValue === 'true';\n    return isTrue ? translate('settings.boolean.true') : translate('settings.boolean.false');\n  }\n\n  if (\n    isCategoryDefinition(definition) &&\n    definition.multiValues &&\n    parentValues &&\n    parentValues.length > 0\n  ) {\n    return parentValues.join(', ');\n  }\n\n  if (definition.type === 'PROPERTY_SET' && parentFieldValues && parentFieldValues.length > 0) {\n    return translate('settings.default.complex_value');\n  }\n\n  if (parentValue == null) {\n    return isCategoryDefinition(definition) && definition.defaultValue\n      ? definition.defaultValue\n      : translate('settings.default.no_value');\n  }\n\n  return parentValue;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { getJSON, post, postJSON } from 'sonar-ui-common/helpers/request';\nimport throwGlobalError from '../app/utils/throwGlobalError';\n\nexport function getCurrentUser(): Promise<T.CurrentUser> {\n  return getJSON('/api/users/current');\n}\n\nexport function changePassword(data: {\n  login: string;\n  password: string;\n  previousPassword?: string;\n}) {\n  return post('/api/users/change_password', data).catch(throwGlobalError);\n}\n\nexport interface UserGroup {\n  default: boolean;\n  description: string;\n  id: number;\n  name: string;\n  selected: boolean;\n}\n\nexport function getUserGroups(data: {\n  login: string;\n  p?: number;\n  ps?: number;\n  q?: string;\n  selected?: string;\n}): Promise<{ paging: T.Paging; groups: UserGroup[] }> {\n  return getJSON('/api/users/groups', data);\n}\n\nexport function getIdentityProviders(): Promise<{ identityProviders: T.IdentityProvider[] }> {\n  return getJSON('/api/users/identity_providers').catch(throwGlobalError);\n}\n\nexport function searchUsers(data: {\n  p?: number;\n  ps?: number;\n  q?: string;\n}): Promise<{ paging: T.Paging; users: T.User[] }> {\n  data.q = data.q || undefined;\n  return getJSON('/api/users/search', data).catch(throwGlobalError);\n}\n\nexport function createUser(data: {\n  email?: string;\n  local?: boolean;\n  login: string;\n  name: string;\n  password?: string;\n  scmAccount: string[];\n}): Promise<void | Response> {\n  return post('/api/users/create', data);\n}\n\nexport function updateUser(data: {\n  email?: string;\n  login: string;\n  name?: string;\n  scmAccount: string[];\n}): Promise<T.User> {\n  return postJSON('/api/users/update', {\n    ...data,\n    scmAccount: data.scmAccount.length > 0 ? data.scmAccount : ''\n  });\n}\n\nexport function deactivateUser(data: { login: string }): Promise<T.User> {\n  return postJSON('/api/users/deactivate', data).catch(throwGlobalError);\n}\n\nexport function setHomePage(homepage: T.HomePage): Promise<void | Response> {\n  return post('/api/users/set_homepage', homepage).catch(throwGlobalError);\n}\n\nexport function setUserSetting(setting: T.CurrentUserSetting): Promise<void | Response> {\n  return post('/api/users/set_setting', setting).catch(throwGlobalError);\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { formatMeasure } from 'sonar-ui-common/helpers/measures';\nimport {\n  cleanQuery,\n  parseAsArray,\n  parseAsBoolean,\n  parseAsDate,\n  parseAsString,\n  queriesEqual,\n  serializeDateShort,\n  serializeString,\n  serializeStringArray\n} from 'sonar-ui-common/helpers/query';\nimport { scrollToElement } from 'sonar-ui-common/helpers/scrolling';\nimport { get, save } from 'sonar-ui-common/helpers/storage';\nimport { searchUsers } from '../../api/users';\nimport { Facet, RawFacet } from '../../types/issues';\nimport { SecurityStandard, StandardType } from '../../types/security';\n\nexport interface Query {\n  assigned: boolean;\n  assignees: string[];\n  authors: string[];\n  createdAfter: Date | undefined;\n  createdAt: string;\n  createdBefore: Date | undefined;\n  createdInLast: string;\n  cwe: string[];\n  directories: string[];\n  files: string[];\n  issues: string[];\n  languages: string[];\n  modules: string[];\n  owaspTop10: string[];\n  projects: string[];\n  resolutions: string[];\n  resolved: boolean;\n  rules: string[];\n  sansTop25: string[];\n  scopes: string[];\n  severities: string[];\n  sinceLeakPeriod: boolean;\n  sonarsourceSecurity: string[];\n  sort: string;\n  statuses: string[];\n  tags: string[];\n  types: string[];\n}\n\nexport const STANDARDS = 'standards';\nexport const STANDARD_TYPES: StandardType[] = [\n  SecurityStandard.OWASP_TOP10,\n  SecurityStandard.SANS_TOP25,\n  SecurityStandard.CWE,\n  SecurityStandard.SONARSOURCE\n];\n\n// allow sorting by CREATION_DATE only\nconst parseAsSort = (sort: string) => (sort === 'CREATION_DATE' ? 'CREATION_DATE' : '');\nconst ISSUES_DEFAULT = 'sonarqube.issues.default';\n\nexport function parseQuery(query: T.RawQuery): Query {\n  return {\n    assigned: parseAsBoolean(query.assigned),\n    assignees: parseAsArray(query.assignees, parseAsString),\n    authors: parseAsArray(query.authors, parseAsString),\n    createdAfter: parseAsDate(query.createdAfter),\n    createdAt: parseAsString(query.createdAt),\n    createdBefore: parseAsDate(query.createdBefore),\n    createdInLast: parseAsString(query.createdInLast),\n    cwe: parseAsArray(query.cwe, parseAsString),\n    directories: parseAsArray(query.directories, parseAsString),\n    files: parseAsArray(query.files, parseAsString),\n    issues: parseAsArray(query.issues, parseAsString),\n    languages: parseAsArray(query.languages, parseAsString),\n    modules: parseAsArray(query.moduleUuids, parseAsString),\n    owaspTop10: parseAsArray(query.owaspTop10, parseAsString),\n    projects: parseAsArray(query.projects, parseAsString),\n    resolutions: parseAsArray(query.resolutions, parseAsString),\n    resolved: parseAsBoolean(query.resolved),\n    rules: parseAsArray(query.rules, parseAsString),\n    sansTop25: parseAsArray(query.sansTop25, parseAsString),\n    scopes: parseAsArray(query.scopes, parseAsString),\n    severities: parseAsArray(query.severities, parseAsString),\n    sinceLeakPeriod: parseAsBoolean(query.sinceLeakPeriod, false),\n    sonarsourceSecurity: parseAsArray(query.sonarsourceSecurity, parseAsString),\n    sort: parseAsSort(query.s),\n    statuses: parseAsArray(query.statuses, parseAsString),\n    tags: parseAsArray(query.tags, parseAsString),\n    types: parseAsArray(query.types, parseAsString)\n  };\n}\n\nexport function getOpen(query: T.RawQuery): string | undefined {\n  return query.open;\n}\n\nexport const areMyIssuesSelected = (query: T.RawQuery) => query.myIssues === 'true';\n\nexport function serializeQuery(query: Query): T.RawQuery {\n  const filter = {\n    assigned: query.assigned ? undefined : 'false',\n    assignees: serializeStringArray(query.assignees),\n    authors: serializeStringArray(query.authors),\n    createdAfter: serializeDateShort(query.createdAfter),\n    createdAt: serializeString(query.createdAt),\n    createdBefore: serializeDateShort(query.createdBefore),\n    createdInLast: serializeString(query.createdInLast),\n    cwe: serializeStringArray(query.cwe),\n    directories: serializeStringArray(query.directories),\n    files: serializeStringArray(query.files),\n    issues: serializeStringArray(query.issues),\n    languages: serializeStringArray(query.languages),\n    moduleUuids: serializeStringArray(query.modules),\n    owaspTop10: serializeStringArray(query.owaspTop10),\n    projects: serializeStringArray(query.projects),\n    resolutions: serializeStringArray(query.resolutions),\n    resolved: query.resolved ? undefined : 'false',\n    rules: serializeStringArray(query.rules),\n    s: serializeString(query.sort),\n    sansTop25: serializeStringArray(query.sansTop25),\n    scopes: serializeStringArray(query.scopes),\n    severities: serializeStringArray(query.severities),\n    sinceLeakPeriod: query.sinceLeakPeriod ? 'true' : undefined,\n    sonarsourceSecurity: serializeStringArray(query.sonarsourceSecurity),\n    statuses: serializeStringArray(query.statuses),\n    tags: serializeStringArray(query.tags),\n    types: serializeStringArray(query.types)\n  };\n  return cleanQuery(filter);\n}\n\nexport const areQueriesEqual = (a: T.RawQuery, b: T.RawQuery) =>\n  queriesEqual(parseQuery(a), parseQuery(b));\n\nexport function mapFacet(facet: string) {\n  const propertyMapping: T.Dict<string> = {\n    modules: 'moduleUuids'\n  };\n  return propertyMapping[facet] || facet;\n}\n\nexport function parseFacets(facets: RawFacet[]): T.Dict<Facet> {\n  if (!facets) {\n    return {};\n  }\n\n  // for readability purpose\n  const propertyMapping: T.Dict<string> = {\n    moduleUuids: 'modules'\n  };\n\n  const result: T.Dict<Facet> = {};\n  facets.forEach(facet => {\n    const values: Facet = {};\n    facet.values.forEach(value => {\n      values[value.val] = value.count;\n    });\n    const finalProperty = propertyMapping[facet.property] || facet.property;\n    result[finalProperty] = values;\n  });\n  return result;\n}\n\nexport function formatFacetStat(stat: number | undefined) {\n  return stat && formatMeasure(stat, 'SHORT_INT');\n}\n\nexport const searchAssignees = (\n  query: string,\n  page = 1\n): Promise<{ paging: T.Paging; results: T.UserBase[] }> => {\n  return searchUsers({ p: page, q: query }).then(({ paging, users }) => ({\n    paging,\n    results: users\n  }));\n};\n\nconst LOCALSTORAGE_MY = 'my';\nconst LOCALSTORAGE_ALL = 'all';\n\nexport const isMySet = () => {\n  return get(ISSUES_DEFAULT) === LOCALSTORAGE_MY;\n};\n\nexport const saveMyIssues = (myIssues: boolean) =>\n  save(ISSUES_DEFAULT, myIssues ? LOCALSTORAGE_MY : LOCALSTORAGE_ALL);\n\nexport function getLocations(\n  { flows, secondaryLocations }: Pick<T.Issue, 'flows' | 'secondaryLocations'>,\n  selectedFlowIndex: number | undefined\n) {\n  if (selectedFlowIndex !== undefined) {\n    return flows[selectedFlowIndex] || [];\n  } else {\n    return flows.length > 0 ? flows[0] : secondaryLocations;\n  }\n}\n\nexport function getSelectedLocation(\n  issue: Pick<T.Issue, 'flows' | 'secondaryLocations'>,\n  selectedFlowIndex: number | undefined,\n  selectedLocationIndex: number | undefined\n) {\n  const locations = getLocations(issue, selectedFlowIndex);\n  if (\n    selectedLocationIndex !== undefined &&\n    selectedLocationIndex >= 0 &&\n    locations.length >= selectedLocationIndex\n  ) {\n    return locations[selectedLocationIndex];\n  } else {\n    return undefined;\n  }\n}\n\nexport function allLocationsEmpty(\n  issue: Pick<T.Issue, 'flows' | 'secondaryLocations'>,\n  selectedFlowIndex: number | undefined\n) {\n  return getLocations(issue, selectedFlowIndex).every(location => !location.msg);\n}\n\nexport function scrollToIssue(issue: string, smooth = true) {\n  const element = document.querySelector(`[data-issue=\"${issue}\"]`);\n  if (element) {\n    scrollToElement(element, { topOffset: 250, bottomOffset: 100, smooth });\n  }\n}\n\nexport function shouldOpenStandardsFacet(\n  openFacets: T.Dict<boolean>,\n  query: Partial<Query>\n): boolean {\n  return (\n    openFacets[STANDARDS] ||\n    isFilteredBySecurityIssueTypes(query) ||\n    isOneStandardChildFacetOpen(openFacets, query)\n  );\n}\n\nexport function shouldOpenStandardsChildFacet(\n  openFacets: T.Dict<boolean>,\n  query: Partial<Query>,\n  standardType: SecurityStandard\n): boolean {\n  const filter = query[standardType];\n  return (\n    openFacets[STANDARDS] !== false &&\n    (openFacets[standardType] ||\n      (standardType !== SecurityStandard.CWE && filter !== undefined && filter.length > 0))\n  );\n}\n\nexport function shouldOpenSonarSourceSecurityFacet(\n  openFacets: T.Dict<boolean>,\n  query: Partial<Query>\n): boolean {\n  // Open it by default if the parent is open, and no other standard is open.\n  return (\n    shouldOpenStandardsChildFacet(openFacets, query, SecurityStandard.SONARSOURCE) ||\n    (shouldOpenStandardsFacet(openFacets, query) && !isOneStandardChildFacetOpen(openFacets, query))\n  );\n}\n\nfunction isFilteredBySecurityIssueTypes(query: Partial<Query>): boolean {\n  return query.types !== undefined && query.types.includes('VULNERABILITY');\n}\n\nfunction isOneStandardChildFacetOpen(openFacets: T.Dict<boolean>, query: Partial<Query>): boolean {\n  return STANDARD_TYPES.some(standardType =>\n    shouldOpenStandardsChildFacet(openFacets, query, standardType)\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { getJSON, post, postJSON } from 'sonar-ui-common/helpers/request';\nimport throwGlobalError from '../app/utils/throwGlobalError';\nimport { GetRulesAppResponse, SearchRulesResponse } from '../types/coding-rules';\n\nexport function getRulesApp(): Promise<GetRulesAppResponse> {\n  return getJSON('/api/rules/app').catch(throwGlobalError);\n}\n\nexport function searchRules(data: {\n  activation?: boolean | string;\n  active_severities?: string;\n  asc?: boolean | string;\n  available_since?: string;\n  cwe?: string;\n  f?: string;\n  facets?: string;\n  include_external?: boolean | string;\n  inheritance?: string;\n  is_template?: boolean | string;\n  languages?: string;\n  owaspTop10?: string;\n  p?: number;\n  ps?: number;\n  q?: string;\n  qprofile?: string;\n  repositories?: string;\n  rule_key?: string;\n  s?: string;\n  sansTop25?: string;\n  severities?: string;\n  sonarsourceSecurity?: string;\n  statuses?: string;\n  tags?: string;\n  template_key?: string;\n  types?: string;\n}): Promise<SearchRulesResponse> {\n  return getJSON('/api/rules/search', data).catch(throwGlobalError);\n}\n\nexport function takeFacet(response: SearchRulesResponse, property: string) {\n  const facet = response.facets?.find(f => f.property === property);\n  return facet ? facet.values : [];\n}\n\nexport function getRuleDetails(parameters: {\n  actives?: boolean;\n  key: string;\n}): Promise<{ actives?: T.RuleActivation[]; rule: T.RuleDetails }> {\n  return getJSON('/api/rules/show', parameters).catch(throwGlobalError);\n}\n\nexport function getRuleTags(parameters: { ps?: number; q: string }): Promise<string[]> {\n  return getJSON('/api/rules/tags', parameters).then(r => r.tags, throwGlobalError);\n}\n\nexport function createRule(data: {\n  custom_key: string;\n  markdown_description: string;\n  name: string;\n  params?: string;\n  prevent_reactivation?: boolean;\n  severity?: string;\n  status?: string;\n  template_key: string;\n  type?: string;\n}): Promise<T.RuleDetails> {\n  return postJSON('/api/rules/create', data).then(\n    r => r.rule,\n    response => {\n      // do not show global error if the status code is 409\n      // this case should be handled inside a component\n      if (response && response.status === 409) {\n        return Promise.reject(response);\n      } else {\n        return throwGlobalError(response);\n      }\n    }\n  );\n}\n\nexport function deleteRule(parameters: { key: string }) {\n  return post('/api/rules/delete', parameters).catch(throwGlobalError);\n}\n\nexport function updateRule(data: {\n  key: string;\n  markdown_description?: string;\n  markdown_note?: string;\n  name?: string;\n  params?: string;\n  remediation_fn_base_effort?: string;\n  remediation_fn_type?: string;\n  remediation_fy_gap_multiplier?: string;\n  severity?: string;\n  status?: string;\n  tags?: string;\n}): Promise<T.RuleDetails> {\n  return postJSON('/api/rules/update', data).then(r => r.rule, throwGlobalError);\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { getInstance } from '../../helpers/system';\n\ninterface Props {\n  children?: (transformedMessage: string) => React.ReactChild;\n  message: string;\n}\n\nexport default function InstanceMessage({ children, message }: Props): any {\n  const transformedMessage = message.replace(/\\{instance\\}/gim, getInstance());\n\n  if (children) {\n    return children(transformedMessage);\n  }\n\n  return transformedMessage;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as differenceInYears from 'date-fns/difference_in_years';\nimport { sortBy } from 'lodash';\nimport { isValidDate, parseDate } from 'sonar-ui-common/helpers/dates';\nimport { Profile as BaseProfile } from '../../api/quality-profiles';\nimport { Profile } from './types';\n\nexport function sortProfiles(profiles: BaseProfile[]): Profile[] {\n  const result: Profile[] = [];\n  const sorted = sortBy(profiles, 'name');\n\n  function retrieveChildren(parent: BaseProfile | null) {\n    return sorted.filter(\n      p => (parent == null && p.parentKey == null) || (parent != null && p.parentKey === parent.key)\n    );\n  }\n\n  function putProfile(profile: BaseProfile | null = null, depth: number = 1) {\n    const children = retrieveChildren(profile);\n\n    if (profile != null) {\n      result.push({ ...profile, childrenCount: children.length, depth });\n    }\n\n    children.forEach(child => putProfile(child, depth + 1));\n  }\n\n  sorted\n    .filter(\n      profile => profile.parentKey == null || sorted.find(p => p.key === profile.parentKey) == null\n    )\n    .forEach(profile => putProfile(profile));\n\n  return result;\n}\n\nexport function isStagnant(profile: Profile): boolean {\n  if (profile.rulesUpdatedAt) {\n    const updateDate = parseDate(profile.rulesUpdatedAt);\n    if (isValidDate(updateDate)) {\n      return differenceInYears(new Date(), updateDate) >= 1;\n    }\n  }\n  return false;\n}\n\nexport const PROFILE_PATH = '/profiles';\n\nexport const getProfilesForLanguagePath = (language: string) => ({\n  pathname: PROFILE_PATH,\n  query: { language }\n});\n\nexport const getProfilePath = (name: string, language: string) => ({\n  pathname: `${PROFILE_PATH}/show`,\n  query: { name, language }\n});\n\nexport const getProfileComparePath = (name: string, language: string, withKey?: string) => {\n  const query = { language, name };\n  if (withKey) {\n    Object.assign(query, { withKey });\n  }\n  return {\n    pathname: `${PROFILE_PATH}/compare`,\n    query\n  };\n};\n\nexport const getProfileChangelogPath = (\n  name: string,\n  language: string,\n  filter?: { since?: string; to?: string }\n) => {\n  const query = { language, name };\n  if (filter) {\n    if (filter.since) {\n      Object.assign(query, { since: filter.since });\n    }\n    if (filter.to) {\n      Object.assign(query, { to: filter.to });\n    }\n  }\n  return {\n    pathname: `${PROFILE_PATH}/changelog`,\n    query\n  };\n};\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { getJSON, post, postJSON } from 'sonar-ui-common/helpers/request';\nimport throwGlobalError from '../app/utils/throwGlobalError';\nimport { BranchParameters } from '../types/branch-like';\nimport { QualityGateApplicationStatus, QualityGateProjectStatus } from '../types/quality-gates';\n\nexport function fetchQualityGates(): Promise<{\n  actions: { create: boolean };\n  qualitygates: T.QualityGate[];\n}> {\n  return getJSON('/api/qualitygates/list').catch(throwGlobalError);\n}\n\nexport function fetchQualityGate(data: { id: number | string }): Promise<T.QualityGate> {\n  return getJSON('/api/qualitygates/show', data).catch(throwGlobalError);\n}\n\nexport function createQualityGate(data: { name: string }): Promise<T.QualityGate> {\n  return postJSON('/api/qualitygates/create', data).catch(throwGlobalError);\n}\n\nexport function deleteQualityGate(data: { id: string }): Promise<void | Response> {\n  return post('/api/qualitygates/destroy', data).catch(throwGlobalError);\n}\n\nexport function renameQualityGate(data: { id: string; name: string }): Promise<void | Response> {\n  return post('/api/qualitygates/rename', data).catch(throwGlobalError);\n}\n\nexport function copyQualityGate(data: { id: string; name: string }): Promise<T.QualityGate> {\n  return postJSON('/api/qualitygates/copy', data).catch(throwGlobalError);\n}\n\nexport function setQualityGateAsDefault(data: { id: string }): Promise<void | Response> {\n  return post('/api/qualitygates/set_as_default', data).catch(throwGlobalError);\n}\n\nexport function createCondition(\n  data: {\n    gateId: string;\n  } & T.Omit<T.Condition, 'id'>\n): Promise<T.Condition> {\n  return postJSON('/api/qualitygates/create_condition', data).catch(throwGlobalError);\n}\n\nexport function updateCondition(data: T.Condition): Promise<T.Condition> {\n  return postJSON('/api/qualitygates/update_condition', data).catch(throwGlobalError);\n}\n\nexport function deleteCondition(data: { id: number }): Promise<void> {\n  return post('/api/qualitygates/delete_condition', data);\n}\n\nexport function getGateForProject(data: { project: string }): Promise<T.QualityGate | undefined> {\n  return getJSON('/api/qualitygates/get_by_project', data).then(\n    ({ qualityGate }) =>\n      qualityGate && {\n        ...qualityGate,\n        isDefault: qualityGate.default\n      },\n    throwGlobalError\n  );\n}\n\nexport function searchProjects(data: {\n  gateName: string;\n  page?: number;\n  pageSize?: number;\n  query?: string;\n  selected?: string;\n}): Promise<{\n  paging: T.Paging;\n  results: Array<{ key: string; name: string; selected: boolean }>;\n}> {\n  return getJSON('/api/qualitygates/search', data).catch(throwGlobalError);\n}\n\nexport function associateGateWithProject(data: {\n  gateId: string;\n  projectKey: string;\n}): Promise<void | Response> {\n  return post('/api/qualitygates/select', data).catch(throwGlobalError);\n}\n\nexport function dissociateGateWithProject(data: {\n  gateId: string;\n  projectKey: string;\n}): Promise<void | Response> {\n  return post('/api/qualitygates/deselect', data).catch(throwGlobalError);\n}\n\nexport function getApplicationQualityGate(data: {\n  application: string;\n  branch?: string;\n}): Promise<QualityGateApplicationStatus> {\n  return getJSON('/api/qualitygates/application_status', data).catch(throwGlobalError);\n}\n\nexport function getQualityGateProjectStatus(\n  data: {\n    projectKey?: string;\n    projectId?: string;\n  } & BranchParameters\n): Promise<QualityGateProjectStatus> {\n  return getJSON('/api/qualitygates/project_status', data)\n    .then(r => r.projectStatus)\n    .catch(throwGlobalError);\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { request } from 'sonar-ui-common/helpers/request';\n\nexport function login(login: string, password: string): Promise<Response> {\n  return request('/api/authentication/login')\n    .setMethod('POST')\n    .setData({ login, password })\n    .submit()\n    .then(basicCheckStatus);\n}\n\nexport function logout(): Promise<Response> {\n  return request('/api/authentication/logout')\n    .setMethod('POST')\n    .submit()\n    .then(basicCheckStatus);\n}\n\nfunction basicCheckStatus(response: Response): Promise<Response> {\n  if (response.status >= 200 && response.status < 300) {\n    return Promise.resolve(response);\n  } else {\n    return Promise.reject(response);\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { InjectedRouter } from 'react-router';\nimport { Dispatch } from 'redux';\nimport * as auth from '../api/auth';\nimport { getLanguages } from '../api/languages';\nimport { getAllMetrics } from '../api/metrics';\nimport { getQualityGateProjectStatus } from '../api/quality-gates';\nimport { getBranchLikeQuery } from '../helpers/branch-like';\nimport { extractStatusConditionsFromProjectStatus } from '../helpers/qualityGates';\nimport { BranchLike } from '../types/branch-like';\nimport { requireAuthorization as requireAuthorizationAction } from './appState';\nimport { registerBranchStatusAction } from './branches';\nimport { addGlobalErrorMessage } from './globalMessages';\nimport { receiveLanguages } from './languages';\nimport { receiveMetrics } from './metrics';\n\nexport function fetchLanguages() {\n  return (dispatch: Dispatch) => {\n    getLanguages().then(\n      languages => dispatch(receiveLanguages(languages)),\n      () => {\n        /* do nothing */\n      }\n    );\n  };\n}\n\nexport function fetchMetrics() {\n  return (dispatch: Dispatch) => {\n    getAllMetrics().then(\n      metrics => dispatch(receiveMetrics(metrics)),\n      () => {\n        /* do nothing */\n      }\n    );\n  };\n}\n\nexport function fetchBranchStatus(branchLike: BranchLike, projectKey: string) {\n  return (dispatch: Dispatch<any>) => {\n    getQualityGateProjectStatus({ projectKey, ...getBranchLikeQuery(branchLike) }).then(\n      projectStatus => {\n        const { ignoredConditions, status } = projectStatus;\n        const conditions = extractStatusConditionsFromProjectStatus(projectStatus);\n        dispatch(\n          registerBranchStatusAction(branchLike, projectKey, status, conditions, ignoredConditions)\n        );\n      },\n      () => {\n        dispatch(addGlobalErrorMessage('Fetching Quality Gate status failed'));\n      }\n    );\n  };\n}\n\nexport function doLogin(login: string, password: string) {\n  return (dispatch: Dispatch<any>) =>\n    auth.login(login, password).then(\n      () => {\n        /* everything is fine */\n      },\n      () => {\n        dispatch(addGlobalErrorMessage('Authentication failed'));\n        return Promise.reject();\n      }\n    );\n}\n\nexport function doLogout() {\n  return (dispatch: Dispatch<any>) =>\n    auth.logout().then(\n      () => {\n        /* everything is fine */\n      },\n      () => {\n        dispatch(addGlobalErrorMessage('Logout failed'));\n        return Promise.reject();\n      }\n    );\n}\n\nexport function requireAuthorization(router: Pick<InjectedRouter, 'replace'>) {\n  const returnTo = window.location.pathname + window.location.search + window.location.hash;\n  router.replace({ pathname: '/sessions/new', query: { return_to: returnTo } });\n  return requireAuthorizationAction();\n}\n\nexport function registerBranchStatus(branchLike: BranchLike, component: string, status: T.Status) {\n  return (dispatch: Dispatch) => {\n    dispatch(registerBranchStatusAction(branchLike, component, status));\n  };\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { getJSON } from 'sonar-ui-common/helpers/request';\nimport throwGlobalError from '../app/utils/throwGlobalError';\n\nexport function getLanguages(): Promise<T.Language[]> {\n  return getJSON('/api/languages/list').then(r => r.languages, throwGlobalError);\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { isOfficial } from '../../helpers/system';\n\nexport default function GlobalFooterBranding() {\n  const official = isOfficial();\n\n  return official ? (\n    <div>\n      SonarQube&trade; technology is powered by{' '}\n      <a href=\"https://www.sonarsource.com\" rel=\"noopener noreferrer\" target=\"_blank\">\n        SonarSource SA\n      </a>\n    </div>\n  ) : (\n    <div>\n      This application is based on{' '}\n      <a\n        href=\"https://www.sonarqube.org/?referrer=sonarqube\"\n        rel=\"noopener noreferrer\"\n        target=\"_blank\"\n        title=\"SonarQube™\">\n        SonarQube™\n      </a>{' '}\n      but is <strong>not</strong> an official version provided by{' '}\n      <a\n        href=\"https://www.sonarsource.com\"\n        rel=\"noopener noreferrer\"\n        target=\"_blank\"\n        title=\"SonarSource SA\">\n        SonarSource SA\n      </a>\n      .\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { connect } from 'react-redux';\nimport { getAppState, Store } from '../../store/rootReducer';\nimport { EditionKey } from '../../types/editions';\nimport GlobalFooter from './GlobalFooter';\n\ninterface StateProps {\n  productionDatabase: boolean;\n  sonarqubeEdition?: EditionKey;\n  sonarqubeVersion?: string;\n}\n\nconst mapStateToProps = (state: Store): StateProps => ({\n  productionDatabase: getAppState(state).productionDatabase,\n  sonarqubeEdition: getAppState(state).edition as EditionKey, // TODO: Fix once AppState is no longer ambiant.\n  sonarqubeVersion: getAppState(state).version\n});\n\nexport default connect(mapStateToProps)(GlobalFooter);\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport { Alert } from 'sonar-ui-common/components/ui/Alert';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport InstanceMessage from '../../components/common/InstanceMessage';\nimport { getEdition } from '../../helpers/editions';\nimport { EditionKey } from '../../types/editions';\nimport GlobalFooterBranding from './GlobalFooterBranding';\n\ninterface Props {\n  hideLoggedInInfo?: boolean;\n  productionDatabase: boolean;\n  sonarqubeEdition?: EditionKey;\n  sonarqubeVersion?: string;\n}\n\nexport default function GlobalFooter({\n  hideLoggedInInfo,\n  productionDatabase,\n  sonarqubeEdition,\n  sonarqubeVersion\n}: Props) {\n  const currentEdition = sonarqubeEdition && getEdition(sonarqubeEdition);\n\n  return (\n    <div className=\"page-footer page-container\" id=\"footer\">\n      {productionDatabase === false && (\n        <Alert display=\"inline\" id=\"evaluation_warning\" variant=\"warning\">\n          <p className=\"big\">{translate('footer.production_database_warning')}</p>\n          <p>\n            <InstanceMessage message={translate('footer.production_database_explanation')} />\n          </p>\n        </Alert>\n      )}\n\n      <GlobalFooterBranding />\n\n      <ul className=\"page-footer-menu\">\n        {!hideLoggedInInfo && currentEdition && (\n          <li className=\"page-footer-menu-item\">{currentEdition.name}</li>\n        )}\n        {!hideLoggedInInfo && sonarqubeVersion && (\n          <li className=\"page-footer-menu-item\">\n            {translateWithParameters('footer.version_x', sonarqubeVersion)}\n          </li>\n        )}\n        <li className=\"page-footer-menu-item\">\n          <a\n            href=\"https://www.gnu.org/licenses/lgpl-3.0.txt\"\n            rel=\"noopener noreferrer\"\n            target=\"_blank\">\n            {translate('footer.license')}\n          </a>\n        </li>\n        <li className=\"page-footer-menu-item\">\n          <a\n            href=\"https://community.sonarsource.com/c/help/sq\"\n            rel=\"noopener noreferrer\"\n            target=\"_blank\">\n            {translate('footer.community')}\n          </a>\n        </li>\n        <li className=\"page-footer-menu-item\">\n          <Link to=\"/documentation\">{translate('footer.documentation')}</Link>\n        </li>\n        <li className=\"page-footer-menu-item\">\n          <a\n            href=\"https://redirect.sonarsource.com/doc/plugin-library.html\"\n            rel=\"noopener noreferrer\"\n            target=\"_blank\">\n            {translate('footer.plugins')}\n          </a>\n        </li>\n        {!hideLoggedInInfo && (\n          <li className=\"page-footer-menu-item\">\n            <Link to=\"/web_api\">{translate('footer.web_api')}</Link>\n          </li>\n        )}\n        {!hideLoggedInInfo && (\n          <li className=\"page-footer-menu-item\">\n            <Link to=\"/about\">{translate('footer.about')}</Link>\n          </li>\n        )}\n      </ul>\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { getJSON, post, postJSON } from 'sonar-ui-common/helpers/request';\nimport throwGlobalError from '../app/utils/throwGlobalError';\nimport { BranchParameters } from '../types/branch-like';\nimport {\n  MeasuresAndMetaWithMetrics,\n  MeasuresAndMetaWithPeriod,\n  MeasuresForProjects\n} from '../types/measures';\n\nconst COMPONENT_URL = '/api/measures/component';\n\nexport function getMeasures(\n  data: { component: string; metricKeys: string } & BranchParameters\n): Promise<T.Measure[]> {\n  return getJSON(COMPONENT_URL, data).then(r => r.component.measures, throwGlobalError);\n}\n\nexport function getMeasuresWithMetrics(\n  component: string,\n  metrics: string[],\n  branchParameters?: BranchParameters\n): Promise<MeasuresAndMetaWithMetrics> {\n  return getJSON(COMPONENT_URL, {\n    additionalFields: 'metrics',\n    component,\n    metricKeys: metrics.join(','),\n    ...branchParameters\n  }).catch(throwGlobalError);\n}\n\nexport function getMeasuresWithPeriod(\n  component: string,\n  metrics: string[],\n  branchParameters?: BranchParameters\n): Promise<MeasuresAndMetaWithPeriod> {\n  return getJSON(COMPONENT_URL, {\n    additionalFields: 'period',\n    component,\n    metricKeys: metrics.join(','),\n    ...branchParameters\n  }).catch(throwGlobalError);\n}\n\nexport function getMeasuresWithPeriodAndMetrics(\n  component: string,\n  metrics: string[],\n  branchParameters?: BranchParameters\n): Promise<MeasuresAndMetaWithPeriod & MeasuresAndMetaWithMetrics> {\n  return getJSON(COMPONENT_URL, {\n    additionalFields: 'period,metrics',\n    component,\n    metricKeys: metrics.join(','),\n    ...branchParameters\n  }).catch(throwGlobalError);\n}\n\nexport function getMeasuresForProjects(\n  projectKeys: string[],\n  metricKeys: string[]\n): Promise<MeasuresForProjects[]> {\n  return getJSON('/api/measures/search', {\n    projectKeys: projectKeys.join(),\n    metricKeys: metricKeys.join()\n  }).then(r => r.measures);\n}\n\nexport function getCustomMeasures(data: {\n  f?: string;\n  p?: number;\n  projectKey: string;\n  ps?: number;\n}): Promise<{ customMeasures: T.CustomMeasure[]; paging: T.Paging }> {\n  return getJSON('/api/custom_measures/search', data).then(\n    r =>\n      ({\n        customMeasures: r.customMeasures,\n        paging: { pageIndex: r.p, pageSize: r.ps, total: r.total }\n      } as any),\n    throwGlobalError\n  );\n}\n\nexport function createCustomMeasure(data: {\n  description?: string;\n  metricKey: string;\n  projectKey: string;\n  value: string;\n}): Promise<T.CustomMeasure> {\n  return postJSON('/api/custom_measures/create', data).catch(throwGlobalError);\n}\n\nexport function updateCustomMeasure(data: { description?: string; id: string; value?: string }) {\n  return post('/api/custom_measures/update', data).catch(throwGlobalError);\n}\n\nexport function deleteCustomMeasure(data: { id: string }) {\n  return post('/api/custom_measures/delete', data).catch(throwGlobalError);\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nexport function getWrappedDisplayName<P>(\n  WrappedComponent: React.ComponentType<P>,\n  hocName: string\n) {\n  const wrappedDisplayName = WrappedComponent.displayName || WrappedComponent.name || 'Component';\n  return `${hocName}(${wrappedDisplayName})`;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { ActionType } from './utils/actions';\n\nexport const enum Actions {\n  SetAppState = 'SET_APP_STATE',\n  SetAdminPages = 'SET_ADMIN_PAGES',\n  RequireAuthorization = 'REQUIRE_AUTHORIZATION'\n}\n\nexport type Action =\n  | ActionType<typeof setAppState, Actions.SetAppState>\n  | ActionType<typeof setAdminPages, Actions.SetAdminPages>\n  | ActionType<typeof requireAuthorization, Actions.RequireAuthorization>;\n\nexport function setAppState(appState: T.AppState) {\n  return { type: Actions.SetAppState, appState };\n}\n\nexport function setAdminPages(adminPages: T.Extension[]) {\n  return { type: Actions.SetAdminPages, adminPages };\n}\n\nexport function requireAuthorization() {\n  return { type: Actions.RequireAuthorization };\n}\n\nconst defaultValue: T.AppState = {\n  authenticationError: false,\n  authorizationError: false,\n  edition: undefined,\n  productionDatabase: true,\n  qualifiers: [],\n  settings: {},\n  version: ''\n};\n\nexport default function(state: T.AppState = defaultValue, action: Action): T.AppState {\n  if (action.type === Actions.SetAppState) {\n    return { ...state, ...action.appState };\n  }\n  if (action.type === Actions.SetAdminPages) {\n    return { ...state, adminPages: action.adminPages };\n  }\n  if (action.type === Actions.RequireAuthorization) {\n    return { ...state, authorizationError: true };\n  }\n  return state;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { flatten, sortBy } from 'lodash';\nimport BugIcon from 'sonar-ui-common/components/icons/BugIcon';\nimport CodeSmellIcon from 'sonar-ui-common/components/icons/CodeSmellIcon';\nimport SecurityHotspotIcon from 'sonar-ui-common/components/icons/SecurityHotspotIcon';\nimport VulnerabilityIcon from 'sonar-ui-common/components/icons/VulnerabilityIcon';\nimport { IssueType, RawIssue } from '../types/issues';\nimport { MetricKey } from '../types/metrics';\nimport { ISSUE_TYPES } from './constants';\n\ninterface Rule {}\n\ninterface Component {\n  key: string;\n  name: string;\n}\n\nexport function sortByType<T extends Pick<T.Issue, 'type'>>(issues: T[]): T[] {\n  return sortBy(issues, issue => ISSUE_TYPES.indexOf(issue.type));\n}\n\nfunction injectRelational(\n  issue: T.Dict<any>,\n  source: any[] | undefined,\n  baseField: string,\n  lookupField: string\n) {\n  const newFields: T.Dict<any> = {};\n  const baseValue = issue[baseField];\n  if (baseValue !== undefined && source !== undefined) {\n    const lookupValue = source.find(candidate => candidate[lookupField] === baseValue);\n    if (lookupValue != null) {\n      Object.keys(lookupValue).forEach(key => {\n        const newKey = baseField + key.charAt(0).toUpperCase() + key.slice(1);\n        newFields[newKey] = lookupValue[key];\n      });\n    }\n  }\n  return newFields;\n}\n\nfunction injectCommentsRelational(issue: RawIssue, users?: T.UserBase[]) {\n  if (!issue.comments) {\n    return {};\n  }\n  const comments = issue.comments.map(comment => {\n    const commentWithAuthor = { ...comment, author: comment.login, login: undefined };\n    return {\n      ...commentWithAuthor,\n      ...injectRelational(commentWithAuthor, users, 'author', 'login')\n    };\n  });\n  return { comments };\n}\n\nfunction prepareClosed(\n  issue: RawIssue,\n  secondaryLocations: T.FlowLocation[],\n  flows: T.FlowLocation[][]\n) {\n  return issue.status === 'CLOSED'\n    ? { flows: [], line: undefined, textRange: undefined, secondaryLocations: [] }\n    : { flows, secondaryLocations };\n}\n\nfunction ensureTextRange(issue: RawIssue): { textRange?: T.TextRange } {\n  return issue.line && !issue.textRange\n    ? {\n        textRange: {\n          startLine: issue.line,\n          endLine: issue.line,\n          startOffset: 0,\n          endOffset: 999999\n        }\n      }\n    : {};\n}\n\nfunction reverseLocations(locations: T.FlowLocation[]): T.FlowLocation[] {\n  const x = [...locations];\n  x.reverse();\n  return x;\n}\n\nfunction splitFlows(\n  issue: RawIssue,\n  components: Component[] = []\n): { secondaryLocations: T.FlowLocation[]; flows: T.FlowLocation[][] } {\n  const parsedFlows: T.FlowLocation[][] = (issue.flows || [])\n    .filter(flow => flow.locations !== undefined)\n    .map(flow => flow.locations!.filter(location => location.textRange != null))\n    .map(flow =>\n      flow.map(location => {\n        const component = components.find(component => component.key === location.component);\n        return { ...location, componentName: component && component.name };\n      })\n    );\n\n  const onlySecondaryLocations = parsedFlows.every(flow => flow.length === 1);\n\n  return onlySecondaryLocations\n    ? { secondaryLocations: orderLocations(flatten(parsedFlows)), flows: [] }\n    : { secondaryLocations: [], flows: parsedFlows.map(reverseLocations) };\n}\n\nfunction orderLocations(locations: T.FlowLocation[]) {\n  return sortBy(\n    locations,\n    location => location.textRange && location.textRange.startLine,\n    location => location.textRange && location.textRange.startOffset\n  );\n}\n\nexport function parseIssueFromResponse(\n  issue: RawIssue,\n  components?: Component[],\n  users?: T.UserBase[],\n  rules?: Rule[]\n): T.Issue {\n  const { secondaryLocations, flows } = splitFlows(issue, components);\n  return {\n    ...issue,\n    ...injectRelational(issue, components, 'component', 'key'),\n    ...injectRelational(issue, components, 'project', 'key'),\n    ...injectRelational(issue, components, 'subProject', 'key'),\n    ...injectRelational(issue, rules, 'rule', 'key'),\n    ...injectRelational(issue, users, 'assignee', 'login'),\n    ...injectCommentsRelational(issue, users),\n    ...prepareClosed(issue, secondaryLocations, flows),\n    ...ensureTextRange(issue)\n  } as T.Issue;\n}\n\nexport const ISSUETYPE_METRIC_KEYS_MAP = {\n  [IssueType.CodeSmell]: {\n    metric: MetricKey.code_smells,\n    newMetric: MetricKey.new_code_smells,\n    rating: MetricKey.sqale_rating,\n    newRating: MetricKey.new_maintainability_rating,\n    ratingName: 'Maintainability',\n    iconClass: CodeSmellIcon\n  },\n  [IssueType.Vulnerability]: {\n    metric: MetricKey.vulnerabilities,\n    newMetric: MetricKey.new_vulnerabilities,\n    rating: MetricKey.security_rating,\n    newRating: MetricKey.new_security_rating,\n    ratingName: 'Security',\n    iconClass: VulnerabilityIcon\n  },\n  [IssueType.Bug]: {\n    metric: MetricKey.bugs,\n    newMetric: MetricKey.new_bugs,\n    rating: MetricKey.reliability_rating,\n    newRating: MetricKey.new_reliability_rating,\n    ratingName: 'Reliability',\n    iconClass: BugIcon\n  },\n  [IssueType.SecurityHotspot]: {\n    metric: MetricKey.security_hotspots,\n    newMetric: MetricKey.new_security_hotspots,\n    rating: MetricKey.security_review_rating,\n    newRating: MetricKey.new_security_review_rating,\n    ratingName: 'SecurityReview',\n    iconClass: SecurityHotspotIcon\n  }\n};\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { invert } from 'lodash';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { RequestData } from 'sonar-ui-common/helpers/request';\nimport { Facet, searchProjects } from '../../api/components';\nimport { getMeasuresForProjects } from '../../api/measures';\nimport { isDiffMetric } from '../../helpers/measures';\nimport { MetricKey } from '../../types/metrics';\nimport { convertToFilter, Query } from './query';\n\ninterface SortingOption {\n  class?: string;\n  value: string;\n}\n\nexport const PROJECTS_DEFAULT_FILTER = 'sonarqube.projects.default';\nexport const PROJECTS_FAVORITE = 'favorite';\nexport const PROJECTS_ALL = 'all';\n\nexport const SORTING_METRICS: SortingOption[] = [\n  { value: 'name' },\n  { value: 'analysis_date' },\n  { value: 'reliability' },\n  { value: 'security' },\n  { value: 'security_review' },\n  { value: 'maintainability' },\n  { value: 'coverage' },\n  { value: 'duplications' },\n  { value: 'size' }\n];\n\nexport const SORTING_LEAK_METRICS: SortingOption[] = [\n  { value: 'name' },\n  { value: 'analysis_date' },\n  { value: 'new_reliability', class: 'projects-leak-sorting-option' },\n  { value: 'new_security', class: 'projects-leak-sorting-option' },\n  { value: 'new_security_review', class: 'projects-leak-sorting-option' },\n  { value: 'new_maintainability', class: 'projects-leak-sorting-option' },\n  { value: 'new_coverage', class: 'projects-leak-sorting-option' },\n  { value: 'new_duplications', class: 'projects-leak-sorting-option' },\n  { value: 'new_lines', class: 'projects-leak-sorting-option' }\n];\n\nexport const SORTING_SWITCH: T.Dict<string> = {\n  analysis_date: 'analysis_date',\n  name: 'name',\n  reliability: 'new_reliability',\n  security: 'new_security',\n  security_review: 'new_security_review',\n  maintainability: 'new_maintainability',\n  coverage: 'new_coverage',\n  duplications: 'new_duplications',\n  size: 'new_lines',\n  new_reliability: 'reliability',\n  new_security: 'security',\n  new_security_review: 'security_review',\n  new_maintainability: 'maintainability',\n  new_coverage: 'coverage',\n  new_duplications: 'duplications',\n  new_lines: 'size'\n};\n\nexport const VIEWS = [\n  { value: 'overall', label: 'overall' },\n  { value: 'leak', label: 'new_code' }\n];\n\nexport const VISUALIZATIONS = [\n  'risk',\n  'reliability',\n  'security',\n  'maintainability',\n  'coverage',\n  'duplications'\n];\n\nconst PAGE_SIZE = 50;\nconst PAGE_SIZE_VISUALIZATIONS = 99;\n\nconst METRICS = [\n  MetricKey.alert_status,\n  MetricKey.bugs,\n  MetricKey.reliability_rating,\n  MetricKey.vulnerabilities,\n  MetricKey.security_rating,\n  MetricKey.security_hotspots_reviewed,\n  MetricKey.security_review_rating,\n  MetricKey.code_smells,\n  MetricKey.sqale_rating,\n  MetricKey.duplicated_lines_density,\n  MetricKey.coverage,\n  MetricKey.ncloc,\n  MetricKey.ncloc_language_distribution,\n  MetricKey.projects\n];\n\nconst LEAK_METRICS = [\n  MetricKey.alert_status,\n  MetricKey.new_bugs,\n  MetricKey.new_reliability_rating,\n  MetricKey.new_vulnerabilities,\n  MetricKey.new_security_rating,\n  MetricKey.new_security_hotspots_reviewed,\n  MetricKey.new_security_review_rating,\n  MetricKey.new_code_smells,\n  MetricKey.new_maintainability_rating,\n  MetricKey.new_coverage,\n  MetricKey.new_duplicated_lines_density,\n  MetricKey.new_lines,\n  MetricKey.projects\n];\n\nconst METRICS_BY_VISUALIZATION: T.Dict<string[]> = {\n  risk: [\n    MetricKey.reliability_rating,\n    MetricKey.security_rating,\n    MetricKey.coverage,\n    MetricKey.ncloc,\n    MetricKey.sqale_index\n  ],\n  // x, y, size, color\n  reliability: [\n    MetricKey.ncloc,\n    MetricKey.reliability_remediation_effort,\n    MetricKey.bugs,\n    MetricKey.reliability_rating\n  ],\n  security: [\n    MetricKey.ncloc,\n    MetricKey.security_remediation_effort,\n    MetricKey.vulnerabilities,\n    MetricKey.security_rating\n  ],\n  maintainability: [\n    MetricKey.ncloc,\n    MetricKey.sqale_index,\n    MetricKey.code_smells,\n    MetricKey.sqale_rating\n  ],\n  coverage: [MetricKey.complexity, MetricKey.coverage, MetricKey.uncovered_lines],\n  duplications: [MetricKey.ncloc, MetricKey.duplicated_lines_density, MetricKey.duplicated_blocks]\n};\n\nexport const FACETS = [\n  'reliability_rating',\n  'security_rating',\n  'security_review_rating',\n  'sqale_rating',\n  'coverage',\n  'duplicated_lines_density',\n  'ncloc',\n  'alert_status',\n  'languages',\n  'tags',\n  'qualifier'\n];\n\nexport const LEAK_FACETS = [\n  'new_reliability_rating',\n  'new_security_rating',\n  'new_security_review_rating',\n  'new_maintainability_rating',\n  'new_coverage',\n  'new_duplicated_lines_density',\n  'new_lines',\n  'alert_status',\n  'languages',\n  'tags',\n  'qualifier'\n];\n\nconst REVERSED_FACETS = ['coverage', 'new_coverage'];\n\nexport function localizeSorting(sort?: string): string {\n  return translate('projects.sort', sort || 'name');\n}\n\nexport function parseSorting(sort: string): { sortValue: string; sortDesc: boolean } {\n  const desc = sort[0] === '-';\n  return { sortValue: desc ? sort.substr(1) : sort, sortDesc: desc };\n}\n\nexport function fetchProjects(query: Query, isFavorite: boolean, pageIndex = 1) {\n  const ps = query.view === 'visualizations' ? PAGE_SIZE_VISUALIZATIONS : PAGE_SIZE;\n  const data = convertToQueryData(query, isFavorite, {\n    p: pageIndex > 1 ? pageIndex : undefined,\n    ps,\n    facets: defineFacets(query).join(),\n    f: 'analysisDate,leakPeriodDate'\n  });\n  return searchProjects(data)\n    .then(response =>\n      Promise.all([fetchProjectMeasures(response.components, query), Promise.resolve(response)])\n    )\n    .then(([measures, { components, facets, paging }]) => {\n      return {\n        facets: getFacetsMap(facets),\n        projects: components.map(component => {\n          const componentMeasures: T.Dict<string> = {};\n          measures\n            .filter(measure => measure.component === component.key)\n            .forEach(measure => {\n              const value = isDiffMetric(measure.metric) ? measure.period?.value : measure.value;\n              if (value !== undefined) {\n                componentMeasures[measure.metric] = value;\n              }\n            });\n          return { ...component, measures: componentMeasures };\n        }),\n        total: paging.total\n      };\n    });\n}\n\nfunction defineMetrics(query: Query): string[] {\n  switch (query.view) {\n    case 'visualizations':\n      return METRICS_BY_VISUALIZATION[query.visualization || 'risk'];\n    case 'leak':\n      return LEAK_METRICS;\n    default:\n      return METRICS;\n  }\n}\n\nfunction defineFacets(query: Query): string[] {\n  if (query.view === 'leak') {\n    return LEAK_FACETS;\n  }\n  return FACETS;\n}\n\nfunction convertToQueryData(query: Query, isFavorite: boolean, defaultData = {}) {\n  const data: RequestData = { ...defaultData };\n  const filter = convertToFilter(query, isFavorite);\n  const sort = convertToSorting(query);\n\n  if (filter) {\n    data.filter = filter;\n  }\n  if (sort.s) {\n    data.s = sort.s;\n  }\n  if (sort.asc !== undefined) {\n    data.asc = sort.asc;\n  }\n  return data;\n}\n\nexport function fetchProjectMeasures(projects: Array<{ key: string }>, query: Query) {\n  if (!projects.length) {\n    return Promise.resolve([]);\n  }\n\n  const projectKeys = projects.map(project => project.key);\n  const metrics = defineMetrics(query);\n  return getMeasuresForProjects(projectKeys, metrics);\n}\n\nfunction mapFacetValues(values: Array<{ val: string; count: number }>) {\n  const map: T.Dict<number> = {};\n  values.forEach(value => {\n    map[value.val] = value.count;\n  });\n  return map;\n}\n\nconst propertyToMetricMap: T.Dict<string | undefined> = {\n  analysis_date: 'analysisDate',\n  reliability: 'reliability_rating',\n  new_reliability: 'new_reliability_rating',\n  security: 'security_rating',\n  new_security: 'new_security_rating',\n  security_review: 'security_review_rating',\n  new_security_review: 'new_security_review_rating',\n  maintainability: 'sqale_rating',\n  new_maintainability: 'new_maintainability_rating',\n  coverage: 'coverage',\n  new_coverage: 'new_coverage',\n  duplications: 'duplicated_lines_density',\n  new_duplications: 'new_duplicated_lines_density',\n  size: 'ncloc',\n  new_lines: 'new_lines',\n  gate: 'alert_status',\n  languages: 'languages',\n  tags: 'tags',\n  search: 'query',\n  qualifier: 'qualifier'\n};\n\nconst metricToPropertyMap = invert(propertyToMetricMap);\n\nfunction getFacetsMap(facets: Facet[]) {\n  const map: T.Dict<T.Dict<number>> = {};\n  facets.forEach(facet => {\n    const property = metricToPropertyMap[facet.property];\n    const { values } = facet;\n    if (REVERSED_FACETS.includes(property)) {\n      values.reverse();\n    }\n    map[property] = mapFacetValues(values);\n  });\n  return map;\n}\n\nfunction convertToSorting({ sort }: Query): { s?: string; asc?: boolean } {\n  if (sort && sort[0] === '-') {\n    return { s: propertyToMetricMap[sort.substr(1)], asc: false };\n  }\n  return { s: propertyToMetricMap[sort || ''] };\n}\n\nconst ONE_MINUTE = 60000;\nconst ONE_HOUR = 60 * ONE_MINUTE;\nconst ONE_DAY = 24 * ONE_HOUR;\nconst ONE_MONTH = 30 * ONE_DAY;\nconst ONE_YEAR = 12 * ONE_MONTH;\n\nfunction format(periods: Array<{ value: number; label: string }>) {\n  let result = '';\n  let count = 0;\n  let lastId = -1;\n  for (let i = 0; i < periods.length && count < 2; i++) {\n    if (periods[i].value > 0) {\n      count++;\n      if (lastId < 0 || lastId + 1 === i) {\n        lastId = i;\n        result += translateWithParameters(periods[i].label, periods[i].value) + ' ';\n      }\n    }\n  }\n  return result;\n}\n\nexport function formatDuration(ms: number) {\n  if (ms < ONE_MINUTE) {\n    return translate('duration.seconds');\n  }\n  const years = Math.floor(ms / ONE_YEAR);\n  ms -= years * ONE_YEAR;\n  const months = Math.floor(ms / ONE_MONTH);\n  ms -= months * ONE_MONTH;\n  const days = Math.floor(ms / ONE_DAY);\n  ms -= days * ONE_DAY;\n  const hours = Math.floor(ms / ONE_HOUR);\n  ms -= hours * ONE_HOUR;\n  const minutes = Math.floor(ms / ONE_MINUTE);\n  return format([\n    { value: years, label: 'duration.years' },\n    { value: months, label: 'duration.months' },\n    { value: days, label: 'duration.days' },\n    { value: hours, label: 'duration.hours' },\n    { value: minutes, label: 'duration.minutes' }\n  ]);\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nexport enum TaskTypes {\n  Report = 'REPORT',\n  IssueSync = 'ISSUE_SYNC'\n}\n\nexport enum TaskStatuses {\n  Pending = 'PENDING',\n  InProgress = 'IN_PROGRESS',\n  Success = 'SUCCESS',\n  Failed = 'FAILED',\n  Canceled = 'CANCELED'\n}\n\nexport interface Task {\n  analysisId?: string;\n  branch?: string;\n  componentKey?: string;\n  componentName?: string;\n  componentQualifier?: string;\n  errorMessage?: string;\n  errorStacktrace?: string;\n  errorType?: string;\n  executedAt?: string;\n  executionTimeMs?: number;\n  hasErrorStacktrace?: boolean;\n  hasScannerContext?: boolean;\n  id: string;\n  pullRequest?: string;\n  pullRequestTitle?: string;\n  scannerContext?: string;\n  startedAt?: string;\n  status: TaskStatuses;\n  submittedAt: string;\n  submitterLogin?: string;\n  type: TaskTypes;\n  warningCount?: number;\n  warnings?: string[];\n}\n\nexport interface TaskWarning {\n  key: string;\n  message: string;\n  dismissable: boolean;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { uniq } from 'lodash';\nimport { combineReducers, Dispatch } from 'redux';\nimport * as api from '../api/users';\nimport { isLoggedIn } from '../helpers/users';\nimport { ActionType } from './utils/actions';\n\nconst enum Actions {\n  ReceiveCurrentUser = 'RECEIVE_CURRENT_USER',\n  SetCurrentUserSetting = 'SET_CURRENT_USER_SETTING',\n  SetHomePageAction = 'SET_HOMEPAGE'\n}\n\ntype Action =\n  | ActionType<typeof receiveCurrentUser, Actions.ReceiveCurrentUser>\n  | ActionType<typeof setCurrentUserSettingAction, Actions.SetCurrentUserSetting>\n  | ActionType<typeof setHomePageAction, Actions.SetHomePageAction>;\n\nexport interface State {\n  usersByLogin: T.Dict<any>;\n  userLogins: string[];\n  currentUser: T.CurrentUser;\n}\n\nexport function receiveCurrentUser(user: T.CurrentUser) {\n  return { type: Actions.ReceiveCurrentUser, user };\n}\n\nexport function setHomePageAction(homepage: T.HomePage) {\n  return { type: Actions.SetHomePageAction, homepage };\n}\n\nexport function setCurrentUserSettingAction(setting: T.CurrentUserSetting) {\n  return { type: Actions.SetCurrentUserSetting, setting };\n}\n\nexport function setHomePage(homepage: T.HomePage) {\n  return (dispatch: Dispatch) => {\n    api.setHomePage(homepage).then(\n      () => {\n        dispatch(setHomePageAction(homepage));\n      },\n      () => {}\n    );\n  };\n}\n\nexport function setCurrentUserSetting(setting: T.CurrentUserSetting) {\n  return (dispatch: Dispatch, getState: () => { users: State }) => {\n    const oldSetting = getCurrentUserSetting(getState().users, setting.key);\n    dispatch(setCurrentUserSettingAction(setting));\n    api.setUserSetting(setting).then(\n      () => {},\n      () => {\n        dispatch(setCurrentUserSettingAction({ ...setting, value: oldSetting || '' }));\n      }\n    );\n  };\n}\n\nfunction usersByLogin(state: State['usersByLogin'] = {}, action: Action): State['usersByLogin'] {\n  if (action.type === Actions.ReceiveCurrentUser && isLoggedIn(action.user)) {\n    return { ...state, [action.user.login]: action.user };\n  } else {\n    return state;\n  }\n}\n\nfunction userLogins(state: State['userLogins'] = [], action: Action): State['userLogins'] {\n  if (action.type === Actions.ReceiveCurrentUser && isLoggedIn(action.user)) {\n    return uniq([...state, action.user.login]);\n  } else {\n    return state;\n  }\n}\n\nfunction currentUser(\n  state: State['currentUser'] = { isLoggedIn: false },\n  action: Action\n): State['currentUser'] {\n  if (action.type === Actions.ReceiveCurrentUser) {\n    return action.user;\n  }\n  if (action.type === Actions.SetHomePageAction && isLoggedIn(state)) {\n    return { ...state, homepage: action.homepage } as T.LoggedInUser;\n  }\n  if (action.type === Actions.SetCurrentUserSetting && isLoggedIn(state)) {\n    let settings: T.CurrentUserSetting[];\n    if (state.settings) {\n      settings = [...state.settings];\n      const index = settings.findIndex(setting => setting.key === action.setting.key);\n      if (index === -1) {\n        settings.push(action.setting);\n      } else {\n        settings[index] = action.setting;\n      }\n    } else {\n      settings = [action.setting];\n    }\n    return { ...state, settings } as T.LoggedInUser;\n  }\n  return state;\n}\n\nexport default combineReducers({ usersByLogin, userLogins, currentUser });\n\nexport function getCurrentUser(state: State) {\n  return state.currentUser;\n}\n\nexport function getCurrentUserSetting(state: State, key: T.CurrentUserSettingNames) {\n  let setting;\n  if (isLoggedIn(state.currentUser) && state.currentUser.settings) {\n    setting = state.currentUser.settings.find(setting => setting.key === key);\n  }\n  return setting && setting.value;\n}\n\nexport function getUserByLogin(state: State, login: string) {\n  return state.usersByLogin[login];\n}\n\nexport function getUsersByLogins(state: State, logins: string[]) {\n  return logins.map(login => getUserByLogin(state, login));\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { getJSON, post, RequestData } from 'sonar-ui-common/helpers/request';\nimport throwGlobalError from '../app/utils/throwGlobalError';\nimport { IndexationStatus } from '../types/indexation';\nimport { Task, TaskWarning } from '../types/tasks';\n\nexport function getAnalysisStatus(data: {\n  component: string;\n  branch?: string;\n  pullRequest?: string;\n}): Promise<{\n  component: {\n    branch?: string;\n    key: string;\n    name: string;\n    pullRequest?: string;\n    warnings: TaskWarning[];\n  };\n}> {\n  return getJSON('/api/ce/analysis_status', data).catch(throwGlobalError);\n}\n\nexport function getActivity(data: RequestData): Promise<{ tasks: Task[] }> {\n  return getJSON('/api/ce/activity', data);\n}\n\nexport function getStatus(\n  componentId?: string\n): Promise<{ failing: number; inProgress: number; pending: number; pendingTime?: number }> {\n  const data = {};\n  if (componentId) {\n    Object.assign(data, { componentId });\n  }\n  return getJSON('/api/ce/activity_status', data);\n}\n\nexport function getTask(id: string, additionalFields?: string[]): Promise<Task> {\n  return getJSON('/api/ce/task', { id, additionalFields }).then(r => r.task);\n}\n\nexport function cancelTask(id: string): Promise<any> {\n  return post('/api/ce/cancel', { id }).then(\n    () => getTask(id),\n    () => getTask(id)\n  );\n}\n\nexport function cancelAllTasks(): Promise<any> {\n  return post('/api/ce/cancel_all');\n}\n\nexport function getTasksForComponent(component: string): Promise<{ queue: Task[]; current: Task }> {\n  return getJSON('/api/ce/component', { component }).catch(throwGlobalError);\n}\n\nexport function getTypes(): Promise<string[]> {\n  return getJSON('/api/ce/task_types').then(r => r.taskTypes);\n}\n\nexport function getWorkers(): Promise<{ canSetWorkerCount: boolean; value: number }> {\n  return getJSON('/api/ce/worker_count').catch(throwGlobalError);\n}\n\nexport function setWorkerCount(count: number): Promise<void | Response> {\n  return post('/api/ce/set_worker_count', { count }).catch(throwGlobalError);\n}\n\nexport function getIndexationStatus(): Promise<IndexationStatus> {\n  return getJSON('/api/ce/indexation_status').catch(throwGlobalError);\n}\n\nexport function dismissAnalysisWarning(component: string, warning: string) {\n  return post('/api/ce/dismiss_analysis_warning', { component, warning }).catch(throwGlobalError);\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nexport enum SecurityStandard {\n  OWASP_TOP10 = 'owaspTop10',\n  SANS_TOP25 = 'sansTop25',\n  SONARSOURCE = 'sonarsourceSecurity',\n  CWE = 'cwe'\n}\n\nexport type StandardType = SecurityStandard;\n\nexport type Standards = {\n  [key in StandardType]: T.Dict<{ title: string; description?: string }>;\n};\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { createContext } from 'react';\nimport { BranchLike } from '../../types/branch-like';\n\nexport interface ComponentDescriptor {\n  branchLike: BranchLike | undefined;\n  key: string;\n  line?: number;\n  name?: string;\n  qualifier?: string;\n}\n\nexport interface RuleDescriptor {\n  key: string;\n  name?: string;\n}\n\nexport interface WorkspaceContextShape {\n  externalRulesRepoNames: T.Dict<string>;\n  openComponent: (component: ComponentDescriptor) => void;\n  openRule: (rule: RuleDescriptor) => void;\n}\n\nexport const WorkspaceContext = createContext<WorkspaceContextShape>({\n  externalRulesRepoNames: {},\n  openComponent: () => {},\n  openRule: () => {}\n});\n"],"sourceRoot":""}