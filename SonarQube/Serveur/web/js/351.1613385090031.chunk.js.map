{"version":3,"sources":["webpack:///./src/main/js/components/common/VisibilitySelector.tsx","webpack:///./src/main/js/apps/permissions/project/components/ApplyTemplate.tsx","webpack:///./src/main/js/apps/permissions/project/components/AllHoldersList.tsx","webpack:///./src/main/js/apps/permissions/project/components/PageHeader.tsx","webpack:///./src/main/js/apps/permissions/project/components/PublicProjectDisclaimer.tsx","webpack:///./src/main/js/apps/permissions/project/components/App.tsx","webpack:///./src/main/js/apps/permissions/project/components/AppContainer.ts"],"names":["render","className","this","props","map","visibility","key","value","checked","onCheck","onChange","disabled","canTurnToPrivate","showDetails","mounted","state","done","loading","fetchPermissionTemplates","then","permissionTemplates","setState","handleSubmit","permissionTemplate","projectKey","project","templateId","onApply","Promise","reject","undefined","handlePermissionTemplateChange","componentDidMount","componentWillUnmount","header","name","onClose","onSubmit","size","onCloseClick","onFormSubmit","submitting","id","variant","htmlFor","clearable","options","label","onClick","handleToggleUser","user","permission","permissions","includes","revokePermissionFromUser","login","grantPermissionToUser","handleToggleGroup","group","revokePermissionFromGroup","grantPermissionToGroup","handleSelectPermission","onPermissionSelect","filter","groups","groupsPaging","users","usersPaging","order","component","qualifier","count","total","length","HoldersList","onSelectPermission","onToggleGroup","onToggleUser","query","selectedPermission","SearchForm","onFilter","onFilterChange","onSearch","onQueryChange","loadMore","onLoadMore","applyTemplateModal","handleApplyTemplate","handleApplyTemplateClose","configuration","canApplyPermissionTemplate","description","visibilityDescription","ApplyTemplate","loadHolders","PublicProjectDisclaimer","onConfirm","confirmButtonText","Alert","stopLoading","loadUsersAndGroups","userPage","groupsPage","getUsers","q","p","resolve","paging","getGroups","all","usersResponse","groupsResponse","pageIndex","handleFilterChange","handleQueryChange","handlePermissionSelect","addPermissionToGroup","candidate","addPermissionToUser","removePermissionFromGroup","removePermissionFromUser","groupName","handleVisibilityChange","openDisclaimer","turnProjectToPrivate","turnProjectToPublic","onComponentChange","disclaimer","closeDisclaimer","canUpdateProjectVisibilityToPrivate","defer","title","VisibilitySelector","currentUser"],"mappings":"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","file":"js/351.1613385090031.chunk.js","sourcesContent":["/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport Radio from 'sonar-ui-common/components/controls/Radio';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\n\ninterface Props {\n  canTurnToPrivate?: boolean;\n  className?: string;\n  onChange: (visibility: T.Visibility) => void;\n  showDetails?: boolean;\n  visibility?: T.Visibility;\n}\n\nexport default class VisibilitySelector extends React.PureComponent<Props> {\n  render() {\n    return (\n      <div className={classNames(this.props.className)}>\n        {['public', 'private'].map(visibility => (\n          <Radio\n            className={`huge-spacer-right visibility-${visibility}`}\n            key={visibility}\n            value={visibility}\n            checked={this.props.visibility === visibility}\n            onCheck={this.props.onChange}\n            disabled={visibility === 'private' && !this.props.canTurnToPrivate}>\n            <div>\n              {translate('visibility', visibility)}\n              {this.props.showDetails && (\n                <p className=\"note\">{translate('visibility', visibility, 'description.long')}</p>\n              )}\n            </div>\n          </Radio>\n        ))}\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ResetButtonLink, SubmitButton } from 'sonar-ui-common/components/controls/buttons';\nimport Select from 'sonar-ui-common/components/controls/Select';\nimport SimpleModal from 'sonar-ui-common/components/controls/SimpleModal';\nimport { Alert } from 'sonar-ui-common/components/ui/Alert';\nimport DeferredSpinner from 'sonar-ui-common/components/ui/DeferredSpinner';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { applyTemplateToProject, getPermissionTemplates } from '../../../../api/permissions';\n\ninterface Props {\n  onApply?: () => void;\n  onClose: () => void;\n  project: { key: string; name: string };\n}\n\ninterface State {\n  done: boolean;\n  loading: boolean;\n  permissionTemplate?: string;\n  permissionTemplates?: T.PermissionTemplate[];\n}\n\nexport default class ApplyTemplate extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { done: false, loading: true };\n\n  componentDidMount() {\n    this.mounted = true;\n    this.fetchPermissionTemplates();\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  fetchPermissionTemplates = () => {\n    getPermissionTemplates().then(\n      ({ permissionTemplates }) => {\n        if (this.mounted) {\n          this.setState({ loading: false, permissionTemplates });\n        }\n      },\n      () => {\n        if (this.mounted) {\n          this.setState({ loading: false });\n        }\n      }\n    );\n  };\n\n  handleSubmit = () => {\n    if (this.state.permissionTemplate) {\n      return applyTemplateToProject({\n        projectKey: this.props.project.key,\n        templateId: this.state.permissionTemplate\n      }).then(() => {\n        if (this.mounted) {\n          if (this.props.onApply) {\n            this.props.onApply();\n          }\n          this.setState({ done: true });\n        }\n      });\n    } else {\n      return Promise.reject(undefined);\n    }\n  };\n\n  handlePermissionTemplateChange = ({ value }: { value: string }) => {\n    this.setState({ permissionTemplate: value });\n  };\n\n  render() {\n    const header = translateWithParameters(\n      'projects_role.apply_template_to_xxx',\n      this.props.project.name\n    );\n\n    return (\n      <SimpleModal\n        header={header}\n        onClose={this.props.onClose}\n        onSubmit={this.handleSubmit}\n        size=\"small\">\n        {({ onCloseClick, onFormSubmit, submitting }) => (\n          <form id=\"project-permissions-apply-template-form\" onSubmit={onFormSubmit}>\n            <header className=\"modal-head\">\n              <h2>{header}</h2>\n            </header>\n\n            <div className=\"modal-body\">\n              {this.state.done ? (\n                <Alert variant=\"success\">{translate('projects_role.apply_template.success')}</Alert>\n              ) : (\n                <>\n                  {this.state.loading ? (\n                    <i className=\"spinner\" />\n                  ) : (\n                    <div className=\"modal-field\">\n                      <label htmlFor=\"project-permissions-template\">\n                        {translate('template')}\n                        <em className=\"mandatory\">*</em>\n                      </label>\n                      {this.state.permissionTemplates && (\n                        <Select\n                          clearable={false}\n                          id=\"project-permissions-template\"\n                          onChange={this.handlePermissionTemplateChange}\n                          options={this.state.permissionTemplates.map(permissionTemplate => ({\n                            label: permissionTemplate.name,\n                            value: permissionTemplate.id\n                          }))}\n                          value={this.state.permissionTemplate}\n                        />\n                      )}\n                    </div>\n                  )}\n                </>\n              )}\n            </div>\n\n            <footer className=\"modal-foot\">\n              <DeferredSpinner className=\"spacer-right\" loading={submitting} />\n              {!this.state.done && (\n                <SubmitButton disabled={submitting || !this.state.permissionTemplate}>\n                  {translate('apply')}\n                </SubmitButton>\n              )}\n              <ResetButtonLink onClick={onCloseClick}>\n                {translate(this.state.done ? 'close' : 'cancel')}\n              </ResetButtonLink>\n            </footer>\n          </form>\n        )}\n      </SimpleModal>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { without } from 'lodash';\nimport * as React from 'react';\nimport ListFooter from 'sonar-ui-common/components/controls/ListFooter';\nimport HoldersList from '../../shared/components/HoldersList';\nimport SearchForm from '../../shared/components/SearchForm';\nimport { convertToPermissionDefinitions, PERMISSIONS_ORDER_BY_QUALIFIER } from '../../utils';\n\ninterface Props {\n  component: T.Component;\n  filter: string;\n  grantPermissionToGroup: (group: string, permission: string) => Promise<void>;\n  grantPermissionToUser: (user: string, permission: string) => Promise<void>;\n  groups: T.PermissionGroup[];\n  groupsPaging?: T.Paging;\n  onLoadMore: () => void;\n  onFilterChange: (filter: string) => void;\n  onPermissionSelect: (permissions?: string) => void;\n  onQueryChange: (query: string) => void;\n  query: string;\n  revokePermissionFromGroup: (group: string, permission: string) => Promise<void>;\n  revokePermissionFromUser: (user: string, permission: string) => Promise<void>;\n  selectedPermission?: string;\n  users: T.PermissionUser[];\n  usersPaging?: T.Paging;\n  visibility?: T.Visibility;\n}\n\nexport default class AllHoldersList extends React.PureComponent<Props> {\n  handleToggleUser = (user: T.PermissionUser, permission: string) => {\n    const hasPermission = user.permissions.includes(permission);\n\n    if (hasPermission) {\n      return this.props.revokePermissionFromUser(user.login, permission);\n    } else {\n      return this.props.grantPermissionToUser(user.login, permission);\n    }\n  };\n\n  handleToggleGroup = (group: T.PermissionGroup, permission: string) => {\n    const hasPermission = group.permissions.includes(permission);\n\n    if (hasPermission) {\n      return this.props.revokePermissionFromGroup(group.name, permission);\n    } else {\n      return this.props.grantPermissionToGroup(group.name, permission);\n    }\n  };\n\n  handleSelectPermission = (permission?: string) => {\n    this.props.onPermissionSelect(permission);\n  };\n\n  render() {\n    const { filter, groups, groupsPaging, users, usersPaging } = this.props;\n    let order = PERMISSIONS_ORDER_BY_QUALIFIER[this.props.component.qualifier];\n    if (this.props.visibility === 'public') {\n      order = without(order, 'user', 'codeviewer');\n    }\n    const permissions = convertToPermissionDefinitions(order, 'projects_role');\n\n    let count = 0;\n    let total = 0;\n    if (filter !== 'users') {\n      count += groups.length;\n      total += groupsPaging ? groupsPaging.total : groups.length;\n    }\n    if (filter !== 'groups') {\n      count += users.length;\n      total += usersPaging ? usersPaging.total : users.length;\n    }\n\n    return (\n      <>\n        <HoldersList\n          filter={this.props.filter}\n          groups={this.props.groups}\n          onSelectPermission={this.handleSelectPermission}\n          onToggleGroup={this.handleToggleGroup}\n          onToggleUser={this.handleToggleUser}\n          permissions={permissions}\n          query={this.props.query}\n          selectedPermission={this.props.selectedPermission}\n          users={this.props.users}>\n          <SearchForm\n            filter={this.props.filter}\n            onFilter={this.props.onFilterChange}\n            onSearch={this.props.onQueryChange}\n            query={this.props.query}\n          />\n        </HoldersList>\n        <ListFooter count={count} loadMore={this.props.onLoadMore} total={total} />\n      </>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Button } from 'sonar-ui-common/components/controls/buttons';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { isApplication, isPortfolioLike } from '../../../../types/component';\nimport ApplyTemplate from './ApplyTemplate';\n\ninterface Props {\n  component: T.Component;\n  loadHolders: () => void;\n  loading: boolean;\n}\n\ninterface State {\n  applyTemplateModal: boolean;\n}\n\nexport default class PageHeader extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { applyTemplateModal: false };\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  handleApplyTemplate = () => {\n    this.setState({ applyTemplateModal: true });\n  };\n\n  handleApplyTemplateClose = () => {\n    if (this.mounted) {\n      this.setState({ applyTemplateModal: false });\n    }\n  };\n\n  render() {\n    const { component } = this.props;\n    const { configuration } = component;\n    const canApplyPermissionTemplate =\n      configuration != null && configuration.canApplyPermissionTemplate;\n\n    let description = translate('roles.page.description2');\n    if (isPortfolioLike(component.qualifier)) {\n      description = translate('roles.page.description_portfolio');\n    } else if (isApplication(component.qualifier)) {\n      description = translate('roles.page.description_application');\n    }\n\n    const visibilityDescription =\n      component.qualifier === 'TRK' && component.visibility\n        ? translate('visibility', component.visibility, 'description', component.qualifier)\n        : undefined;\n\n    return (\n      <header className=\"page-header\">\n        <h1 className=\"page-title\">{translate('permissions.page')}</h1>\n\n        {this.props.loading && <i className=\"spinner\" />}\n\n        {canApplyPermissionTemplate && (\n          <div className=\"page-actions\">\n            <Button className=\"js-apply-template\" onClick={this.handleApplyTemplate}>\n              {translate('projects_role.apply_template')}\n            </Button>\n\n            {this.state.applyTemplateModal && (\n              <ApplyTemplate\n                onApply={this.props.loadHolders}\n                onClose={this.handleApplyTemplateClose}\n                project={component}\n              />\n            )}\n          </div>\n        )}\n\n        <div className=\"page-description\">\n          <p>{description}</p>\n          {visibilityDescription && <p>{visibilityDescription}</p>}\n        </div>\n      </header>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport ConfirmModal from 'sonar-ui-common/components/controls/ConfirmModal';\nimport { Alert } from 'sonar-ui-common/components/ui/Alert';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\n\ninterface Props {\n  component: {\n    name: string;\n    qualifier: string;\n  };\n  onClose: () => void;\n  onConfirm: () => void;\n}\n\nexport default function PublicProjectDisclaimer({ component, onClose, onConfirm }: Props) {\n  const { qualifier } = component;\n  return (\n    <ConfirmModal\n      confirmButtonText={translate('projects_role.turn_project_to_public', qualifier)}\n      header={translateWithParameters('projects_role.turn_x_to_public', component.name)}\n      onClose={onClose}\n      onConfirm={onConfirm}>\n      <Alert variant=\"warning\">\n        {translate('projects_role.are_you_sure_to_turn_project_to_public.warning', qualifier)}\n      </Alert>\n      <p>{translate('projects_role.are_you_sure_to_turn_project_to_public', qualifier)}</p>\n    </ConfirmModal>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { without } from 'lodash';\nimport * as React from 'react';\nimport { Helmet } from 'react-helmet-async';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport * as api from '../../../../api/permissions';\nimport VisibilitySelector from '../../../../components/common/VisibilitySelector';\nimport '../../styles.css';\nimport AllHoldersList from './AllHoldersList';\nimport PageHeader from './PageHeader';\nimport PublicProjectDisclaimer from './PublicProjectDisclaimer';\n\ninterface Props {\n  component: T.Component;\n  onComponentChange: (changes: Partial<T.Component>) => void;\n}\n\ninterface State {\n  disclaimer: boolean;\n  filter: string;\n  groups: T.PermissionGroup[];\n  groupsPaging?: T.Paging;\n  loading: boolean;\n  query: string;\n  selectedPermission?: string;\n  users: T.PermissionUser[];\n  usersPaging?: T.Paging;\n}\n\nexport default class App extends React.PureComponent<Props, State> {\n  mounted = false;\n\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      disclaimer: false,\n      filter: 'all',\n      groups: [],\n      loading: true,\n      query: '',\n      users: []\n    };\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n    this.loadHolders();\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  stopLoading = () => {\n    if (this.mounted) {\n      this.setState({ loading: false });\n    }\n  };\n\n  loadUsersAndGroups = (userPage?: number, groupsPage?: number) => {\n    const { component } = this.props;\n    const { filter, query, selectedPermission } = this.state;\n\n    const getUsers: Promise<{ paging?: T.Paging; users: T.PermissionUser[] }> =\n      filter !== 'groups'\n        ? api.getPermissionsUsersForComponent({\n            projectKey: component.key,\n            q: query || undefined,\n            permission: selectedPermission,\n            p: userPage\n          })\n        : Promise.resolve({ paging: undefined, users: [] });\n\n    const getGroups: Promise<{ paging?: T.Paging; groups: T.PermissionGroup[] }> =\n      filter !== 'users'\n        ? api.getPermissionsGroupsForComponent({\n            projectKey: component.key,\n            q: query || undefined,\n            permission: selectedPermission,\n            p: groupsPage\n          })\n        : Promise.resolve({ paging: undefined, groups: [] });\n\n    return Promise.all([getUsers, getGroups]);\n  };\n\n  loadHolders = () => {\n    this.setState({ loading: true });\n    return this.loadUsersAndGroups().then(([usersResponse, groupsResponse]) => {\n      if (this.mounted) {\n        this.setState({\n          groups: groupsResponse.groups,\n          groupsPaging: groupsResponse.paging,\n          loading: false,\n          users: usersResponse.users,\n          usersPaging: usersResponse.paging\n        });\n      }\n    }, this.stopLoading);\n  };\n\n  onLoadMore = () => {\n    const { usersPaging, groupsPaging } = this.state;\n    this.setState({ loading: true });\n    return this.loadUsersAndGroups(\n      usersPaging ? usersPaging.pageIndex + 1 : 1,\n      groupsPaging ? groupsPaging.pageIndex + 1 : 1\n    ).then(([usersResponse, groupsResponse]) => {\n      if (this.mounted) {\n        this.setState(({ groups, users }) => ({\n          groups: [...groups, ...groupsResponse.groups],\n          groupsPaging: groupsResponse.paging,\n          loading: false,\n          users: [...users, ...usersResponse.users],\n          usersPaging: usersResponse.paging\n        }));\n      }\n    }, this.stopLoading);\n  };\n\n  handleFilterChange = (filter: string) => {\n    if (this.mounted) {\n      this.setState({ filter }, this.loadHolders);\n    }\n  };\n\n  handleQueryChange = (query: string) => {\n    if (this.mounted) {\n      this.setState({ query }, this.loadHolders);\n    }\n  };\n\n  handlePermissionSelect = (selectedPermission?: string) => {\n    if (this.mounted) {\n      this.setState(\n        (state: State) => ({\n          selectedPermission:\n            state.selectedPermission === selectedPermission ? undefined : selectedPermission\n        }),\n        this.loadHolders\n      );\n    }\n  };\n\n  addPermissionToGroup = (group: string, permission: string) => {\n    return this.state.groups.map(candidate =>\n      candidate.name === group\n        ? { ...candidate, permissions: [...candidate.permissions, permission] }\n        : candidate\n    );\n  };\n\n  addPermissionToUser = (user: string, permission: string) => {\n    return this.state.users.map(candidate =>\n      candidate.login === user\n        ? { ...candidate, permissions: [...candidate.permissions, permission] }\n        : candidate\n    );\n  };\n\n  removePermissionFromGroup = (group: string, permission: string) => {\n    return this.state.groups.map(candidate =>\n      candidate.name === group\n        ? { ...candidate, permissions: without(candidate.permissions, permission) }\n        : candidate\n    );\n  };\n\n  removePermissionFromUser = (user: string, permission: string) => {\n    return this.state.users.map(candidate =>\n      candidate.login === user\n        ? { ...candidate, permissions: without(candidate.permissions, permission) }\n        : candidate\n    );\n  };\n\n  grantPermissionToGroup = (group: string, permission: string) => {\n    if (this.mounted) {\n      this.setState({\n        loading: true,\n        groups: this.addPermissionToGroup(group, permission)\n      });\n      return api\n        .grantPermissionToGroup({\n          projectKey: this.props.component.key,\n          groupName: group,\n          permission\n        })\n        .then(this.stopLoading, () => {\n          if (this.mounted) {\n            this.setState({\n              loading: false,\n              groups: this.removePermissionFromGroup(group, permission)\n            });\n          }\n        });\n    }\n    return Promise.resolve();\n  };\n\n  grantPermissionToUser = (user: string, permission: string) => {\n    if (this.mounted) {\n      this.setState({\n        loading: true,\n        users: this.addPermissionToUser(user, permission)\n      });\n      return api\n        .grantPermissionToUser({\n          projectKey: this.props.component.key,\n          login: user,\n          permission\n        })\n        .then(this.stopLoading, () => {\n          if (this.mounted) {\n            this.setState({\n              loading: false,\n              users: this.removePermissionFromUser(user, permission)\n            });\n          }\n        });\n    }\n    return Promise.resolve();\n  };\n\n  revokePermissionFromGroup = (group: string, permission: string) => {\n    if (this.mounted) {\n      this.setState({\n        loading: true,\n        groups: this.removePermissionFromGroup(group, permission)\n      });\n      return api\n        .revokePermissionFromGroup({\n          projectKey: this.props.component.key,\n          groupName: group,\n          permission\n        })\n        .then(this.stopLoading, () => {\n          if (this.mounted) {\n            this.setState({\n              loading: false,\n              groups: this.addPermissionToGroup(group, permission)\n            });\n          }\n        });\n    }\n    return Promise.resolve();\n  };\n\n  revokePermissionFromUser = (user: string, permission: string) => {\n    if (this.mounted) {\n      this.setState({\n        loading: true,\n        users: this.removePermissionFromUser(user, permission)\n      });\n      return api\n        .revokePermissionFromUser({\n          projectKey: this.props.component.key,\n          login: user,\n          permission\n        })\n        .then(this.stopLoading, () => {\n          if (this.mounted) {\n            this.setState({\n              loading: false,\n              users: this.addPermissionToUser(user, permission)\n            });\n          }\n        });\n    }\n    return Promise.resolve();\n  };\n\n  handleVisibilityChange = (visibility: string) => {\n    if (visibility === 'public') {\n      this.openDisclaimer();\n    } else {\n      this.turnProjectToPrivate();\n    }\n  };\n\n  turnProjectToPublic = () => {\n    this.props.onComponentChange({ visibility: 'public' });\n    api.changeProjectVisibility(this.props.component.key, 'public').then(\n      () => {\n        this.loadHolders();\n      },\n      () => {\n        this.props.onComponentChange({\n          visibility: 'private'\n        });\n      }\n    );\n  };\n\n  turnProjectToPrivate = () => {\n    this.props.onComponentChange({ visibility: 'private' });\n    api.changeProjectVisibility(this.props.component.key, 'private').then(\n      () => {\n        this.loadHolders();\n      },\n      () => {\n        this.props.onComponentChange({\n          visibility: 'public'\n        });\n      }\n    );\n  };\n\n  openDisclaimer = () => {\n    if (this.mounted) {\n      this.setState({ disclaimer: true });\n    }\n  };\n\n  closeDisclaimer = () => {\n    if (this.mounted) {\n      this.setState({ disclaimer: false });\n    }\n  };\n\n  render() {\n    const { component } = this.props;\n    const canTurnToPrivate =\n      component.configuration && component.configuration.canUpdateProjectVisibilityToPrivate;\n\n    return (\n      <div className=\"page page-limited\" id=\"project-permissions-page\">\n        <Helmet defer={false} title={translate('permissions.page')} />\n\n        <PageHeader\n          component={component}\n          loadHolders={this.loadHolders}\n          loading={this.state.loading}\n        />\n        <div>\n          <VisibilitySelector\n            canTurnToPrivate={canTurnToPrivate}\n            className=\"big-spacer-top big-spacer-bottom\"\n            onChange={this.handleVisibilityChange}\n            visibility={component.visibility}\n          />\n          {this.state.disclaimer && (\n            <PublicProjectDisclaimer\n              component={component}\n              onClose={this.closeDisclaimer}\n              onConfirm={this.turnProjectToPublic}\n            />\n          )}\n        </div>\n        <AllHoldersList\n          component={component}\n          filter={this.state.filter}\n          grantPermissionToGroup={this.grantPermissionToGroup}\n          grantPermissionToUser={this.grantPermissionToUser}\n          groups={this.state.groups}\n          groupsPaging={this.state.groupsPaging}\n          onFilterChange={this.handleFilterChange}\n          onLoadMore={this.onLoadMore}\n          onPermissionSelect={this.handlePermissionSelect}\n          onQueryChange={this.handleQueryChange}\n          query={this.state.query}\n          revokePermissionFromGroup={this.revokePermissionFromGroup}\n          revokePermissionFromUser={this.revokePermissionFromUser}\n          selectedPermission={this.state.selectedPermission}\n          users={this.state.users}\n          usersPaging={this.state.usersPaging}\n          visibility={component.visibility}\n        />\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { connect } from 'react-redux';\nimport { getCurrentUser, Store } from '../../../../store/rootReducer';\nimport App from './App';\n\nconst mapStateToProps = (state: Store) => ({\n  currentUser: getCurrentUser(state)\n});\n\nexport default connect(mapStateToProps)(App);\n"],"sourceRoot":""}