{"version":3,"sources":["webpack:///./src/main/js/components/issue/components/IssueChangelogDiff.tsx","webpack:///./src/main/js/components/SourceViewer/helpers/issueLocations.ts","webpack:///./src/main/js/components/SourceViewer/SourceViewerContext.tsx","webpack:///./node_modules/lodash/intersection.js","webpack:///./src/main/js/components/issue/actions.ts","webpack:///./src/main/js/components/common/SelectListItem.tsx","webpack:///./src/main/js/components/common/SelectList.tsx","webpack:///./src/main/js/components/issue/popups/SetAssigneePopup.tsx","webpack:///./src/main/js/components/issue/components/IssueAssign.tsx","webpack:///./src/main/js/components/issue/popups/CommentPopup.tsx","webpack:///./src/main/js/components/issue/components/IssueCommentAction.tsx","webpack:///./src/main/js/components/issue/popups/SetSeverityPopup.tsx","webpack:///./src/main/js/components/issue/components/IssueSeverity.tsx","webpack:///./src/main/js/components/issue/popups/SetIssueTagsPopup.tsx","webpack:///./src/main/js/components/issue/components/IssueTags.tsx","webpack:///./src/main/js/components/issue/popups/SetTransitionPopup.tsx","webpack:///./src/main/js/components/issue/components/IssueTransition.tsx","webpack:///./src/main/js/components/issue/popups/SetTypePopup.tsx","webpack:///./src/main/js/components/issue/components/IssueType.tsx","webpack:///./src/main/js/components/issue/components/IssueActionsBar.tsx","webpack:///./src/main/js/components/issue/popups/CommentDeletePopup.tsx","webpack:///./src/main/js/types/rules.ts","webpack:///./src/main/js/components/issue/components/IssueCommentLine.tsx","webpack:///./src/main/js/components/issue/popups/ChangelogPopup.tsx","webpack:///./src/main/js/components/issue/components/IssueChangelog.tsx","webpack:///./src/main/js/components/issue/components/IssueMessage.tsx","webpack:///./src/main/js/components/issue/popups/SimilarIssuesPopup.tsx","webpack:///./src/main/js/components/issue/components/SimilarIssuesFilter.tsx","webpack:///./src/main/js/components/issue/components/IssueTitleBar.tsx","webpack:///./src/main/js/components/issue/IssueView.tsx","webpack:///./src/main/js/components/issue/Issue.tsx","webpack:///./src/main/js/components/SourceViewer/helpers/highlight.ts","webpack:///./node_modules/sonar-ui-common/components/icons/ExpandSnippetIcon.js","webpack:///./src/main/js/components/common/LocationIndex.css?e012","webpack:///./src/main/js/components/common/LocationIndex.css","webpack:///./src/main/js/components/common/LocationMessage.tsx","webpack:///./src/main/js/components/common/LocationMessage.css?8760","webpack:///./src/main/js/components/common/LocationMessage.css","webpack:///./src/main/js/components/issue/Issue.css?a142","webpack:///./src/main/js/components/issue/Issue.css","webpack:///./node_modules/lodash/_baseIntersection.js","webpack:///./node_modules/lodash/_castArrayLikeObject.js","webpack:///./src/main/js/apps/issues/crossComponentSourceViewer/utils.ts","webpack:///./src/main/js/components/SourceViewer/SourceViewerHeaderSlim.tsx","webpack:///./src/main/js/components/SourceViewer/helpers/lines.ts","webpack:///./src/main/js/components/SourceViewer/components/LineIssuesList.tsx","webpack:///./src/main/js/components/SourceViewer/components/LineCode.tsx","webpack:///./src/main/js/components/SourceViewer/components/LineCoverage.tsx","webpack:///./src/main/js/components/SourceViewer/components/LineDuplicationBlock.tsx","webpack:///./src/main/js/components/SourceViewer/components/LineIssuesIndicator.tsx","webpack:///./src/main/js/components/SourceViewer/components/LineOptionsPopup.tsx","webpack:///./src/main/js/components/SourceViewer/components/LineNumber.tsx","webpack:///./src/main/js/components/SourceViewer/components/SCMPopup.tsx","webpack:///./src/main/js/components/SourceViewer/components/LineSCM.tsx","webpack:///./src/main/js/components/SourceViewer/components/Line.tsx","webpack:///./src/main/js/components/SourceViewer/SourceViewerHeaderSlim.css?94e1","webpack:///./src/main/js/components/SourceViewer/SourceViewerHeaderSlim.css","webpack:///./src/main/js/apps/issues/crossComponentSourceViewer/SnippetViewer.tsx","webpack:///./node_modules/lodash/times.js","webpack:///./src/main/js/components/SourceViewer/components/Line.css?69c4","webpack:///./src/main/js/components/SourceViewer/components/Line.css","webpack:///./src/main/js/apps/issues/crossComponentSourceViewer/SnippetViewer.css?ff37","webpack:///./src/main/js/apps/issues/crossComponentSourceViewer/SnippetViewer.css","webpack:///./src/main/js/apps/security-hotspots/styles.css?978b","webpack:///./node_modules/sonar-ui-common/components/icons/ChevronUpIcon.js","webpack:///./src/main/js/apps/security-hotspots/components/HotspotList.css?98a3","webpack:///./src/main/js/apps/security-hotspots/components/HotspotList.css","webpack:///./src/main/js/apps/security-hotspots/components/assignee/AssigneeSelection.css?fed6","webpack:///./src/main/js/apps/security-hotspots/components/assignee/AssigneeSelection.css","webpack:///./src/main/js/apps/security-hotspots/components/HotspotViewer.css?94be","webpack:///./src/main/js/apps/security-hotspots/components/HotspotViewer.css","webpack:///./src/main/js/apps/security-hotspots/components/status/Status.css?dec8","webpack:///./src/main/js/apps/security-hotspots/components/status/Status.css","webpack:///./src/main/js/apps/security-hotspots/styles.css","webpack:///./src/main/js/api/security-hotspots.ts","webpack:///./src/main/js/types/security-hotspots.ts","webpack:///./src/main/js/apps/security-hotspots/components/EmptyHotspotsPage.tsx","webpack:///./src/main/js/apps/security-hotspots/components/FilterBar.tsx","webpack:///./src/main/js/apps/security-hotspots/utils.ts","webpack:///./src/main/js/apps/security-hotspots/components/HotspotListItem.tsx","webpack:///./src/main/js/apps/security-hotspots/components/HotspotCategory.tsx","webpack:///./src/main/js/apps/security-hotspots/components/HotspotList.tsx","webpack:///./src/main/js/apps/security-hotspots/components/HotspotSimpleList.tsx","webpack:///./src/main/js/apps/security-hotspots/components/assignee/AssigneeSelectionRenderer.tsx","webpack:///./src/main/js/apps/security-hotspots/components/assignee/AssigneeSelection.tsx","webpack:///./src/main/js/apps/security-hotspots/components/assignee/AssigneeRenderer.tsx","webpack:///./src/main/js/apps/security-hotspots/components/assignee/Assignee.tsx","webpack:///./src/main/js/app/utils/addGlobalErrorMessage.ts","webpack:///./src/main/js/helpers/sonarlint.ts","webpack:///./src/main/js/apps/security-hotspots/components/HotspotOpenInIdeOverlay.tsx","webpack:///./src/main/js/apps/security-hotspots/components/HotspotOpenInIdeButton.tsx","webpack:///./src/main/js/apps/security-hotspots/components/HotspotCommentPopup.tsx","webpack:///./src/main/js/apps/security-hotspots/components/HotspotReviewHistory.tsx","webpack:///./src/main/js/apps/security-hotspots/components/HotspotReviewHistoryAndComments.tsx","webpack:///./src/main/js/apps/security-hotspots/components/HotspotSnippetContainerRenderer.tsx","webpack:///./src/main/js/apps/security-hotspots/components/HotspotViewerTabs.tsx","webpack:///./src/main/js/apps/security-hotspots/components/HotspotSnippetContainer.tsx","webpack:///./src/main/js/apps/security-hotspots/components/status/StatusDescription.tsx","webpack:///./src/main/js/apps/security-hotspots/components/status/StatusSelectionRenderer.tsx","webpack:///./src/main/js/apps/security-hotspots/components/status/StatusSelection.tsx","webpack:///./src/main/js/apps/security-hotspots/components/status/Status.tsx","webpack:///./src/main/js/apps/security-hotspots/components/HotspotViewerRenderer.tsx","webpack:///./src/main/js/apps/security-hotspots/components/HotspotViewer.tsx","webpack:///./src/main/js/apps/security-hotspots/SecurityHotspotsAppRenderer.tsx","webpack:///./src/main/js/apps/security-hotspots/SecurityHotspotsApp.tsx","webpack:///./node_modules/sonar-ui-common/components/controls/HelpTooltip.js","webpack:///./src/main/js/app/components/embed-docs-modal/Suggestions.tsx","webpack:///./node_modules/sonar-ui-common/components/controls/HelpTooltip.css?2512","webpack:///./node_modules/sonar-ui-common/components/controls/HelpTooltip.css","webpack:///./node_modules/sonar-ui-common/components/icons/QualifierIcon.js","webpack:///./node_modules/sonar-ui-common/components/controls/ListFooter.js","webpack:///./node_modules/lodash/toFinite.js","webpack:///./src/main/js/app/components/a11y/A11ySkipTarget.tsx","webpack:///./node_modules/sonar-ui-common/components/ui/Level.js","webpack:///./node_modules/lodash/groupBy.js","webpack:///./node_modules/sonar-ui-common/components/controls/Radio.js","webpack:///./src/main/js/components/shared/SeverityHelper.tsx","webpack:///./node_modules/sonar-ui-common/components/controls/Radio.css?01af","webpack:///./node_modules/sonar-ui-common/components/controls/RadioToggle.js","webpack:///./node_modules/sonar-ui-common/components/controls/RadioToggle.css?35f6","webpack:///./node_modules/sonar-ui-common/components/controls/RadioToggle.css","webpack:///./node_modules/sonar-ui-common/components/ui/Rating.js","webpack:///./node_modules/sonar-ui-common/components/controls/Radio.css","webpack:///./src/main/js/components/measure/utils.ts","webpack:///./node_modules/sonar-ui-common/components/ui/Level.css?4f58","webpack:///./node_modules/sonar-ui-common/components/ui/Level.css","webpack:///./src/main/js/components/measure/Measure.tsx","webpack:///./node_modules/sonar-ui-common/components/icons/ChevronDownIcon.js","webpack:///./node_modules/sonar-ui-common/helpers/pages.js","webpack:///./src/main/js/app/utils/addGlobalSuccessMessage.ts","webpack:///./src/main/js/components/common/ScreenPositionHelper.tsx","webpack:///./src/main/js/components/tags/TagsList.css?d861","webpack:///./src/main/js/components/common/DocumentationTooltip.tsx","webpack:///./node_modules/lodash/range.js","webpack:///./node_modules/lodash/_createRange.js","webpack:///./node_modules/lodash/_baseRange.js","webpack:///./node_modules/sonar-ui-common/components/ui/Rating.css?a2dd","webpack:///./node_modules/sonar-ui-common/components/ui/Rating.css","webpack:///./src/main/js/components/common/MultiSelectOption.tsx","webpack:///./src/main/js/components/common/MultiSelect.tsx","webpack:///./src/main/js/components/tags/TagsList.tsx","webpack:///./src/main/js/components/common/FormattingTips.tsx","webpack:///./src/main/js/components/tags/TagsList.css","webpack:///./node_modules/lodash/flatMap.js","webpack:///./src/main/js/components/ui/CoverageRating.tsx","webpack:///./src/main/js/components/tags/TagsSelector.tsx","webpack:///./src/main/js/components/common/LocationIndex.tsx","webpack:///./src/main/js/components/shared/StatusHelper.tsx","webpack:///./src/main/js/helpers/security-standard.ts","webpack:///./src/main/js/components/SourceViewer/helpers/indexing.ts","webpack:///./node_modules/sonar-ui-common/components/controls/BoxedTabs.js"],"names":["IssueChangelogDiff","message","diff","key","oldValue","newValue","includes","getLinearLocations","textRange","locations","line","startLine","endLine","from","startOffset","to","endOffset","push","getSecondaryIssueLocationsForLine","highlightedLocations","reduce","location","linearLocations","filter","l","map","index","text","SourceViewerContext","branchLike","file","arrayMap","baseIntersection","baseRest","castArrayLikeObject","intersection","arrays","mapped","length","module","exports","onChange","resultPromise","oldIssue","newIssue","optimisticUpdate","undefined","then","response","issue","components","users","rules","param","throwGlobalError","handleSelect","event","preventDefault","props","onSelect","item","handleHover","onHover","renderLink","children","this","className","active","href","onClick","onFocus","onMouseOver","render","overlay","title","placement","attachShortcuts","previousKeyScope","previousFilter","currentKeyScope","tagName","target","srcElement","isInput","keyCode","setState","selectNextElement","selectPreviousElement","state","detachShortcuts","idx","items","indexOf","renderChild","child","type","currentItem","componentDidMount","componentDidUpdate","prevProps","componentWillUnmount","hasChildren","count","searchUsers","query","q","ps","handleSearchResult","activeUsers","currentUser","login","handleSearchChange","defaultUsersArray","name","Dropdown","noPadding","autoFocus","minLength","placeholder","value","user","Avatar","hash","avatar","size","style","marginLeft","withCurrentUser","toggleAssign","open","togglePopup","handleClose","renderAssignee","assigneeName","assignee","assigneeAvatar","assigneeActive","canAssign","closeOnEscape","onRequestClose","isOpen","onAssign","handleCommentChange","textComment","handleCommentClick","trim","onComment","handleCancelClick","toggleComment","handleKeyboard","metaKey","ctrlKey","stopPropagation","comment","markdown","autoTriggered","onKeyDown","rows","disabled","FormattingTips","addComment","issueKey","closeOnClickOutside","currentPopup","commentAutoTriggered","commentPlaceholder","SEVERITY","SetSeverityPopup","severity","toggleSetSeverity","setSeverity","setIssueProperty","canSetSeverity","SeverityHelper","mounted","searchResult","onSearch","Math","min","selectedTags","tags","tag","setTags","onUnselect","availableTags","BottomRight","TagsSelector","listSize","toggleSetTags","join","canSetTags","TagsList","allowUpdate","SetTransitionPopup","fromHotspot","transitions","isManualVulnerability","transition","translateTransition","description","setTransition","toggleSetTransition","hasTransitions","StatusHelper","resolution","status","TYPES","SetTypePopup","toggleSetType","setType","canSetType","fill","baseFontColor","property","popup","apiCall","handleTransition","actions","canComment","isSecurityHotspot","effort","CommentDeletePopup","onDelete","RuleStatus","openPopup","handleEdit","onEdit","toggleEditPopup","handleDelete","toggleDeletePopup","popupName","force","prevState","closePopups","author","authorName","displayName","authorActive","authorAvatar","dangerouslySetInnerHTML","__html","htmlText","date","createdAt","updatable","changelog","loadChangelog","creationDate","userName","isUserActive","diffs","toggleChangelog","handleClick","IssueMessage","engine","engineName","manualVulnerability","ruleKey","ruleStatus","ruleEngine","onOpenRule","Deprecated","Removed","DocumentationTooltip","content","links","label","onFilter","subProject","ruleName","qualifier","projectName","subProjectName","componentQualifier","componentLongName","handleFilter","IssueTitleBar","hasSimilarIssuesFilter","locationsCount","secondaryLocations","flows","sum","locationsBadge","LocationIndex","displayLocations","displayLocationsCount","issueUrl","project","issues","types","Consumer","externalRulesRepoNames","openRule","externalRuleEngine","rule","displayLocationsLink","handleCheck","onCheck","isClickable","editComment","deleteComment","hasCheckbox","issueClass","hotspot","selected","role","tabIndex","comments","checked","node","toUpperCase","parentElement","onPopupToggle","handleAssignement","bindShortcuts","componentWillUpdate","nextProps","unbindShortcuts","defaultProps","splitByTokens","code","rootClassName","container","document","createElement","tokens","innerHTML","forEach","call","childNodes","nodeType","fullClassName","innerTokens","concat","nodeValue","markers","highlightSymbol","symbol","symbolRegExp","RegExp","token","test","part","str","acc","substr","highlightIssueLocations","issueLocations","nextTokens","markerAdded","s1","e1","s2","e2","x","max","p1","p2","p3","newClassName","slice","__assign","Object","assign","t","s","i","n","arguments","p","prototype","hasOwnProperty","apply","__rest","e","getOwnPropertySymbols","propertyIsEnumerable","defineProperty","React","Icon_1","default","_a","_b","iconProps","fillRule","d","stroke","strokeWidth","transform","api","__esModule","options","exported","locals","___CSS_LOADER_API_IMPORT___","LocationMessage","SetCache","arrayIncludes","arrayIncludesWith","baseUnary","cacheHas","nativeMin","iteratee","comparator","othLength","othIndex","caches","Array","maxLength","Infinity","result","array","seen","outer","computed","cache","isArrayLikeObject","MERGE_DISTANCE","LINES_BELOW_ISSUE","EXPAND_BY_LINES","collision","startA","endA","startB","getPrimaryLocation","component","createSnippets","params","hasSecondaryLocations","ranges","snippets","loc","firstCollision","startIndex","endIndex","locationEnd","issueEndLine","addLinesBellow","snippet","start","end","keep","sort","a","b","linesForSnippets","componentLines","lines","groupLocationsByComponent","currentGroup","currentComponent","groups","addGroup","componentKey","measures","path","uuid","sources","every","expandSnippet","direction","snippetIndex","snippetToExpand","find","Error","toDelete","inSnippet","SourceViewerHeaderSlim","expandable","displayProjectName","linkToProject","loading","onExpand","sourceViewerFile","projectNameLabel","Project","SubProject","copyValue","files","resolved","optimizeHighlightedSymbols","symbolsForLine","highlightedSymbols","symbols","optimizeLocationMessage","highlightedLocationMessage","optimizedSecondaryIssueLocations","some","optimizeSelectedIssue","selectedIssue","issuesForLine","LineIssuesList","issuePopup","Issue","displayIssueLocationsCount","displayIssueLocationsLink","onIssueChange","onIssueClick","onIssuePopupToggle","handleSymbolClick","keys","currentTarget","match","onSymbolClick","attachEvents","activeMarkerNode","scroll","componentWillReceiveProps","detachEvents","codeNode","querySelectorAll","addEventListener","renderMarker","leading","onLocationSelect","ref","onIssueSelect","padding","secondaryIssueLocations","showIssues","highlight","renderedTokens","leadingMarker","displayLocationMarkers","marker","paddingBottom","filteredSelectedIssues","coverageStatus","conditions","coveredConditions","getStatusTooltip","blocksLoaded","duplicated","dropdownOpen","setDropdownOpen","RightTop","renderDuplicationPopup","issuesOpen","hasIssues","tooltipContent","mostImportantIssue","blur","rel","lineNumber","overlayPlacement","hasAuthor","scmAuthor","hasDate","scmDate","scmRevision","previousLine","hasPopup","cell","changed","isSCMChanged","ariaLabel","handleIssuesIndicatorClick","openIssues","onIssuesClose","onIssueUnselect","onIssuesOpen","displayAllIssues","displayCoverage","displayDuplications","displayIssues","displaySCM","duplications","duplicationsCount","highlighted","last","verticalBuffer","isNew","bottomPadding","Boolean","loadDuplications","doScroll","element","parent","snippetNodeRef","current","offset","getBoundingClientRect","width","leftOffset","rightOffset","scrollToLastExpandedRow","snippetNode","lastRow","expandBlock","renderLine","duplicationsByLine","lineDuplications","isSinkLine","noop","handleCloseIssues","handleOpenIssues","openIssuesByLine","issuesByLine","lastSnippetOfLastGroup","locationsByLine","lastLine","parseInt","bottomLine","issueLine","lowestVisibleIssue","k","assignSecurityHotspot","hotspotKey","data","catch","getSecurityHotspots","RiskExposure","HotspotStatus","HotspotResolution","HotspotStatusFilter","HotspotStatusOption","ReviewHistoryType","EmptyHotspotsPage","translationRoot","filtered","isStaticListOfHotspots","alt","height","src","pathname","AssigneeFilterOption","statusOptions","TO_REVIEW","FIXED","SAFE","periodOptions","assigneeFilterOptions","ME","ALL","filters","hotspotsReviewedMeasure","loadingMeasure","onBranch","isProject","id","onChangeFilters","assignedToMe","clearable","option","searchable","sinceLeakPeriod","CoverageRating","Measure","metricKey","metricType","RISK_EXPOSURE_LEVELS","HIGH","MEDIUM","LOW","SECURITY_STANDARDS","SONARSOURCE","OWASP_TOP10","SANS_TOP25","SECURITY_STANDARD_RENDERER","CWE","groupByCategory","hotspots","securityCategories","h","getCategoryTitle","STATUS_AND_RESOLUTION_TO_STATUS_OPTION","REVIEWED","getStatusOptionFromStatusAndResolution","STATUS_OPTION_TO_STATUS_AND_RESOLUTION_MAP","HotspotListItem","HotspotCategory","categoryKey","expanded","selectedHotspot","isLastAndIncomplete","risk","vulnerabilityProbability","onToggleExpand","securityCategory","onHotspotClick","groupHotspots","risks","categories","handleToggleCategory","expandedCategories","groupedHotspots","hotspotsTotal","loadingMore","statusFilter","riskGroup","riskGroupIndex","isLastRiskGroup","cat","categoryIndex","isLastCategory","loadMore","onLoadMore","total","HotspotSimpleList","filterByCategory","standards","standard","category","AssigneeSelectionRenderer","suggestedUsers","BottomLeft","suggestion","handleSearch","handleNoSearch","handleActualSearch","allowCurrentUserSelection","loggedInUser","handleKeyDown","Enter","selectHighlighted","UpArrow","highlightPrevious","DownArrow","highlightNext","getCurrentIndex","findIndex","highlightIndex","AssigneeRenderer","canEdit","editing","onEnterEditionMode","onKeydown","onExitEditionMode","onClickOutside","handleEnterEditionMode","handleExitEditionMode","handleAssign","newAssignee","onAssigneeChange","addGlobalSuccessMessage","assigneeUser","addGlobalErrorMessage","getStore","dispatch","globalMessages","probeSonarLintServers","Promise","probedPorts","buildPortRange","probeRequests","fetch","buildSonarLintEndpoint","r","json","ideName","port","all","openHotspot","calledPort","projectKey","showUrl","URL","searchParams","set","toString","ides","onIdeSelected","ide","handleOnClick","showError","showSuccess","finally","cleanState","HotspotCommentPopup","markdownComment","setComment","onCommentEditSubmit","onCancelEdit","HotspotReviewHistory","reviewHistory","history","Creation","authorUser","log","Diff","Comment","html","elt","getHotspotReviewHistory","editedCommentKey","setEditedCommentKey","historyElt","historyIndex","diffIndex","onEditComment","onOpen","onDeleteComment","handleCloseComment","onCloseComment","handleSubmitComment","onCommentUpdate","handleDeleteComment","commentKey","handleEditComment","editSecurityHotspotComment","commentTextRef","commentVisible","invisible","onOpenComment","HotspotSnippetContainerRenderer","sourceLines","Provider","SnippetViewer","_i","onExpandBlock","TabKeys","handleExpansion","range","additionalLines","concatSourceLines","previousLastLine","checkLastLine","componentWillMount","fetchSources","lastLineReceived","constructSourceViewerFile","Application","handleSelectTabs","tabKey","currentTab","tab","tabs","computeTabs","RiskDescription","riskDescription","VulnerabilityDescription","vulnerabilityDescription","FixRecommendation","fixRecommendations","StatusDescription","statusOption","showTitle","StatusSelectionRenderer","selectedStatus","submitDisabled","renderOption","onStatusChange","htmlFor","onCommentChange","onSubmit","handleStatusChange","handleSubmit","initialStatus","onStatusOptionChange","setIsOpen","readonly","canChangeStatus","trigger","actionableTrigger","Bottom","permalink","onUpdateHotspot","fetchHotspot","securityHotspotKey","u","c","handleHotspotUpdate","handleOpenComment","focus","preventScroll","bottomOffset","SecurityHotspotsAppRenderer","scrollableRef","querySelector","smooth","topOffset","Suggestions","suggestions","A11ySkipTarget","anchor","onShowAllHotspots","ScreenPositionHelper","top","selectNeighboringHotspot","shift","handleCallFailure","fetchSecurityHotspotsReviewed","reviewedHotspotsMetricKey","metricKeys","measure","reloadSecurityHotspotList","fetchSecurityHotspots","paging","hotspotsPageIndex","handleChangeFilters","changes","handleHotspotClick","fetchBranchStatus","hotspotPages","allHotspots","nextHotspot","pageIndex","handleShowAllHotspots","router","handleLoadMore","additionalHotspots","constructFiltersFromProps","fetchInitialData","registerKeyboardEvents","previous","unregisterKeyboardEvents","page","hotspotKeys","split","stnd","getSecurityHotspotList","onlyMine","mapDispatchToProps","classNames","HelpIcon_1","theme_1","Tooltip_1","HelpTooltip","mouseLeaveDelay","onShow","ThemeConsumer","theme","colors","gray71","DarkHelpTooltip","transparentBlack","fillInner","white","addSuggestions","removeSuggestions","SuggestionsInner","qualifierIcons","app","ThemedIcon","blue","brc","dev","dir","DirectoryIcon","fil","svw","trk","ProjectIcon","uts","UnitTestIcon","vw","cla","dev_prj","lib","pac","orange","toLowerCase","FoundIcon","l10n_1","measures_1","DeferredSpinner_1","buttons_1","button","needReload","ready","hasMore","reload","Button","translate","translateWithParameters","formatMeasure","toNumber","addA11ySkipLink","removeA11ySkipLink","A11ySkipTargetInner","getLink","weight","formatted","level","small","muted","baseAssignValue","createAggregator","groupBy","extendStatics","__extends","setPrototypeOf","__proto__","__","constructor","create","Radio","_super","_this","PureComponent","RadioToggle","htmlId","tooltip","_c","ariaAttrs","KNOWN_RATINGS","enhanceMeasure","metrics","metric","leak","getLeakValue","period","getRatingTooltip","finalMetricKey","decimals","formattedValue","omitExtraDecimalZeros","Number","rating","toggleBodyClass","body","classList","toggle","documentElement","addSideBarClass","addWhitePageClass","addNoFooterPageClass","console","warn","removeSideBarClass","removeWhitePageClass","removeNoFooterPageClass","getPosition","containerPos","window","pageYOffset","left","pageXOffset","debouncedOnResize","forceUpdate","removeEventListener","inPlace","createRange","baseRange","isIterateeCall","toFinite","fromRight","step","nativeCeil","ceil","nativeMax","MultiSelectOption","custom","renderLabel","onSelectChange","handleSelectChange","onSelectItem","onUnselectItem","onSearchQuery","validateSearchInput","handleElementHover","activeIdx","getAllElements","evt","toggleSelect","stopLoading","isNewElement","elem","selectedElements","elements","updateSelectedElements","filterSelected","updateUnselectedElements","unselectedElements","setElementActive","allElements","totalElements","searchInput","allowSelection","allowNewElements","footerNode","activeElement","showNewElement","infiniteList","listClasses","div","baseFlatten","collection","DonutChart","SIZE_TO_WIDTH_MAPPING","normal","big","huge","SIZE_TO_THICKNESS_MAPPING","padAngle","numberValue","green","barBackgroundColor","lineCoverageRed","thickness","validateTag","replace","other","clickAttributes","getStandards","renderCWECategory","record","cwe","renderOwaspTop10Category","withPrefix","owaspTop10","addPrefix","renderSansTop25Category","sansTop25","renderSonarSourceSecurityCategory","sonarsourceSecurity","prefix","issuesByComponentAndLine","mapping","duplicationIndex","block","_ref","symbolsByLine","__makeTemplateObject","cooked","raw","templateObject_1","templateObject_2","templateObject_3","TabContainer","styled","baseBorder","barBorderColor","highlightHoverMixin","barBackgroundColorHighlight","StyledTab","themeSize","ActiveBorder","themeColor"],"mappings":"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","file":"js/272.1613385090031.chunk.js","sourcesContent":["/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { formatMeasure } from 'sonar-ui-common/helpers/measures';\n\ninterface Props {\n  diff: T.IssueChangelogDiff;\n}\n\nexport default function IssueChangelogDiff({ diff }: Props) {\n  if (diff.key === 'file') {\n    return (\n      <p>\n        {translateWithParameters(\n          'issue.change.file_move',\n          diff.oldValue || '',\n          diff.newValue || ''\n        )}\n      </p>\n    );\n  } else if (['from_long_branch', 'from_branch'].includes(diff.key)) {\n    return (\n      <p>\n        {translateWithParameters(\n          'issue.change.from_branch',\n          diff.oldValue || '',\n          diff.newValue || ''\n        )}\n      </p>\n    );\n  } else if (diff.key === 'from_short_branch') {\n    // Applies to both legacy short lived branch and pull request\n    return (\n      <p>\n        {translateWithParameters(\n          'issue.change.from_non_branch',\n          diff.oldValue || '',\n          diff.newValue || ''\n        )}\n      </p>\n    );\n  } else if (diff.key === 'line') {\n    return <p>{translateWithParameters('issue.changelog.line_removed_X', diff.oldValue || '')}</p>;\n  }\n\n  let message;\n  if (diff.newValue != null) {\n    let { newValue } = diff;\n    if (diff.key === 'effort') {\n      newValue = formatMeasure(diff.newValue, 'WORK_DUR');\n    }\n    message = translateWithParameters(\n      'issue.changelog.changed_to',\n      translate('issue.changelog.field', diff.key),\n      newValue\n    );\n  } else {\n    message = translateWithParameters(\n      'issue.changelog.removed',\n      translate('issue.changelog.field', diff.key)\n    );\n  }\n\n  if (diff.oldValue != null) {\n    let { oldValue } = diff;\n    if (diff.key === 'effort') {\n      oldValue = formatMeasure(diff.oldValue, 'WORK_DUR');\n    }\n    message += ` (${translateWithParameters('issue.changelog.was', oldValue)})`;\n  }\n  return <p>{message}</p>;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nexport function getLinearLocations(textRange: T.TextRange | undefined): T.LinearIssueLocation[] {\n  if (!textRange) {\n    return [];\n  }\n  const locations = [];\n\n  // go through all lines of the `textRange`\n  for (let line = textRange.startLine; line <= textRange.endLine; line++) {\n    // TODO fix 999999\n    const from = line === textRange.startLine ? textRange.startOffset : 0;\n    const to = line === textRange.endLine ? textRange.endOffset : 999999;\n    locations.push({ line, from, to });\n  }\n  return locations;\n}\n\nexport function getSecondaryIssueLocationsForLine(\n  line: T.SourceLine,\n  highlightedLocations: (T.FlowLocation | undefined)[] | undefined\n): T.LinearIssueLocation[] {\n  if (!highlightedLocations) {\n    return [];\n  }\n  return highlightedLocations.reduce((locations, location) => {\n    const linearLocations: T.LinearIssueLocation[] = location\n      ? getLinearLocations(location.textRange)\n          .filter(l => l.line === line.line)\n          .map(l => ({\n            ...l,\n            startLine: location.textRange.startLine,\n            index: location.index,\n            text: location.msg\n          }))\n      : [];\n    return [...locations, ...linearLocations];\n  }, []);\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { BranchLike } from '../../types/branch-like';\n\ninterface SourceViewerContextShape {\n  branchLike?: BranchLike;\n  file: T.SourceViewerFile;\n}\n\nexport const SourceViewerContext = React.createContext<SourceViewerContextShape>({\n  branchLike: {} as BranchLike,\n  file: {} as T.SourceViewerFile\n});\n","var arrayMap = require('./_arrayMap'),\n    baseIntersection = require('./_baseIntersection'),\n    baseRest = require('./_baseRest'),\n    castArrayLikeObject = require('./_castArrayLikeObject');\n\n/**\n * Creates an array of unique values that are included in all given arrays\n * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons. The order and references of result values are\n * determined by the first array.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {...Array} [arrays] The arrays to inspect.\n * @returns {Array} Returns the new array of intersecting values.\n * @example\n *\n * _.intersection([2, 1], [2, 3]);\n * // => [2]\n */\nvar intersection = baseRest(function(arrays) {\n  var mapped = arrayMap(arrays, castArrayLikeObject);\n  return (mapped.length && mapped[0] === arrays[0])\n    ? baseIntersection(mapped)\n    : [];\n});\n\nmodule.exports = intersection;\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport throwGlobalError from '../../app/utils/throwGlobalError';\nimport { parseIssueFromResponse } from '../../helpers/issues';\nimport { IssueResponse } from '../../types/issues';\n\nexport const updateIssue = (\n  onChange: (issue: T.Issue) => void,\n  resultPromise: Promise<IssueResponse>,\n  oldIssue?: T.Issue,\n  newIssue?: T.Issue\n) => {\n  const optimisticUpdate = oldIssue !== undefined && newIssue !== undefined;\n  if (optimisticUpdate) {\n    onChange(newIssue!);\n  }\n\n  resultPromise.then(\n    response => {\n      if (!optimisticUpdate) {\n        const issue = parseIssueFromResponse(\n          response.issue,\n          response.components,\n          response.users,\n          response.rules\n        );\n        onChange(issue);\n      }\n    },\n    param => {\n      if (optimisticUpdate) {\n        onChange(oldIssue!);\n      }\n      throwGlobalError(param);\n    }\n  );\n};\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport classNames from 'classnames';\nimport * as React from 'react';\nimport Tooltip from 'sonar-ui-common/components/controls/Tooltip';\n\ninterface Props {\n  active?: string;\n  className?: string;\n  item: string;\n  onHover?: (item: string) => void;\n  onSelect?: (item: string) => void;\n  title?: string;\n}\n\nexport default class SelectListItem extends React.PureComponent<Props> {\n  handleSelect = (event: React.MouseEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    if (this.props.onSelect) {\n      this.props.onSelect(this.props.item);\n    }\n  };\n\n  handleHover = () => {\n    if (this.props.onHover) {\n      this.props.onHover(this.props.item);\n    }\n  };\n\n  renderLink() {\n    const children = this.props.children || this.props.item;\n    return (\n      <li>\n        <a\n          className={classNames(\n            { active: this.props.active === this.props.item },\n            this.props.className\n          )}\n          href=\"#\"\n          onClick={this.handleSelect}\n          onFocus={this.handleHover}\n          onMouseOver={this.handleHover}>\n          {children}\n        </a>\n      </li>\n    );\n  }\n\n  render() {\n    return (\n      <Tooltip overlay={this.props.title || undefined} placement=\"right\">\n        {this.renderLink()}\n      </Tooltip>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport classNames from 'classnames';\nimport * as key from 'keymaster';\nimport { uniqueId } from 'lodash';\nimport * as React from 'react';\nimport SelectListItem from './SelectListItem';\n\ninterface Props {\n  className?: string;\n  items: string[];\n  currentItem: string;\n  onSelect: (item: string) => void;\n}\n\ninterface State {\n  active: string;\n}\n\nexport default class SelectList extends React.PureComponent<Props, State> {\n  currentKeyScope?: string;\n  previousFilter?: (event: any) => void;\n  previousKeyScope?: string;\n\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      active: props.currentItem\n    };\n  }\n\n  componentDidMount() {\n    this.attachShortcuts();\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (\n      prevProps.currentItem !== this.props.currentItem &&\n      !this.props.items.includes(this.state.active)\n    ) {\n      this.setState({ active: this.props.currentItem });\n    }\n  }\n\n  componentWillUnmount() {\n    this.detachShortcuts();\n  }\n\n  attachShortcuts = () => {\n    this.previousKeyScope = key.getScope();\n    this.previousFilter = key.filter;\n    this.currentKeyScope = uniqueId('key-scope');\n    key.setScope(this.currentKeyScope);\n\n    // sometimes there is a *focused* search field next to the SelectList component\n    // we need to allow shortcuts in this case, but only for the used keys\n    (key as any).filter = (event: KeyboardEvent & { target: HTMLElement }) => {\n      const { tagName } = event.target || event.srcElement;\n      const isInput = tagName === 'INPUT' || tagName === 'SELECT' || tagName === 'TEXTAREA';\n      return [13, 38, 40].includes(event.keyCode) || !isInput;\n    };\n\n    key('down', this.currentKeyScope, () => {\n      this.setState(this.selectNextElement);\n      return false;\n    });\n\n    key('up', this.currentKeyScope, () => {\n      this.setState(this.selectPreviousElement);\n      return false;\n    });\n\n    key('return', this.currentKeyScope, () => {\n      if (this.state.active != null) {\n        this.handleSelect(this.state.active);\n      }\n      return false;\n    });\n  };\n\n  detachShortcuts = () => {\n    if (this.previousKeyScope) {\n      key.setScope(this.previousKeyScope);\n    }\n    if (this.currentKeyScope) {\n      key.deleteScope(this.currentKeyScope);\n    }\n    (key as any).filter = this.previousFilter;\n  };\n\n  handleSelect = (item: string) => {\n    this.props.onSelect(item);\n  };\n\n  handleHover = (item: string) => {\n    this.setState({ active: item });\n  };\n\n  selectNextElement = (state: State, props: Props) => {\n    const idx = props.items.indexOf(state.active);\n    if (idx < 0) {\n      return { active: props.items[0] };\n    }\n    return { active: props.items[(idx + 1) % props.items.length] };\n  };\n\n  selectPreviousElement = (state: State, props: Props) => {\n    const idx = props.items.indexOf(state.active);\n    if (idx <= 0) {\n      return { active: props.items[props.items.length - 1] };\n    }\n    return { active: props.items[idx - 1] };\n  };\n\n  renderChild = (child: any) => {\n    if (child == null) {\n      return null;\n    }\n    // do not pass extra props to children like `<li className=\"divider\" />`\n    if (child.type !== SelectListItem) {\n      return child;\n    }\n    return React.cloneElement(child, {\n      active: this.state.active,\n      onHover: this.handleHover,\n      onSelect: this.handleSelect\n    });\n  };\n\n  render() {\n    const { children } = this.props;\n    const hasChildren = React.Children.count(children) > 0;\n    return (\n      <ul className={classNames('menu', this.props.className)}>\n        {hasChildren && React.Children.map(children, this.renderChild)}\n        {!hasChildren &&\n          this.props.items.map(item => (\n            <SelectListItem\n              active={this.state.active}\n              item={item}\n              key={item}\n              onHover={this.handleHover}\n              onSelect={this.handleSelect}\n            />\n          ))}\n      </ul>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { map } from 'lodash';\nimport * as React from 'react';\nimport { DropdownOverlay } from 'sonar-ui-common/components/controls/Dropdown';\nimport SearchBox from 'sonar-ui-common/components/controls/SearchBox';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { searchUsers } from '../../../api/users';\nimport { isLoggedIn, isUserActive } from '../../../helpers/users';\nimport SelectList from '../../common/SelectList';\nimport SelectListItem from '../../common/SelectListItem';\nimport { withCurrentUser } from '../../hoc/withCurrentUser';\nimport Avatar from '../../ui/Avatar';\n\ninterface Props {\n  currentUser: T.CurrentUser;\n  onSelect: (login: string) => void;\n}\n\ninterface State {\n  currentUser: string;\n  query: string;\n  users: T.UserActive[];\n}\n\nconst LIST_SIZE = 10;\n\nexport class SetAssigneePopup extends React.PureComponent<Props, State> {\n  defaultUsersArray: T.UserActive[];\n\n  constructor(props: Props) {\n    super(props);\n    this.defaultUsersArray = [{ login: '', name: translate('unassigned') }];\n\n    if (isLoggedIn(props.currentUser)) {\n      this.defaultUsersArray = [props.currentUser, ...this.defaultUsersArray];\n    }\n\n    this.state = {\n      query: '',\n      users: this.defaultUsersArray,\n      currentUser: this.defaultUsersArray.length > 0 ? this.defaultUsersArray[0].login : ''\n    };\n  }\n\n  searchUsers = (query: string) => {\n    searchUsers({ q: query, ps: LIST_SIZE }).then(this.handleSearchResult, () => {});\n  };\n\n  handleSearchResult = ({ users }: { users: T.UserBase[] }) => {\n    const activeUsers = users.filter(isUserActive);\n    this.setState({\n      users: activeUsers,\n      currentUser: activeUsers.length > 0 ? activeUsers[0].login : ''\n    });\n  };\n\n  handleSearchChange = (query: string) => {\n    if (query.length === 0) {\n      this.setState({\n        query,\n        users: this.defaultUsersArray,\n        currentUser: this.defaultUsersArray[0].login\n      });\n    } else {\n      this.setState({ query });\n      this.searchUsers(query);\n    }\n  };\n\n  render() {\n    return (\n      <DropdownOverlay noPadding={true}>\n        <div className=\"multi-select\">\n          <div className=\"menu-search\">\n            <SearchBox\n              autoFocus={true}\n              className=\"little-spacer-top\"\n              minLength={2}\n              onChange={this.handleSearchChange}\n              placeholder={translate('search.search_for_users')}\n              value={this.state.query}\n            />\n          </div>\n          <SelectList\n            currentItem={this.state.currentUser}\n            items={map(this.state.users, 'login')}\n            onSelect={this.props.onSelect}>\n            {this.state.users.map(user => (\n              <SelectListItem item={user.login} key={user.login}>\n                {!!user.login && (\n                  <Avatar className=\"spacer-right\" hash={user.avatar} name={user.name} size={16} />\n                )}\n                <span className=\"text-middle\" style={{ marginLeft: user.login ? 24 : undefined }}>\n                  {user.name}\n                </span>\n              </SelectListItem>\n            ))}\n          </SelectList>\n        </div>\n      </DropdownOverlay>\n    );\n  }\n}\n\nexport default withCurrentUser(SetAssigneePopup);\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ButtonLink } from 'sonar-ui-common/components/controls/buttons';\nimport Toggler from 'sonar-ui-common/components/controls/Toggler';\nimport DropdownIcon from 'sonar-ui-common/components/icons/DropdownIcon';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport Avatar from '../../ui/Avatar';\nimport SetAssigneePopup from '../popups/SetAssigneePopup';\n\ninterface Props {\n  isOpen: boolean;\n  issue: T.Issue;\n  canAssign: boolean;\n  onAssign: (login: string) => void;\n  togglePopup: (popup: string, show?: boolean) => void;\n}\n\nexport default class IssueAssign extends React.PureComponent<Props> {\n  toggleAssign = (open?: boolean) => {\n    this.props.togglePopup('assign', open);\n  };\n\n  handleClose = () => {\n    this.toggleAssign(false);\n  };\n\n  renderAssignee() {\n    const { issue } = this.props;\n    const assigneeName = issue.assigneeName || issue.assignee;\n\n    if (assigneeName) {\n      return (\n        <>\n          <span className=\"text-top\">\n            <Avatar\n              className=\"little-spacer-right\"\n              hash={issue.assigneeAvatar}\n              name={issue.assigneeName || issue.assignee}\n              size={16}\n            />\n          </span>\n          <span className=\"issue-meta-label\">\n            {issue.assigneeActive === false\n              ? translateWithParameters('user.x_deleted', assigneeName)\n              : assigneeName}\n          </span>\n        </>\n      );\n    }\n\n    return <span className=\"issue-meta-label\">{translate('unassigned')}</span>;\n  }\n\n  render() {\n    if (this.props.canAssign) {\n      return (\n        <div className=\"dropdown\">\n          <Toggler\n            closeOnEscape={true}\n            onRequestClose={this.handleClose}\n            open={this.props.isOpen && this.props.canAssign}\n            overlay={<SetAssigneePopup onSelect={this.props.onAssign} />}>\n            <ButtonLink\n              className=\"issue-action issue-action-with-options js-issue-assign\"\n              onClick={this.toggleAssign}>\n              {this.renderAssignee()}\n              <DropdownIcon className=\"little-spacer-left\" />\n            </ButtonLink>\n          </Toggler>\n        </div>\n      );\n    } else {\n      return this.renderAssignee();\n    }\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Button, ResetButtonLink } from 'sonar-ui-common/components/controls/buttons';\nimport { DropdownOverlay } from 'sonar-ui-common/components/controls/Dropdown';\nimport { PopupPlacement } from 'sonar-ui-common/components/ui/popups';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport FormattingTips from '../../common/FormattingTips';\n\ninterface Props {\n  comment?: Pick<T.IssueComment, 'markdown'>;\n  onComment: (text: string) => void;\n  toggleComment: (visible: boolean) => void;\n  placeholder: string;\n  placement?: PopupPlacement;\n  autoTriggered?: boolean;\n}\n\ninterface State {\n  textComment: string;\n}\n\nexport default class CommentPopup extends React.PureComponent<Props, State> {\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      textComment: props.comment ? props.comment.markdown : ''\n    };\n  }\n\n  handleCommentChange = (event: React.ChangeEvent<HTMLTextAreaElement>) => {\n    this.setState({ textComment: event.target.value });\n  };\n\n  handleCommentClick = () => {\n    if (this.state.textComment.trim().length > 0) {\n      this.props.onComment(this.state.textComment);\n    }\n  };\n\n  handleCancelClick = () => {\n    this.props.toggleComment(false);\n  };\n\n  handleKeyboard = (event: React.KeyboardEvent) => {\n    if (event.keyCode === 13 && (event.metaKey || event.ctrlKey)) {\n      // Ctrl + Enter\n      this.handleCommentClick();\n    } else if ([37, 38, 39, 40].includes(event.keyCode)) {\n      // Arrow keys\n      event.stopPropagation();\n    }\n  };\n\n  render() {\n    const { comment, autoTriggered } = this.props;\n    return (\n      <DropdownOverlay placement={this.props.placement}>\n        <div className=\"issue-comment-bubble-popup\">\n          <div className=\"issue-comment-form-text\">\n            <textarea\n              autoFocus={true}\n              onChange={this.handleCommentChange}\n              onKeyDown={this.handleKeyboard}\n              placeholder={this.props.placeholder}\n              rows={2}\n              value={this.state.textComment}\n            />\n          </div>\n          <div className=\"issue-comment-form-footer\">\n            <div className=\"issue-comment-form-actions\">\n              <Button\n                className=\"js-issue-comment-submit little-spacer-right\"\n                disabled={this.state.textComment.trim().length < 1}\n                onClick={this.handleCommentClick}>\n                {comment && translate('save')}\n                {!comment && translate('issue.comment.submit')}\n              </Button>\n              <ResetButtonLink className=\"js-issue-comment-cancel\" onClick={this.handleCancelClick}>\n                {autoTriggered ? translate('skip') : translate('cancel')}\n              </ResetButtonLink>\n            </div>\n            <div className=\"issue-comment-form-tips\">\n              <FormattingTips />\n            </div>\n          </div>\n        </div>\n      </DropdownOverlay>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ButtonLink } from 'sonar-ui-common/components/controls/buttons';\nimport Toggler from 'sonar-ui-common/components/controls/Toggler';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { addIssueComment } from '../../../api/issues';\nimport { updateIssue } from '../actions';\nimport CommentPopup from '../popups/CommentPopup';\n\ninterface Props {\n  commentAutoTriggered?: boolean;\n  commentPlaceholder: string;\n  currentPopup?: string;\n  issueKey: string;\n  onChange: (issue: T.Issue) => void;\n  toggleComment: (open?: boolean, placeholder?: string, autoTriggered?: boolean) => void;\n}\n\nexport default class IssueCommentAction extends React.PureComponent<Props> {\n  addComment = (text: string) => {\n    updateIssue(this.props.onChange, addIssueComment({ issue: this.props.issueKey, text }));\n    this.props.toggleComment(false);\n  };\n\n  handleCommentClick = () => {\n    this.props.toggleComment();\n  };\n\n  handleClose = () => {\n    this.props.toggleComment(false);\n  };\n\n  render() {\n    return (\n      <li className=\"issue-meta dropdown\">\n        <Toggler\n          closeOnClickOutside={false}\n          onRequestClose={this.handleClose}\n          open={this.props.currentPopup === 'comment'}\n          overlay={\n            <CommentPopup\n              autoTriggered={this.props.commentAutoTriggered}\n              onComment={this.addComment}\n              placeholder={this.props.commentPlaceholder}\n              toggleComment={this.props.toggleComment}\n            />\n          }>\n          <ButtonLink className=\"issue-action js-issue-comment\" onClick={this.handleCommentClick}>\n            <span className=\"issue-meta-label\">{translate('issue.comment.formlink')}</span>\n          </ButtonLink>\n        </Toggler>\n      </li>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { DropdownOverlay } from 'sonar-ui-common/components/controls/Dropdown';\nimport SeverityIcon from 'sonar-ui-common/components/icons/SeverityIcon';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport SelectList from '../../common/SelectList';\nimport SelectListItem from '../../common/SelectListItem';\n\ntype Props = {\n  issue: Pick<T.Issue, 'severity'>;\n  onSelect: (severity: string) => void;\n};\n\nconst SEVERITY = ['BLOCKER', 'CRITICAL', 'MAJOR', 'MINOR', 'INFO'];\n\nexport default function SetSeverityPopup({ issue, onSelect }: Props) {\n  return (\n    <DropdownOverlay>\n      <SelectList currentItem={issue.severity} items={SEVERITY} onSelect={onSelect}>\n        {SEVERITY.map(severity => (\n          <SelectListItem className=\"display-flex-center\" item={severity} key={severity}>\n            <SeverityIcon className=\"little-spacer-right\" severity={severity} />\n            {translate('severity', severity)}\n          </SelectListItem>\n        ))}\n      </SelectList>\n    </DropdownOverlay>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ButtonLink } from 'sonar-ui-common/components/controls/buttons';\nimport Toggler from 'sonar-ui-common/components/controls/Toggler';\nimport DropdownIcon from 'sonar-ui-common/components/icons/DropdownIcon';\nimport { setIssueSeverity } from '../../../api/issues';\nimport { IssueResponse } from '../../../types/issues';\nimport SeverityHelper from '../../shared/SeverityHelper';\nimport SetSeverityPopup from '../popups/SetSeverityPopup';\n\ninterface Props {\n  canSetSeverity: boolean;\n  isOpen: boolean;\n  issue: Pick<T.Issue, 'severity'>;\n  setIssueProperty: (\n    property: keyof T.Issue,\n    popup: string,\n    apiCall: (query: T.RawQuery) => Promise<IssueResponse>,\n    value: string\n  ) => void;\n  togglePopup: (popup: string, show?: boolean) => void;\n}\n\nexport default class IssueSeverity extends React.PureComponent<Props> {\n  toggleSetSeverity = (open?: boolean) => {\n    this.props.togglePopup('set-severity', open);\n  };\n\n  setSeverity = (severity: string) => {\n    this.props.setIssueProperty('severity', 'set-severity', setIssueSeverity, severity);\n  };\n\n  handleClose = () => {\n    this.toggleSetSeverity(false);\n  };\n\n  render() {\n    const { issue } = this.props;\n    if (this.props.canSetSeverity) {\n      return (\n        <div className=\"dropdown\">\n          <Toggler\n            onRequestClose={this.handleClose}\n            open={this.props.isOpen && this.props.canSetSeverity}\n            overlay={<SetSeverityPopup issue={issue} onSelect={this.setSeverity} />}>\n            <ButtonLink\n              className=\"issue-action issue-action-with-options js-issue-set-severity\"\n              onClick={this.toggleSetSeverity}>\n              <SeverityHelper className=\"issue-meta-label\" severity={issue.severity} />\n              <DropdownIcon className=\"little-spacer-left\" />\n            </ButtonLink>\n          </Toggler>\n        </div>\n      );\n    } else {\n      return <SeverityHelper className=\"issue-meta-label\" severity={issue.severity} />;\n    }\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { difference, without } from 'lodash';\nimport * as React from 'react';\nimport { DropdownOverlay } from 'sonar-ui-common/components/controls/Dropdown';\nimport { PopupPlacement } from 'sonar-ui-common/components/ui/popups';\nimport { searchIssueTags } from '../../../api/issues';\nimport TagsSelector from '../../tags/TagsSelector';\n\ninterface Props {\n  selectedTags: string[];\n  setTags: (tags: string[]) => void;\n}\n\ninterface State {\n  searchResult: string[];\n}\n\nconst LIST_SIZE = 10;\nconst MAX_LIST_SIZE = 100;\n\nexport default class SetIssueTagsPopup extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { searchResult: [] };\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  onSearch = (query: string) => {\n    return searchIssueTags({\n      q: query,\n      ps: Math.min(this.props.selectedTags.length - 1 + LIST_SIZE, MAX_LIST_SIZE)\n    }).then(\n      (tags: string[]) => {\n        if (this.mounted) {\n          this.setState({ searchResult: tags });\n        }\n      },\n      () => {}\n    );\n  };\n\n  onSelect = (tag: string) => {\n    this.props.setTags([...this.props.selectedTags, tag]);\n  };\n\n  onUnselect = (tag: string) => {\n    this.props.setTags(without(this.props.selectedTags, tag));\n  };\n\n  render() {\n    const availableTags = difference(this.state.searchResult, this.props.selectedTags);\n    return (\n      <DropdownOverlay placement={PopupPlacement.BottomRight}>\n        <TagsSelector\n          listSize={LIST_SIZE}\n          onSearch={this.onSearch}\n          onSelect={this.onSelect}\n          onUnselect={this.onUnselect}\n          selectedTags={this.props.selectedTags}\n          tags={availableTags}\n        />\n      </DropdownOverlay>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ButtonLink } from 'sonar-ui-common/components/controls/buttons';\nimport Toggler from 'sonar-ui-common/components/controls/Toggler';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { setIssueTags } from '../../../api/issues';\nimport TagsList from '../../tags/TagsList';\nimport { updateIssue } from '../actions';\nimport SetIssueTagsPopup from '../popups/SetIssueTagsPopup';\n\ninterface Props {\n  canSetTags: boolean;\n  isOpen: boolean;\n  issue: Pick<T.Issue, 'key' | 'tags'>;\n  onChange: (issue: T.Issue) => void;\n  togglePopup: (popup: string, show?: boolean) => void;\n}\n\nexport default class IssueTags extends React.PureComponent<Props> {\n  toggleSetTags = (open?: boolean) => {\n    this.props.togglePopup('edit-tags', open);\n  };\n\n  setTags = (tags: string[]) => {\n    const { issue } = this.props;\n    const newIssue = { ...issue, tags };\n    updateIssue(\n      this.props.onChange,\n      setIssueTags({ issue: issue.key, tags: tags.join(',') }),\n      issue as T.Issue,\n      newIssue as T.Issue\n    );\n  };\n\n  handleClose = () => {\n    this.toggleSetTags(false);\n  };\n\n  render() {\n    const { issue } = this.props;\n    const { tags = [] } = issue;\n\n    if (this.props.canSetTags) {\n      return (\n        <div className=\"dropdown\">\n          <Toggler\n            onRequestClose={this.handleClose}\n            open={this.props.isOpen}\n            overlay={<SetIssueTagsPopup selectedTags={tags} setTags={this.setTags} />}>\n            <ButtonLink\n              className=\"issue-action issue-action-with-options js-issue-edit-tags\"\n              onClick={this.toggleSetTags}>\n              <TagsList\n                allowUpdate={this.props.canSetTags}\n                tags={\n                  issue.tags && issue.tags.length > 0 ? issue.tags : [translate('issue.no_tag')]\n                }\n              />\n            </ButtonLink>\n          </Toggler>\n        </div>\n      );\n    } else {\n      return (\n        <TagsList\n          allowUpdate={this.props.canSetTags}\n          className=\"note\"\n          tags={issue.tags && issue.tags.length > 0 ? issue.tags : [translate('issue.no_tag')]}\n        />\n      );\n    }\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { DropdownOverlay } from 'sonar-ui-common/components/controls/Dropdown';\nimport { hasMessage, translate } from 'sonar-ui-common/helpers/l10n';\nimport SelectList from '../../common/SelectList';\nimport SelectListItem from '../../common/SelectListItem';\n\nexport interface Props {\n  fromHotspot: boolean;\n  onSelect: (transition: string) => void;\n  transitions: string[];\n  type: T.IssueType;\n}\n\nexport default function SetTransitionPopup({ fromHotspot, onSelect, transitions, type }: Props) {\n  const isManualVulnerability = fromHotspot && type === 'VULNERABILITY';\n  return (\n    <DropdownOverlay>\n      <SelectList currentItem={transitions[0]} items={transitions} onSelect={onSelect}>\n        {transitions.map(transition => {\n          const [name, description] = translateTransition(transition, isManualVulnerability);\n          return (\n            <SelectListItem item={transition} key={transition} title={description}>\n              {name}\n            </SelectListItem>\n          );\n        })}\n      </SelectList>\n    </DropdownOverlay>\n  );\n}\n\nfunction translateTransition(transition: string, isManualVulnerability: boolean) {\n  return isManualVulnerability && hasMessage('vulnerability.transition', transition)\n    ? [\n        translate('vulnerability.transition', transition),\n        translate('vulnerability.transition', transition, 'description')\n      ]\n    : [\n        translate('issue.transition', transition),\n        translate('issue.transition', transition, 'description')\n      ];\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ButtonLink } from 'sonar-ui-common/components/controls/buttons';\nimport Toggler from 'sonar-ui-common/components/controls/Toggler';\nimport DropdownIcon from 'sonar-ui-common/components/icons/DropdownIcon';\nimport { setIssueTransition } from '../../../api/issues';\nimport StatusHelper from '../../shared/StatusHelper';\nimport { updateIssue } from '../actions';\nimport SetTransitionPopup from '../popups/SetTransitionPopup';\n\ninterface Props {\n  hasTransitions: boolean;\n  isOpen: boolean;\n  issue: Pick<T.Issue, 'fromHotspot' | 'key' | 'resolution' | 'status' | 'transitions' | 'type'>;\n  onChange: (issue: T.Issue) => void;\n  togglePopup: (popup: string, show?: boolean) => void;\n}\n\nexport default class IssueTransition extends React.PureComponent<Props> {\n  setTransition = (transition: string) => {\n    updateIssue(\n      this.props.onChange,\n      setIssueTransition({ issue: this.props.issue.key, transition })\n    );\n    this.toggleSetTransition();\n  };\n\n  toggleSetTransition = (open?: boolean) => {\n    this.props.togglePopup('transition', open);\n  };\n\n  handleClose = () => {\n    this.toggleSetTransition(false);\n  };\n\n  render() {\n    const { issue } = this.props;\n\n    if (this.props.hasTransitions) {\n      return (\n        <div className=\"dropdown\">\n          <Toggler\n            onRequestClose={this.handleClose}\n            open={this.props.isOpen && this.props.hasTransitions}\n            overlay={\n              <SetTransitionPopup\n                fromHotspot={issue.fromHotspot}\n                onSelect={this.setTransition}\n                transitions={issue.transitions}\n                type={issue.type}\n              />\n            }>\n            <ButtonLink\n              className=\"issue-action issue-action-with-options js-issue-transition\"\n              onClick={this.toggleSetTransition}>\n              <StatusHelper\n                className=\"issue-meta-label\"\n                resolution={issue.resolution}\n                status={issue.status}\n              />\n              <DropdownIcon className=\"little-spacer-left\" />\n            </ButtonLink>\n          </Toggler>\n        </div>\n      );\n    } else {\n      return (\n        <StatusHelper\n          className=\"issue-meta-label\"\n          resolution={issue.resolution}\n          status={issue.status}\n        />\n      );\n    }\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { DropdownOverlay } from 'sonar-ui-common/components/controls/Dropdown';\nimport IssueTypeIcon from 'sonar-ui-common/components/icons/IssueTypeIcon';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport SelectList from '../../common/SelectList';\nimport SelectListItem from '../../common/SelectListItem';\n\ninterface Props {\n  issue: Pick<T.Issue, 'type'>;\n  onSelect: (type: T.IssueType) => void;\n}\n\nconst TYPES = ['BUG', 'VULNERABILITY', 'CODE_SMELL'];\n\nexport default function SetTypePopup({ issue, onSelect }: Props) {\n  return (\n    <DropdownOverlay>\n      <SelectList currentItem={issue.type} items={TYPES} onSelect={onSelect}>\n        {TYPES.map(type => (\n          <SelectListItem className=\"display-flex-center\" item={type} key={type}>\n            <IssueTypeIcon className=\"little-spacer-right\" query={type} />\n            {translate('issue.type', type)}\n          </SelectListItem>\n        ))}\n      </SelectList>\n    </DropdownOverlay>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ButtonLink } from 'sonar-ui-common/components/controls/buttons';\nimport Toggler from 'sonar-ui-common/components/controls/Toggler';\nimport DropdownIcon from 'sonar-ui-common/components/icons/DropdownIcon';\nimport IssueTypeIcon from 'sonar-ui-common/components/icons/IssueTypeIcon';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { setIssueType } from '../../../api/issues';\nimport { colors } from '../../../app/theme';\nimport { IssueResponse } from '../../../types/issues';\nimport SetTypePopup from '../popups/SetTypePopup';\n\ninterface Props {\n  canSetType: boolean;\n  isOpen: boolean;\n  issue: Pick<T.Issue, 'type'>;\n  setIssueProperty: (\n    property: keyof T.Issue,\n    popup: string,\n    apiCall: (query: T.RawQuery) => Promise<IssueResponse>,\n    value: string\n  ) => void;\n  togglePopup: (popup: string, show?: boolean) => void;\n}\n\nexport default class IssueType extends React.PureComponent<Props> {\n  toggleSetType = (open?: boolean) => {\n    this.props.togglePopup('set-type', open);\n  };\n\n  setType = (type: string) => {\n    this.props.setIssueProperty('type', 'set-type', setIssueType, type);\n  };\n\n  handleClose = () => {\n    this.toggleSetType(false);\n  };\n\n  render() {\n    const { issue } = this.props;\n    if (this.props.canSetType) {\n      return (\n        <div className=\"dropdown\">\n          <Toggler\n            onRequestClose={this.handleClose}\n            open={this.props.isOpen && this.props.canSetType}\n            overlay={<SetTypePopup issue={issue} onSelect={this.setType} />}>\n            <ButtonLink\n              className=\"issue-action issue-action-with-options js-issue-set-type\"\n              onClick={this.toggleSetType}>\n              <IssueTypeIcon\n                className=\"little-spacer-right\"\n                fill={colors.baseFontColor}\n                query={issue.type}\n              />\n              {translate('issue.type', issue.type)}\n              <DropdownIcon className=\"little-spacer-left\" />\n            </ButtonLink>\n          </Toggler>\n        </div>\n      );\n    } else {\n      return (\n        <span>\n          <IssueTypeIcon className=\"little-spacer-right\" query={issue.type} />\n          {translate('issue.type', issue.type)}\n        </span>\n      );\n    }\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { IssueResponse } from '../../../types/issues';\nimport { updateIssue } from '../actions';\nimport IssueAssign from './IssueAssign';\nimport IssueCommentAction from './IssueCommentAction';\nimport IssueSeverity from './IssueSeverity';\nimport IssueTags from './IssueTags';\nimport IssueTransition from './IssueTransition';\nimport IssueType from './IssueType';\n\ninterface Props {\n  issue: T.Issue;\n  currentPopup?: string;\n  onAssign: (login: string) => void;\n  onChange: (issue: T.Issue) => void;\n  togglePopup: (popup: string, show?: boolean) => void;\n}\n\ninterface State {\n  commentAutoTriggered: boolean;\n  commentPlaceholder: string;\n}\n\nexport default class IssueActionsBar extends React.PureComponent<Props, State> {\n  state: State = {\n    commentAutoTriggered: false,\n    commentPlaceholder: ''\n  };\n\n  setIssueProperty = (\n    property: keyof T.Issue,\n    popup: string,\n    apiCall: (query: T.RawQuery) => Promise<IssueResponse>,\n    value: string\n  ) => {\n    const { issue } = this.props;\n    if (issue[property] !== value) {\n      const newIssue = { ...issue, [property]: value };\n      updateIssue(\n        this.props.onChange,\n        apiCall({ issue: issue.key, [property]: value }),\n        issue,\n        newIssue\n      );\n    }\n    this.props.togglePopup(popup, false);\n  };\n\n  toggleComment = (open: boolean | undefined, placeholder = '', autoTriggered = false) => {\n    this.setState({\n      commentPlaceholder: placeholder,\n      commentAutoTriggered: autoTriggered\n    });\n    this.props.togglePopup('comment', open);\n  };\n\n  handleTransition = (issue: T.Issue) => {\n    this.props.onChange(issue);\n    if (\n      issue.resolution === 'FALSE-POSITIVE' ||\n      (issue.resolution === 'WONTFIX' && issue.type !== 'SECURITY_HOTSPOT')\n    ) {\n      this.toggleComment(true, translate('issue.comment.explain_why'), true);\n    }\n  };\n\n  render() {\n    const { issue } = this.props;\n    const canAssign = issue.actions.includes('assign');\n    const canComment = issue.actions.includes('comment');\n    const canSetSeverity = issue.actions.includes('set_severity');\n    const canSetType = issue.actions.includes('set_type');\n    const canSetTags = issue.actions.includes('set_tags');\n    const hasTransitions = issue.transitions && issue.transitions.length > 0;\n    const isSecurityHotspot = issue.type === 'SECURITY_HOTSPOT';\n\n    return (\n      <div className=\"issue-actions\">\n        <ul className=\"issue-meta-list\">\n          <li className=\"issue-meta\">\n            <IssueType\n              canSetType={canSetType}\n              isOpen={this.props.currentPopup === 'set-type' && canSetType}\n              issue={issue}\n              setIssueProperty={this.setIssueProperty}\n              togglePopup={this.props.togglePopup}\n            />\n          </li>\n          {!isSecurityHotspot && (\n            <li className=\"issue-meta\">\n              <IssueSeverity\n                canSetSeverity={canSetSeverity}\n                isOpen={this.props.currentPopup === 'set-severity' && canSetSeverity}\n                issue={issue}\n                setIssueProperty={this.setIssueProperty}\n                togglePopup={this.props.togglePopup}\n              />\n            </li>\n          )}\n          <li className=\"issue-meta\">\n            <IssueTransition\n              hasTransitions={hasTransitions}\n              isOpen={this.props.currentPopup === 'transition' && hasTransitions}\n              issue={issue}\n              onChange={this.handleTransition}\n              togglePopup={this.props.togglePopup}\n            />\n          </li>\n          <li className=\"issue-meta\">\n            <IssueAssign\n              canAssign={canAssign}\n              isOpen={this.props.currentPopup === 'assign' && canAssign}\n              issue={issue}\n              onAssign={this.props.onAssign}\n              togglePopup={this.props.togglePopup}\n            />\n          </li>\n          {!isSecurityHotspot && issue.effort && (\n            <li className=\"issue-meta\">\n              <span className=\"issue-meta-label\">\n                {translateWithParameters('issue.x_effort', issue.effort)}\n              </span>\n            </li>\n          )}\n          {canComment && (\n            <IssueCommentAction\n              commentAutoTriggered={this.state.commentAutoTriggered}\n              commentPlaceholder={this.state.commentPlaceholder}\n              currentPopup={this.props.currentPopup}\n              issueKey={issue.key}\n              onChange={this.props.onChange}\n              toggleComment={this.toggleComment}\n            />\n          )}\n        </ul>\n        <ul className=\"list-inline\">\n          <li className=\"issue-meta js-issue-tags\">\n            <IssueTags\n              canSetTags={canSetTags}\n              isOpen={this.props.currentPopup === 'edit-tags' && canSetTags}\n              issue={issue}\n              onChange={this.props.onChange}\n              togglePopup={this.props.togglePopup}\n            />\n          </li>\n        </ul>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Button } from 'sonar-ui-common/components/controls/buttons';\nimport { DropdownOverlay } from 'sonar-ui-common/components/controls/Dropdown';\nimport { PopupPlacement } from 'sonar-ui-common/components/ui/popups';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\n\ninterface Props {\n  onDelete: () => void;\n}\n\nexport default function CommentDeletePopup({ onDelete }: Props) {\n  return (\n    <DropdownOverlay placement={PopupPlacement.BottomRight}>\n      <div className=\"menu is-container\">\n        <div className=\"spacer-bottom\">{translate('issue.comment.delete_confirm_message')}</div>\n        <Button className=\"button-red\" onClick={onDelete}>\n          {translate('delete')}\n        </Button>\n      </div>\n    </DropdownOverlay>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nexport enum RuleStatus {\n  Ready = 'READY',\n  Beta = 'BETA',\n  Deprecated = 'DEPRECATED',\n  Removed = 'REMOVED'\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { sanitize } from 'dompurify';\nimport * as React from 'react';\nimport { DeleteButton, EditButton } from 'sonar-ui-common/components/controls/buttons';\nimport Toggler from 'sonar-ui-common/components/controls/Toggler';\nimport DateFromNow from 'sonar-ui-common/components/intl/DateFromNow';\nimport { PopupPlacement } from 'sonar-ui-common/components/ui/popups';\nimport { translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport Avatar from '../../ui/Avatar';\nimport CommentDeletePopup from '../popups/CommentDeletePopup';\nimport CommentPopup from '../popups/CommentPopup';\n\ninterface Props {\n  comment: T.IssueComment;\n  onDelete: (comment: string) => void;\n  onEdit: (comment: string, text: string) => void;\n}\n\ninterface State {\n  openPopup: string;\n}\n\nexport default class IssueCommentLine extends React.PureComponent<Props, State> {\n  state: State = {\n    openPopup: ''\n  };\n\n  handleEdit = (text: string) => {\n    this.props.onEdit(this.props.comment.key, text);\n    this.toggleEditPopup(false);\n  };\n\n  handleDelete = () => {\n    this.props.onDelete(this.props.comment.key);\n    this.toggleDeletePopup(false);\n  };\n\n  togglePopup = (popupName: string, force?: boolean) => {\n    this.setState(prevState => {\n      if (prevState.openPopup !== popupName && force !== false) {\n        return { openPopup: popupName };\n      } else if (prevState.openPopup === popupName && force !== true) {\n        return { openPopup: '' };\n      }\n      return prevState;\n    });\n  };\n\n  toggleDeletePopup = (force?: boolean) => {\n    this.togglePopup('delete', force);\n  };\n\n  toggleEditPopup = (force?: boolean) => {\n    this.togglePopup('edit', force);\n  };\n\n  closePopups = () => {\n    this.setState({ openPopup: '' });\n  };\n\n  render() {\n    const { comment } = this.props;\n    const author = comment.authorName || comment.author;\n    const displayName =\n      comment.authorActive === false && author\n        ? translateWithParameters('user.x_deleted', author)\n        : author;\n    return (\n      <div className=\"issue-comment\">\n        <div className=\"issue-comment-author\" title={displayName}>\n          <Avatar\n            className=\"little-spacer-right\"\n            hash={comment.authorAvatar}\n            name={author}\n            size={16}\n          />\n          {displayName}\n        </div>\n        <div\n          className=\"issue-comment-text markdown\"\n          dangerouslySetInnerHTML={{ __html: sanitize(comment.htmlText) }}\n        />\n        <div className=\"issue-comment-age\">\n          <DateFromNow date={comment.createdAt} />\n        </div>\n        <div className=\"issue-comment-actions\">\n          {comment.updatable && (\n            <div className=\"dropdown\">\n              <Toggler\n                closeOnClickOutside={false}\n                onRequestClose={this.closePopups}\n                open={this.state.openPopup === 'edit'}\n                overlay={\n                  <CommentPopup\n                    comment={comment}\n                    onComment={this.handleEdit}\n                    placeholder=\"\"\n                    placement={PopupPlacement.BottomRight}\n                    toggleComment={this.toggleEditPopup}\n                  />\n                }>\n                <EditButton\n                  className=\"js-issue-comment-edit button-small\"\n                  onClick={this.toggleEditPopup}\n                />\n              </Toggler>\n            </div>\n          )}\n          {comment.updatable && (\n            <div className=\"dropdown\">\n              <Toggler\n                onRequestClose={this.closePopups}\n                open={this.state.openPopup === 'delete'}\n                overlay={<CommentDeletePopup onDelete={this.handleDelete} />}>\n                <DeleteButton\n                  className=\"js-issue-comment-delete button-small\"\n                  onClick={this.toggleDeletePopup}\n                />\n              </Toggler>\n            </div>\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { DropdownOverlay } from 'sonar-ui-common/components/controls/Dropdown';\nimport DateTimeFormatter from 'sonar-ui-common/components/intl/DateTimeFormatter';\nimport { PopupPlacement } from 'sonar-ui-common/components/ui/popups';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { getIssueChangelog } from '../../../api/issues';\nimport Avatar from '../../ui/Avatar';\nimport IssueChangelogDiff from '../components/IssueChangelogDiff';\n\ninterface Props {\n  issue: Pick<T.Issue, 'author' | 'creationDate' | 'key'>;\n}\n\ninterface State {\n  changelog: T.IssueChangelog[];\n}\n\nexport default class ChangelogPopup extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { changelog: [] };\n\n  componentDidMount() {\n    this.mounted = true;\n    this.loadChangelog();\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  loadChangelog() {\n    getIssueChangelog(this.props.issue.key).then(\n      ({ changelog }) => {\n        if (this.mounted) {\n          this.setState({ changelog });\n        }\n      },\n      () => {}\n    );\n  }\n\n  render() {\n    const { issue } = this.props;\n    const { author } = issue;\n    return (\n      <DropdownOverlay placement={PopupPlacement.BottomRight}>\n        <div className=\"menu is-container issue-changelog\">\n          <table className=\"spaced\">\n            <tbody>\n              <tr>\n                <td className=\"thin text-left text-top nowrap\">\n                  <DateTimeFormatter date={issue.creationDate} />\n                </td>\n                <td className=\"text-left text-top\">\n                  {author ? `${translate('created_by')} ${author}` : translate('created')}\n                </td>\n              </tr>\n\n              {this.state.changelog.map((item, idx) => {\n                const userName = item.userName || item.user;\n\n                return (\n                  <tr key={idx}>\n                    <td className=\"thin text-left text-top nowrap\">\n                      <DateTimeFormatter date={item.creationDate} />\n                    </td>\n                    <td className=\"text-left text-top\">\n                      {userName && (\n                        <p>\n                          <Avatar\n                            className=\"little-spacer-right\"\n                            hash={item.avatar}\n                            name={userName}\n                            size={16}\n                          />\n                          {item.isUserActive\n                            ? userName\n                            : translateWithParameters('user.x_deleted', userName)}\n                        </p>\n                      )}\n                      {item.diffs.map(diff => (\n                        <IssueChangelogDiff diff={diff} key={diff.key} />\n                      ))}\n                    </td>\n                  </tr>\n                );\n              })}\n            </tbody>\n          </table>\n        </div>\n      </DropdownOverlay>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ButtonLink } from 'sonar-ui-common/components/controls/buttons';\nimport Toggler from 'sonar-ui-common/components/controls/Toggler';\nimport DropdownIcon from 'sonar-ui-common/components/icons/DropdownIcon';\nimport DateFromNow from 'sonar-ui-common/components/intl/DateFromNow';\nimport ChangelogPopup from '../popups/ChangelogPopup';\n\ninterface Props {\n  isOpen: boolean;\n  issue: Pick<T.Issue, 'author' | 'creationDate' | 'key'>;\n  creationDate: string;\n  togglePopup: (popup: string, show?: boolean) => void;\n}\n\nexport default class IssueChangelog extends React.PureComponent<Props> {\n  toggleChangelog = (open?: boolean) => {\n    this.props.togglePopup('changelog', open);\n  };\n\n  handleClick = () => {\n    this.toggleChangelog();\n  };\n\n  handleClose = () => {\n    this.toggleChangelog(false);\n  };\n\n  render() {\n    return (\n      <div className=\"dropdown\">\n        <Toggler\n          onRequestClose={this.handleClose}\n          open={this.props.isOpen}\n          overlay={<ChangelogPopup issue={this.props.issue} />}>\n          <ButtonLink\n            className=\"issue-action issue-action-with-options js-issue-show-changelog\"\n            onClick={this.handleClick}>\n            <span className=\"issue-meta-label\">\n              <DateFromNow date={this.props.creationDate} />\n            </span>\n            <DropdownIcon className=\"little-spacer-left\" />\n          </ButtonLink>\n        </Toggler>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ButtonLink } from 'sonar-ui-common/components/controls/buttons';\nimport Tooltip from 'sonar-ui-common/components/controls/Tooltip';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { RuleStatus } from '../../../types/rules';\nimport DocumentationTooltip from '../../common/DocumentationTooltip';\nimport { WorkspaceContextShape } from '../../workspace/context';\n\nexport interface IssueMessageProps {\n  engine?: string;\n  engineName?: string;\n  manualVulnerability: boolean;\n  message: string;\n  onOpenRule: WorkspaceContextShape['openRule'];\n  ruleKey: string;\n  ruleStatus?: RuleStatus;\n}\n\nexport default function IssueMessage(props: IssueMessageProps) {\n  const { engine, engineName, manualVulnerability, message, ruleKey, ruleStatus } = props;\n  const ruleEngine = engineName ? engineName : engine;\n\n  return (\n    <div className=\"issue-message break-word\">\n      <span className=\"spacer-right\">{message}</span>\n      <ButtonLink\n        aria-label={translate('issue.why_this_issue.long')}\n        className=\"issue-see-rule spacer-right text-baseline\"\n        onClick={() =>\n          props.onOpenRule({\n            key: ruleKey\n          })\n        }>\n        {translate('issue.why_this_issue')}\n      </ButtonLink>\n\n      {ruleStatus && (ruleStatus === RuleStatus.Deprecated || ruleStatus === RuleStatus.Removed) && (\n        <DocumentationTooltip\n          className=\"spacer-left\"\n          content={translate('rules.status', ruleStatus, 'help')}\n          links={[\n            {\n              href: '/documentation/user-guide/rules/',\n              label: translateWithParameters('see_x', translate('rules'))\n            }\n          ]}>\n          <span className=\"spacer-right badge badge-error\">\n            {translate('rules.status', ruleStatus)}\n          </span>\n        </DocumentationTooltip>\n      )}\n\n      {ruleEngine && (\n        <Tooltip overlay={translateWithParameters('issue.from_external_rule_engine', ruleEngine)}>\n          <div className=\"badge spacer-right text-baseline\">{ruleEngine}</div>\n        </Tooltip>\n      )}\n      {manualVulnerability && (\n        <Tooltip overlay={translate('issue.manual_vulnerability.description')}>\n          <div className=\"badge spacer-right text-baseline\">\n            {translate('issue.manual_vulnerability')}\n          </div>\n        </Tooltip>\n      )}\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { DropdownOverlay } from 'sonar-ui-common/components/controls/Dropdown';\nimport IssueTypeIcon from 'sonar-ui-common/components/icons/IssueTypeIcon';\nimport QualifierIcon from 'sonar-ui-common/components/icons/QualifierIcon';\nimport TagsIcon from 'sonar-ui-common/components/icons/TagsIcon';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { fileFromPath, limitComponentName } from 'sonar-ui-common/helpers/path';\nimport SelectList from '../../common/SelectList';\nimport SelectListItem from '../../common/SelectListItem';\nimport SeverityHelper from '../../shared/SeverityHelper';\nimport StatusHelper from '../../shared/StatusHelper';\nimport Avatar from '../../ui/Avatar';\n\ninterface Props {\n  issue: T.Issue;\n  onFilter: (property: string, issue: T.Issue) => void;\n}\n\nexport default class SimilarIssuesPopup extends React.PureComponent<Props> {\n  handleSelect = (property: string) => {\n    this.props.onFilter(property, this.props.issue);\n  };\n\n  render() {\n    const { issue } = this.props;\n\n    const items = [\n      'type',\n      'severity',\n      'status',\n      'resolution',\n      'assignee',\n      'rule',\n      ...(issue.tags || []).map(tag => `tag###${tag}`),\n      'project',\n      issue.subProject ? 'module' : undefined,\n      'file'\n    ].filter(item => item) as string[];\n\n    const assignee = issue.assigneeName || issue.assignee;\n\n    return (\n      <DropdownOverlay noPadding={true}>\n        <header className=\"menu-search\">\n          <h6>{translate('issue.filter_similar_issues')}</h6>\n        </header>\n\n        <SelectList\n          className=\"issues-similar-issues-menu\"\n          currentItem={items[0]}\n          items={items}\n          onSelect={this.handleSelect}>\n          <SelectListItem className=\"display-flex-center\" item=\"type\">\n            <IssueTypeIcon className=\"little-spacer-right\" query={issue.type} />\n            {translate('issue.type', issue.type)}\n          </SelectListItem>\n\n          <SelectListItem item=\"severity\">\n            <SeverityHelper className=\"display-flex-center\" severity={issue.severity} />\n          </SelectListItem>\n\n          <SelectListItem item=\"status\">\n            <StatusHelper\n              className=\"display-flex-center\"\n              resolution={undefined}\n              status={issue.status}\n            />\n          </SelectListItem>\n\n          <SelectListItem item=\"resolution\">\n            {issue.resolution != null\n              ? translate('issue.resolution', issue.resolution)\n              : translate('unresolved')}\n          </SelectListItem>\n\n          <SelectListItem item=\"assignee\">\n            {assignee ? (\n              <span>\n                {translate('assigned_to')}\n                <Avatar\n                  className=\"little-spacer-left little-spacer-right\"\n                  hash={issue.assigneeAvatar}\n                  name={assignee}\n                  size={16}\n                />\n                {issue.assigneeActive === false\n                  ? translateWithParameters('user.x_deleted', assignee)\n                  : assignee}\n              </span>\n            ) : (\n              translate('unassigned')\n            )}\n          </SelectListItem>\n\n          <li className=\"divider\" />\n\n          <SelectListItem item=\"rule\">{limitComponentName(issue.ruleName)}</SelectListItem>\n\n          {issue.tags != null &&\n            issue.tags.map(tag => (\n              <SelectListItem item={`tag###${tag}`} key={`tag###${tag}`}>\n                <TagsIcon className=\"icon-half-transparent little-spacer-right text-middle\" />\n                <span className=\"text-middle\">{tag}</span>\n              </SelectListItem>\n            ))}\n\n          <li className=\"divider\" />\n\n          <SelectListItem item=\"project\">\n            <QualifierIcon className=\"little-spacer-right\" qualifier=\"TRK\" />\n            {issue.projectName}\n          </SelectListItem>\n\n          {issue.subProject != null && (\n            <SelectListItem item=\"module\">\n              <QualifierIcon className=\"little-spacer-right\" qualifier=\"BRC\" />\n              {issue.subProjectName}\n            </SelectListItem>\n          )}\n\n          <SelectListItem item=\"file\">\n            <QualifierIcon className=\"little-spacer-right\" qualifier={issue.componentQualifier} />\n            {fileFromPath(issue.componentLongName)}\n          </SelectListItem>\n        </SelectList>\n      </DropdownOverlay>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ButtonLink } from 'sonar-ui-common/components/controls/buttons';\nimport Toggler from 'sonar-ui-common/components/controls/Toggler';\nimport DropdownIcon from 'sonar-ui-common/components/icons/DropdownIcon';\nimport FilterIcon from 'sonar-ui-common/components/icons/FilterIcon';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport SimilarIssuesPopup from '../popups/SimilarIssuesPopup';\n\ninterface Props {\n  isOpen: boolean;\n  issue: T.Issue;\n  togglePopup: (popup: string, show?: boolean) => void;\n  onFilter?: (property: string, issue: T.Issue) => void;\n}\n\nexport default class SimilarIssuesFilter extends React.PureComponent<Props> {\n  handleFilter = (property: string, issue: T.Issue) => {\n    this.togglePopup(false);\n    if (this.props.onFilter) {\n      this.props.onFilter(property, issue);\n    }\n  };\n\n  togglePopup = (open?: boolean) => {\n    this.props.togglePopup('similarIssues', open);\n  };\n\n  handleClose = () => {\n    this.togglePopup(false);\n  };\n\n  render() {\n    return (\n      <div className=\"dropdown\">\n        <Toggler\n          onRequestClose={this.handleClose}\n          open={this.props.isOpen}\n          overlay={<SimilarIssuesPopup issue={this.props.issue} onFilter={this.handleFilter} />}>\n          <ButtonLink\n            aria-label={translate('issue.filter_similar_issues')}\n            className=\"issue-action issue-action-with-options js-issue-filter\"\n            onClick={this.togglePopup}\n            title={translate('issue.filter_similar_issues')}>\n            <FilterIcon className=\"icon-half-transparent\" />\n            <DropdownIcon className=\"icon-half-transparent\" />\n          </ButtonLink>\n        </Toggler>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport Tooltip from 'sonar-ui-common/components/controls/Tooltip';\nimport LinkIcon from 'sonar-ui-common/components/icons/LinkIcon';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { formatMeasure } from 'sonar-ui-common/helpers/measures';\nimport { getBranchLikeQuery } from '../../../helpers/branch-like';\nimport { getComponentIssuesUrl } from '../../../helpers/urls';\nimport { BranchLike } from '../../../types/branch-like';\nimport { RuleStatus } from '../../../types/rules';\nimport LocationIndex from '../../common/LocationIndex';\nimport { WorkspaceContext } from '../../workspace/context';\nimport IssueChangelog from './IssueChangelog';\nimport IssueMessage from './IssueMessage';\nimport SimilarIssuesFilter from './SimilarIssuesFilter';\n\nexport interface IssueTitleBarProps {\n  branchLike?: BranchLike;\n  currentPopup?: string;\n  displayLocationsCount?: boolean;\n  displayLocationsLink?: boolean;\n  issue: T.Issue;\n  onFilter?: (property: string, issue: T.Issue) => void;\n  togglePopup: (popup: string, show?: boolean) => void;\n}\n\nexport default function IssueTitleBar(props: IssueTitleBarProps) {\n  const { issue } = props;\n  const hasSimilarIssuesFilter = props.onFilter != null;\n\n  const locationsCount =\n    issue.secondaryLocations.length +\n    issue.flows.reduce((sum, locations) => sum + locations.length, 0);\n\n  const locationsBadge = (\n    <Tooltip\n      overlay={translateWithParameters(\n        'issue.this_issue_involves_x_code_locations',\n        formatMeasure(locationsCount, 'INT')\n      )}>\n      <LocationIndex>{locationsCount}</LocationIndex>\n    </Tooltip>\n  );\n\n  const displayLocations = props.displayLocationsCount && locationsCount > 0;\n\n  const issueUrl = getComponentIssuesUrl(issue.project, {\n    ...getBranchLikeQuery(props.branchLike),\n    issues: issue.key,\n    open: issue.key,\n    types: issue.type === 'SECURITY_HOTSPOT' ? issue.type : undefined\n  });\n\n  return (\n    <div className=\"issue-row\">\n      <WorkspaceContext.Consumer>\n        {({ externalRulesRepoNames, openRule }) => (\n          <IssueMessage\n            engine={issue.externalRuleEngine}\n            engineName={\n              issue.externalRuleEngine &&\n              externalRulesRepoNames &&\n              externalRulesRepoNames[issue.externalRuleEngine]\n            }\n            manualVulnerability={issue.fromHotspot && issue.type === 'VULNERABILITY'}\n            message={issue.message}\n            onOpenRule={openRule}\n            ruleKey={issue.rule}\n            ruleStatus={issue.ruleStatus as RuleStatus | undefined}\n          />\n        )}\n      </WorkspaceContext.Consumer>\n\n      <div className=\"issue-row-meta\">\n        <ul className=\"issue-meta-list\">\n          <li className=\"issue-meta\">\n            <IssueChangelog\n              creationDate={issue.creationDate}\n              isOpen={props.currentPopup === 'changelog'}\n              issue={issue}\n              togglePopup={props.togglePopup}\n            />\n          </li>\n          {issue.textRange != null && (\n            <li className=\"issue-meta\">\n              <span className=\"issue-meta-label\" title={translate('line_number')}>\n                L{issue.textRange.endLine}\n              </span>\n            </li>\n          )}\n          {displayLocations && (\n            <li className=\"issue-meta\">\n              {props.displayLocationsLink ? (\n                <Link target=\"_blank\" to={issueUrl}>\n                  {locationsBadge}\n                </Link>\n              ) : (\n                locationsBadge\n              )}\n            </li>\n          )}\n          <li className=\"issue-meta\">\n            <Link\n              className=\"js-issue-permalink link-no-underline\"\n              target=\"_blank\"\n              title={translate('permalink')}\n              to={issueUrl}>\n              <LinkIcon />\n            </Link>\n          </li>\n          {hasSimilarIssuesFilter && (\n            <li className=\"issue-meta\">\n              <SimilarIssuesFilter\n                isOpen={props.currentPopup === 'similarIssues'}\n                issue={issue}\n                onFilter={props.onFilter}\n                togglePopup={props.togglePopup}\n              />\n            </li>\n          )}\n        </ul>\n      </div>\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport classNames from 'classnames';\nimport * as React from 'react';\nimport Checkbox from 'sonar-ui-common/components/controls/Checkbox';\nimport { deleteIssueComment, editIssueComment } from '../../api/issues';\nimport { BranchLike } from '../../types/branch-like';\nimport { updateIssue } from './actions';\nimport IssueActionsBar from './components/IssueActionsBar';\nimport IssueCommentLine from './components/IssueCommentLine';\nimport IssueTitleBar from './components/IssueTitleBar';\n\ninterface Props {\n  branchLike?: BranchLike;\n  checked?: boolean;\n  currentPopup?: string;\n  displayLocationsCount?: boolean;\n  displayLocationsLink?: boolean;\n  issue: T.Issue;\n  onAssign: (login: string) => void;\n  onChange: (issue: T.Issue) => void;\n  onCheck?: (issue: string) => void;\n  onClick: (issueKey: string) => void;\n  onFilter?: (property: string, issue: T.Issue) => void;\n  selected: boolean;\n  togglePopup: (popup: string, show: boolean | void) => void;\n}\n\nexport default class IssueView extends React.PureComponent<Props> {\n  handleCheck = () => {\n    if (this.props.onCheck) {\n      this.props.onCheck(this.props.issue.key);\n    }\n  };\n\n  handleClick = (event: React.MouseEvent<HTMLDivElement>) => {\n    if (!isClickable(event.target as HTMLElement) && this.props.onClick) {\n      event.preventDefault();\n      this.props.onClick(this.props.issue.key);\n    }\n  };\n\n  editComment = (comment: string, text: string) => {\n    updateIssue(this.props.onChange, editIssueComment({ comment, text }));\n  };\n\n  deleteComment = (comment: string) => {\n    updateIssue(this.props.onChange, deleteIssueComment({ comment }));\n  };\n\n  render() {\n    const { issue } = this.props;\n\n    const hasCheckbox = this.props.onCheck != null;\n\n    const issueClass = classNames('issue', {\n      hotspot: issue.type === 'SECURITY_HOTSPOT',\n      'issue-with-checkbox': hasCheckbox,\n      selected: this.props.selected\n    });\n\n    return (\n      <div\n        className={issueClass}\n        data-issue={issue.key}\n        onClick={this.handleClick}\n        role=\"listitem\"\n        tabIndex={0}>\n        <IssueTitleBar\n          branchLike={this.props.branchLike}\n          currentPopup={this.props.currentPopup}\n          displayLocationsCount={this.props.displayLocationsCount}\n          displayLocationsLink={this.props.displayLocationsLink}\n          issue={issue}\n          onFilter={this.props.onFilter}\n          togglePopup={this.props.togglePopup}\n        />\n        <IssueActionsBar\n          currentPopup={this.props.currentPopup}\n          issue={issue}\n          onAssign={this.props.onAssign}\n          onChange={this.props.onChange}\n          togglePopup={this.props.togglePopup}\n        />\n        {issue.comments && issue.comments.length > 0 && (\n          <div className=\"issue-comments\">\n            {issue.comments.map(comment => (\n              <IssueCommentLine\n                comment={comment}\n                key={comment.key}\n                onDelete={this.deleteComment}\n                onEdit={this.editComment}\n              />\n            ))}\n          </div>\n        )}\n        {hasCheckbox && (\n          <>\n            <Checkbox\n              checked={this.props.checked || false}\n              className=\"issue-checkbox-container\"\n              onCheck={this.handleCheck}\n            />\n          </>\n        )}\n      </div>\n    );\n  }\n}\n\nfunction isClickable(node: HTMLElement | undefined | null): boolean {\n  if (!node) {\n    return false;\n  }\n  const clickableTags = ['A', 'BUTTON', 'INPUT', 'TEXTAREA'];\n  const tagName = (node.tagName || '').toUpperCase();\n  return clickableTags.includes(tagName) || isClickable(node.parentElement);\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as key from 'keymaster';\nimport * as React from 'react';\nimport { setIssueAssignee } from '../../api/issues';\nimport { BranchLike } from '../../types/branch-like';\nimport { updateIssue } from './actions';\nimport './Issue.css';\nimport IssueView from './IssueView';\n\ninterface Props {\n  branchLike?: BranchLike;\n  checked?: boolean;\n  displayLocationsCount?: boolean;\n  displayLocationsLink?: boolean;\n  issue: T.Issue;\n  onChange: (issue: T.Issue) => void;\n  onCheck?: (issue: string) => void;\n  onClick: (issueKey: string) => void;\n  onFilter?: (property: string, issue: T.Issue) => void;\n  onPopupToggle: (issue: string, popupName: string, open?: boolean) => void;\n  openPopup?: string;\n  selected: boolean;\n}\n\nexport default class Issue extends React.PureComponent<Props> {\n  static defaultProps = {\n    selected: false\n  };\n\n  componentDidMount() {\n    if (this.props.selected) {\n      this.bindShortcuts();\n    }\n  }\n\n  componentWillUpdate(nextProps: Props) {\n    if (!nextProps.selected && this.props.selected) {\n      this.unbindShortcuts();\n    }\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (!prevProps.selected && this.props.selected) {\n      this.bindShortcuts();\n    }\n  }\n\n  componentWillUnmount() {\n    if (this.props.selected) {\n      this.unbindShortcuts();\n    }\n  }\n\n  bindShortcuts() {\n    key('f', 'issues', () => {\n      this.togglePopup('transition');\n      return false;\n    });\n    key('a', 'issues', () => {\n      this.togglePopup('assign');\n      return false;\n    });\n    key('m', 'issues', () => {\n      if (this.props.issue.actions.includes('assign')) {\n        this.handleAssignement('_me');\n      }\n      return false;\n    });\n    key('i', 'issues', () => {\n      this.togglePopup('set-severity');\n      return false;\n    });\n    key('c', 'issues', () => {\n      this.togglePopup('comment');\n      return false;\n    });\n    key('t', 'issues', () => {\n      this.togglePopup('edit-tags');\n      return false;\n    });\n    key('space', 'issues', () => {\n      if (this.props.onCheck) {\n        this.props.onCheck(this.props.issue.key);\n        return false;\n      }\n      return undefined;\n    });\n  }\n\n  unbindShortcuts() {\n    key.unbind('f', 'issues');\n    key.unbind('a', 'issues');\n    key.unbind('m', 'issues');\n    key.unbind('i', 'issues');\n    key.unbind('c', 'issues');\n    key.unbind('space', 'issues');\n    key.unbind('t', 'issues');\n  }\n\n  togglePopup = (popupName: string, open?: boolean) => {\n    this.props.onPopupToggle(this.props.issue.key, popupName, open);\n  };\n\n  handleAssignement = (login: string) => {\n    const { issue } = this.props;\n    if (issue.assignee !== login) {\n      updateIssue(this.props.onChange, setIssueAssignee({ issue: issue.key, assignee: login }));\n    }\n    this.togglePopup('assign', false);\n  };\n\n  render() {\n    return (\n      <IssueView\n        branchLike={this.props.branchLike}\n        checked={this.props.checked}\n        currentPopup={this.props.openPopup}\n        displayLocationsCount={this.props.displayLocationsCount}\n        displayLocationsLink={this.props.displayLocationsLink}\n        issue={this.props.issue}\n        onAssign={this.handleAssignement}\n        onChange={this.props.onChange}\n        onCheck={this.props.onCheck}\n        onClick={this.props.onClick}\n        onFilter={this.props.onFilter}\n        selected={this.props.selected}\n        togglePopup={this.togglePopup}\n      />\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { uniq } from 'lodash';\n\nexport interface Token {\n  className: string;\n  markers: number[];\n  text: string;\n}\n\nconst ISSUE_LOCATION_CLASS = 'source-line-code-issue';\n\nexport function splitByTokens(code: string, rootClassName = ''): Token[] {\n  const container = document.createElement('div');\n  let tokens: Token[] = [];\n  container.innerHTML = code;\n  [].forEach.call(container.childNodes, (node: Element) => {\n    if (node.nodeType === 1) {\n      // ELEMENT NODE\n      const fullClassName = rootClassName ? rootClassName + ' ' + node.className : node.className;\n      const innerTokens = splitByTokens(node.innerHTML, fullClassName);\n      tokens = tokens.concat(innerTokens);\n    }\n    if (node.nodeType === 3 && node.nodeValue) {\n      // TEXT NODE\n      tokens.push({ className: rootClassName, markers: [], text: node.nodeValue });\n    }\n  });\n  return tokens;\n}\n\nexport function highlightSymbol(tokens: Token[], symbol: string): Token[] {\n  const symbolRegExp = new RegExp(`\\\\b${symbol}\\\\b`);\n  return tokens.map(token =>\n    symbolRegExp.test(token.className)\n      ? { ...token, className: `${token.className} highlighted` }\n      : token\n  );\n}\n\n/**\n * Intersect two ranges\n * @param s1 Start position of the first range\n * @param e1 End position of the first range\n * @param s2 Start position of the second range\n * @param e2 End position of the second range\n */\nfunction intersect(s1: number, e1: number, s2: number, e2: number) {\n  return { from: Math.max(s1, s2), to: Math.min(e1, e2) };\n}\n\n/**\n * Get the substring of a string\n * @param str A string\n * @param from \"From\" offset\n * @param to \"To\" offset\n * @param acc Global offset to eliminate\n */\nfunction part(str: string, from: number, to: number, acc: number): string {\n  // we do not want negative number as the first argument of `substr`\n  return from >= acc ? str.substr(from - acc, to - from) : str.substr(0, to - from);\n}\n\n/**\n * Highlight issue locations in the list of tokens\n */\nexport function highlightIssueLocations(\n  tokens: Token[],\n  issueLocations: T.LinearIssueLocation[],\n  rootClassName: string = ISSUE_LOCATION_CLASS\n): Token[] {\n  issueLocations.forEach(location => {\n    const nextTokens: Token[] = [];\n    let acc = 0;\n    let markerAdded = location.line !== location.startLine;\n    tokens.forEach(token => {\n      const x = intersect(acc, acc + token.text.length, location.from, location.to);\n      const p1 = part(token.text, acc, x.from, acc);\n      const p2 = part(token.text, x.from, x.to, acc);\n      const p3 = part(token.text, x.to, acc + token.text.length, acc);\n      if (p1.length) {\n        nextTokens.push({ ...token, text: p1 });\n      }\n      if (p2.length) {\n        const newClassName =\n          token.className.indexOf(rootClassName) === -1\n            ? `${token.className} ${rootClassName}`\n            : token.className;\n        nextTokens.push({\n          className: newClassName,\n          markers:\n            !markerAdded && location.index != null\n              ? uniq([...token.markers, location.index])\n              : token.markers,\n          text: p2\n        });\n        markerAdded = true;\n      }\n      if (p3.length) {\n        nextTokens.push({ ...token, text: p3 });\n      }\n      acc += token.text.length;\n    });\n    tokens = nextTokens.slice();\n  });\n  return tokens;\n}\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar React = require(\"react\");\nvar Icon_1 = require(\"./Icon\");\nfunction ExpandSnippetIcon(_a) {\n    var _b = _a.fill, fill = _b === void 0 ? 'currentColor' : _b, iconProps = __rest(_a, [\"fill\"]);\n    return (React.createElement(Icon_1.default, __assign({}, iconProps),\n        React.createElement(\"g\", { fill: \"none\", fillRule: \"evenodd\" },\n            React.createElement(\"path\", { d: \"M8 1v4H4\", stroke: fill, strokeWidth: \"2\", transform: \"scale(-.83333 -.84583) rotate(45 7.66 -19.75)\" }),\n            React.createElement(\"path\", { d: \"M3 5.78h10v1.7H3z\", fill: fill }),\n            React.createElement(\"path\", { d: \"M7.17 2.4h1.66v5.07H7.17z\", fill: fill }),\n            React.createElement(\"g\", null,\n                React.createElement(\"path\", { d: \"M8.16 1.81V6.1H3.9\", stroke: fill, strokeWidth: \"2\", transform: \"scale(.83333 .84583) rotate(45 -4.2 13.2)\" }),\n                React.createElement(\"path\", { d: \"M13 10.01H3v-1.7h10z\", fill: fill }),\n                React.createElement(\"path\", { d: \"M8.83 13.4H7.17V9.15h1.66z\", fill: fill })))));\n}\nexports.default = ExpandSnippetIcon;\n//# sourceMappingURL=ExpandSnippetIcon.js.map","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./LocationIndex.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".location-index{position:relative;display:inline-block;vertical-align:top;line-height:16px;padding-left:6px;padding-right:6px;border-radius:2px;background-color:#d18582;color:#fff;font-family:Helvetica Neue,Helvetica,Arial,sans-serif;font-size:12px;transition:background-color .3s ease;-webkit-user-select:none;-ms-user-select:none;user-select:none}.location-index.selected{background-color:#a4030f}.location-index.muted{background-color:#cdcdcd}.location-index.is-leading:first-child{margin-left:0}.location-index.is-leading:not(:first-child){margin-left:-22px}.location-index[tabindex]{cursor:pointer}.location-index[tabindex]:hover,a:hover>.location-index{background-color:#a4030f}.location-index[tabindex]:focus{outline:none}.source-line-code-inner .location-index{line-height:16px;margin:1px 4px}.source-line-code-inner .location-index+.location-index{margin-left:0}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport './LocationMessage.css';\n\ninterface Props {\n  children?: React.ReactNode;\n  selected: boolean;\n}\n\nexport default function LocationMessage(props: Props) {\n  return (\n    <div className={classNames('location-message', { selected: props.selected })}>\n      {props.children}\n    </div>\n  );\n}\n","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./LocationMessage.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".location-message{display:inline-block;vertical-align:top;line-height:16px;padding:0 6px;border-radius:2px;background-color:#9e9e9e;color:#fff;font-family:Helvetica Neue,Helvetica,Arial,sans-serif;font-size:12px;text-overflow:ellipsis;overflow:hidden;transition:background-color .3s ease}.location-message.selected{background-color:#475760}.location-index+.location-message{margin-left:4px}.location-index>.location-message{display:none;position:absolute;bottom:calc(100% + 4px);left:0}.location-index:hover>.location-message{display:block}.location-index>.location-message:after{position:absolute;bottom:-5px;left:4px;width:0;height:0;border-top:5px solid #475760;border-left:5px solid transparent;border-right:5px solid transparent;content:\\\"\\\"}.source-line-code .location-message{padding-top:2px;padding-bottom:2px}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./Issue.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".issue{position:relative;padding-top:8px;padding-bottom:8px;background-color:#f2dede;transition:all .3s ease,border 0s ease}.issue.hotspot{background-color:#eeeff4}.issue.selected{box-shadow:none;outline:none;border:2px solid #4b9fd5!important}.issue+.issue,.issue-container+.issue-container{margin-top:5px}.issue.selected+.issue{border-top-color:transparent}.issue-row{display:flex;margin-bottom:5px}.issue-row-meta{flex-grow:0;padding-right:5px;white-space:nowrap}.issue-message{flex-grow:1;padding-left:8px;padding-right:8px;line-height:18px;font-size:13px;font-weight:600;text-overflow:ellipsis}.issue-actions{justify-content:space-between;flex-wrap:wrap;padding-left:8px}.issue-actions,.issue-meta-list{display:flex;align-items:center}.issue-meta{line-height:16px;font-size:12px}.issue-meta+.issue-meta{margin-left:8px}.issue-meta-label{display:inline-block;vertical-align:top;max-width:180px;line-height:16px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.issue-see-rule{border-bottom:none;font-size:12px}.issue-changelog{width:450px;max-height:320px;overflow:auto;white-space:normal}.issue-comments{margin-top:5px;padding-left:8px;font-size:12px}.issue-comment{display:flex}.issue-comment+.issue-comment{margin-top:4px}.issue-comment-author{max-width:130px;font-weight:600;overflow:hidden;text-overflow:ellipsis}.issue-comment-age,.issue-comment-author{flex-shrink:0;line-height:18px;color:#777;white-space:nowrap}.issue-comment-text{flex:1;min-width:0;margin-left:5px;margin-right:5px;line-height:18px;line-height:1.5;overflow:hidden;outline:none;word-break:break-all}.issue-comment-text.markdown pre{float:none;height:auto;margin:0;padding:8px;background-color:#e6e6e6;border:none;border-radius:3px}.issue-comment-text.markdown br~pre{margin-top:8px}.issue-comment-actions{flex-shrink:0;padding-left:5px;line-height:18px;white-space:nowrap}.issue-comment-bubble-popup{width:440px;font-size:12px}.issue-comment-form-text textarea{width:100%;max-width:100%}.issue-comment-form-footer{margin-top:5px;line-height:22px}.issue-comment-form-footer:after,.issue-comment-form-footer:before{display:table;content:\\\"\\\";line-height:0}.issue-comment-form-footer:after{clear:both}.issue-comment-form-actions{float:right}.issue-comment-form-tips{float:left}.issue-with-checkbox{padding-left:24px}.issue-with-checkbox .issue-checkbox-container{display:flex;justify-content:center;align-items:center}.issue-checkbox-container{display:none;position:absolute;width:28px;top:0;bottom:0;left:0;border:none}.issue-checkbox-container:hover{background-color:rgba(0,0,0,.05)}.issue:not(.selected) .location-index{background-color:#999}.issue .menu:not(.issues-similar-issues-menu):not(.issue-changelog){max-height:120px;overflow:auto}.issue .badge-error{background-color:#eec8c8}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","var SetCache = require('./_SetCache'),\n    arrayIncludes = require('./_arrayIncludes'),\n    arrayIncludesWith = require('./_arrayIncludesWith'),\n    arrayMap = require('./_arrayMap'),\n    baseUnary = require('./_baseUnary'),\n    cacheHas = require('./_cacheHas');\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMin = Math.min;\n\n/**\n * The base implementation of methods like `_.intersection`, without support\n * for iteratee shorthands, that accepts an array of arrays to inspect.\n *\n * @private\n * @param {Array} arrays The arrays to inspect.\n * @param {Function} [iteratee] The iteratee invoked per element.\n * @param {Function} [comparator] The comparator invoked per element.\n * @returns {Array} Returns the new array of shared values.\n */\nfunction baseIntersection(arrays, iteratee, comparator) {\n  var includes = comparator ? arrayIncludesWith : arrayIncludes,\n      length = arrays[0].length,\n      othLength = arrays.length,\n      othIndex = othLength,\n      caches = Array(othLength),\n      maxLength = Infinity,\n      result = [];\n\n  while (othIndex--) {\n    var array = arrays[othIndex];\n    if (othIndex && iteratee) {\n      array = arrayMap(array, baseUnary(iteratee));\n    }\n    maxLength = nativeMin(array.length, maxLength);\n    caches[othIndex] = !comparator && (iteratee || (length >= 120 && array.length >= 120))\n      ? new SetCache(othIndex && array)\n      : undefined;\n  }\n  array = arrays[0];\n\n  var index = -1,\n      seen = caches[0];\n\n  outer:\n  while (++index < length && result.length < maxLength) {\n    var value = array[index],\n        computed = iteratee ? iteratee(value) : value;\n\n    value = (comparator || value !== 0) ? value : 0;\n    if (!(seen\n          ? cacheHas(seen, computed)\n          : includes(result, computed, comparator)\n        )) {\n      othIndex = othLength;\n      while (--othIndex) {\n        var cache = caches[othIndex];\n        if (!(cache\n              ? cacheHas(cache, computed)\n              : includes(arrays[othIndex], computed, comparator))\n            ) {\n          continue outer;\n        }\n      }\n      if (seen) {\n        seen.push(computed);\n      }\n      result.push(value);\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseIntersection;\n","var isArrayLikeObject = require('./isArrayLikeObject');\n\n/**\n * Casts `value` to an empty array if it's not an array like object.\n *\n * @private\n * @param {*} value The value to inspect.\n * @returns {Array|Object} Returns the cast array-like object.\n */\nfunction castArrayLikeObject(value) {\n  return isArrayLikeObject(value) ? value : [];\n}\n\nmodule.exports = castArrayLikeObject;\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nconst LINES_ABOVE = 5;\nconst LINES_BELOW = 5;\nexport const MERGE_DISTANCE = 11; // Merge if snippets are eleven lines away (separated by 10 lines) or fewer\nexport const LINES_BELOW_ISSUE = 9;\nexport const EXPAND_BY_LINES = 50;\n\nfunction unknownComponent(key: string): T.SnippetsByComponent {\n  return {\n    component: {\n      key,\n      measures: {},\n      path: '',\n      project: '',\n      projectName: '',\n      q: 'FIL',\n      uuid: ''\n    },\n    sources: []\n  };\n}\n\nfunction collision([startA, endA]: number[], [startB, endB]: number[]) {\n  return !(startA > endB + MERGE_DISTANCE || endA < startB - MERGE_DISTANCE);\n}\n\nexport function getPrimaryLocation(issue: T.Issue): T.FlowLocation {\n  return {\n    component: issue.component,\n    textRange: issue.textRange || {\n      endLine: 0,\n      endOffset: 0,\n      startLine: 0,\n      startOffset: 0\n    }\n  };\n}\n\nfunction addLinesBellow(params: { issue: T.Issue; locationEnd: number }) {\n  const { issue, locationEnd } = params;\n  const issueEndLine = (issue.textRange && issue.textRange.endLine) || 0;\n\n  if (!issueEndLine || issueEndLine === locationEnd) {\n    return locationEnd + LINES_BELOW_ISSUE;\n  }\n\n  return locationEnd + LINES_BELOW;\n}\n\nexport function createSnippets(params: {\n  component: string;\n  issue: T.Issue;\n  locations: T.FlowLocation[];\n}): T.Snippet[] {\n  const { component, issue, locations } = params;\n\n  const hasSecondaryLocations = issue.secondaryLocations.length > 0;\n  const addIssueLocation =\n    hasSecondaryLocations && issue.component === component && issue.textRange !== undefined;\n\n  // For each location: compute its range, and then compare with other ranges\n  // to merge snippets that collide.\n  const ranges = (addIssueLocation ? [getPrimaryLocation(issue), ...locations] : locations).reduce(\n    (snippets: T.Snippet[], loc, index) => {\n      const startIndex = Math.max(1, loc.textRange.startLine - LINES_ABOVE);\n      const endIndex = addLinesBellow({ issue, locationEnd: loc.textRange.endLine });\n\n      let firstCollision: { start: number; end: number } | undefined;\n\n      // Remove ranges that collide into the first collision\n      snippets = snippets.filter(snippet => {\n        if (collision([snippet.start, snippet.end], [startIndex, endIndex])) {\n          let keep = false;\n          // Check if we've already collided\n          if (!firstCollision) {\n            firstCollision = snippet;\n            keep = true;\n          }\n          // Merge with first collision:\n          firstCollision.start = Math.min(startIndex, snippet.start, firstCollision.start);\n          firstCollision.end = Math.max(endIndex, snippet.end, firstCollision.end);\n\n          // remove the range if it was not the first collision\n          return keep;\n        }\n        return true;\n      });\n\n      if (firstCollision === undefined) {\n        snippets.push({\n          start: startIndex,\n          end: endIndex,\n          index\n        });\n      }\n\n      return snippets;\n    },\n    []\n  );\n\n  // Sort snippets by line number in the case of secondary locations\n  // Preserve location order for flows!\n  return hasSecondaryLocations ? ranges.sort((a, b) => a.start - b.start) : ranges;\n}\n\nexport function linesForSnippets(snippets: T.Snippet[], componentLines: T.LineMap) {\n  return snippets\n    .map(snippet => {\n      const lines = [];\n      for (let i = snippet.start; i <= snippet.end; i++) {\n        if (componentLines[i]) {\n          lines.push(componentLines[i]);\n        }\n      }\n      return lines;\n    })\n    .filter(snippet => snippet.length > 0);\n}\n\nexport function groupLocationsByComponent(\n  issue: T.Issue,\n  locations: T.FlowLocation[],\n  components: { [key: string]: T.SnippetsByComponent }\n) {\n  let currentComponent = '';\n  let currentGroup: T.SnippetGroup;\n  const groups: T.SnippetGroup[] = [];\n\n  const addGroup = (componentKey: string) => {\n    currentGroup = {\n      ...(components[componentKey] || unknownComponent(componentKey)),\n      locations: []\n    };\n    groups.push(currentGroup);\n    currentComponent = componentKey;\n  };\n\n  if (\n    issue.secondaryLocations.length > 0 &&\n    locations.every(loc => loc.component !== issue.component)\n  ) {\n    addGroup(issue.component);\n  }\n\n  locations.forEach((loc, index) => {\n    if (loc.component !== currentComponent) {\n      addGroup(loc.component);\n    }\n    loc.index = index;\n    currentGroup.locations.push(loc);\n  });\n\n  return groups;\n}\n\nexport function expandSnippet({\n  direction,\n  snippetIndex,\n  snippets\n}: {\n  direction: T.ExpandDirection;\n  snippetIndex: number;\n  snippets: T.Snippet[];\n}) {\n  const snippetToExpand = snippets.find(s => s.index === snippetIndex);\n  if (!snippetToExpand) {\n    throw new Error(`Snippet ${snippetIndex} not found`);\n  }\n\n  snippetToExpand.start = Math.max(\n    0,\n    snippetToExpand.start - (direction === 'up' ? EXPAND_BY_LINES : 0)\n  );\n  snippetToExpand.end += direction === 'down' ? EXPAND_BY_LINES : 0;\n\n  return snippets.map(snippet => {\n    if (snippet.index === snippetIndex) {\n      return snippetToExpand;\n    }\n    if (collision([snippet.start, snippet.end], [snippetToExpand.start, snippetToExpand.end])) {\n      // Merge with expanded snippet\n      snippetToExpand.start = Math.min(snippet.start, snippetToExpand.start);\n      snippetToExpand.end = Math.max(snippet.end, snippetToExpand.end);\n      snippet.toDelete = true;\n    }\n    return snippet;\n  });\n}\n\nexport function inSnippet(line: number, snippet: T.SourceLine[]) {\n  return line >= snippet[0].line && line <= snippet[snippet.length - 1].line;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport { ButtonIcon } from 'sonar-ui-common/components/controls/buttons';\nimport { ClipboardIconButton } from 'sonar-ui-common/components/controls/clipboard';\nimport ExpandSnippetIcon from 'sonar-ui-common/components/icons/ExpandSnippetIcon';\nimport QualifierIcon from 'sonar-ui-common/components/icons/QualifierIcon';\nimport DeferredSpinner from 'sonar-ui-common/components/ui/DeferredSpinner';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { collapsedDirFromPath, fileFromPath } from 'sonar-ui-common/helpers/path';\nimport { getPathUrlAsString } from 'sonar-ui-common/helpers/urls';\nimport { getBranchLikeQuery } from '../../helpers/branch-like';\nimport { getBranchLikeUrl, getComponentIssuesUrl } from '../../helpers/urls';\nimport { BranchLike } from '../../types/branch-like';\nimport { ComponentQualifier } from '../../types/component';\nimport './SourceViewerHeaderSlim.css';\n\nexport interface Props {\n  branchLike: BranchLike | undefined;\n  expandable?: boolean;\n  displayProjectName?: boolean;\n  linkToProject?: boolean;\n  loading?: boolean;\n  onExpand?: () => void;\n  sourceViewerFile: T.SourceViewerFile;\n}\n\nexport default function SourceViewerHeaderSlim(props: Props) {\n  const {\n    branchLike,\n    expandable,\n    displayProjectName = true,\n    linkToProject = true,\n    loading,\n    onExpand,\n    sourceViewerFile\n  } = props;\n  const { measures, path, project, projectName, q, subProject, subProjectName } = sourceViewerFile;\n\n  const projectNameLabel = (\n    <>\n      <QualifierIcon qualifier={ComponentQualifier.Project} /> <span>{projectName}</span>\n    </>\n  );\n\n  return (\n    <div className=\"source-viewer-header-slim display-flex-row display-flex-space-between\">\n      <div className=\"display-flex-center flex-1\">\n        {displayProjectName && (\n          <div className=\"spacer-right\">\n            {linkToProject ? (\n              <a\n                className=\"link-with-icon\"\n                href={getPathUrlAsString(getBranchLikeUrl(project, branchLike))}>\n                {projectNameLabel}\n              </a>\n            ) : (\n              projectNameLabel\n            )}\n          </div>\n        )}\n\n        {subProject !== undefined && (\n          <>\n            <QualifierIcon qualifier={ComponentQualifier.SubProject} />{' '}\n            <span className=\"spacer-right\">{subProjectName}</span>\n          </>\n        )}\n\n        <div className=\"spacer-right\">\n          <QualifierIcon qualifier={q} /> <span>{collapsedDirFromPath(path)}</span>\n          <span className=\"component-name-file\">{fileFromPath(path)}</span>\n        </div>\n\n        <div className=\"spacer-right\">\n          <ClipboardIconButton className=\"button-link link-no-underline\" copyValue={path} />\n        </div>\n      </div>\n\n      {measures.issues !== undefined && (\n        <div\n          className={classNames('flex-0 big-spacer-left', {\n            'little-spacer-right': !expandable || loading\n          })}>\n          <Link\n            to={getComponentIssuesUrl(project, {\n              ...getBranchLikeQuery(branchLike),\n              files: path,\n              resolved: 'false'\n            })}>\n            {translate('source_viewer.view_all_issues')}\n          </Link>\n        </div>\n      )}\n\n      {expandable && (\n        <DeferredSpinner className=\"little-spacer-right\" loading={loading}>\n          <div className=\"flex-0 big-spacer-left\">\n            <ButtonIcon className=\"js-actions\" onClick={onExpand}>\n              <ExpandSnippetIcon />\n            </ButtonIcon>\n          </div>\n        </DeferredSpinner>\n      )}\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { intersection } from 'lodash';\n\nexport function optimizeHighlightedSymbols(\n  symbolsForLine: string[] = [],\n  highlightedSymbols: string[] = []\n): string[] | undefined {\n  const symbols = intersection(symbolsForLine, highlightedSymbols);\n\n  return symbols.length ? symbols : undefined;\n}\n\nexport function optimizeLocationMessage(\n  highlightedLocationMessage: { index: number; text: string | undefined } | undefined,\n  optimizedSecondaryIssueLocations: T.LinearIssueLocation[]\n) {\n  return highlightedLocationMessage != null &&\n    optimizedSecondaryIssueLocations.some(\n      location => location.index === highlightedLocationMessage.index\n    )\n    ? highlightedLocationMessage\n    : undefined;\n}\n\nexport function optimizeSelectedIssue(selectedIssue: string | undefined, issuesForLine: T.Issue[]) {\n  return selectedIssue !== undefined && issuesForLine.find(issue => issue.key === selectedIssue)\n    ? selectedIssue\n    : undefined;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { BranchLike } from '../../../types/branch-like';\nimport Issue from '../../issue/Issue';\n\ninterface Props {\n  branchLike: BranchLike | undefined;\n  displayIssueLocationsCount?: boolean;\n  displayIssueLocationsLink?: boolean;\n  issuePopup: { issue: string; name: string } | undefined;\n  issues: T.Issue[];\n  onIssueChange: (issue: T.Issue) => void;\n  onIssueClick: (issueKey: string) => void;\n  onIssuePopupToggle: (issue: string, popupName: string, open?: boolean) => void;\n  selectedIssue: string | undefined;\n}\n\nexport default function LineIssuesList(props: Props) {\n  const { issuePopup } = props;\n\n  return (\n    <div className=\"issue-list\">\n      {props.issues.map(issue => (\n        <Issue\n          branchLike={props.branchLike}\n          displayLocationsCount={props.displayIssueLocationsCount}\n          displayLocationsLink={props.displayIssueLocationsLink}\n          issue={issue}\n          key={issue.key}\n          onChange={props.onIssueChange}\n          onClick={props.onIssueClick}\n          onPopupToggle={props.onIssuePopupToggle}\n          openPopup={issuePopup && issuePopup.issue === issue.key ? issuePopup.name : undefined}\n          selected={props.selectedIssue === issue.key}\n        />\n      ))}\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport { BranchLike } from '../../../types/branch-like';\nimport LocationIndex from '../../common/LocationIndex';\nimport LocationMessage from '../../common/LocationMessage';\nimport {\n  highlightIssueLocations,\n  highlightSymbol,\n  splitByTokens,\n  Token\n} from '../helpers/highlight';\nimport LineIssuesList from './LineIssuesList';\n\ninterface Props {\n  branchLike: BranchLike | undefined;\n  displayIssueLocationsCount?: boolean;\n  displayIssueLocationsLink?: boolean;\n  displayLocationMarkers?: boolean;\n  highlightedLocationMessage: { index: number; text: string | undefined } | undefined;\n  highlightedSymbols: string[] | undefined;\n  issueLocations: T.LinearIssueLocation[];\n  issuePopup: { issue: string; name: string } | undefined;\n  issues: T.Issue[];\n  line: T.SourceLine;\n  onIssueChange: (issue: T.Issue) => void;\n  onIssuePopupToggle: (issue: string, popupName: string, open?: boolean) => void;\n  onIssueSelect: (issueKey: string) => void;\n  onLocationSelect: ((index: number) => void) | undefined;\n  onSymbolClick: (symbols: Array<string>) => void;\n  padding?: number;\n  scroll?: (element: HTMLElement) => void;\n  secondaryIssueLocations: T.LinearIssueLocation[];\n  selectedIssue: string | undefined;\n  showIssues?: boolean;\n}\n\ninterface State {\n  tokens: Token[];\n}\n\nexport default class LineCode extends React.PureComponent<Props, State> {\n  activeMarkerNode?: HTMLElement | null;\n  codeNode?: HTMLElement | null;\n  symbols?: NodeListOf<HTMLElement>;\n\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      tokens: splitByTokens(props.line.code || '')\n    };\n  }\n\n  componentDidMount() {\n    this.attachEvents();\n    if (this.props.highlightedLocationMessage && this.activeMarkerNode && this.props.scroll) {\n      this.props.scroll(this.activeMarkerNode);\n    }\n  }\n\n  componentWillReceiveProps(nextProps: Props) {\n    if (nextProps.line.code !== this.props.line.code) {\n      this.setState({\n        tokens: splitByTokens(nextProps.line.code || '')\n      });\n    }\n  }\n\n  componentWillUpdate() {\n    this.detachEvents();\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    this.attachEvents();\n    if (\n      this.props.highlightedLocationMessage &&\n      (!prevProps.highlightedLocationMessage ||\n        prevProps.highlightedLocationMessage.index !==\n          this.props.highlightedLocationMessage.index) &&\n      this.activeMarkerNode &&\n      this.props.scroll\n    ) {\n      this.props.scroll(this.activeMarkerNode);\n    }\n  }\n\n  componentWillUnmount() {\n    this.detachEvents();\n  }\n\n  attachEvents() {\n    if (this.codeNode) {\n      this.symbols = this.codeNode.querySelectorAll('.sym');\n      if (this.symbols) {\n        for (let i = 0; i < this.symbols.length; i++) {\n          const symbol = this.symbols[i];\n          symbol.addEventListener('click', this.handleSymbolClick);\n        }\n      }\n    }\n  }\n\n  detachEvents() {\n    if (this.symbols) {\n      for (let i = 0; i < this.symbols.length; i++) {\n        const symbol = this.symbols[i];\n        symbol.addEventListener('click', this.handleSymbolClick);\n      }\n    }\n  }\n\n  handleSymbolClick = (event: MouseEvent) => {\n    event.preventDefault();\n    const keys = (event.currentTarget as HTMLElement).className.match(/sym-\\d+/g);\n    if (keys && keys.length > 0) {\n      this.props.onSymbolClick(keys);\n    }\n  };\n\n  renderMarker(index: number, message: string | undefined, selected: boolean, leading: boolean) {\n    const { onLocationSelect } = this.props;\n    const onClick = onLocationSelect ? () => onLocationSelect(index) : undefined;\n    const ref = selected ? (node: HTMLElement | null) => (this.activeMarkerNode = node) : undefined;\n    return (\n      <LocationIndex\n        key={`marker-${index}`}\n        leading={leading}\n        onClick={onClick}\n        selected={selected}>\n        <span ref={ref}>{index + 1}</span>\n        {message && <LocationMessage selected={true}>{message}</LocationMessage>}\n      </LocationIndex>\n    );\n  }\n\n  render() {\n    const {\n      highlightedLocationMessage,\n      highlightedSymbols,\n      issues,\n      issueLocations,\n      line,\n      onIssueSelect,\n      padding,\n      secondaryIssueLocations,\n      selectedIssue,\n      showIssues\n    } = this.props;\n\n    let tokens = [...this.state.tokens];\n\n    if (highlightedSymbols) {\n      highlightedSymbols.forEach(symbol => {\n        tokens = highlightSymbol(tokens, symbol);\n      });\n    }\n\n    if (issueLocations.length > 0) {\n      tokens = highlightIssueLocations(tokens, issueLocations);\n    }\n\n    if (secondaryIssueLocations) {\n      tokens = highlightIssueLocations(tokens, secondaryIssueLocations, 'issue-location');\n\n      if (highlightedLocationMessage) {\n        const location = secondaryIssueLocations.find(\n          location => location.index === highlightedLocationMessage.index\n        );\n        if (location) {\n          tokens = highlightIssueLocations(tokens, [location], 'selected');\n        }\n      }\n    }\n\n    const className = classNames('source-line-code', 'code', {\n      'has-issues': issues.length > 0\n    });\n\n    const renderedTokens: React.ReactNode[] = [];\n\n    // track if the first marker is displayed before the source code\n    // set `false` for the first token in a row\n    let leadingMarker = false;\n\n    tokens.forEach((token, index) => {\n      if (this.props.displayLocationMarkers && token.markers.length > 0) {\n        token.markers.forEach(marker => {\n          const selected =\n            highlightedLocationMessage !== undefined && highlightedLocationMessage.index === marker;\n          const loc = secondaryIssueLocations.find(loc => loc.index === marker);\n          const message = loc && loc.text;\n          renderedTokens.push(this.renderMarker(marker, message, selected, leadingMarker));\n        });\n      }\n      renderedTokens.push(\n        <span className={token.className} key={index}>\n          {token.text}\n        </span>\n      );\n\n      // keep leadingMarker truthy if previous token has only whitespaces\n      leadingMarker = (index === 0 ? true : leadingMarker) && !token.text.trim().length;\n    });\n\n    const style = padding ? { paddingBottom: `${padding}px` } : undefined;\n    const filteredSelectedIssues = issues.filter(i => i.key === selectedIssue);\n\n    return (\n      <td className={className} data-line-number={line.line} style={style}>\n        <div className=\"source-line-code-inner\">\n          <pre ref={node => (this.codeNode = node)}>{renderedTokens}</pre>\n        </div>\n        {showIssues && issues.length > 0 && (\n          <LineIssuesList\n            branchLike={this.props.branchLike}\n            displayIssueLocationsCount={this.props.displayIssueLocationsCount}\n            displayIssueLocationsLink={this.props.displayIssueLocationsLink}\n            issuePopup={this.props.issuePopup}\n            issues={issues}\n            onIssueChange={this.props.onIssueChange}\n            onIssueClick={onIssueSelect}\n            onIssuePopupToggle={this.props.onIssuePopupToggle}\n            selectedIssue={selectedIssue}\n          />\n        )}\n        {selectedIssue && !showIssues && (\n          <LineIssuesList\n            branchLike={this.props.branchLike}\n            issuePopup={this.props.issuePopup}\n            issues={filteredSelectedIssues}\n            onIssueChange={this.props.onIssueChange}\n            onIssueClick={onIssueSelect}\n            onIssuePopupToggle={this.props.onIssuePopupToggle}\n            selectedIssue={selectedIssue}\n          />\n        )}\n      </td>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Tooltip from 'sonar-ui-common/components/controls/Tooltip';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\n\nexport interface LineCoverageProps {\n  line: T.SourceLine;\n}\n\nexport function LineCoverage({ line }: LineCoverageProps) {\n  const className =\n    'source-meta source-line-coverage' +\n    (line.coverageStatus != null ? ` source-line-${line.coverageStatus}` : '');\n  const status = getStatusTooltip(line);\n\n  return (\n    <td className={className} data-line-number={line.line}>\n      <Tooltip overlay={status} placement=\"right\">\n        <div aria-label={status} className=\"source-line-bar\" />\n      </Tooltip>\n    </td>\n  );\n}\n\nfunction getStatusTooltip(line: T.SourceLine) {\n  if (line.coverageStatus === 'uncovered') {\n    if (line.conditions) {\n      return translateWithParameters('source_viewer.tooltip.uncovered.conditions', line.conditions);\n    } else {\n      return translate('source_viewer.tooltip.uncovered');\n    }\n  } else if (line.coverageStatus === 'covered') {\n    if (line.conditions) {\n      return translateWithParameters('source_viewer.tooltip.covered.conditions', line.conditions);\n    } else {\n      return translate('source_viewer.tooltip.covered');\n    }\n  } else if (line.coverageStatus === 'partially-covered') {\n    if (line.conditions) {\n      return translateWithParameters(\n        'source_viewer.tooltip.partially-covered.conditions',\n        line.coveredConditions || 0,\n        line.conditions\n      );\n    } else {\n      return translate('source_viewer.tooltip.partially-covered');\n    }\n  }\n  return undefined;\n}\n\nexport default React.memo(LineCoverage);\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport { DropdownOverlay } from 'sonar-ui-common/components/controls/Dropdown';\nimport Toggler from 'sonar-ui-common/components/controls/Toggler';\nimport Tooltip from 'sonar-ui-common/components/controls/Tooltip';\nimport { PopupPlacement } from 'sonar-ui-common/components/ui/popups';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\n\nexport interface LineDuplicationBlockProps {\n  blocksLoaded: boolean;\n  duplicated: boolean;\n  index: number;\n  line: T.SourceLine;\n  onClick?: (line: T.SourceLine) => void;\n  renderDuplicationPopup: (index: number, line: number) => React.ReactNode;\n}\n\nexport function LineDuplicationBlock(props: LineDuplicationBlockProps) {\n  const { blocksLoaded, duplicated, index, line } = props;\n  const [dropdownOpen, setDropdownOpen] = React.useState(false);\n\n  const className = classNames('source-meta', 'source-line-duplications', {\n    'source-line-duplicated': duplicated\n  });\n\n  return duplicated ? (\n    <td className={className} data-index={index} data-line-number={line.line}>\n      <Tooltip\n        overlay={dropdownOpen ? undefined : translate('source_viewer.tooltip.duplicated_block')}\n        placement=\"right\">\n        <div>\n          <Toggler\n            onRequestClose={() => setDropdownOpen(false)}\n            open={dropdownOpen}\n            overlay={\n              <DropdownOverlay placement={PopupPlacement.RightTop}>\n                {props.renderDuplicationPopup(index, line.line)}\n              </DropdownOverlay>\n            }>\n            <div\n              aria-label={translate('source_viewer.tooltip.duplicated_block')}\n              className=\"source-line-bar\"\n              onClick={() => {\n                setDropdownOpen(true);\n                if (!blocksLoaded && line.duplicated && props.onClick) {\n                  props.onClick(line);\n                }\n              }}\n              role=\"button\"\n              tabIndex={0}\n            />\n          </Toggler>\n        </div>\n      </Tooltip>\n    </td>\n  ) : (\n    <td className={className} data-index={index} data-line-number={line.line}>\n      <div className=\"source-line-bar\" />\n    </td>\n  );\n}\n\nexport default React.memo(LineDuplicationBlock);\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport { uniq } from 'lodash';\nimport * as React from 'react';\nimport Tooltip from 'sonar-ui-common/components/controls/Tooltip';\nimport IssueIcon from 'sonar-ui-common/components/icons/IssueIcon';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { sortByType } from '../../../helpers/issues';\n\nexport interface LineIssuesIndicatorProps {\n  issues: T.Issue[];\n  issuesOpen?: boolean;\n  line: T.SourceLine;\n  onClick: () => void;\n}\n\nexport function LineIssuesIndicator(props: LineIssuesIndicatorProps) {\n  const { issues, issuesOpen, line } = props;\n  const hasIssues = issues.length > 0;\n  const className = classNames('source-meta', 'source-line-issues', {\n    'source-line-with-issues': hasIssues\n  });\n\n  if (!hasIssues) {\n    return <td className={className} data-line-number={line.line} />;\n  }\n\n  const mostImportantIssue = sortByType(issues)[0];\n  const issueTypes = uniq(issues.map(i => i.type));\n\n  let tooltipContent;\n  if (issueTypes.length > 1) {\n    tooltipContent = translate('source_viewer.issues_on_line.multiple_issues');\n  } else if (issues.length === 1) {\n    tooltipContent = translateWithParameters(\n      'source_viewer.issues_on_line.issue_of_type_X',\n      translate('issue.type', mostImportantIssue.type)\n    );\n  } else {\n    tooltipContent = translateWithParameters(\n      'source_viewer.issues_on_line.X_issues_of_type_Y',\n      issues.length,\n      translate('issue.type', mostImportantIssue.type, 'plural')\n    );\n  }\n\n  return (\n    <td className={className} data-line-number={line.line}>\n      <span\n        aria-label={translate('source_viewer.issues_on_line', issuesOpen ? 'hide' : 'show')}\n        onClick={(e: React.MouseEvent<HTMLElement>) => {\n          e.preventDefault();\n          e.currentTarget.blur();\n          props.onClick();\n        }}\n        role=\"button\"\n        tabIndex={0}>\n        <Tooltip overlay={tooltipContent}>\n          <IssueIcon type={mostImportantIssue.type} />\n        </Tooltip>\n        {issues.length > 1 && <span className=\"source-line-issues-counter\">{issues.length}</span>}\n      </span>\n    </td>\n  );\n}\n\nexport default React.memo(LineIssuesIndicator);\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { getCodeUrl } from '../../../helpers/urls';\nimport { SourceViewerContext } from '../SourceViewerContext';\n\ninterface LineOptionsPopupProps {\n  line: T.SourceLine;\n}\n\nexport function LineOptionsPopup({ line }: LineOptionsPopupProps) {\n  return (\n    <SourceViewerContext.Consumer>\n      {({ branchLike, file }) => (\n        <div className=\"source-viewer-bubble-popup nowrap\">\n          <Link\n            className=\"js-get-permalink\"\n            rel=\"noopener noreferrer\"\n            target=\"_blank\"\n            to={getCodeUrl(file.project, branchLike, file.key, line.line)}>\n            {translate('component_viewer.get_permalink')}\n          </Link>\n        </div>\n      )}\n    </SourceViewerContext.Consumer>\n  );\n}\n\nexport default React.memo(LineOptionsPopup);\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Dropdown from 'sonar-ui-common/components/controls/Dropdown';\nimport { PopupPlacement } from 'sonar-ui-common/components/ui/popups';\nimport { translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport LineOptionsPopup from './LineOptionsPopup';\n\nexport interface LineNumberProps {\n  line: T.SourceLine;\n}\n\nexport function LineNumber({ line }: LineNumberProps) {\n  const { line: lineNumber } = line;\n  const hasLineNumber = !!lineNumber;\n  return hasLineNumber ? (\n    <td className=\"source-meta source-line-number\" data-line-number={lineNumber}>\n      <Dropdown\n        overlay={<LineOptionsPopup line={line} />}\n        overlayPlacement={PopupPlacement.RightTop}>\n        <span\n          aria-label={translateWithParameters('source_viewer.line_X', lineNumber)}\n          role=\"button\">\n          {lineNumber}\n        </span>\n      </Dropdown>\n    </td>\n  ) : (\n    <td className=\"source-meta source-line-number\" />\n  );\n}\n\nexport default React.memo(LineNumber);\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport DateFormatter from 'sonar-ui-common/components/intl/DateFormatter';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\n\nexport interface SCMPopupProps {\n  line: T.SourceLine;\n}\n\nexport function SCMPopup({ line }: SCMPopupProps) {\n  const hasAuthor = line.scmAuthor !== undefined && line.scmAuthor !== '';\n  const hasDate = line.scmDate !== undefined;\n  return (\n    <div className=\"source-viewer-bubble-popup abs-width-400\">\n      {hasAuthor && (\n        <div>\n          <h4>{translate('author')}</h4>\n          {line.scmAuthor}\n        </div>\n      )}\n      {hasDate && (\n        <div className={classNames({ 'spacer-top': hasAuthor })}>\n          <h4>{translate('source_viewer.tooltip.scm.commited_on')}</h4>\n          <DateFormatter date={line.scmDate!} />\n        </div>\n      )}\n      {line.scmRevision && (\n        <div className={classNames({ 'spacer-top': hasAuthor || hasDate })}>\n          <h4>{translate('source_viewer.tooltip.scm.revision')}</h4>\n          {line.scmRevision}\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default React.memo(SCMPopup);\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Dropdown from 'sonar-ui-common/components/controls/Dropdown';\nimport { PopupPlacement } from 'sonar-ui-common/components/ui/popups';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport SCMPopup from './SCMPopup';\n\nexport interface LineSCMProps {\n  line: T.SourceLine;\n  previousLine: T.SourceLine | undefined;\n}\n\nexport function LineSCM({ line, previousLine }: LineSCMProps) {\n  const hasPopup = !!line.line;\n  const cell = (\n    <div className=\"source-line-scm-inner\">\n      {isSCMChanged(line, previousLine) ? line.scmAuthor || '…' : ' '}\n    </div>\n  );\n\n  if (hasPopup) {\n    let ariaLabel = translate('source_viewer.click_for_scm_info');\n    if (line.scmAuthor) {\n      ariaLabel = `${translateWithParameters(\n        'source_viewer.author_X',\n        line.scmAuthor\n      )}, ${ariaLabel}`;\n    }\n\n    return (\n      <td className=\"source-meta source-line-scm\" data-line-number={line.line}>\n        <Dropdown overlay={<SCMPopup line={line} />} overlayPlacement={PopupPlacement.RightTop}>\n          <div aria-label={ariaLabel} role=\"button\">\n            {cell}\n          </div>\n        </Dropdown>\n      </td>\n    );\n  } else {\n    return (\n      <td className=\"source-meta source-line-scm\" data-line-number={line.line}>\n        {cell}\n      </td>\n    );\n  }\n}\n\nfunction isSCMChanged(s: T.SourceLine, p: T.SourceLine | undefined) {\n  let changed = true;\n  if (p != null && s.scmRevision != null && p.scmRevision != null) {\n    changed = s.scmRevision !== p.scmRevision || s.scmDate !== p.scmDate;\n  }\n  return changed;\n}\n\nexport default React.memo(LineSCM);\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport { times } from 'lodash';\nimport * as React from 'react';\nimport { BranchLike } from '../../../types/branch-like';\nimport './Line.css';\nimport LineCode from './LineCode';\nimport LineCoverage from './LineCoverage';\nimport LineDuplicationBlock from './LineDuplicationBlock';\nimport LineIssuesIndicator from './LineIssuesIndicator';\nimport LineNumber from './LineNumber';\nimport LineSCM from './LineSCM';\n\ninterface Props {\n  branchLike: BranchLike | undefined;\n  displayAllIssues?: boolean;\n  displayCoverage: boolean;\n  displayDuplications: boolean;\n  displayIssueLocationsCount?: boolean;\n  displayIssueLocationsLink?: boolean;\n  displayIssues: boolean;\n  displayLocationMarkers?: boolean;\n  displaySCM?: boolean;\n  duplications: number[];\n  duplicationsCount: number;\n  highlighted: boolean;\n  highlightedLocationMessage: { index: number; text: string | undefined } | undefined;\n  highlightedSymbols: string[] | undefined;\n  issueLocations: T.LinearIssueLocation[];\n  issuePopup: { issue: string; name: string } | undefined;\n  issues: T.Issue[];\n  last: boolean;\n  line: T.SourceLine;\n  loadDuplications: (line: T.SourceLine) => void;\n  onIssueChange: (issue: T.Issue) => void;\n  onIssuePopupToggle: (issueKey: string, popupName: string, open?: boolean) => void;\n  onIssuesClose: (line: T.SourceLine) => void;\n  onIssueSelect: (issueKey: string) => void;\n  onIssuesOpen: (line: T.SourceLine) => void;\n  onIssueUnselect: () => void;\n  onLocationSelect: ((x: number) => void) | undefined;\n  onSymbolClick: (symbols: string[]) => void;\n  openIssues: boolean;\n  previousLine: T.SourceLine | undefined;\n  renderDuplicationPopup: (index: number, line: number) => React.ReactNode;\n  scroll?: (element: HTMLElement) => void;\n  secondaryIssueLocations: T.LinearIssueLocation[];\n  selectedIssue: string | undefined;\n  verticalBuffer?: number;\n}\n\nconst LINE_HEIGHT = 18;\n\nexport default class Line extends React.PureComponent<Props> {\n  handleIssuesIndicatorClick = () => {\n    if (this.props.openIssues) {\n      this.props.onIssuesClose(this.props.line);\n      this.props.onIssueUnselect();\n    } else {\n      this.props.onIssuesOpen(this.props.line);\n\n      const { issues } = this.props;\n      if (issues.length > 0) {\n        this.props.onIssueSelect(issues[0].key);\n      }\n    }\n  };\n\n  render() {\n    const {\n      branchLike,\n      displayAllIssues,\n      displayCoverage,\n      displayDuplications,\n      displayIssueLocationsCount,\n      displayIssueLocationsLink,\n      displayLocationMarkers,\n      highlightedLocationMessage,\n      displayIssues,\n      displaySCM = true,\n      duplications,\n      duplicationsCount,\n      highlighted,\n      highlightedSymbols,\n      issueLocations,\n      issuePopup,\n      issues,\n      last,\n      line,\n      openIssues,\n      previousLine,\n      secondaryIssueLocations,\n      selectedIssue,\n      verticalBuffer\n    } = this.props;\n\n    const className = classNames('source-line', {\n      'source-line-highlighted': highlighted,\n      'source-line-filtered': line.isNew,\n      'source-line-filtered-dark':\n        displayCoverage &&\n        (line.coverageStatus === 'uncovered' || line.coverageStatus === 'partially-covered'),\n      'source-line-last': last === true\n    });\n\n    const bottomPadding = verticalBuffer ? verticalBuffer * LINE_HEIGHT : undefined;\n\n    return (\n      <tr className={className} data-line-number={line.line}>\n        <LineNumber line={line} />\n\n        {displaySCM && <LineSCM line={line} previousLine={previousLine} />}\n        {displayIssues && !displayAllIssues ? (\n          <LineIssuesIndicator\n            issues={issues}\n            issuesOpen={openIssues}\n            line={line}\n            onClick={this.handleIssuesIndicatorClick}\n          />\n        ) : (\n          <td className=\"source-meta source-line-issues\" />\n        )}\n\n        {displayDuplications && (\n          <LineDuplicationBlock\n            blocksLoaded={duplicationsCount > 0}\n            duplicated={Boolean(line.duplicated)}\n            index={0}\n            key={0}\n            line={this.props.line}\n            onClick={this.props.loadDuplications}\n            renderDuplicationPopup={this.props.renderDuplicationPopup}\n          />\n        )}\n\n        {duplicationsCount > 1 &&\n          times(duplicationsCount - 1, index => (\n            <LineDuplicationBlock\n              blocksLoaded={true}\n              duplicated={duplications.includes(index + 1)}\n              index={index + 1}\n              key={index + 1}\n              line={this.props.line}\n              renderDuplicationPopup={this.props.renderDuplicationPopup}\n            />\n          ))}\n\n        {displayCoverage && <LineCoverage line={line} />}\n\n        <LineCode\n          branchLike={branchLike}\n          displayIssueLocationsCount={displayIssueLocationsCount}\n          displayIssueLocationsLink={displayIssueLocationsLink}\n          displayLocationMarkers={displayLocationMarkers}\n          highlightedLocationMessage={highlightedLocationMessage}\n          highlightedSymbols={highlightedSymbols}\n          issueLocations={issueLocations}\n          issuePopup={issuePopup}\n          issues={issues}\n          line={line}\n          onIssueChange={this.props.onIssueChange}\n          onIssuePopupToggle={this.props.onIssuePopupToggle}\n          onIssueSelect={this.props.onIssueSelect}\n          onLocationSelect={this.props.onLocationSelect}\n          onSymbolClick={this.props.onSymbolClick}\n          padding={bottomPadding}\n          scroll={this.props.scroll}\n          secondaryIssueLocations={secondaryIssueLocations}\n          selectedIssue={selectedIssue}\n          showIssues={openIssues || displayAllIssues}\n        />\n      </tr>\n    );\n  }\n}\n","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./SourceViewerHeaderSlim.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".source-viewer-header-slim{padding:4px 10px;border-bottom:1px solid #cdcdcd;background-color:#f3f3f3;align-items:center;min-height:25px}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport classNames from 'classnames';\nimport * as React from 'react';\nimport ExpandSnippetIcon from 'sonar-ui-common/components/icons/ExpandSnippetIcon';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { scrollHorizontally } from 'sonar-ui-common/helpers/scrolling';\nimport Line from '../../../components/SourceViewer/components/Line';\nimport { symbolsByLine } from '../../../components/SourceViewer/helpers/indexing';\nimport { getSecondaryIssueLocationsForLine } from '../../../components/SourceViewer/helpers/issueLocations';\nimport {\n  optimizeHighlightedSymbols,\n  optimizeLocationMessage,\n  optimizeSelectedIssue\n} from '../../../components/SourceViewer/helpers/lines';\nimport { BranchLike } from '../../../types/branch-like';\nimport './SnippetViewer.css';\nimport { inSnippet, LINES_BELOW_ISSUE } from './utils';\n\ninterface Props {\n  branchLike: BranchLike | undefined;\n  component: T.SourceViewerFile;\n  displaySCM?: boolean;\n  duplications?: T.Duplication[];\n  duplicationsByLine?: { [line: number]: number[] };\n  expandBlock: (snippetIndex: number, direction: T.ExpandDirection) => Promise<void>;\n  handleCloseIssues: (line: T.SourceLine) => void;\n  handleOpenIssues: (line: T.SourceLine) => void;\n  handleSymbolClick: (symbols: string[]) => void;\n  highlightedLocationMessage: { index: number; text: string | undefined } | undefined;\n  highlightedSymbols: string[];\n  index: number;\n  issue: Pick<T.Issue, 'key' | 'textRange' | 'line'>;\n  issuePopup?: { issue: string; name: string };\n  issuesByLine: T.IssuesByLine;\n  lastSnippetOfLastGroup: boolean;\n  loadDuplications?: (line: T.SourceLine) => void;\n  locations: T.FlowLocation[];\n  locationsByLine: { [line: number]: T.LinearIssueLocation[] };\n  onIssueChange: (issue: T.Issue) => void;\n  onIssuePopupToggle: (issue: string, popupName: string, open?: boolean) => void;\n  onLocationSelect: (index: number) => void;\n  openIssuesByLine: T.Dict<boolean>;\n  renderDuplicationPopup: (index: number, line: number) => React.ReactNode;\n  scroll?: (element: HTMLElement, offset?: number) => void;\n  snippet: T.SourceLine[];\n}\n\nexport default class SnippetViewer extends React.PureComponent<Props> {\n  snippetNodeRef: React.RefObject<HTMLDivElement>;\n\n  constructor(props: Props) {\n    super(props);\n    this.snippetNodeRef = React.createRef();\n  }\n\n  doScroll = (element: HTMLElement) => {\n    if (this.props.scroll) {\n      this.props.scroll(element);\n    }\n    const parent = this.snippetNodeRef.current as Element;\n\n    if (parent) {\n      const offset = parent.getBoundingClientRect().width / 2;\n\n      scrollHorizontally(element, {\n        leftOffset: offset,\n        rightOffset: offset,\n        parent\n      });\n    }\n  };\n\n  scrollToLastExpandedRow = () => {\n    if (this.props.scroll) {\n      const snippetNode = this.snippetNodeRef.current as Element;\n      if (!snippetNode) {\n        return;\n      }\n      const rows = snippetNode.querySelectorAll('tr');\n      const lastRow = rows[rows.length - 1];\n      this.props.scroll(lastRow, 100);\n    }\n  };\n\n  expandBlock = (direction: T.ExpandDirection) => () =>\n    this.props.expandBlock(this.props.index, direction).then(() => {\n      if (direction === 'down') {\n        this.scrollToLastExpandedRow();\n      }\n    });\n\n  renderLine({\n    displayDuplications,\n    displaySCM,\n    index,\n    issuesForLine,\n    issueLocations,\n    line,\n    snippet,\n    symbols,\n    verticalBuffer\n  }: {\n    displayDuplications: boolean;\n    displaySCM?: boolean;\n    index: number;\n    issuesForLine: T.Issue[];\n    issueLocations: T.LinearIssueLocation[];\n    line: T.SourceLine;\n    snippet: T.SourceLine[];\n    symbols: string[];\n    verticalBuffer: number;\n  }) {\n    const secondaryIssueLocations = getSecondaryIssueLocationsForLine(line, this.props.locations);\n\n    const { duplications, duplicationsByLine } = this.props;\n    const duplicationsCount = duplications ? duplications.length : 0;\n    const lineDuplications =\n      (duplicationsCount && duplicationsByLine && duplicationsByLine[line.line]) || [];\n\n    const isSinkLine = issuesForLine.some(i => i.key === this.props.issue.key);\n    const noop = () => {};\n\n    return (\n      <Line\n        branchLike={this.props.branchLike}\n        displayAllIssues={false}\n        displayCoverage={true}\n        displayDuplications={displayDuplications}\n        displayIssues={!isSinkLine || issuesForLine.length > 1}\n        displayLocationMarkers={true}\n        displaySCM={displaySCM}\n        duplications={lineDuplications}\n        duplicationsCount={duplicationsCount}\n        highlighted={false}\n        highlightedLocationMessage={optimizeLocationMessage(\n          this.props.highlightedLocationMessage,\n          secondaryIssueLocations\n        )}\n        highlightedSymbols={optimizeHighlightedSymbols(symbols, this.props.highlightedSymbols)}\n        issueLocations={issueLocations}\n        issuePopup={this.props.issuePopup}\n        issues={issuesForLine}\n        key={line.line}\n        last={false}\n        line={line}\n        loadDuplications={this.props.loadDuplications || noop}\n        onIssueChange={this.props.onIssueChange}\n        onIssuePopupToggle={this.props.onIssuePopupToggle}\n        onIssueSelect={noop}\n        onIssueUnselect={noop}\n        onIssuesClose={this.props.handleCloseIssues}\n        onIssuesOpen={this.props.handleOpenIssues}\n        onLocationSelect={this.props.onLocationSelect}\n        onSymbolClick={this.props.handleSymbolClick}\n        openIssues={this.props.openIssuesByLine[line.line]}\n        previousLine={index > 0 ? snippet[index - 1] : undefined}\n        renderDuplicationPopup={this.props.renderDuplicationPopup}\n        scroll={this.doScroll}\n        secondaryIssueLocations={secondaryIssueLocations}\n        selectedIssue={optimizeSelectedIssue(this.props.issue.key, issuesForLine)}\n        verticalBuffer={verticalBuffer}\n      />\n    );\n  }\n\n  render() {\n    const {\n      component,\n      displaySCM,\n      issue,\n      issuesByLine = {},\n      lastSnippetOfLastGroup,\n      locationsByLine,\n      openIssuesByLine,\n      snippet\n    } = this.props;\n    const lastLine =\n      component.measures && component.measures.lines && parseInt(component.measures.lines, 10);\n\n    const symbols = symbolsByLine(snippet);\n\n    const bottomLine = snippet[snippet.length - 1].line;\n    const issueLine = issue.textRange ? issue.textRange.endLine : issue.line;\n    const lowestVisibleIssue = Math.max(\n      ...Object.keys(issuesByLine)\n        .map(k => parseInt(k, 10))\n        .filter(l => inSnippet(l, snippet) && (l === issueLine || openIssuesByLine[l]))\n    );\n    const verticalBuffer = lastSnippetOfLastGroup\n      ? Math.max(0, LINES_BELOW_ISSUE - (bottomLine - lowestVisibleIssue))\n      : 0;\n\n    const displayDuplications =\n      Boolean(this.props.loadDuplications) && snippet.some(s => !!s.duplicated);\n\n    return (\n      <div className=\"source-viewer-code snippet\" ref={this.snippetNodeRef}>\n        <div>\n          {snippet[0].line > 1 && (\n            <div className=\"expand-block expand-block-above\">\n              <button\n                aria-label={translate('source_viewer.expand_above')}\n                onClick={this.expandBlock('up')}\n                type=\"button\">\n                <ExpandSnippetIcon />\n              </button>\n            </div>\n          )}\n          <table\n            className={classNames('source-table', {\n              'expand-up': snippet[0].line > 1,\n              'expand-down': !lastLine || snippet[snippet.length - 1].line < lastLine\n            })}>\n            <tbody>\n              {snippet.map((line, index) =>\n                this.renderLine({\n                  displayDuplications,\n                  displaySCM,\n                  index,\n                  issuesForLine: issuesByLine[line.line] || [],\n                  issueLocations: locationsByLine[line.line] || [],\n                  line,\n                  snippet,\n                  symbols: symbols[line.line],\n                  verticalBuffer: index === snippet.length - 1 ? verticalBuffer : 0\n                })\n              )}\n            </tbody>\n          </table>\n          {(!lastLine || snippet[snippet.length - 1].line < lastLine) && (\n            <div className=\"expand-block expand-block-below\">\n              <button\n                aria-label={translate('source_viewer.expand_below')}\n                onClick={this.expandBlock('down')}\n                type=\"button\">\n                <ExpandSnippetIcon />\n              </button>\n            </div>\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n","/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\nmodule.exports = baseTimes;\n","var api = require(\"!../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../../node_modules/postcss-loader/src/index.js??postcss!./Line.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".source-line:hover .source-line-coverage,.source-line:hover .source-line-duplications,.source-line:hover .source-line-duplications-extra,.source-line:hover .source-line-issues,.source-line:hover .source-line-number,.source-line:hover .source-line-scm{border-color:#e9e9e9;background-color:#e9e9e9}.source-line:hover .source-line-code{background-color:#f5f5f5}.source-line [role=button]{cursor:pointer}.source-line-highlighted .source-line-coverage,.source-line-highlighted .source-line-duplications,.source-line-highlighted .source-line-duplications-extra,.source-line-highlighted .source-line-issues,.source-line-highlighted .source-line-number,.source-line-highlighted .source-line-scm,.source-line-highlighted:hover .source-line-coverage,.source-line-highlighted:hover .source-line-duplications,.source-line-highlighted:hover .source-line-duplications-extra,.source-line-highlighted:hover .source-line-issues,.source-line-highlighted:hover .source-line-number,.source-line-highlighted:hover .source-line-scm{border-color:#c4dfec!important;background-color:#c4dfec}.source-line-highlighted .source-line-code,.source-line-highlighted:hover .source-line-code{background-color:#d9edf7}.source-line-filtered .source-line-code{background-color:#fbf3d5!important}.source-line-filtered.source-line-highlighted .source-line-code,.source-line-filtered.source-line-highlighted:hover .source-line-code{background-color:#cdd9c4!important}.source-line-filtered.source-line-filtered-dark .source-line-code{background-color:#f9ebb7!important}.source-line-filtered.source-line-filtered-dark:hover .source-line-code,.source-line-filtered:hover .source-line-code{background-color:#f1e8cb!important}.source-line-last .source-line-code{padding-bottom:160px}.source-viewer pre{height:18px;padding:0}.source-line-number,.source-line-scm,.source-viewer pre{line-height:18px;font-family:Consolas,Ubuntu Mono,Liberation Mono,Menlo,Courier,monospace;font-size:12px}.source-line-code{position:relative;padding:0 10px}.source-line-code pre{float:left}.source-line-code .issue-list{margin-left:-10px;margin-right:-10px}.source-line-code-inner{min-height:18px}.source-line-code-inner:after,.source-line-code-inner:before{display:table;content:\\\"\\\";line-height:0}.source-line-code-inner:after{clear:both}.source-line-code-inner pre{-moz-tab-size:4;tab-size:4}.source-line-code-issue{display:inline-block;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAGCAYAAAAPDoR2AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo1M0M2Rjk4M0M3QUYxMUUzODkzRUREMUM5OTNDMjY4QSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo1M0M2Rjk4NEM3QUYxMUUzODkzRUREMUM5OTNDMjY4QSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjUzQzZGOTgxQzdBRjExRTM4OTNFREQxQzk5M0MyNjhBIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjUzQzZGOTgyQzdBRjExRTM4OTNFREQxQzk5M0MyNjhBIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+bcqJtQAAAEhJREFUeNpi+G+swwDGDAwgbAWlwZiJAQFCgfgwEIfDRaC67ID4NRDnQ2kQnwFZwgFqnANMAQOUYY9sF0wBiCGH5CBkrAgQYACuWi4sSGW8yAAAAABJRU5ErkJggg==);background-repeat:repeat-x;background-size:4px;background-position:bottom}.source-meta{position:relative;vertical-align:top;width:1px;background-clip:padding-box;-webkit-user-select:none;-ms-user-select:none;user-select:none}.source-meta:focus{outline:none}.source-line-number{min-width:18px;padding:0 10px;background-color:#f3f3f3;color:#777;text-align:right}.source-line-issues{position:relative;padding:0 2px;background-color:#f3f3f3;white-space:nowrap}.source-line-with-issues svg{padding-right:2px;vertical-align:middle}.source-line-issues-counter{position:absolute;left:17px;line-height:8px;font-size:8px;z-index:900}.source-line-coverage,.source-line-duplications,.source-line-duplications-extra{background-color:#f3f3f3}.source-line-duplications-extra{display:none}.source-line-scm{padding:0 5px;background-color:#f3f3f3}.source-line-scm .dropdown{display:block}.source-line-scm [role=button]{height:18px}.source-line-scm-inner{max-width:40px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.source-line-bar{width:5px;height:18px}.source-line-bar:focus{outline:none}.source-line-covered{background-color:#b4dd78!important}.source-line-partially-covered,.source-line-uncovered{background-color:#a4030f!important}.source-line-partially-covered{background-image:repeating-linear-gradient(45deg,hsla(0,0%,100%,.5) 4px,transparent 0,transparent 8px,hsla(0,0%,100%,.5) 0,hsla(0,0%,100%,.5) 12px,transparent 0,transparent 16px,hsla(0,0%,100%,.5) 0,hsla(0,0%,100%,.5) 20px)!important}.source-line-duplicated{background-color:#797979!important}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","var api = require(\"!../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../../node_modules/postcss-loader/src/index.js??postcss!./SnippetViewer.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".snippet{margin:8px;border:1px solid #cdcdcd;overflow-x:auto;overflow-y:hidden;transition:max-height .2s}.snippet>div{display:table;width:100%;position:relative;transition:margin-top .2s}.snippet table{width:100%}.expand-block{position:absolute;z-index:2;width:100%}.expand-block>button{background:transparent;box-sizing:border-box;color:#777;height:20px;width:100%;padding:2px;border:0;text-align:left;cursor:pointer}.expand-block>button:active,.expand-block>button:focus,.expand-block>button:hover{color:#236a97;outline:none}.expand-block-above{background:url(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAAXNSR0IArs4c6QAAADdJREFUCB1dzMEKADAIAlBd1v9/bcc2YgRjHh8qq2qTxCQzsX4wM6y30RARF3sy0Es1SIK7Y64OpCES1W69JS4AAAAASUVORK5CYII=\\\");top:0}.expand-block-below{background:url(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4wQQBjQEQVd5jwAAADhJREFUCNddyTEKADEMA8GVA/7/Z+PGwUp1cGTaYe/tv5lxrLWoKj6SiMzkjZDEG7JtANt0N+ccLrB/KZxXTt7fAAAAAElFTkSuQmCC\\\");bottom:0}.source-table.expand-up{margin-top:20px}.source-table.expand-down{margin-bottom:20px}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./styles.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar React = require(\"react\");\nvar Icon_1 = require(\"./Icon\");\nfunction ChevronUpIcon(_a) {\n    var _b = _a.fill, fill = _b === void 0 ? 'currentColor' : _b, iconProps = __rest(_a, [\"fill\"]);\n    return (React.createElement(Icon_1.default, __assign({}, iconProps),\n        React.createElement(\"path\", { d: \"M8.28 4.404l4.602 4.604a.382.382 0 0 1 .118.279c0 .108-.04.2-.118.279l-1.03 1.03a.382.382 0 0 1-.278.117.382.382 0 0 1-.28-.117L8 7.3l-3.294 3.295a.382.382 0 0 1-.28.117.382.382 0 0 1-.279-.117l-1.03-1.03A.382.382 0 0 1 3 9.286c0-.107.04-.2.118-.278L7.72 4.404A.382.382 0 0 1 8 4.287c.108 0 .201.04.28.117z\", style: { fill: fill } })));\n}\nexports.default = ChevronUpIcon;\n//# sourceMappingURL=ChevronUpIcon.js.map","var api = require(\"!../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../../node_modules/postcss-loader/src/index.js??postcss!./HotspotList.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".hotspot-list-header{padding:16px 8px}.hotspot-risk-header{padding:8px}.hotspot-category{background-color:#fff;border:1px solid #e6e6e6}.hotspot-category .hotspot-category-header{padding:16px 8px;color:#444;border-bottom:none;border-left:4px solid}.hotspot-category .hotspot-category-header.contains-selected-hotspot,.hotspot-category .hotspot-category-header:hover{color:#4b9fd5}.hotspot-category.HIGH .hotspot-category-header{border-left-color:#d4333f}.hotspot-category.MEDIUM .hotspot-category-header{border-left-color:#ed7d20}.hotspot-category.LOW .hotspot-category-header{border-left-color:#eabe06}.hotspot-item{color:#444;display:block;padding:8px 16px;border:1px solid transparent;border-top-color:#e6e6e6;transition:padding 0s,border 0s}.hotspot-item:hover{background-color:#f2faff;border:1px dashed #4b9fd5;color:#444}.hotspot-item.highlight{background-color:#f2faff;color:#444;border:1px solid #4b9fd5;cursor:unset}.hotspot-risk-badge{color:#fff;text-transform:uppercase;display:inline-block;text-align:center;min-width:48px;padding:0 8px;font-weight:700;border-radius:2px}.hotspot-risk-badge.HIGH{background-color:#d4333f}.hotspot-risk-badge.MEDIUM{background-color:#ed7d20}.hotspot-risk-badge.LOW{background-color:#eabe06}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","var api = require(\"!../../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../../../node_modules/postcss-loader/src/index.js??postcss!./AssigneeSelection.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".hotspot-assignee-search-results{min-width:300px}.hotspot-assignee-search-results li{cursor:pointer}.hotspot-assignee-search-results li.active,.hotspot-assignee-search-results li:hover{background-color:#f3f3f3}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","var api = require(\"!../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../../node_modules/postcss-loader/src/index.js??postcss!./HotspotViewer.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".hotspot-information{flex-basis:320px}.hotspot-information>div>span{flex-basis:100px}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","var api = require(\"!../../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../../../node_modules/postcss-loader/src/index.js??postcss!./Status.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"#status-trigger,#status-trigger+.popup{width:400px;box-sizing:border-box}#status-trigger{height:80px;border-radius:4px;outline:none}#status-trigger.readonly{cursor:not-allowed}#status-trigger:not(.readonly){cursor:pointer;background-color:#236a97}#status-trigger:not(.readonly) *{color:#fff}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"#security_hotspots .filter-bar-outer{height:62px}#security_hotspots .filter-bar{position:fixed;background-color:#f3f3f3;z-index:55;left:0;right:0}#security_hotspots .filter-bar-inner{max-width:1280px;margin:0 auto;padding:16px 8px;box-sizing:border-box;border-bottom:1px solid #e6e6e6}#security_hotspots .layout-page-side,#security_hotspots .layout-page-side-outer{width:calc(50vw - 330px)}#security_hotspots .layout-page-side-inner{margin-left:calc(50vw - 645px)}#security_hotspots .layout-page-main{padding:0}@media (max-width:1320px){#security_hotspots .layout-page-side,#security_hotspots .layout-page-side-outer{width:316px}#security_hotspots .layout-page-side-inner{margin-left:0}}#security_hotspots .hotspot-content{max-width:962px;background:#fff;box-sizing:border-box}#security_hotspots .invisible{height:0;overflow:hidden}#security_hotspots .hotspots-list-single-category .hotspot-category .hotspot-category-header{color:#4b9fd5}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { getJSON, post } from 'sonar-ui-common/helpers/request';\nimport throwGlobalError from '../app/utils/throwGlobalError';\nimport { BranchParameters } from '../types/branch-like';\nimport {\n  Hotspot,\n  HotspotAssignRequest,\n  HotspotComment,\n  HotspotResolution,\n  HotspotSearchResponse,\n  HotspotSetStatusRequest,\n  HotspotStatus\n} from '../types/security-hotspots';\n\nconst HOTSPOTS_SEARCH_URL = '/api/hotspots/search';\n\nexport function assignSecurityHotspot(\n  hotspotKey: string,\n  data: HotspotAssignRequest\n): Promise<void> {\n  return post('/api/hotspots/assign', { hotspot: hotspotKey, ...data }).catch(throwGlobalError);\n}\n\nexport function setSecurityHotspotStatus(\n  hotspotKey: string,\n  data: HotspotSetStatusRequest\n): Promise<void> {\n  return post('/api/hotspots/change_status', { hotspot: hotspotKey, ...data }).catch(\n    throwGlobalError\n  );\n}\n\nexport function commentSecurityHotspot(hotspotKey: string, comment: string): Promise<void> {\n  return post('/api/hotspots/add_comment', { hotspot: hotspotKey, comment }).catch(\n    throwGlobalError\n  );\n}\n\nexport function deleteSecurityHotspotComment(commentKey: string): Promise<void> {\n  return post('/api/hotspots/delete_comment', { comment: commentKey }).catch(throwGlobalError);\n}\n\nexport function editSecurityHotspotComment(\n  commentKey: string,\n  comment: string\n): Promise<HotspotComment> {\n  return post('/api/hotspots/edit_comment', { comment: commentKey, text: comment }).catch(\n    throwGlobalError\n  );\n}\n\nexport function getSecurityHotspots(\n  data: {\n    projectKey: string;\n    p: number;\n    ps: number;\n    status?: HotspotStatus;\n    resolution?: HotspotResolution;\n    onlyMine?: boolean;\n    sinceLeakPeriod?: boolean;\n  } & BranchParameters\n): Promise<HotspotSearchResponse> {\n  return getJSON(HOTSPOTS_SEARCH_URL, data).catch(throwGlobalError);\n}\n\nexport function getSecurityHotspotList(\n  hotspotKeys: string[],\n  data: {\n    projectKey: string;\n  } & BranchParameters\n): Promise<HotspotSearchResponse> {\n  return getJSON(HOTSPOTS_SEARCH_URL, { ...data, hotspots: hotspotKeys.join() }).catch(\n    throwGlobalError\n  );\n}\n\nexport function getSecurityHotspotDetails(securityHotspotKey: string): Promise<Hotspot> {\n  return getJSON('/api/hotspots/show', { hotspot: securityHotspotKey })\n    .then((response: Hotspot & { users: T.UserBase[] }) => {\n      const { users, ...hotspot } = response;\n\n      if (users) {\n        if (hotspot.assignee) {\n          hotspot.assigneeUser = users.find(u => u.login === hotspot.assignee) || {\n            active: true,\n            login: hotspot.assignee\n          };\n        }\n        hotspot.authorUser = users.find(u => u.login === hotspot.author) || {\n          active: true,\n          login: hotspot.author\n        };\n        hotspot.comment.forEach(c => {\n          c.user = users.find(u => u.login === c.login) || { active: true, login: c.login };\n        });\n      }\n\n      return hotspot;\n    })\n    .catch(throwGlobalError);\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nexport enum RiskExposure {\n  LOW = 'LOW',\n  MEDIUM = 'MEDIUM',\n  HIGH = 'HIGH'\n}\n\nexport enum HotspotStatus {\n  TO_REVIEW = 'TO_REVIEW',\n  REVIEWED = 'REVIEWED'\n}\n\nexport enum HotspotResolution {\n  FIXED = 'FIXED',\n  SAFE = 'SAFE'\n}\n\nexport enum HotspotStatusFilter {\n  FIXED = 'FIXED',\n  SAFE = 'SAFE',\n  TO_REVIEW = 'TO_REVIEW'\n}\n\nexport enum HotspotStatusOption {\n  FIXED = 'FIXED',\n  SAFE = 'SAFE',\n  TO_REVIEW = 'TO_REVIEW'\n}\n\nexport interface HotspotFilters {\n  assignedToMe: boolean;\n  sinceLeakPeriod: boolean;\n  status: HotspotStatusFilter;\n}\n\nexport interface RawHotspot {\n  assignee?: string;\n  author?: string;\n  component: string;\n  creationDate: string;\n  key: string;\n  line?: number;\n  message: string;\n  project: string;\n  resolution?: HotspotResolution;\n  rule: string;\n  securityCategory: string;\n  status: HotspotStatus;\n  subProject?: string;\n  updateDate: string;\n  vulnerabilityProbability: RiskExposure;\n}\n\nexport interface Hotspot {\n  assignee?: string;\n  assigneeUser?: T.UserBase;\n  author: string;\n  authorUser: T.UserBase;\n  canChangeStatus: boolean;\n  changelog: T.IssueChangelog[];\n  comment: HotspotComment[];\n  component: T.Component;\n  creationDate: string;\n  key: string;\n  line?: number;\n  message: string;\n  project: T.Component;\n  resolution?: HotspotResolution;\n  rule: HotspotRule;\n  status: HotspotStatus;\n  textRange?: T.TextRange;\n  updateDate: string;\n  users: T.UserBase[];\n}\n\nexport interface HotspotUpdateFields {\n  status: HotspotStatus;\n  resolution?: HotspotResolution;\n}\n\nexport interface HotspotUpdate extends HotspotUpdateFields {\n  key: string;\n}\n\nexport interface HotspotRule {\n  fixRecommendations?: string;\n  key: string;\n  name: string;\n  riskDescription?: string;\n  securityCategory: string;\n  vulnerabilityDescription?: string;\n  vulnerabilityProbability: RiskExposure;\n}\n\nexport interface HotspotComment {\n  key: string;\n  htmlText: string;\n  markdown: string;\n  updatable: boolean;\n  createdAt: string;\n  login: string;\n  user: T.UserBase;\n}\n\nexport interface ReviewHistoryElement {\n  type: ReviewHistoryType;\n  date: string;\n  user: Pick<T.UserBase, 'active' | 'avatar' | 'name'>;\n  diffs?: T.IssueChangelogDiff[];\n  html?: string;\n  key?: string;\n  updatable?: boolean;\n  markdown?: string;\n}\n\nexport enum ReviewHistoryType {\n  Creation,\n  Diff,\n  Comment\n}\n\nexport interface HotspotSearchResponse {\n  components?: { key: string; qualifier: string; name: string }[];\n  hotspots: RawHotspot[];\n  paging: T.Paging;\n}\n\nexport interface HotspotSetStatusRequest {\n  status: HotspotStatus;\n  resolution?: HotspotResolution;\n  comment?: string;\n}\n\nexport interface HotspotAssignRequest {\n  assignee: string;\n  comment?: string;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { getBaseUrl } from 'sonar-ui-common/helpers/urls';\n\nexport interface EmptyHotspotsPageProps {\n  filtered: boolean;\n  isStaticListOfHotspots: boolean;\n}\n\nexport default function EmptyHotspotsPage(props: EmptyHotspotsPageProps) {\n  const { filtered, isStaticListOfHotspots } = props;\n\n  let translationRoot;\n  if (isStaticListOfHotspots) {\n    translationRoot = 'no_hotspots_for_keys';\n  } else if (filtered) {\n    translationRoot = 'no_hotspots_for_filters';\n  } else {\n    translationRoot = 'no_hotspots';\n  }\n\n  return (\n    <div className=\"display-flex-column display-flex-center huge-spacer-top\">\n      <img\n        alt={translate('hotspots.page')}\n        className=\"huge-spacer-top\"\n        height={100}\n        src={`${getBaseUrl()}/images/${filtered ? 'filter-large' : 'hotspot-large'}.svg`}\n      />\n      <h1 className=\"huge-spacer-top\">{translate(`hotspots.${translationRoot}.title`)}</h1>\n      <div className=\"abs-width-400 text-center big-spacer-top\">\n        {translate(`hotspots.${translationRoot}.description`)}\n      </div>\n      {!(filtered || isStaticListOfHotspots) && (\n        <Link\n          className=\"big-spacer-top\"\n          target=\"_blank\"\n          to={{ pathname: '/documentation/user-guide/security-hotspots/' }}>\n          {translate('hotspots.learn_more')}\n        </Link>\n      )}\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport HelpTooltip from 'sonar-ui-common/components/controls/HelpTooltip';\nimport RadioToggle from 'sonar-ui-common/components/controls/RadioToggle';\nimport Select from 'sonar-ui-common/components/controls/Select';\nimport DeferredSpinner from 'sonar-ui-common/components/ui/DeferredSpinner';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { withCurrentUser } from '../../../components/hoc/withCurrentUser';\nimport Measure from '../../../components/measure/Measure';\nimport CoverageRating from '../../../components/ui/CoverageRating';\nimport { isLoggedIn } from '../../../helpers/users';\nimport { ComponentQualifier } from '../../../types/component';\nimport { HotspotFilters, HotspotStatusFilter } from '../../../types/security-hotspots';\n\nexport interface FilterBarProps {\n  currentUser: T.CurrentUser;\n  component: T.Component;\n  filters: HotspotFilters;\n  hotspotsReviewedMeasure?: string;\n  isStaticListOfHotspots: boolean;\n  loadingMeasure: boolean;\n  onBranch: boolean;\n  onChangeFilters: (filters: Partial<HotspotFilters>) => void;\n  onShowAllHotspots: () => void;\n}\n\nconst statusOptions: Array<{ label: string; value: string }> = [\n  { value: HotspotStatusFilter.TO_REVIEW, label: translate('hotspot.filters.status.to_review') },\n  { value: HotspotStatusFilter.FIXED, label: translate('hotspot.filters.status.fixed') },\n  { value: HotspotStatusFilter.SAFE, label: translate('hotspot.filters.status.safe') }\n];\n\nconst periodOptions = [\n  { value: true, label: translate('hotspot.filters.period.since_leak_period') },\n  { value: false, label: translate('hotspot.filters.period.overall') }\n];\n\nexport enum AssigneeFilterOption {\n  ALL = 'all',\n  ME = 'me'\n}\n\nconst assigneeFilterOptions = [\n  { value: AssigneeFilterOption.ME, label: translate('hotspot.filters.assignee.assigned_to_me') },\n  { value: AssigneeFilterOption.ALL, label: translate('hotspot.filters.assignee.all') }\n];\n\nexport function FilterBar(props: FilterBarProps) {\n  const {\n    currentUser,\n    component,\n    filters,\n    hotspotsReviewedMeasure,\n    isStaticListOfHotspots,\n    loadingMeasure,\n    onBranch\n  } = props;\n  const isProject = component.qualifier === ComponentQualifier.Project;\n\n  return (\n    <div className=\"filter-bar-outer\">\n      <div className=\"filter-bar\">\n        <div className=\"filter-bar-inner display-flex-center\">\n          {isStaticListOfHotspots ? (\n            <a\n              id=\"show_all_hotspot\"\n              onClick={() => props.onShowAllHotspots()}\n              role=\"link\"\n              tabIndex={0}>\n              {translate('hotspot.filters.show_all')}\n            </a>\n          ) : (\n            <div className=\"display-flex-space-between width-100\">\n              <div className=\"display-flex-center\">\n                <h3 className=\"huge-spacer-right\">{translate('hotspot.filters.title')}</h3>\n\n                {isLoggedIn(currentUser) && (\n                  <RadioToggle\n                    className=\"huge-spacer-right\"\n                    name=\"assignee-filter\"\n                    onCheck={(value: AssigneeFilterOption) =>\n                      props.onChangeFilters({ assignedToMe: value === AssigneeFilterOption.ME })\n                    }\n                    options={assigneeFilterOptions}\n                    value={\n                      filters.assignedToMe ? AssigneeFilterOption.ME : AssigneeFilterOption.ALL\n                    }\n                  />\n                )}\n\n                <span className=\"spacer-right\">{translate('status')}</span>\n                <Select\n                  className=\"input-medium big-spacer-right\"\n                  clearable={false}\n                  onChange={(option: { value: HotspotStatusFilter }) =>\n                    props.onChangeFilters({ status: option.value })\n                  }\n                  options={statusOptions}\n                  searchable={false}\n                  value={filters.status}\n                />\n\n                {onBranch && (\n                  <Select\n                    className=\"input-medium big-spacer-right\"\n                    clearable={false}\n                    onChange={(option: { value: boolean }) =>\n                      props.onChangeFilters({ sinceLeakPeriod: option.value })\n                    }\n                    options={periodOptions}\n                    searchable={false}\n                    value={filters.sinceLeakPeriod}\n                  />\n                )}\n              </div>\n\n              {isProject && (\n                <div className=\"display-flex-center\">\n                  <span className=\"little-spacer-right\">\n                    {translate('metric.security_hotspots_reviewed.name')}\n                  </span>\n                  <HelpTooltip\n                    className=\"big-spacer-right\"\n                    overlay={translate('hotspots.reviewed.tooltip')}\n                  />\n                  <DeferredSpinner loading={loadingMeasure}>\n                    {hotspotsReviewedMeasure && <CoverageRating value={hotspotsReviewedMeasure} />}\n                    <Measure\n                      className=\"spacer-left huge\"\n                      metricKey={\n                        onBranch && !filters.sinceLeakPeriod\n                          ? 'security_hotspots_reviewed'\n                          : 'new_security_hotspots_reviewed'\n                      }\n                      metricType=\"PERCENT\"\n                      value={hotspotsReviewedMeasure}\n                    />\n                  </DeferredSpinner>\n                </div>\n              )}\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default withCurrentUser(FilterBar);\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { groupBy, sortBy } from 'lodash';\nimport {\n  renderCWECategory,\n  renderOwaspTop10Category,\n  renderSansTop25Category,\n  renderSonarSourceSecurityCategory\n} from '../../helpers/security-standard';\nimport { SecurityStandard } from '../../types/security';\nimport {\n  Hotspot,\n  HotspotResolution,\n  HotspotStatus,\n  HotspotStatusOption,\n  RawHotspot,\n  ReviewHistoryElement,\n  ReviewHistoryType,\n  RiskExposure\n} from '../../types/security-hotspots';\n\nexport const RISK_EXPOSURE_LEVELS = [RiskExposure.HIGH, RiskExposure.MEDIUM, RiskExposure.LOW];\nexport const SECURITY_STANDARDS = [\n  SecurityStandard.SONARSOURCE,\n  SecurityStandard.OWASP_TOP10,\n  SecurityStandard.SANS_TOP25\n];\n\nexport const SECURITY_STANDARD_RENDERER = {\n  [SecurityStandard.OWASP_TOP10]: renderOwaspTop10Category,\n  [SecurityStandard.SANS_TOP25]: renderSansTop25Category,\n  [SecurityStandard.SONARSOURCE]: renderSonarSourceSecurityCategory,\n  [SecurityStandard.CWE]: renderCWECategory\n};\n\nexport function mapRules(rules: Array<{ key: string; name: string }>): T.Dict<string> {\n  return rules.reduce((ruleMap: T.Dict<string>, r) => {\n    ruleMap[r.key] = r.name;\n    return ruleMap;\n  }, {});\n}\n\nexport function groupByCategory(\n  hotspots: RawHotspot[] = [],\n  securityCategories: T.StandardSecurityCategories\n) {\n  const groups = groupBy(hotspots, h => h.securityCategory);\n\n  return Object.keys(groups).map(key => ({\n    key,\n    title: getCategoryTitle(key, securityCategories),\n    hotspots: groups[key]\n  }));\n}\n\nexport function sortHotspots(\n  hotspots: RawHotspot[],\n  securityCategories: T.Dict<{ title: string }>\n) {\n  return sortBy(hotspots, [\n    h => RISK_EXPOSURE_LEVELS.indexOf(h.vulnerabilityProbability),\n    h => getCategoryTitle(h.securityCategory, securityCategories),\n    h => h.message\n  ]);\n}\n\nfunction getCategoryTitle(key: string, securityCategories: T.StandardSecurityCategories) {\n  return securityCategories[key] ? securityCategories[key].title : key;\n}\n\nexport function constructSourceViewerFile(\n  { component, project }: Hotspot,\n  lines?: number\n): T.SourceViewerFile {\n  return {\n    key: component.key,\n    measures: { lines: lines ? lines.toString() : undefined },\n    path: component.path || '',\n    project: project.key,\n    projectName: project.name,\n    q: component.qualifier,\n    uuid: ''\n  };\n}\n\nexport function getHotspotReviewHistory(hotspot: Hotspot): ReviewHistoryElement[] {\n  const history: ReviewHistoryElement[] = [];\n\n  if (hotspot.creationDate) {\n    history.push({\n      type: ReviewHistoryType.Creation,\n      date: hotspot.creationDate,\n      user: {\n        ...hotspot.authorUser,\n        name: hotspot.authorUser.name || hotspot.authorUser.login\n      }\n    });\n  }\n\n  if (hotspot.changelog && hotspot.changelog.length > 0) {\n    history.push(\n      ...hotspot.changelog.map(log => ({\n        type: ReviewHistoryType.Diff,\n        date: log.creationDate,\n        user: {\n          active: log.isUserActive,\n          avatar: log.avatar,\n          name: log.userName || log.user\n        },\n        diffs: log.diffs\n      }))\n    );\n  }\n\n  if (hotspot.comment && hotspot.comment.length > 0) {\n    history.push(\n      ...hotspot.comment.map(comment => ({\n        type: ReviewHistoryType.Comment,\n        date: comment.createdAt,\n        updatable: comment.updatable,\n        user: {\n          ...comment.user,\n          name: comment.user.name || comment.user.login\n        },\n        html: comment.htmlText,\n        key: comment.key,\n        markdown: comment.markdown\n      }))\n    );\n  }\n\n  return sortBy(history, elt => elt.date);\n}\n\nconst STATUS_AND_RESOLUTION_TO_STATUS_OPTION = {\n  [HotspotStatus.TO_REVIEW]: HotspotStatusOption.TO_REVIEW,\n  [HotspotStatus.REVIEWED]: HotspotStatusOption.FIXED,\n  [HotspotResolution.FIXED]: HotspotStatusOption.FIXED,\n  [HotspotResolution.SAFE]: HotspotStatusOption.SAFE\n};\n\nexport function getStatusOptionFromStatusAndResolution(\n  status: HotspotStatus,\n  resolution?: HotspotResolution\n) {\n  // Resolution is the most determinist info here, so we use it first to get the matching status option\n  // If not provided, we use the status (which will be TO_REVIEW)\n  return STATUS_AND_RESOLUTION_TO_STATUS_OPTION[resolution ?? status];\n}\n\nconst STATUS_OPTION_TO_STATUS_AND_RESOLUTION_MAP = {\n  [HotspotStatusOption.TO_REVIEW]: { status: HotspotStatus.TO_REVIEW, resolution: undefined },\n  [HotspotStatusOption.FIXED]: {\n    status: HotspotStatus.REVIEWED,\n    resolution: HotspotResolution.FIXED\n  },\n  [HotspotStatusOption.SAFE]: {\n    status: HotspotStatus.REVIEWED,\n    resolution: HotspotResolution.SAFE\n  }\n};\n\nexport function getStatusAndResolutionFromStatusOption(statusOption: HotspotStatusOption) {\n  return STATUS_OPTION_TO_STATUS_AND_RESOLUTION_MAP[statusOption];\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { RawHotspot } from '../../../types/security-hotspots';\nimport { getStatusOptionFromStatusAndResolution } from '../utils';\n\nexport interface HotspotListItemProps {\n  hotspot: RawHotspot;\n  onClick: (hotspot: RawHotspot) => void;\n  selected: boolean;\n}\n\nexport default function HotspotListItem(props: HotspotListItemProps) {\n  const { hotspot, selected } = props;\n  return (\n    <a\n      className={classNames('hotspot-item', { highlight: selected })}\n      href=\"#\"\n      onClick={() => !selected && props.onClick(hotspot)}>\n      <div className=\"little-spacer-left\">{hotspot.message}</div>\n      <div className=\"badge spacer-top\">\n        {translate(\n          'hotspots.status_option',\n          getStatusOptionFromStatusAndResolution(hotspot.status, hotspot.resolution)\n        )}\n      </div>\n    </a>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport ChevronDownIcon from 'sonar-ui-common/components/icons/ChevronDownIcon';\nimport ChevronUpIcon from 'sonar-ui-common/components/icons/ChevronUpIcon';\nimport { RawHotspot } from '../../../types/security-hotspots';\nimport HotspotListItem from './HotspotListItem';\n\nexport interface HotspotCategoryProps {\n  categoryKey: string;\n  expanded: boolean;\n  hotspots: RawHotspot[];\n  onHotspotClick: (hotspot: RawHotspot) => void;\n  onToggleExpand?: (categoryKey: string, value: boolean) => void;\n  selectedHotspot: RawHotspot;\n  title: string;\n  isLastAndIncomplete: boolean;\n}\n\nexport default function HotspotCategory(props: HotspotCategoryProps) {\n  const { categoryKey, expanded, hotspots, selectedHotspot, title, isLastAndIncomplete } = props;\n\n  if (hotspots.length < 1) {\n    return null;\n  }\n\n  const risk = hotspots[0].vulnerabilityProbability;\n\n  return (\n    <div className={classNames('hotspot-category', risk)}>\n      {props.onToggleExpand ? (\n        <a\n          className={classNames(\n            'hotspot-category-header display-flex-space-between display-flex-center',\n            { 'contains-selected-hotspot': selectedHotspot.securityCategory === categoryKey }\n          )}\n          href=\"#\"\n          onClick={() => props.onToggleExpand && props.onToggleExpand(categoryKey, !expanded)}>\n          <strong className=\"flex-1 spacer-right break-word\">{title}</strong>\n          <span>\n            <span className=\"counter-badge\">\n              {hotspots.length}\n              {isLastAndIncomplete && '+'}\n            </span>\n            {expanded ? (\n              <ChevronUpIcon className=\"big-spacer-left\" />\n            ) : (\n              <ChevronDownIcon className=\"big-spacer-left\" />\n            )}\n          </span>\n        </a>\n      ) : (\n        <div className=\"hotspot-category-header\">\n          <strong className=\"flex-1 spacer-right break-word\">{title}</strong>\n        </div>\n      )}\n      {expanded && (\n        <ul>\n          {hotspots.map(h => (\n            <li data-hotspot-key={h.key} key={h.key}>\n              <HotspotListItem\n                hotspot={h}\n                onClick={props.onHotspotClick}\n                selected={h.key === selectedHotspot.key}\n              />\n            </li>\n          ))}\n        </ul>\n      )}\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport { groupBy } from 'lodash';\nimport * as React from 'react';\nimport ListFooter from 'sonar-ui-common/components/controls/ListFooter';\nimport SecurityHotspotIcon from 'sonar-ui-common/components/icons/SecurityHotspotIcon';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { HotspotStatusFilter, RawHotspot, RiskExposure } from '../../../types/security-hotspots';\nimport { groupByCategory, RISK_EXPOSURE_LEVELS } from '../utils';\nimport HotspotCategory from './HotspotCategory';\nimport './HotspotList.css';\n\ninterface Props {\n  hotspots: RawHotspot[];\n  hotspotsTotal: number;\n  isStaticListOfHotspots: boolean;\n  loadingMore: boolean;\n  onHotspotClick: (hotspot: RawHotspot) => void;\n  onLoadMore: () => void;\n  securityCategories: T.StandardSecurityCategories;\n  selectedHotspot: RawHotspot;\n  statusFilter: HotspotStatusFilter;\n}\n\ninterface State {\n  expandedCategories: T.Dict<boolean>;\n  groupedHotspots: Array<{\n    risk: RiskExposure;\n    categories: Array<{ key: string; hotspots: RawHotspot[]; title: string }>;\n  }>;\n}\n\nexport default class HotspotList extends React.Component<Props, State> {\n  constructor(props: Props) {\n    super(props);\n\n    this.state = {\n      expandedCategories: { [props.selectedHotspot.securityCategory]: true },\n      groupedHotspots: this.groupHotspots(props.hotspots, props.securityCategories)\n    };\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    // Force open the category of selected hotspot\n    if (\n      this.props.selectedHotspot.securityCategory !== prevProps.selectedHotspot.securityCategory\n    ) {\n      this.handleToggleCategory(this.props.selectedHotspot.securityCategory, true);\n    }\n\n    // Compute the hotspot tree from the list\n    if (\n      this.props.hotspots !== prevProps.hotspots ||\n      this.props.securityCategories !== prevProps.securityCategories\n    ) {\n      const groupedHotspots = this.groupHotspots(\n        this.props.hotspots,\n        this.props.securityCategories\n      );\n      this.setState({ groupedHotspots });\n    }\n  }\n\n  groupHotspots = (hotspots: RawHotspot[], securityCategories: T.StandardSecurityCategories) => {\n    const risks = groupBy(hotspots, h => h.vulnerabilityProbability);\n\n    return RISK_EXPOSURE_LEVELS.map(risk => ({\n      risk,\n      categories: groupByCategory(risks[risk], securityCategories)\n    })).filter(risk => risk.categories.length > 0);\n  };\n\n  handleToggleCategory = (categoryKey: string, value: boolean) => {\n    this.setState(({ expandedCategories }) => ({\n      expandedCategories: { ...expandedCategories, [categoryKey]: value }\n    }));\n  };\n\n  render() {\n    const {\n      hotspots,\n      hotspotsTotal,\n      isStaticListOfHotspots,\n      loadingMore,\n      selectedHotspot,\n      statusFilter\n    } = this.props;\n\n    const { expandedCategories, groupedHotspots } = this.state;\n\n    return (\n      <div className=\"huge-spacer-bottom\">\n        <h1 className=\"hotspot-list-header bordered-bottom\">\n          <SecurityHotspotIcon className=\"spacer-right\" />\n          {translateWithParameters(\n            isStaticListOfHotspots ? 'hotspots.list_title' : `hotspots.list_title.${statusFilter}`,\n            hotspotsTotal\n          )}\n        </h1>\n        <ul className=\"big-spacer-bottom\">\n          {groupedHotspots.map((riskGroup, riskGroupIndex) => {\n            const isLastRiskGroup = riskGroupIndex === groupedHotspots.length - 1;\n\n            return (\n              <li className=\"big-spacer-bottom\" key={riskGroup.risk}>\n                <div className=\"hotspot-risk-header little-spacer-left\">\n                  <span>{translate('hotspots.risk_exposure')}:</span>\n                  <div className={classNames('hotspot-risk-badge', 'spacer-left', riskGroup.risk)}>\n                    {translate('risk_exposure', riskGroup.risk)}\n                  </div>\n                </div>\n                <ul>\n                  {riskGroup.categories.map((cat, categoryIndex) => {\n                    const isLastCategory = categoryIndex === riskGroup.categories.length - 1;\n\n                    return (\n                      <li className=\"spacer-bottom\" key={cat.key}>\n                        <HotspotCategory\n                          categoryKey={cat.key}\n                          expanded={expandedCategories[cat.key]}\n                          hotspots={cat.hotspots}\n                          onHotspotClick={this.props.onHotspotClick}\n                          onToggleExpand={this.handleToggleCategory}\n                          selectedHotspot={selectedHotspot}\n                          title={cat.title}\n                          isLastAndIncomplete={\n                            isLastRiskGroup && isLastCategory && hotspots.length < hotspotsTotal\n                          }\n                        />\n                      </li>\n                    );\n                  })}\n                </ul>\n              </li>\n            );\n          })}\n        </ul>\n        <ListFooter\n          count={hotspots.length}\n          loadMore={!loadingMore ? this.props.onLoadMore : undefined}\n          loading={loadingMore}\n          total={hotspotsTotal}\n        />\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport ListFooter from 'sonar-ui-common/components/controls/ListFooter';\nimport SecurityHotspotIcon from 'sonar-ui-common/components/icons/SecurityHotspotIcon';\nimport { translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { SecurityStandard, Standards } from '../../../types/security';\nimport { RawHotspot } from '../../../types/security-hotspots';\nimport { SECURITY_STANDARD_RENDERER } from '../utils';\nimport HotspotListItem from './HotspotListItem';\n\nexport interface HotspotSimpleListProps {\n  filterByCategory: {\n    standard: SecurityStandard;\n    category: string;\n  };\n  hotspots: RawHotspot[];\n  hotspotsTotal: number;\n  loadingMore: boolean;\n  onHotspotClick: (hotspot: RawHotspot) => void;\n  onLoadMore: () => void;\n  selectedHotspot: RawHotspot;\n  standards: Standards;\n}\n\nexport default function HotspotSimpleList(props: HotspotSimpleListProps) {\n  const {\n    filterByCategory,\n    hotspots,\n    hotspotsTotal,\n    loadingMore,\n    selectedHotspot,\n    standards\n  } = props;\n\n  return (\n    <div className=\"hotspots-list-single-category huge-spacer-bottom\">\n      <h1 className=\"hotspot-list-header bordered-bottom\">\n        <SecurityHotspotIcon className=\"spacer-right\" />\n        {translateWithParameters('hotspots.list_title', hotspotsTotal)}\n      </h1>\n      <div className=\"big-spacer-bottom\">\n        <div className=\"hotspot-category\">\n          <div className=\"hotspot-category-header\">\n            <strong className=\"flex-1 spacer-right break-word\">\n              {SECURITY_STANDARD_RENDERER[filterByCategory.standard](\n                standards,\n                filterByCategory.category\n              )}\n            </strong>\n          </div>\n          <ul>\n            {hotspots.map(h => (\n              <li data-hotspot-key={h.key} key={h.key}>\n                <HotspotListItem\n                  hotspot={h}\n                  onClick={props.onHotspotClick}\n                  selected={h.key === selectedHotspot.key}\n                />\n              </li>\n            ))}\n          </ul>\n        </div>\n      </div>\n      <ListFooter\n        count={hotspots.length}\n        loadMore={!loadingMore ? props.onLoadMore : undefined}\n        loading={loadingMore}\n        total={hotspotsTotal}\n      />\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport { DropdownOverlay } from 'sonar-ui-common/components/controls/Dropdown';\nimport SearchBox from 'sonar-ui-common/components/controls/SearchBox';\nimport DeferredSpinner from 'sonar-ui-common/components/ui/DeferredSpinner';\nimport { PopupPlacement } from 'sonar-ui-common/components/ui/popups';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport Avatar from '../../../../components/ui/Avatar';\nimport './AssigneeSelection.css';\n\nexport interface HotspotAssigneeSelectRendererProps {\n  highlighted?: T.UserActive;\n  loading: boolean;\n  onKeyDown: (event: React.KeyboardEvent) => void;\n  onSearch: (query: string) => void;\n  onSelect: (user: T.UserActive) => void;\n  open: boolean;\n  query?: string;\n  suggestedUsers?: T.UserActive[];\n}\n\nexport default function AssigneeSelectionRenderer(props: HotspotAssigneeSelectRendererProps) {\n  const { highlighted, loading, open, query, suggestedUsers } = props;\n  return (\n    <>\n      <div className=\"display-flex-center\">\n        <SearchBox\n          autoFocus={true}\n          onChange={props.onSearch}\n          onKeyDown={props.onKeyDown}\n          placeholder={translate('hotspots.assignee.select_user')}\n          value={query}\n        />\n\n        {loading && <DeferredSpinner className=\"spacer-left\" />}\n      </div>\n\n      {!loading && open && (\n        <div className=\"position-relative\">\n          <DropdownOverlay noPadding={true} placement={PopupPlacement.BottomLeft}>\n            {suggestedUsers && suggestedUsers.length > 0 ? (\n              <ul className=\"hotspot-assignee-search-results\">\n                {suggestedUsers.map(suggestion => (\n                  <li\n                    className={classNames('padded', {\n                      active: highlighted && highlighted.login === suggestion.login\n                    })}\n                    key={suggestion.login}\n                    onClick={() => props.onSelect(suggestion)}>\n                    <Avatar\n                      className=\"spacer-right\"\n                      hash={suggestion.avatar}\n                      name={suggestion.name}\n                      size={16}\n                    />\n                    {suggestion.name}\n                  </li>\n                ))}\n              </ul>\n            ) : (\n              <div className=\"padded\">{translate('no_results')}</div>\n            )}\n          </DropdownOverlay>\n        </div>\n      )}\n    </>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { debounce } from 'lodash';\nimport * as React from 'react';\nimport { KeyCodes } from 'sonar-ui-common/helpers/keycodes';\nimport { searchUsers } from '../../../../api/users';\nimport { isUserActive } from '../../../../helpers/users';\nimport AssigneeSelectionRenderer from './AssigneeSelectionRenderer';\n\ninterface Props {\n  allowCurrentUserSelection: boolean;\n  loggedInUser: T.LoggedInUser;\n  onSelect: (user?: T.UserActive) => void;\n}\n\ninterface State {\n  highlighted?: T.UserActive;\n  loading: boolean;\n  open: boolean;\n  query?: string;\n  suggestedUsers: T.UserActive[];\n}\n\nexport default class AssigneeSelection extends React.PureComponent<Props, State> {\n  mounted = false;\n\n  constructor(props: Props) {\n    super(props);\n\n    this.state = {\n      loading: false,\n      open: props.allowCurrentUserSelection,\n      suggestedUsers: props.allowCurrentUserSelection ? [props.loggedInUser] : []\n    };\n\n    this.handleSearch = debounce(this.handleSearch, 250);\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  handleSearch = (query: string) => {\n    if (this.mounted) {\n      if (query.length < 2) {\n        this.handleNoSearch(query);\n      } else {\n        this.handleActualSearch(query);\n      }\n    }\n  };\n\n  handleNoSearch = (query: string) => {\n    const { allowCurrentUserSelection, loggedInUser } = this.props;\n\n    this.setState({\n      loading: false,\n      open: allowCurrentUserSelection,\n      query,\n      suggestedUsers: allowCurrentUserSelection ? [loggedInUser] : []\n    });\n  };\n\n  handleActualSearch = (query: string) => {\n    this.setState({ loading: true, query });\n    searchUsers({ q: query })\n      .then(result => {\n        if (this.mounted) {\n          this.setState({\n            loading: false,\n            query,\n            open: true,\n            suggestedUsers: result.users.filter(isUserActive) as T.UserActive[]\n          });\n        }\n      })\n      .catch(() => {\n        if (this.mounted) {\n          this.setState({ loading: false });\n        }\n      });\n  };\n\n  handleKeyDown = (event: React.KeyboardEvent) => {\n    switch (event.keyCode) {\n      case KeyCodes.Enter:\n        event.preventDefault();\n        this.selectHighlighted();\n        break;\n      case KeyCodes.UpArrow:\n        event.preventDefault();\n        this.highlightPrevious();\n        break;\n      case KeyCodes.DownArrow:\n        event.preventDefault();\n        this.highlightNext();\n        break;\n    }\n  };\n\n  getCurrentIndex = () => {\n    const { highlighted, suggestedUsers } = this.state;\n\n    return highlighted\n      ? suggestedUsers.findIndex(suggestion => suggestion.login === highlighted.login)\n      : -1;\n  };\n\n  highlightIndex = (index: number) => {\n    const { suggestedUsers } = this.state;\n\n    if (suggestedUsers.length > 0) {\n      if (index < 0) {\n        index = suggestedUsers.length - 1;\n      } else if (index >= suggestedUsers.length) {\n        index = 0;\n      }\n\n      this.setState({ highlighted: suggestedUsers[index] });\n    }\n  };\n\n  highlightPrevious = () => {\n    this.highlightIndex(this.getCurrentIndex() - 1);\n  };\n\n  highlightNext = () => {\n    this.highlightIndex(this.getCurrentIndex() + 1);\n  };\n\n  selectHighlighted = () => {\n    const { highlighted } = this.state;\n\n    if (highlighted !== undefined) {\n      this.props.onSelect(highlighted);\n    }\n  };\n\n  render() {\n    const { highlighted, loading, open, query, suggestedUsers } = this.state;\n\n    return (\n      <AssigneeSelectionRenderer\n        highlighted={highlighted}\n        loading={loading}\n        onKeyDown={this.handleKeyDown}\n        onSearch={this.handleSearch}\n        onSelect={this.props.onSelect}\n        open={open}\n        query={query}\n        suggestedUsers={suggestedUsers}\n      />\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { EditButton } from 'sonar-ui-common/components/controls/buttons';\nimport EscKeydownHandler from 'sonar-ui-common/components/controls/EscKeydownHandler';\nimport OutsideClickHandler from 'sonar-ui-common/components/controls/OutsideClickHandler';\nimport DeferredSpinner from 'sonar-ui-common/components/ui/DeferredSpinner';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport AssigneeSelection from './AssigneeSelection';\n\nexport interface AssigneeRendererProps {\n  canEdit: boolean;\n  editing: boolean;\n  loading: boolean;\n\n  assignee?: T.UserBase;\n  loggedInUser?: T.LoggedInUser;\n\n  onAssign: (user?: T.UserActive) => void;\n  onEnterEditionMode: () => void;\n  onExitEditionMode: () => void;\n}\n\nexport default function AssigneeRenderer(props: AssigneeRendererProps) {\n  const { assignee, canEdit, loggedInUser, editing, loading } = props;\n\n  return (\n    <DeferredSpinner loading={loading}>\n      {!editing && (\n        <div className=\"display-flex-center\">\n          <strong className=\"nowrap\">\n            {assignee &&\n              (assignee.active\n                ? assignee.name ?? assignee.login\n                : translateWithParameters('user.x_deleted', assignee.name ?? assignee.login))}\n            {!assignee && translate('unassigned')}\n          </strong>\n          {loggedInUser && canEdit && (\n            <EditButton className=\"spacer-left\" onClick={props.onEnterEditionMode} />\n          )}\n        </div>\n      )}\n\n      {loggedInUser && editing && (\n        <EscKeydownHandler onKeydown={props.onExitEditionMode}>\n          <OutsideClickHandler onClickOutside={props.onExitEditionMode}>\n            <AssigneeSelection\n              allowCurrentUserSelection={loggedInUser.login !== assignee?.login}\n              loggedInUser={loggedInUser}\n              onSelect={props.onAssign}\n            />\n          </OutsideClickHandler>\n        </EscKeydownHandler>\n      )}\n    </DeferredSpinner>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { assignSecurityHotspot } from '../../../../api/security-hotspots';\nimport addGlobalSuccessMessage from '../../../../app/utils/addGlobalSuccessMessage';\nimport { withCurrentUser } from '../../../../components/hoc/withCurrentUser';\nimport { isLoggedIn } from '../../../../helpers/users';\nimport { Hotspot, HotspotStatus } from '../../../../types/security-hotspots';\nimport AssigneeRenderer from './AssigneeRenderer';\n\ninterface Props {\n  currentUser: T.CurrentUser;\n  hotspot: Hotspot;\n\n  onAssigneeChange: () => void;\n}\n\ninterface State {\n  editing: boolean;\n  loading: boolean;\n}\n\nexport class Assignee extends React.PureComponent<Props, State> {\n  mounted = false;\n  state = {\n    editing: false,\n    loading: false\n  };\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  handleEnterEditionMode = () => {\n    this.setState({ editing: true });\n  };\n\n  handleExitEditionMode = () => {\n    this.setState({ editing: false });\n  };\n\n  handleAssign = (newAssignee?: T.UserActive) => {\n    if (newAssignee && newAssignee.login) {\n      this.setState({ loading: true });\n      assignSecurityHotspot(this.props.hotspot.key, {\n        assignee: newAssignee.login\n      })\n        .then(() => {\n          if (this.mounted) {\n            this.setState({ editing: false, loading: false });\n            this.props.onAssigneeChange();\n          }\n        })\n        .then(() =>\n          addGlobalSuccessMessage(\n            translateWithParameters('hotspots.assign.success', newAssignee.name)\n          )\n        )\n        .catch(() => this.setState({ loading: false }));\n    }\n  };\n\n  render() {\n    const {\n      currentUser,\n      hotspot: { assigneeUser, status }\n    } = this.props;\n    const { editing, loading } = this.state;\n\n    const canEdit = status === HotspotStatus.TO_REVIEW;\n\n    return (\n      <AssigneeRenderer\n        assignee={assigneeUser}\n        canEdit={canEdit}\n        editing={editing}\n        loading={loading}\n        loggedInUser={isLoggedIn(currentUser) ? currentUser : undefined}\n        onAssign={this.handleAssign}\n        onEnterEditionMode={this.handleEnterEditionMode}\n        onExitEditionMode={this.handleExitEditionMode}\n      />\n    );\n  }\n}\n\nexport default withCurrentUser(Assignee);\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as globalMessages from '../../store/globalMessages';\nimport getStore from './getStore';\n\nexport default function addGlobalErrorMessage(message: string): void {\n  const store = getStore();\n  store.dispatch(globalMessages.addGlobalErrorMessage(message));\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { getHostUrl } from 'sonar-ui-common/helpers/urls';\nimport { Ide } from '../types/sonarlint';\n\nconst SONARLINT_PORT_START = 64120;\nconst SONARLINT_PORT_RANGE = 11;\n\nexport async function probeSonarLintServers(): Promise<Array<Ide>> {\n  const probedPorts = buildPortRange();\n  const probeRequests = probedPorts.map(p =>\n    fetch(buildSonarLintEndpoint(p, '/status'))\n      .then(r => r.json())\n      .then(json => {\n        const { ideName, description } = json;\n        return { port: p, ideName, description } as Ide;\n      })\n      .catch(() => undefined)\n  );\n  const results = await Promise.all(probeRequests);\n  return results.filter(r => r !== undefined) as Ide[];\n}\n\nexport function openHotspot(calledPort: number, projectKey: string, hotspotKey: string) {\n  const showUrl = new URL(buildSonarLintEndpoint(calledPort, '/hotspots/show'));\n  showUrl.searchParams.set('server', getHostUrl());\n  showUrl.searchParams.set('project', projectKey);\n  showUrl.searchParams.set('hotspot', hotspotKey);\n  return fetch(showUrl.toString());\n}\n\n/**\n * @returns [ start , ... , start + size - 1 ]\n */\nexport function buildPortRange(start = SONARLINT_PORT_START, size = SONARLINT_PORT_RANGE) {\n  return Array.from(Array(size).keys()).map(p => start + p);\n}\n\nfunction buildSonarLintEndpoint(port: number, path: string) {\n  return `http://localhost:${port}/sonarlint/api${path}`;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Ide } from '../../../types/sonarlint';\n\nexport const HotspotOpenInIdeOverlay = ({\n  ides,\n  onIdeSelected\n}: {\n  ides: Array<Ide>;\n  onIdeSelected: (ide: Ide) => Promise<void>;\n}) =>\n  ides.length > 1 ? (\n    <ul className=\"menu\">\n      {ides.map(ide => {\n        const { ideName, description } = ide;\n        const label = ideName + (description ? ` - ${description}` : '');\n        return (\n          <li key={ide.port}>\n            <a href=\"#\" onClick={() => onIdeSelected(ide)}>\n              {label}\n            </a>\n          </li>\n        );\n      })}\n    </ul>\n  ) : null;\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Button } from 'sonar-ui-common/components/controls/buttons';\nimport { DropdownOverlay } from 'sonar-ui-common/components/controls/Dropdown';\nimport Toggler from 'sonar-ui-common/components/controls/Toggler';\nimport DeferredSpinner from 'sonar-ui-common/components/ui/DeferredSpinner';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport addGlobalErrorMessage from '../../../app/utils/addGlobalErrorMessage';\nimport addGlobalSuccessMessage from '../../../app/utils/addGlobalSuccessMessage';\nimport { openHotspot, probeSonarLintServers } from '../../../helpers/sonarlint';\nimport { Ide } from '../../../types/sonarlint';\nimport { HotspotOpenInIdeOverlay } from './HotspotOpenInIdeOverlay';\n\ninterface Props {\n  projectKey: string;\n  hotspotKey: string;\n}\n\ninterface State {\n  loading: boolean;\n  ides: Array<Ide>;\n}\n\nexport default class HotspotOpenInIdeButton extends React.PureComponent<Props, State> {\n  mounted = false;\n\n  state = {\n    loading: false,\n    ides: []\n  };\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  handleOnClick = async () => {\n    this.setState({ loading: true, ides: [] });\n    const ides = await probeSonarLintServers();\n    if (ides.length === 0) {\n      if (this.mounted) {\n        this.setState({ loading: false });\n      }\n      this.showError();\n    } else if (ides.length === 1) {\n      this.openHotspot(ides[0]);\n    } else if (this.mounted) {\n      this.setState({ loading: false, ides });\n    }\n  };\n\n  openHotspot = (ide: Ide) => {\n    this.setState({ loading: true, ides: [] });\n    const { projectKey, hotspotKey } = this.props;\n    return openHotspot(ide.port, projectKey, hotspotKey)\n      .then(this.showSuccess)\n      .catch(this.showError)\n      .finally(this.cleanState);\n  };\n\n  showError = () => addGlobalErrorMessage(translate('hotspots.open_in_ide.failure'));\n\n  showSuccess = () => addGlobalSuccessMessage(translate('hotspots.open_in_ide.success'));\n\n  cleanState = () => {\n    if (this.mounted) {\n      this.setState({ loading: false, ides: [] });\n    }\n  };\n\n  render() {\n    return (\n      <Toggler\n        open={this.state.ides.length > 1}\n        onRequestClose={this.cleanState}\n        overlay={\n          <DropdownOverlay>\n            <HotspotOpenInIdeOverlay ides={this.state.ides} onIdeSelected={this.openHotspot} />\n          </DropdownOverlay>\n        }>\n        <Button onClick={this.handleOnClick}>\n          {translate('hotspots.open_in_ide.open')}\n          <DeferredSpinner loading={this.state.loading} className=\"spacer-left\" />\n        </Button>\n      </Toggler>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Button, ResetButtonLink } from 'sonar-ui-common/components/controls/buttons';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport FormattingTips from '../../../components/common/FormattingTips';\n\nexport interface HotspotCommentPopupProps {\n  markdownComment: string;\n  onCommentEditSubmit: (comment: string) => void;\n  onCancelEdit: () => void;\n}\n\nexport default function HotspotCommentPopup(props: HotspotCommentPopupProps) {\n  const [comment, setComment] = React.useState(props.markdownComment);\n\n  return (\n    <div className=\"issue-comment-bubble-popup\">\n      <div className=\"issue-comment-form-text\">\n        <textarea\n          autoFocus={true}\n          onChange={event => setComment(event.target.value)}\n          rows={2}\n          value={comment}\n        />\n      </div>\n      <div className=\"spacer-top display-flex-space-between\">\n        <div className=\"issue-comment-form-tips\">\n          <FormattingTips />\n        </div>\n        <div className=\"\">\n          <Button\n            className=\"little-spacer-right\"\n            onClick={() => props.onCommentEditSubmit(comment)}>\n            {translate('save')}\n          </Button>\n          <ResetButtonLink\n            onClick={() => {\n              setComment('');\n              props.onCancelEdit();\n            }}>\n            {translate('cancel')}\n          </ResetButtonLink>\n        </div>\n      </div>\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport { sanitize } from 'dompurify';\nimport * as React from 'react';\nimport { Button, DeleteButton, EditButton } from 'sonar-ui-common/components/controls/buttons';\nimport Dropdown, { DropdownOverlay } from 'sonar-ui-common/components/controls/Dropdown';\nimport Toggler from 'sonar-ui-common/components/controls/Toggler';\nimport DateTimeFormatter from 'sonar-ui-common/components/intl/DateTimeFormatter';\nimport { PopupPlacement } from 'sonar-ui-common/components/ui/popups';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport IssueChangelogDiff from '../../../components/issue/components/IssueChangelogDiff';\nimport Avatar from '../../../components/ui/Avatar';\nimport { Hotspot, ReviewHistoryType } from '../../../types/security-hotspots';\nimport { getHotspotReviewHistory } from '../utils';\nimport HotspotCommentPopup from './HotspotCommentPopup';\n\nexport interface HotspotReviewHistoryProps {\n  hotspot: Hotspot;\n  onDeleteComment: (key: string) => void;\n  onEditComment: (key: string, comment: string) => void;\n}\n\nexport default function HotspotReviewHistory(props: HotspotReviewHistoryProps) {\n  const { hotspot } = props;\n  const reviewHistory = getHotspotReviewHistory(hotspot);\n  const [editedCommentKey, setEditedCommentKey] = React.useState('');\n\n  return (\n    <>\n      {reviewHistory.map((historyElt, historyIndex) => {\n        const { user, type, diffs, date, html, key, updatable, markdown } = historyElt;\n        return (\n          <div\n            className={classNames('padded', { 'bordered-top': historyIndex > 0 })}\n            key={historyIndex}>\n            <div className=\"display-flex-center\">\n              {user.name && (\n                <>\n                  <Avatar\n                    className=\"little-spacer-right\"\n                    hash={user.avatar}\n                    name={user.name}\n                    size={20}\n                  />\n                  <strong>\n                    {user.active ? user.name : translateWithParameters('user.x_deleted', user.name)}\n                  </strong>\n                  {type === ReviewHistoryType.Creation && (\n                    <span className=\"little-spacer-left\">\n                      {translate('hotspots.review_history.created')}\n                    </span>\n                  )}\n                  {type === ReviewHistoryType.Comment && (\n                    <span className=\"little-spacer-left\">\n                      {translate('hotspots.review_history.comment_added')}\n                    </span>\n                  )}\n                  <span className=\"little-spacer-left little-spacer-right\">-</span>\n                </>\n              )}\n              <DateTimeFormatter date={date} />\n            </div>\n\n            {type === ReviewHistoryType.Diff && diffs && (\n              <div className=\"spacer-top\">\n                {diffs.map((diff, diffIndex) => (\n                  <IssueChangelogDiff diff={diff} key={diffIndex} />\n                ))}\n              </div>\n            )}\n\n            {type === ReviewHistoryType.Comment && key && html && markdown && (\n              <div className=\"spacer-top display-flex-space-between\">\n                <div className=\"markdown\" dangerouslySetInnerHTML={{ __html: sanitize(html) }} />\n                {updatable && (\n                  <div>\n                    <div className=\"dropdown\">\n                      <Toggler\n                        onRequestClose={() => {\n                          setEditedCommentKey('');\n                        }}\n                        open={key === editedCommentKey}\n                        overlay={\n                          <DropdownOverlay placement={PopupPlacement.BottomRight}>\n                            <HotspotCommentPopup\n                              markdownComment={markdown}\n                              onCancelEdit={() => setEditedCommentKey('')}\n                              onCommentEditSubmit={comment => {\n                                setEditedCommentKey('');\n                                props.onEditComment(key, comment);\n                              }}\n                            />\n                          </DropdownOverlay>\n                        }>\n                        <EditButton\n                          className=\"it__hotspots-comment-edit button-small\"\n                          onClick={() => setEditedCommentKey(key)}\n                        />\n                      </Toggler>\n                    </div>\n                    <Dropdown\n                      onOpen={() => setEditedCommentKey('')}\n                      overlay={\n                        <div className=\"padded abs-width-150\">\n                          <p>{translate('issue.comment.delete_confirm_message')}</p>\n                          <Button\n                            className=\"button-red big-spacer-top pull-right\"\n                            onClick={() => props.onDeleteComment(key)}>\n                            {translate('delete')}\n                          </Button>\n                        </div>\n                      }\n                      overlayPlacement={PopupPlacement.BottomRight}>\n                      <DeleteButton className=\"it__hotspots-comment-delete button-small\" />\n                    </Dropdown>\n                  </div>\n                )}\n              </div>\n            )}\n          </div>\n        );\n      })}\n    </>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport { Button, ResetButtonLink } from 'sonar-ui-common/components/controls/buttons';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport {\n  commentSecurityHotspot,\n  deleteSecurityHotspotComment,\n  editSecurityHotspotComment\n} from '../../../api/security-hotspots';\nimport FormattingTips from '../../../components/common/FormattingTips';\nimport { isLoggedIn } from '../../../helpers/users';\nimport { Hotspot } from '../../../types/security-hotspots';\nimport HotspotReviewHistory from './HotspotReviewHistory';\n\ninterface Props {\n  currentUser: T.CurrentUser;\n  hotspot: Hotspot;\n  commentTextRef: React.RefObject<HTMLTextAreaElement>;\n  commentVisible: boolean;\n  onCommentUpdate: () => void;\n  onOpenComment: () => void;\n  onCloseComment: () => void;\n}\n\ninterface State {\n  comment: string;\n}\n\nexport default class HotspotReviewHistoryAndComments extends React.PureComponent<Props, State> {\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      comment: ''\n    };\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (prevProps.hotspot !== this.props.hotspot) {\n      this.setState({\n        comment: ''\n      });\n    }\n  }\n\n  handleCommentChange = (event: React.ChangeEvent<HTMLTextAreaElement>) => {\n    this.setState({ comment: event.target.value });\n  };\n\n  handleCloseComment = () => {\n    this.setState({ comment: '' });\n    this.props.onCloseComment();\n  };\n\n  handleSubmitComment = () => {\n    return commentSecurityHotspot(this.props.hotspot.key, this.state.comment).then(() => {\n      this.setState({ comment: '' });\n      this.props.onCloseComment();\n      this.props.onCommentUpdate();\n    });\n  };\n\n  handleDeleteComment = (key: string) => {\n    return deleteSecurityHotspotComment(key).then(() => {\n      this.props.onCommentUpdate();\n    });\n  };\n\n  handleEditComment = (key: string, comment: string) => {\n    return editSecurityHotspotComment(key, comment).then(() => {\n      this.props.onCommentUpdate();\n    });\n  };\n\n  render() {\n    const { currentUser, hotspot, commentTextRef, commentVisible } = this.props;\n    const { comment } = this.state;\n    return (\n      <>\n        <h1>{translate('hotspot.section.activity')}</h1>\n        <div className=\"padded\">\n          <HotspotReviewHistory\n            hotspot={hotspot}\n            onDeleteComment={this.handleDeleteComment}\n            onEditComment={this.handleEditComment}\n          />\n\n          {isLoggedIn(currentUser) && (\n            <>\n              <hr />\n              <div className=\"big-spacer-top\">\n                <Button\n                  className={classNames({ invisible: commentVisible })}\n                  id=\"hotspot-comment-box-display\"\n                  onClick={this.props.onOpenComment}>\n                  {translate('hotspots.comment.open')}\n                </Button>\n\n                <div className={classNames({ invisible: !commentVisible })}>\n                  <div className=\"little-spacer-bottom\">{translate('hotspots.comment.field')}</div>\n                  <textarea\n                    className=\"form-field fixed-width width-100 spacer-bottom\"\n                    onChange={this.handleCommentChange}\n                    ref={commentTextRef}\n                    rows={2}\n                    value={comment}\n                  />\n                  <div className=\"display-flex-space-between display-flex-center \">\n                    <FormattingTips className=\"huge-spacer-bottom\" />\n                    <div>\n                      <Button\n                        className=\"huge-spacer-bottom\"\n                        id=\"hotspot-comment-box-submit\"\n                        onClick={this.handleSubmitComment}>\n                        {translate('hotspots.comment.submit')}\n                      </Button>\n                      <ResetButtonLink\n                        className=\"spacer-left huge-spacer-bottom\"\n                        id=\"hotspot-comment-box-cancel\"\n                        onClick={this.handleCloseComment}>\n                        {translate('cancel')}\n                      </ResetButtonLink>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </>\n          )}\n        </div>\n      </>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport DeferredSpinner from 'sonar-ui-common/components/ui/DeferredSpinner';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { SourceViewerContext } from '../../../components/SourceViewer/SourceViewerContext';\nimport SourceViewerHeaderSlim from '../../../components/SourceViewer/SourceViewerHeaderSlim';\nimport { BranchLike } from '../../../types/branch-like';\nimport { Hotspot } from '../../../types/security-hotspots';\nimport SnippetViewer from '../../issues/crossComponentSourceViewer/SnippetViewer';\n\nexport interface HotspotSnippetContainerRendererProps {\n  branchLike?: BranchLike;\n  displayProjectName?: boolean;\n  highlightedSymbols: string[];\n  hotspot: Hotspot;\n  loading: boolean;\n  locations: { [line: number]: T.LinearIssueLocation[] };\n  onExpandBlock: (direction: T.ExpandDirection) => Promise<void>;\n  onSymbolClick: (symbols: string[]) => void;\n  sourceLines: T.SourceLine[];\n  sourceViewerFile: T.SourceViewerFile;\n}\n\nconst noop = () => undefined;\n\nexport default function HotspotSnippetContainerRenderer(\n  props: HotspotSnippetContainerRendererProps\n) {\n  const {\n    branchLike,\n    displayProjectName,\n    highlightedSymbols,\n    hotspot,\n    loading,\n    locations,\n    sourceLines,\n    sourceViewerFile\n  } = props;\n\n  return (\n    <>\n      {!loading && sourceLines.length === 0 && (\n        <p className=\"spacer-bottom\">{translate('hotspots.no_associated_lines')}</p>\n      )}\n      <div className=\"bordered big-spacer-bottom\">\n        <SourceViewerHeaderSlim\n          branchLike={branchLike}\n          expandable={false}\n          displayProjectName={displayProjectName}\n          linkToProject={false}\n          loading={loading}\n          onExpand={noop}\n          sourceViewerFile={sourceViewerFile}\n        />\n        <DeferredSpinner className=\"big-spacer\" loading={loading}>\n          {sourceLines.length > 0 && (\n            <SourceViewerContext.Provider /* Used by LineOptionsPopup */\n              value={{ branchLike, file: sourceViewerFile }}>\n              <SnippetViewer\n                branchLike={branchLike}\n                component={sourceViewerFile}\n                displaySCM={false}\n                expandBlock={(_i, direction) => props.onExpandBlock(direction)}\n                handleCloseIssues={noop}\n                handleOpenIssues={noop}\n                handleSymbolClick={props.onSymbolClick}\n                highlightedLocationMessage={undefined}\n                highlightedSymbols={highlightedSymbols}\n                index={0}\n                issue={hotspot}\n                issuesByLine={{}}\n                lastSnippetOfLastGroup={false}\n                locations={[]}\n                locationsByLine={locations}\n                onIssueChange={noop}\n                onIssuePopupToggle={noop}\n                onLocationSelect={noop}\n                openIssuesByLine={{}}\n                renderDuplicationPopup={noop}\n                snippet={sourceLines}\n              />\n            </SourceViewerContext.Provider>\n          )}\n        </DeferredSpinner>\n      </div>\n    </>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { sanitize } from 'dompurify';\nimport * as React from 'react';\nimport BoxedTabs from 'sonar-ui-common/components/controls/BoxedTabs';\nimport Tab from 'sonar-ui-common/components/controls/Tabs';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { Hotspot } from '../../../types/security-hotspots';\n\ninterface Props {\n  hotspot: Hotspot;\n}\n\ninterface State {\n  currentTab: Tab;\n  tabs: Tab[];\n}\n\ninterface Tab {\n  key: TabKeys;\n  label: React.ReactNode;\n  content: string;\n}\n\nexport enum TabKeys {\n  RiskDescription = 'risk',\n  VulnerabilityDescription = 'vulnerability',\n  FixRecommendation = 'fix'\n}\n\nexport default class HotspotViewerTabs extends React.PureComponent<Props, State> {\n  constructor(props: Props) {\n    super(props);\n    const tabs = this.computeTabs();\n    this.state = {\n      currentTab: tabs[0],\n      tabs\n    };\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (this.props.hotspot.key !== prevProps.hotspot.key) {\n      const tabs = this.computeTabs();\n      this.setState({\n        currentTab: tabs[0],\n        tabs\n      });\n    }\n  }\n\n  handleSelectTabs = (tabKey: TabKeys) => {\n    const { tabs } = this.state;\n    const currentTab = tabs.find(tab => tab.key === tabKey)!;\n    this.setState({ currentTab });\n  };\n\n  computeTabs() {\n    const { hotspot } = this.props;\n    return [\n      {\n        key: TabKeys.RiskDescription,\n        label: translate('hotspots.tabs.risk_description'),\n        content: hotspot.rule.riskDescription || ''\n      },\n      {\n        key: TabKeys.VulnerabilityDescription,\n        label: translate('hotspots.tabs.vulnerability_description'),\n        content: hotspot.rule.vulnerabilityDescription || ''\n      },\n      {\n        key: TabKeys.FixRecommendation,\n        label: translate('hotspots.tabs.fix_recommendations'),\n        content: hotspot.rule.fixRecommendations || ''\n      }\n    ].filter(tab => Boolean(tab.content));\n  }\n\n  render() {\n    const { tabs, currentTab } = this.state;\n    if (tabs.length === 0) {\n      return null;\n    }\n\n    return (\n      <>\n        <BoxedTabs onSelect={this.handleSelectTabs} selected={currentTab.key} tabs={tabs} />\n        <div className=\"bordered huge-spacer-bottom\">\n          <div\n            className=\"markdown big-padded\"\n            dangerouslySetInnerHTML={{ __html: sanitize(currentTab.content) }}\n          />\n        </div>\n      </>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { getSources } from '../../../api/components';\nimport { locationsByLine } from '../../../components/SourceViewer/helpers/indexing';\nimport { getBranchLikeQuery } from '../../../helpers/branch-like';\nimport { BranchLike } from '../../../types/branch-like';\nimport { ComponentQualifier } from '../../../types/component';\nimport { Hotspot } from '../../../types/security-hotspots';\nimport { constructSourceViewerFile } from '../utils';\nimport HotspotSnippetContainerRenderer from './HotspotSnippetContainerRenderer';\n\ninterface Props {\n  branchLike?: BranchLike;\n  component: T.Component;\n  hotspot: Hotspot;\n}\n\ninterface State {\n  highlightedSymbols: string[];\n  lastLine?: number;\n  loading: boolean;\n  sourceLines: T.SourceLine[];\n}\n\nconst BUFFER_LINES = 5;\nconst EXPAND_BY_LINES = 50;\n\nexport default class HotspotSnippetContainer extends React.Component<Props, State> {\n  mounted = false;\n  state: State = {\n    highlightedSymbols: [],\n    loading: true,\n    sourceLines: []\n  };\n\n  componentWillMount() {\n    this.mounted = true;\n    this.fetchSources();\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (prevProps.hotspot.key !== this.props.hotspot.key) {\n      this.fetchSources();\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  checkLastLine(lines: T.SourceLine[], target: number): number | undefined {\n    if (lines.length < 1) {\n      return undefined;\n    }\n    const lastLineReceived = lines[lines.length - 1].line;\n    if (lastLineReceived < target) {\n      return lastLineReceived;\n    }\n    return undefined;\n  }\n\n  async fetchSources() {\n    const {\n      branchLike,\n      hotspot: { component, textRange }\n    } = this.props;\n\n    if (!textRange) {\n      // Hotspot not associated to any loc\n      this.setState({ loading: false, lastLine: undefined, sourceLines: [] });\n      return;\n    }\n\n    const from = Math.max(1, textRange.startLine - BUFFER_LINES);\n    // Add 1 to check for end-of-file:\n    const to = textRange.endLine + BUFFER_LINES + 1;\n\n    this.setState({ loading: true });\n\n    let sourceLines = await getSources({\n      key: component.key,\n      from,\n      to,\n      ...getBranchLikeQuery(branchLike)\n    }).catch(() => [] as T.SourceLine[]);\n\n    if (this.mounted) {\n      const lastLine = this.checkLastLine(sourceLines, to);\n\n      // remove extra sourceline if we didn't reach the end:\n      sourceLines = lastLine ? sourceLines : sourceLines.slice(0, -1);\n      this.setState({ lastLine, loading: false, sourceLines });\n    }\n  }\n\n  handleExpansion = (direction: T.ExpandDirection) => {\n    const { branchLike, hotspot } = this.props;\n    const { sourceLines } = this.state;\n\n    const range =\n      direction === 'up'\n        ? {\n            from: Math.max(1, sourceLines[0].line - EXPAND_BY_LINES),\n            to: sourceLines[0].line - 1\n          }\n        : {\n            from: sourceLines[sourceLines.length - 1].line + 1,\n            // Add 1 to check for end-of-file:\n            to: sourceLines[sourceLines.length - 1].line + EXPAND_BY_LINES + 1\n          };\n\n    return getSources({\n      key: hotspot.component.key,\n      ...range,\n      ...getBranchLikeQuery(branchLike)\n    }).then(additionalLines => {\n      const { lastLine: previousLastLine } = this.state;\n\n      const lastLine =\n        direction === 'down' ? this.checkLastLine(additionalLines, range.to) : previousLastLine;\n\n      let concatSourceLines;\n      if (direction === 'up') {\n        concatSourceLines = additionalLines.concat(sourceLines);\n      } else {\n        // remove extra sourceline if we didn't reach the end:\n        concatSourceLines = sourceLines.concat(\n          lastLine ? additionalLines : additionalLines.slice(0, -1)\n        );\n      }\n\n      this.setState({\n        lastLine,\n        sourceLines: concatSourceLines\n      });\n    });\n  };\n\n  handleSymbolClick = (highlightedSymbols: string[]) => {\n    this.setState({ highlightedSymbols });\n  };\n\n  render() {\n    const { branchLike, component, hotspot } = this.props;\n    const { highlightedSymbols, lastLine, loading, sourceLines } = this.state;\n\n    const locations = locationsByLine([hotspot]);\n\n    const sourceViewerFile = constructSourceViewerFile(hotspot, lastLine);\n\n    return (\n      <HotspotSnippetContainerRenderer\n        branchLike={branchLike}\n        displayProjectName={component.qualifier === ComponentQualifier.Application}\n        highlightedSymbols={highlightedSymbols}\n        hotspot={hotspot}\n        loading={loading}\n        locations={locations}\n        onExpandBlock={this.handleExpansion}\n        onSymbolClick={this.handleSymbolClick}\n        sourceLines={sourceLines}\n        sourceViewerFile={sourceViewerFile}\n      />\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { HotspotStatusOption } from '../../../../types/security-hotspots';\n\nexport interface StatusDescriptionProps {\n  statusOption: HotspotStatusOption;\n  showTitle?: boolean;\n}\n\nexport default function StatusDescription(props: StatusDescriptionProps) {\n  const { statusOption, showTitle } = props;\n\n  return (\n    <div>\n      <h3>\n        {showTitle && `${translate('status')}: `}\n        {translate('hotspots.status_option', statusOption)}\n      </h3>\n      <span>{translate('hotspots.status_option', statusOption, 'description')}</span>\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { SubmitButton } from 'sonar-ui-common/components/controls/buttons';\nimport Radio from 'sonar-ui-common/components/controls/Radio';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport FormattingTips from '../../../../components/common/FormattingTips';\nimport { HotspotStatusOption } from '../../../../types/security-hotspots';\nimport StatusDescription from './StatusDescription';\n\nexport interface StatusSelectionRendererProps {\n  selectedStatus: HotspotStatusOption;\n  onStatusChange: (statusOption: HotspotStatusOption) => void;\n\n  comment?: string;\n  onCommentChange: (comment: string) => void;\n\n  onSubmit: () => void;\n\n  loading: boolean;\n  submitDisabled: boolean;\n}\n\nexport default function StatusSelectionRenderer(props: StatusSelectionRendererProps) {\n  const { comment, loading, selectedStatus, submitDisabled } = props;\n\n  const renderOption = (status: HotspotStatusOption) => {\n    return (\n      <Radio\n        checked={selectedStatus === status}\n        className=\"big-spacer-bottom\"\n        onCheck={props.onStatusChange}\n        value={status}>\n        <StatusDescription statusOption={status} />\n      </Radio>\n    );\n  };\n\n  return (\n    <>\n      <div className=\"big-padded\">\n        {renderOption(HotspotStatusOption.TO_REVIEW)}\n        {renderOption(HotspotStatusOption.FIXED)}\n        {renderOption(HotspotStatusOption.SAFE)}\n      </div>\n\n      <hr />\n      <div className=\"big-padded display-flex-column\">\n        <label className=\"text-bold\" htmlFor=\"comment-textarea\">\n          {translate('hotspots.status.add_comment')}\n        </label>\n        <textarea\n          className=\"spacer-top form-field fixed-width spacer-bottom\"\n          id=\"comment-textarea\"\n          onChange={(event: React.ChangeEvent<HTMLTextAreaElement>) =>\n            props.onCommentChange(event.currentTarget.value)\n          }\n          rows={4}\n          value={comment}\n        />\n        <FormattingTips />\n\n        <div className=\"big-spacer-top display-flex-justify-end display-flex-center\">\n          <SubmitButton disabled={submitDisabled || loading} onClick={props.onSubmit}>\n            {translate('hotspots.status.change_status')}\n          </SubmitButton>\n\n          {loading && <i className=\"spacer-left spinner\" />}\n        </div>\n      </div>\n    </>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { setSecurityHotspotStatus } from '../../../../api/security-hotspots';\nimport addGlobalSuccessMessage from '../../../../app/utils/addGlobalSuccessMessage';\nimport { Hotspot, HotspotStatusOption } from '../../../../types/security-hotspots';\nimport {\n  getStatusAndResolutionFromStatusOption,\n  getStatusOptionFromStatusAndResolution\n} from '../../utils';\nimport StatusSelectionRenderer from './StatusSelectionRenderer';\n\ninterface Props {\n  hotspot: Hotspot;\n  onStatusOptionChange: (statusOption: HotspotStatusOption) => Promise<void>;\n}\n\ninterface State {\n  comment?: string;\n  loading: boolean;\n  initialStatus: HotspotStatusOption;\n  selectedStatus: HotspotStatusOption;\n}\n\nexport default class StatusSelection extends React.PureComponent<Props, State> {\n  mounted = false;\n\n  constructor(props: Props) {\n    super(props);\n\n    const initialStatus = getStatusOptionFromStatusAndResolution(\n      props.hotspot.status,\n      props.hotspot.resolution\n    );\n\n    this.state = {\n      loading: false,\n      initialStatus,\n      selectedStatus: initialStatus\n    };\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  handleStatusChange = (selectedStatus: HotspotStatusOption) => {\n    this.setState({ selectedStatus });\n  };\n\n  handleCommentChange = (comment: string) => {\n    this.setState({ comment });\n  };\n\n  handleSubmit = () => {\n    const { hotspot } = this.props;\n    const { comment, initialStatus, selectedStatus } = this.state;\n\n    if (selectedStatus && selectedStatus !== initialStatus) {\n      this.setState({ loading: true });\n      setSecurityHotspotStatus(hotspot.key, {\n        ...getStatusAndResolutionFromStatusOption(selectedStatus),\n        comment: comment || undefined\n      })\n        .then(async () => {\n          await this.props.onStatusOptionChange(selectedStatus);\n          this.setState({ loading: false });\n        })\n        .then(() =>\n          addGlobalSuccessMessage(\n            translateWithParameters(\n              'hotspots.update.success',\n              translate('hotspots.status_option', selectedStatus)\n            )\n          )\n        )\n        .catch(() => this.setState({ loading: false }));\n    }\n  };\n\n  render() {\n    const { comment, initialStatus, loading, selectedStatus } = this.state;\n    const submitDisabled = selectedStatus === initialStatus;\n\n    return (\n      <StatusSelectionRenderer\n        comment={comment}\n        loading={loading}\n        onCommentChange={this.handleCommentChange}\n        onStatusChange={this.handleStatusChange}\n        onSubmit={this.handleSubmit}\n        selectedStatus={selectedStatus}\n        submitDisabled={submitDisabled}\n      />\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport { DropdownOverlay } from 'sonar-ui-common/components/controls/Dropdown';\nimport Toggler from 'sonar-ui-common/components/controls/Toggler';\nimport Tooltip from 'sonar-ui-common/components/controls/Tooltip';\nimport ChevronDownIcon from 'sonar-ui-common/components/icons/ChevronDownIcon';\nimport { PopupPlacement } from 'sonar-ui-common/components/ui/popups';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { withCurrentUser } from '../../../../components/hoc/withCurrentUser';\nimport { isLoggedIn } from '../../../../helpers/users';\nimport { Hotspot } from '../../../../types/security-hotspots';\nimport { getStatusOptionFromStatusAndResolution } from '../../utils';\nimport './Status.css';\nimport StatusDescription from './StatusDescription';\nimport StatusSelection from './StatusSelection';\n\nexport interface StatusProps {\n  currentUser: T.CurrentUser;\n  hotspot: Hotspot;\n\n  onStatusChange: () => Promise<void>;\n}\n\nexport function Status(props: StatusProps) {\n  const { currentUser, hotspot } = props;\n  const [isOpen, setIsOpen] = React.useState(false);\n\n  const statusOption = getStatusOptionFromStatusAndResolution(hotspot.status, hotspot.resolution);\n  const readonly = !hotspot.canChangeStatus || !isLoggedIn(currentUser);\n\n  const trigger = (\n    <div\n      aria-expanded={isOpen}\n      aria-haspopup={true}\n      className={classNames('padded bordered display-flex-column display-flex-justify-center', {\n        readonly\n      })}\n      id=\"status-trigger\"\n      onClick={() => !readonly && setIsOpen(true)}\n      role=\"button\"\n      tabIndex={0}>\n      <div className=\"display-flex-center display-flex-space-between\">\n        {isOpen ? (\n          <span className=\"h3\">{translate('hotspots.status.select_status')}</span>\n        ) : (\n          <StatusDescription showTitle={true} statusOption={statusOption} />\n        )}\n        {!readonly && <ChevronDownIcon className=\"big-spacer-left\" />}\n      </div>\n    </div>\n  );\n\n  const actionableTrigger = (\n    <Toggler\n      closeOnClickOutside={true}\n      closeOnEscape={true}\n      onRequestClose={() => setIsOpen(false)}\n      open={isOpen}\n      overlay={\n        <DropdownOverlay noPadding={true} placement={PopupPlacement.Bottom}>\n          <StatusSelection\n            hotspot={hotspot}\n            onStatusOptionChange={async () => {\n              await props.onStatusChange();\n              setIsOpen(false);\n            }}\n          />\n        </DropdownOverlay>\n      }>\n      {trigger}\n    </Toggler>\n  );\n\n  return (\n    <div className=\"dropdown\">\n      {readonly ? (\n        <Tooltip overlay={translate('hotspots.status.cannot_change_status')} placement=\"bottom\">\n          {trigger}\n        </Tooltip>\n      ) : (\n        actionableTrigger\n      )}\n    </div>\n  );\n}\n\nexport default withCurrentUser(Status);\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport { Button } from 'sonar-ui-common/components/controls/buttons';\nimport { ClipboardButton } from 'sonar-ui-common/components/controls/clipboard';\nimport LinkIcon from 'sonar-ui-common/components/icons/LinkIcon';\nimport DeferredSpinner from 'sonar-ui-common/components/ui/DeferredSpinner';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { getPathUrlAsString } from 'sonar-ui-common/helpers/urls';\nimport { withCurrentUser } from '../../../components/hoc/withCurrentUser';\nimport { getBranchLikeQuery } from '../../../helpers/branch-like';\nimport { getComponentSecurityHotspotsUrl } from '../../../helpers/urls';\nimport { isLoggedIn } from '../../../helpers/users';\nimport { BranchLike } from '../../../types/branch-like';\nimport { Hotspot } from '../../../types/security-hotspots';\nimport Assignee from './assignee/Assignee';\nimport HotspotOpenInIdeButton from './HotspotOpenInIdeButton';\nimport HotspotReviewHistoryAndComments from './HotspotReviewHistoryAndComments';\nimport HotspotSnippetContainer from './HotspotSnippetContainer';\nimport './HotspotViewer.css';\nimport HotspotViewerTabs from './HotspotViewerTabs';\nimport Status from './status/Status';\n\nexport interface HotspotViewerRendererProps {\n  branchLike?: BranchLike;\n  component: T.Component;\n  currentUser: T.CurrentUser;\n  hotspot?: Hotspot;\n  loading: boolean;\n  commentVisible: boolean;\n  commentTextRef: React.RefObject<HTMLTextAreaElement>;\n  onOpenComment: () => void;\n  onCloseComment: () => void;\n  onUpdateHotspot: () => Promise<void>;\n  securityCategories: T.StandardSecurityCategories;\n}\n\nexport function HotspotViewerRenderer(props: HotspotViewerRendererProps) {\n  const {\n    branchLike,\n    component,\n    currentUser,\n    hotspot,\n    loading,\n    securityCategories,\n    commentTextRef,\n    commentVisible\n  } = props;\n\n  const permalink = getPathUrlAsString(\n    getComponentSecurityHotspotsUrl(component.key, {\n      ...getBranchLikeQuery(branchLike),\n      hotspots: hotspot?.key\n    }),\n    false\n  );\n\n  return (\n    <DeferredSpinner className=\"big-spacer-left big-spacer-top\" loading={loading}>\n      {hotspot && (\n        <div className=\"big-padded hotspot-content\">\n          <div className=\"huge-spacer-bottom display-flex-space-between\">\n            <strong className=\"big big-spacer-right\">{hotspot.message}</strong>\n            <div className=\"display-flex-row flex-0\">\n              {isLoggedIn(currentUser) && (\n                <>\n                  <div className=\"dropdown spacer-right flex-1-0-auto\">\n                    <Button onClick={props.onOpenComment}>\n                      {translate('hotspots.comment.open')}\n                    </Button>\n                  </div>\n                  <div className=\"dropdown spacer-right flex-1-0-auto\">\n                    <HotspotOpenInIdeButton\n                      hotspotKey={hotspot.key}\n                      projectKey={hotspot.project.key}\n                    />\n                  </div>\n                </>\n              )}\n              <ClipboardButton className=\"flex-1-0-auto\" copyValue={permalink}>\n                <LinkIcon className=\"spacer-right\" />\n                <span>{translate('hotspots.get_permalink')}</span>\n              </ClipboardButton>\n            </div>\n          </div>\n\n          <div className=\"huge-spacer-bottom display-flex-row\">\n            <div className=\"hotspot-information display-flex-column display-flex-space-between\">\n              <div className=\"display-flex-center\">\n                <span className=\"big-spacer-right\">{translate('category')}</span>\n                <strong className=\"nowrap\">\n                  {securityCategories[hotspot.rule.securityCategory].title}\n                </strong>\n              </div>\n              <div className=\"display-flex-center\">\n                <span className=\"big-spacer-right\">{translate('hotspots.risk_exposure')}</span>\n                <div\n                  className={classNames(\n                    'hotspot-risk-badge',\n                    hotspot.rule.vulnerabilityProbability\n                  )}>\n                  {translate('risk_exposure', hotspot.rule.vulnerabilityProbability)}\n                </div>\n              </div>\n              <div className=\"display-flex-center\">\n                <span className=\"big-spacer-right\">{translate('assignee')}</span>\n                <div>\n                  <Assignee hotspot={hotspot} onAssigneeChange={props.onUpdateHotspot} />\n                </div>\n              </div>\n            </div>\n            <div className=\"huge-spacer-left\">\n              <Status hotspot={hotspot} onStatusChange={props.onUpdateHotspot} />\n            </div>\n          </div>\n\n          <HotspotSnippetContainer\n            branchLike={branchLike}\n            component={component}\n            hotspot={hotspot}\n          />\n          <HotspotViewerTabs hotspot={hotspot} />\n          <HotspotReviewHistoryAndComments\n            commentTextRef={commentTextRef}\n            commentVisible={commentVisible}\n            currentUser={currentUser}\n            hotspot={hotspot}\n            onCloseComment={props.onCloseComment}\n            onCommentUpdate={props.onUpdateHotspot}\n            onOpenComment={props.onOpenComment}\n          />\n        </div>\n      )}\n    </DeferredSpinner>\n  );\n}\n\nexport default withCurrentUser(HotspotViewerRenderer);\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { scrollToElement } from 'sonar-ui-common/helpers/scrolling';\nimport { getSecurityHotspotDetails } from '../../../api/security-hotspots';\nimport { BranchLike } from '../../../types/branch-like';\nimport { Hotspot } from '../../../types/security-hotspots';\nimport HotspotViewerRenderer from './HotspotViewerRenderer';\n\ninterface Props {\n  branchLike?: BranchLike;\n  component: T.Component;\n  hotspotKey: string;\n  onUpdateHotspot: (hotspotKey: string) => Promise<void>;\n  securityCategories: T.StandardSecurityCategories;\n}\n\ninterface State {\n  hotspot?: Hotspot;\n  loading: boolean;\n  commentVisible: boolean;\n}\n\nexport default class HotspotViewer extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State;\n  commentTextRef: React.RefObject<HTMLTextAreaElement>;\n\n  constructor(props: Props) {\n    super(props);\n    this.commentTextRef = React.createRef<HTMLTextAreaElement>();\n    this.state = { loading: false, commentVisible: false };\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n    this.fetchHotspot();\n  }\n\n  componentDidUpdate(prevProps: Props, prevState: State) {\n    if (prevProps.hotspotKey !== this.props.hotspotKey) {\n      this.fetchHotspot();\n    }\n    if (this.commentTextRef.current && !prevState.commentVisible && this.state.commentVisible) {\n      this.commentTextRef.current.focus({ preventScroll: true });\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  fetchHotspot = () => {\n    this.setState({ loading: true });\n    return getSecurityHotspotDetails(this.props.hotspotKey)\n      .then(hotspot => {\n        if (this.mounted) {\n          this.setState({ hotspot, loading: false });\n        }\n        return hotspot;\n      })\n      .catch(() => this.mounted && this.setState({ loading: false }));\n  };\n\n  handleHotspotUpdate = async () => {\n    const { hotspotKey } = this.props;\n\n    await this.props.onUpdateHotspot(hotspotKey);\n  };\n\n  handleOpenComment = () => {\n    this.setState({ commentVisible: true });\n    if (this.commentTextRef.current) {\n      // Edge case when the comment is already open and unfocus.\n      this.commentTextRef.current.focus({ preventScroll: true });\n    }\n    if (this.commentTextRef.current) {\n      scrollToElement(this.commentTextRef.current, {\n        bottomOffset: 100\n      });\n    }\n  };\n\n  handleCloseComment = () => {\n    this.setState({ commentVisible: false });\n  };\n\n  render() {\n    const { branchLike, component, securityCategories } = this.props;\n    const { hotspot, loading, commentVisible } = this.state;\n\n    return (\n      <HotspotViewerRenderer\n        branchLike={branchLike}\n        component={component}\n        commentTextRef={this.commentTextRef}\n        commentVisible={commentVisible}\n        hotspot={hotspot}\n        loading={loading}\n        onCloseComment={this.handleCloseComment}\n        onOpenComment={this.handleOpenComment}\n        onUpdateHotspot={this.handleHotspotUpdate}\n        securityCategories={securityCategories}\n      />\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Helmet } from 'react-helmet-async';\nimport DeferredSpinner from 'sonar-ui-common/components/ui/DeferredSpinner';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { scrollToElement } from 'sonar-ui-common/helpers/scrolling';\nimport A11ySkipTarget from '../../app/components/a11y/A11ySkipTarget';\nimport Suggestions from '../../app/components/embed-docs-modal/Suggestions';\nimport ScreenPositionHelper from '../../components/common/ScreenPositionHelper';\nimport { isBranch } from '../../helpers/branch-like';\nimport { BranchLike } from '../../types/branch-like';\nimport { SecurityStandard, Standards } from '../../types/security';\nimport { HotspotFilters, HotspotStatusFilter, RawHotspot } from '../../types/security-hotspots';\nimport EmptyHotspotsPage from './components/EmptyHotspotsPage';\nimport FilterBar from './components/FilterBar';\nimport HotspotList from './components/HotspotList';\nimport HotspotSimpleList from './components/HotspotSimpleList';\nimport HotspotViewer from './components/HotspotViewer';\nimport './styles.css';\n\nexport interface SecurityHotspotsAppRendererProps {\n  branchLike?: BranchLike;\n  component: T.Component;\n  filterByCategory?: {\n    standard: SecurityStandard;\n    category: string;\n  };\n  filters: HotspotFilters;\n  hotspots: RawHotspot[];\n  hotspotsReviewedMeasure?: string;\n  hotspotsTotal: number;\n  isStaticListOfHotspots: boolean;\n  loading: boolean;\n  loadingMeasure: boolean;\n  loadingMore: boolean;\n  onChangeFilters: (filters: Partial<HotspotFilters>) => void;\n  onHotspotClick: (hotspot: RawHotspot) => void;\n  onLoadMore: () => void;\n  onShowAllHotspots: () => void;\n  onUpdateHotspot: (hotspotKey: string) => Promise<void>;\n  selectedHotspot: RawHotspot | undefined;\n  securityCategories: T.StandardSecurityCategories;\n  standards: Standards;\n}\n\nexport default function SecurityHotspotsAppRenderer(props: SecurityHotspotsAppRendererProps) {\n  const {\n    branchLike,\n    component,\n    filterByCategory,\n    filters,\n    hotspots,\n    hotspotsReviewedMeasure,\n    hotspotsTotal,\n    isStaticListOfHotspots,\n    loading,\n    loadingMeasure,\n    loadingMore,\n    securityCategories,\n    selectedHotspot,\n    standards\n  } = props;\n\n  const scrollableRef = React.useRef(null);\n\n  React.useEffect(() => {\n    const parent = scrollableRef.current;\n    const element =\n      selectedHotspot && document.querySelector(`[data-hotspot-key=\"${selectedHotspot.key}\"]`);\n    if (parent && element) {\n      scrollToElement(element, { parent, smooth: true, topOffset: 150, bottomOffset: 400 });\n    }\n  }, [selectedHotspot]);\n\n  return (\n    <div id=\"security_hotspots\">\n      <Suggestions suggestions=\"security_hotspots\" />\n      <Helmet title={translate('hotspots.page')} />\n      <A11ySkipTarget anchor=\"security_hotspots_main\" />\n\n      <FilterBar\n        component={component}\n        filters={filters}\n        hotspotsReviewedMeasure={hotspotsReviewedMeasure}\n        isStaticListOfHotspots={isStaticListOfHotspots}\n        loadingMeasure={loadingMeasure}\n        onBranch={isBranch(branchLike)}\n        onChangeFilters={props.onChangeFilters}\n        onShowAllHotspots={props.onShowAllHotspots}\n      />\n\n      {loading && <DeferredSpinner className=\"huge-spacer-left big-spacer-top\" />}\n\n      {!loading &&\n        (hotspots.length === 0 || !selectedHotspot ? (\n          <EmptyHotspotsPage\n            filtered={\n              filters.assignedToMe ||\n              (isBranch(branchLike) && filters.sinceLeakPeriod) ||\n              filters.status !== HotspotStatusFilter.TO_REVIEW\n            }\n            isStaticListOfHotspots={isStaticListOfHotspots}\n          />\n        ) : (\n          <div className=\"layout-page\">\n            <ScreenPositionHelper className=\"layout-page-side-outer\">\n              {({ top }) => (\n                <div className=\"layout-page-side\" ref={scrollableRef} style={{ top }}>\n                  <div className=\"layout-page-side-inner\">\n                    {filterByCategory ? (\n                      <HotspotSimpleList\n                        filterByCategory={filterByCategory}\n                        hotspots={hotspots}\n                        hotspotsTotal={hotspotsTotal}\n                        loadingMore={loadingMore}\n                        onHotspotClick={props.onHotspotClick}\n                        onLoadMore={props.onLoadMore}\n                        selectedHotspot={selectedHotspot}\n                        standards={standards}\n                      />\n                    ) : (\n                      <HotspotList\n                        hotspots={hotspots}\n                        hotspotsTotal={hotspotsTotal}\n                        isStaticListOfHotspots={isStaticListOfHotspots}\n                        loadingMore={loadingMore}\n                        onHotspotClick={props.onHotspotClick}\n                        onLoadMore={props.onLoadMore}\n                        securityCategories={securityCategories}\n                        selectedHotspot={selectedHotspot}\n                        statusFilter={filters.status}\n                      />\n                    )}\n                  </div>\n                </div>\n              )}\n            </ScreenPositionHelper>\n\n            <div className=\"layout-page-main\">\n              <HotspotViewer\n                branchLike={branchLike}\n                component={component}\n                hotspotKey={selectedHotspot.key}\n                onUpdateHotspot={props.onUpdateHotspot}\n                securityCategories={securityCategories}\n              />\n            </div>\n          </div>\n        ))}\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { Location } from 'history';\nimport * as key from 'keymaster';\nimport { flatMap, range } from 'lodash';\nimport * as React from 'react';\nimport { connect } from 'react-redux';\nimport { addSideBarClass, removeSideBarClass } from 'sonar-ui-common/helpers/pages';\nimport { getMeasures } from '../../api/measures';\nimport { getSecurityHotspotList, getSecurityHotspots } from '../../api/security-hotspots';\nimport { withCurrentUser } from '../../components/hoc/withCurrentUser';\nimport { Router } from '../../components/hoc/withRouter';\nimport { getLeakValue } from '../../components/measure/utils';\nimport { getBranchLikeQuery, isPullRequest, isSameBranchLike } from '../../helpers/branch-like';\nimport { getStandards } from '../../helpers/security-standard';\nimport { isLoggedIn } from '../../helpers/users';\nimport { fetchBranchStatus } from '../../store/rootActions';\nimport { BranchLike } from '../../types/branch-like';\nimport { SecurityStandard, Standards } from '../../types/security';\nimport {\n  HotspotFilters,\n  HotspotResolution,\n  HotspotStatus,\n  HotspotStatusFilter,\n  RawHotspot\n} from '../../types/security-hotspots';\nimport SecurityHotspotsAppRenderer from './SecurityHotspotsAppRenderer';\nimport './styles.css';\nimport { SECURITY_STANDARDS } from './utils';\n\nconst HOTSPOT_KEYMASTER_SCOPE = 'hotspots-list';\nconst PAGE_SIZE = 500;\ninterface DispatchProps {\n  fetchBranchStatus: (branchLike: BranchLike, projectKey: string) => void;\n}\n\ninterface OwnProps {\n  branchLike?: BranchLike;\n  currentUser: T.CurrentUser;\n  component: T.Component;\n  location: Location;\n  router: Router;\n}\n\ntype Props = DispatchProps & OwnProps;\n\ninterface State {\n  filterByCategory?: { standard: SecurityStandard; category: string };\n  filters: HotspotFilters;\n  hotspotKeys?: string[];\n  hotspots: RawHotspot[];\n  hotspotsPageIndex: number;\n  hotspotsReviewedMeasure?: string;\n  hotspotsTotal: number;\n  loading: boolean;\n  loadingMeasure: boolean;\n  loadingMore: boolean;\n  selectedHotspot: RawHotspot | undefined;\n  standards: Standards;\n}\n\nexport class SecurityHotspotsApp extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State;\n\n  constructor(props: Props) {\n    super(props);\n\n    this.state = {\n      loading: true,\n      loadingMeasure: false,\n      loadingMore: false,\n      hotspots: [],\n      hotspotsTotal: 0,\n      hotspotsPageIndex: 1,\n      selectedHotspot: undefined,\n      standards: {\n        [SecurityStandard.OWASP_TOP10]: {},\n        [SecurityStandard.SANS_TOP25]: {},\n        [SecurityStandard.SONARSOURCE]: {},\n        [SecurityStandard.CWE]: {}\n      },\n      filters: {\n        ...this.constructFiltersFromProps(props),\n        status: HotspotStatusFilter.TO_REVIEW\n      }\n    };\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n    addSideBarClass();\n    this.fetchInitialData();\n    this.registerKeyboardEvents();\n  }\n\n  componentDidUpdate(previous: Props) {\n    if (\n      this.props.component.key !== previous.component.key ||\n      this.props.location.query.hotspots !== previous.location.query.hotspots ||\n      SECURITY_STANDARDS.some(s => this.props.location.query[s] !== previous.location.query[s])\n    ) {\n      this.fetchInitialData();\n    }\n\n    if (\n      !isSameBranchLike(this.props.branchLike, previous.branchLike) ||\n      isLoggedIn(this.props.currentUser) !== isLoggedIn(previous.currentUser) ||\n      this.props.location.query.assignedToMe !== previous.location.query.assignedToMe ||\n      this.props.location.query.sinceLeakPeriod !== previous.location.query.sinceLeakPeriod\n    ) {\n      this.setState(({ filters }) => ({\n        filters: { ...this.constructFiltersFromProps, ...filters }\n      }));\n    }\n  }\n\n  componentWillUnmount() {\n    removeSideBarClass();\n    this.unregisterKeyboardEvents();\n    this.mounted = false;\n  }\n\n  registerKeyboardEvents() {\n    key.setScope(HOTSPOT_KEYMASTER_SCOPE);\n    key('up', HOTSPOT_KEYMASTER_SCOPE, () => {\n      this.selectNeighboringHotspot(-1);\n      return false;\n    });\n    key('down', HOTSPOT_KEYMASTER_SCOPE, () => {\n      this.selectNeighboringHotspot(+1);\n      return false;\n    });\n  }\n\n  selectNeighboringHotspot = (shift: number) => {\n    this.setState(({ hotspots, selectedHotspot }) => {\n      const index = selectedHotspot && hotspots.findIndex(h => h.key === selectedHotspot.key);\n\n      if (index !== undefined && index > -1) {\n        const newIndex = Math.max(0, Math.min(hotspots.length - 1, index + shift));\n        return {\n          selectedHotspot: hotspots[newIndex]\n        };\n      }\n\n      return { selectedHotspot };\n    });\n  };\n\n  unregisterKeyboardEvents() {\n    key.deleteScope(HOTSPOT_KEYMASTER_SCOPE);\n  }\n\n  constructFiltersFromProps(\n    props: Props\n  ): Pick<HotspotFilters, 'assignedToMe' | 'sinceLeakPeriod'> {\n    return {\n      assignedToMe: props.location.query.assignedToMe === 'true' && isLoggedIn(props.currentUser),\n      sinceLeakPeriod:\n        isPullRequest(props.branchLike) || props.location.query.sinceLeakPeriod === 'true'\n    };\n  }\n\n  handleCallFailure = () => {\n    if (this.mounted) {\n      this.setState({ loading: false, loadingMore: false });\n    }\n  };\n\n  fetchInitialData() {\n    return Promise.all([\n      getStandards(),\n      this.fetchSecurityHotspots(),\n      this.fetchSecurityHotspotsReviewed()\n    ])\n      .then(([standards, { hotspots, paging }]) => {\n        if (!this.mounted) {\n          return;\n        }\n\n        const selectedHotspot = hotspots.length > 0 ? hotspots[0] : undefined;\n\n        this.setState({\n          hotspots,\n          hotspotsTotal: paging.total,\n          loading: false,\n          selectedHotspot,\n          standards\n        });\n      })\n      .catch(this.handleCallFailure);\n  }\n\n  fetchSecurityHotspotsReviewed = () => {\n    const { branchLike, component } = this.props;\n    const { filters } = this.state;\n\n    const reviewedHotspotsMetricKey = filters.sinceLeakPeriod\n      ? 'new_security_hotspots_reviewed'\n      : 'security_hotspots_reviewed';\n\n    this.setState({ loadingMeasure: true });\n    return getMeasures({\n      component: component.key,\n      metricKeys: reviewedHotspotsMetricKey,\n      ...getBranchLikeQuery(branchLike)\n    })\n      .then(measures => {\n        if (!this.mounted) {\n          return;\n        }\n        const measure = measures && measures.length > 0 ? measures[0] : undefined;\n        const hotspotsReviewedMeasure = filters.sinceLeakPeriod\n          ? getLeakValue(measure)\n          : measure?.value;\n\n        this.setState({ hotspotsReviewedMeasure, loadingMeasure: false });\n      })\n      .catch(() => {\n        if (this.mounted) {\n          this.setState({ loadingMeasure: false });\n        }\n      });\n  };\n\n  fetchSecurityHotspots(page = 1) {\n    const { branchLike, component, location } = this.props;\n    const { filters } = this.state;\n\n    const hotspotKeys = location.query.hotspots\n      ? (location.query.hotspots as string).split(',')\n      : undefined;\n\n    const standard = SECURITY_STANDARDS.find(stnd => location.query[stnd] !== undefined);\n    const filterByCategory = standard\n      ? { standard, category: location.query[standard] }\n      : undefined;\n\n    this.setState({ filterByCategory, hotspotKeys });\n\n    if (hotspotKeys && hotspotKeys.length > 0) {\n      return getSecurityHotspotList(hotspotKeys, {\n        projectKey: component.key,\n        ...getBranchLikeQuery(branchLike)\n      });\n    }\n\n    if (filterByCategory) {\n      return getSecurityHotspots({\n        [filterByCategory.standard]: filterByCategory.category,\n        projectKey: component.key,\n        p: page,\n        ps: PAGE_SIZE,\n        status: HotspotStatus.TO_REVIEW, // we're only interested in unresolved hotspots\n        ...getBranchLikeQuery(branchLike)\n      });\n    }\n\n    const status =\n      filters.status === HotspotStatusFilter.TO_REVIEW\n        ? HotspotStatus.TO_REVIEW\n        : HotspotStatus.REVIEWED;\n\n    const resolution =\n      filters.status === HotspotStatusFilter.TO_REVIEW\n        ? undefined\n        : HotspotResolution[filters.status];\n\n    return getSecurityHotspots({\n      projectKey: component.key,\n      p: page,\n      ps: PAGE_SIZE,\n      status,\n      resolution,\n      onlyMine: filters.assignedToMe,\n      sinceLeakPeriod: filters.sinceLeakPeriod,\n      ...getBranchLikeQuery(branchLike)\n    });\n  }\n\n  reloadSecurityHotspotList = () => {\n    this.setState({ loading: true });\n\n    return this.fetchSecurityHotspots()\n      .then(({ hotspots, paging }) => {\n        if (!this.mounted) {\n          return;\n        }\n\n        this.setState({\n          hotspots,\n          hotspotsPageIndex: 1,\n          hotspotsTotal: paging.total,\n          loading: false,\n          selectedHotspot: hotspots.length > 0 ? hotspots[0] : undefined\n        });\n      })\n      .catch(this.handleCallFailure);\n  };\n\n  handleChangeFilters = (changes: Partial<HotspotFilters>) => {\n    this.setState(\n      ({ filters }) => ({ filters: { ...filters, ...changes } }),\n      () => {\n        this.reloadSecurityHotspotList();\n        if (changes.sinceLeakPeriod !== undefined) {\n          this.fetchSecurityHotspotsReviewed();\n        }\n      }\n    );\n  };\n\n  handleHotspotClick = (selectedHotspot: RawHotspot) => this.setState({ selectedHotspot });\n\n  handleHotspotUpdate = (hotspotKey: string) => {\n    const { hotspots, hotspotsPageIndex } = this.state;\n    const { branchLike, component } = this.props;\n    const index = hotspots.findIndex(h => h.key === hotspotKey);\n\n    if (isPullRequest(branchLike)) {\n      this.props.fetchBranchStatus(branchLike, component.key);\n    }\n\n    return Promise.all(\n      range(hotspotsPageIndex).map(p => this.fetchSecurityHotspots(p + 1 /* pages are 1-indexed */))\n    )\n      .then(hotspotPages => {\n        const allHotspots = flatMap(hotspotPages, 'hotspots');\n\n        const { paging } = hotspotPages[hotspotPages.length - 1];\n\n        const nextHotspot = allHotspots[Math.min(index, allHotspots.length - 1)];\n\n        this.setState(({ selectedHotspot }) => ({\n          hotspots: allHotspots,\n          hotspotsPageIndex: paging.pageIndex,\n          hotspotsTotal: paging.total,\n          selectedHotspot: selectedHotspot?.key === hotspotKey ? nextHotspot : selectedHotspot\n        }));\n      })\n      .then(this.fetchSecurityHotspotsReviewed);\n  };\n\n  handleShowAllHotspots = () => {\n    this.props.router.push({\n      ...this.props.location,\n      query: {\n        ...this.props.location.query,\n        hotspots: undefined,\n        [SecurityStandard.OWASP_TOP10]: undefined,\n        [SecurityStandard.SANS_TOP25]: undefined,\n        [SecurityStandard.SONARSOURCE]: undefined\n      }\n    });\n  };\n\n  handleLoadMore = () => {\n    const { hotspots, hotspotsPageIndex: hotspotPages } = this.state;\n\n    this.setState({ loadingMore: true });\n\n    return this.fetchSecurityHotspots(hotspotPages + 1)\n      .then(({ hotspots: additionalHotspots }) => {\n        if (!this.mounted) {\n          return;\n        }\n\n        this.setState({\n          hotspots: [...hotspots, ...additionalHotspots],\n          hotspotsPageIndex: hotspotPages + 1,\n          loadingMore: false\n        });\n      })\n      .catch(this.handleCallFailure);\n  };\n\n  render() {\n    const { branchLike, component } = this.props;\n    const {\n      filterByCategory,\n      filters,\n      hotspotKeys,\n      hotspots,\n      hotspotsReviewedMeasure,\n      hotspotsTotal,\n      loading,\n      loadingMeasure,\n      loadingMore,\n      selectedHotspot,\n      standards\n    } = this.state;\n\n    return (\n      <SecurityHotspotsAppRenderer\n        branchLike={branchLike}\n        component={component}\n        filters={filters}\n        filterByCategory={filterByCategory}\n        hotspots={hotspots}\n        hotspotsReviewedMeasure={hotspotsReviewedMeasure}\n        hotspotsTotal={hotspotsTotal}\n        isStaticListOfHotspots={Boolean(\n          (hotspotKeys && hotspotKeys.length > 0) || filterByCategory\n        )}\n        loading={loading}\n        loadingMeasure={loadingMeasure}\n        loadingMore={loadingMore}\n        onChangeFilters={this.handleChangeFilters}\n        onHotspotClick={this.handleHotspotClick}\n        onLoadMore={this.handleLoadMore}\n        onShowAllHotspots={this.handleShowAllHotspots}\n        onUpdateHotspot={this.handleHotspotUpdate}\n        securityCategories={standards[SecurityStandard.SONARSOURCE]}\n        selectedHotspot={selectedHotspot}\n        standards={standards}\n      />\n    );\n  }\n}\n\nconst mapDispatchToProps = { fetchBranchStatus };\n\nexport default withCurrentUser(connect(null, mapDispatchToProps)(SecurityHotspotsApp));\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar classNames = require(\"classnames\");\nvar React = require(\"react\");\nvar HelpIcon_1 = require(\"../icons/HelpIcon\");\nvar theme_1 = require(\"../theme\");\nrequire(\"./HelpTooltip.css\");\nvar Tooltip_1 = require(\"./Tooltip\");\nfunction HelpTooltip(_a) {\n    var _b = _a.size, size = _b === void 0 ? 12 : _b, props = __rest(_a, [\"size\"]);\n    return (React.createElement(\"div\", { className: classNames('help-tooltip', props.className) },\n        React.createElement(Tooltip_1.default, { mouseLeaveDelay: 0.25, onShow: props.onShow, overlay: props.overlay, placement: props.placement },\n            React.createElement(\"span\", { className: \"display-inline-flex-center\" }, props.children || (React.createElement(theme_1.ThemeConsumer, null, function (theme) { return React.createElement(HelpIcon_1.default, { fill: theme.colors.gray71, size: size }); }))))));\n}\nexports.default = HelpTooltip;\nfunction DarkHelpTooltip(_a) {\n    var _b = _a.size, size = _b === void 0 ? 12 : _b, props = __rest(_a, [\"size\"]);\n    return (React.createElement(HelpTooltip, __assign({}, props),\n        React.createElement(theme_1.ThemeConsumer, null, function (_a) {\n            var colors = _a.colors;\n            return (React.createElement(HelpIcon_1.default, { fill: colors.transparentBlack, fillInner: colors.white, size: size }));\n        })));\n}\nexports.DarkHelpTooltip = DarkHelpTooltip;\n//# sourceMappingURL=HelpTooltip.js.map","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { SuggestionsContext } from './SuggestionsContext';\n\ninterface Props {\n  suggestions: string;\n}\n\nexport default function Suggestions({ suggestions }: Props) {\n  return (\n    <SuggestionsContext.Consumer>\n      {({ addSuggestions, removeSuggestions }) => (\n        <SuggestionsInner\n          addSuggestions={addSuggestions}\n          removeSuggestions={removeSuggestions}\n          suggestions={suggestions}\n        />\n      )}\n    </SuggestionsContext.Consumer>\n  );\n}\n\ninterface SuggestionsInnerProps {\n  addSuggestions: (key: string) => void;\n  removeSuggestions: (key: string) => void;\n  suggestions: string;\n}\n\nclass SuggestionsInner extends React.PureComponent<SuggestionsInnerProps> {\n  componentDidMount() {\n    this.props.addSuggestions(this.props.suggestions);\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (prevProps.suggestions !== this.props.suggestions) {\n      this.props.removeSuggestions(this.props.suggestions);\n      this.props.addSuggestions(prevProps.suggestions);\n    }\n  }\n\n  componentWillUnmount() {\n    this.props.removeSuggestions(this.props.suggestions);\n  }\n\n  render() {\n    return null;\n  }\n}\n","var api = require(\"!../../../style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../css-loader/dist/cjs.js??ref--6-1!../../../postcss-loader/src/index.js??postcss!./HelpTooltip.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".help-tooltip{display:inline-flex;align-items:center;vertical-align:middle}.help-toolip-link{display:block;width:12px;height:12px;border:none}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar React = require(\"react\");\nvar Icon_1 = require(\"./Icon\");\nvar qualifierIcons = {\n    app: ApplicationIcon,\n    brc: SubProjectIcon,\n    dev: DeveloperIcon,\n    dir: DirectoryIcon,\n    fil: FileIcon,\n    svw: SubPortfolioIcon,\n    trk: ProjectIcon,\n    uts: UnitTestIcon,\n    vw: PortfolioIcon,\n    cla: UnitTestIcon,\n    dev_prj: ProjectIcon,\n    lib: LibraryIcon,\n    pac: DirectoryIcon,\n};\nfunction QualifierIcon(props) {\n    if (!props.qualifier) {\n        return null;\n    }\n    var qualifier = props.qualifier.toLowerCase();\n    var FoundIcon = qualifierIcons[qualifier];\n    return FoundIcon ? React.createElement(FoundIcon, { className: props.className, fill: props.fill }) : null;\n}\nexports.default = QualifierIcon;\nfunction ApplicationIcon(_a) {\n    var fill = _a.fill, iconProps = __rest(_a, [\"fill\"]);\n    return (React.createElement(Icon_1.ThemedIcon, __assign({}, iconProps), function (_a) {\n        var theme = _a.theme;\n        return (React.createElement(\"path\", { d: \"M3.014 10.986a2 2 0 1 1-.001 4.001 2 2 0 0 1 .001-4.001zm9.984 0a2 2 0 1 1-.001 4.001 2 2 0 0 1 .001-4.001zm-5.004-.021c1.103 0 2 .896 2 2s-.897 2-2 2a2 2 0 0 1 0-4zm-4.98 1.021a1 1 0 1 1 0 2 1 1 0 0 1 0-2zm9.984 0a1 1 0 1 1 0 2 1 1 0 0 1 0-2zm-5.004-.021a1 1 0 1 1 0 2 1 1 0 0 1 0-2zM2.984 6a2 2 0 1 1-.001 4.001A2 2 0 0 1 2.984 6zm9.984 0a2 2 0 1 1-.001 4.001A2 2 0 0 1 12.968 6zm-5.004-.021c1.103 0 2 .897 2 2a2 2 0 1 1-2-2zM2.984 7a1 1 0 1 1 0 2 1 1 0 0 1 0-2zm9.984 0a1 1 0 1 1 0 2 1 1 0 0 1 0-2zm-5.004-.021a1.001 1.001 0 0 1 0 2 1 1 0 0 1 0-2zM3 1.025a2 2 0 1 1-.001 4.001A2 2 0 0 1 3 1.025zm9.984 0a2 2 0 1 1-.001 4.001 2 2 0 0 1 .001-4.001zM7.98 1.004c1.103 0 2 .896 2 2s-.897 2-2 2a2 2 0 0 1 0-4zM3 2.025a1 1 0 1 1 0 2 1 1 0 0 1 0-2zm9.984 0a1 1 0 1 1 0 2 1 1 0 0 1 0-2zM7.98 2.004a1.001 1.001 0 0 1 0 2 1 1 0 0 1 0-2z\", style: { fill: fill || theme.colors.blue } }));\n    }));\n}\nfunction DeveloperIcon(_a) {\n    var fill = _a.fill, iconProps = __rest(_a, [\"fill\"]);\n    return (React.createElement(Icon_1.ThemedIcon, __assign({}, iconProps), function (_a) {\n        var theme = _a.theme;\n        return (React.createElement(\"path\", { d: \"M7.974 8.02a3.5 3.5 0 0 1-2.482-1.017 3.428 3.428 0 0 1-1.028-2.455c0-.927.365-1.8 1.028-2.455a3.505 3.505 0 0 1 2.482-1.017 3.5 3.5 0 0 1 2.482 1.017 3.434 3.434 0 0 1 1.027 2.455c0 .928-.365 1.8-1.027 2.455A3.504 3.504 0 0 1 7.974 8.02zm0-5.778c-1.286 0-2.332 1.034-2.332 2.306s1.046 2.307 2.332 2.307c1.285 0 2.332-1.035 2.332-2.307S9.258 2.242 7.974 2.242zm3.534 6.418c.127.016.243.045.348.086.17.066.302.146.406.246.132.124.253.282.36.47.126.218.226.442.3.668.08.253.15.535.206.838.056.313.095.604.113.867.02.28.03.57.03.862 0 .532-.174.758-.306.882-.142.132-.397.31-.973.31H3.948c-.233 0-.437-.03-.606-.09-.14-.05-.26-.123-.366-.222-.13-.123-.306-.35-.306-.88 0-.294.01-.584.03-.863.018-.263.056-.554.112-.867a6.5 6.5 0 0 1 .207-.838c.073-.226.173-.45.298-.667.108-.19.23-.347.36-.47.106-.1.238-.18.407-.247.105-.04.22-.07.348-.086.202.13.432.277.683.435.342.217.756.4 1.265.564.523.166 1.06.25 1.59.25a5.25 5.25 0 0 0 1.592-.25c.51-.164.923-.348 1.266-.565.25-.158.48-.304.682-.435l-.002.002zm-.244-1.18c-.055 0-.184.066-.387.196-.202.13-.43.276-.685.437-.255.16-.586.307-.994.437-.408.13-.818.196-1.23.196-.41 0-.82-.065-1.228-.196a4.303 4.303 0 0 1-.993-.437c-.255-.16-.484-.306-.686-.437-.202-.13-.33-.196-.386-.196-.374 0-.716.06-1.026.183-.31.12-.572.283-.787.487a3.28 3.28 0 0 0-.57.737 4.662 4.662 0 0 0-.395.888c-.098.303-.18.633-.244.988a9.652 9.652 0 0 0-.128.992c-.02.306-.032.62-.032.942 0 .73.224 1.304.672 1.726.448.42 1.043.632 1.785.632h8.044c.743 0 1.34-.21 1.787-.633.447-.42.67-.996.67-1.725 0-.32-.01-.635-.03-.942a9.159 9.159 0 0 0-.374-1.98c-.098-.304-.23-.6-.395-.888a3.23 3.23 0 0 0-.57-.737 2.404 2.404 0 0 0-.788-.487 2.779 2.779 0 0 0-1.026-.183h-.004z\", style: { fill: fill || theme.colors.blue } }));\n    }));\n}\nfunction DirectoryIcon(_a) {\n    var fill = _a.fill, iconProps = __rest(_a, [\"fill\"]);\n    return (React.createElement(Icon_1.ThemedIcon, __assign({}, iconProps), function (_a) {\n        var theme = _a.theme;\n        return (React.createElement(\"path\", { d: \"M14 12.286V5.703a.673.673 0 0 0-.195-.5.644.644 0 0 0-.49-.203H6.704a.686.686 0 0 1-.5-.214.707.707 0 0 1-.203-.51v-.57c0-.2-.07-.363-.207-.502A.679.679 0 0 0 5.29 3H2.707a.672.672 0 0 0-.5.204.683.683 0 0 0-.206.5v8.582c0 .2.07.367.206.506.137.14.304.208.5.208h10.61a.66.66 0 0 0 .49-.208.685.685 0 0 0 .194-.506H14zm1-6.598v6.65c0 .458-.152.83-.475 1.16-.324.326-.7.502-1.15.502H2.647c-.452 0-.84-.175-1.162-.503a1.572 1.572 0 0 1-.486-1.158V3.654a1.6 1.6 0 0 1 .486-1.17A1.578 1.578 0 0 1 2.648 2h2.7c.45 0 .84.157 1.164.485.324.328.488.714.488 1.17V4h6.373c.452 0 .83.174 1.152.5.323.33.475.73.475 1.187v.001z\", style: { fill: fill || theme.colors.orange } }));\n    }));\n}\nfunction FileIcon(_a) {\n    var fill = _a.fill, iconProps = __rest(_a, [\"fill\"]);\n    return (React.createElement(Icon_1.ThemedIcon, __assign({}, iconProps), function (_a) {\n        var theme = _a.theme;\n        return (React.createElement(\"path\", { d: \"M14 15H2V1l7.997.02c1 .034 1.759.758 2.428 1.42.667.663 1.561 1.605 1.574 2.555H14V15zM9 2H3v12h10V6H9V2zm3 10H4v-1h8v1zm0-2H4V9h8v1zm-1.988-5h3.008c-.012-.674-.714-1.443-1.204-1.937-.488-.495-1.039-1.058-1.816-1.055v2.96l.012.032z\", style: { fill: fill || theme.colors.blue } }));\n    }));\n}\nfunction LibraryIcon(_a) {\n    var fill = _a.fill, iconProps = __rest(_a, [\"fill\"]);\n    return (React.createElement(Icon_1.ThemedIcon, __assign({}, iconProps), function (_a) {\n        var theme = _a.theme;\n        return (React.createElement(\"path\", { d: \"M1 13h4V3H1v10zm3-1H2v-2h2v2zM2 4h2v4H2V4zm4 9h4V3H6v10zm3-1H7v-2h2v2zM7 4h2v4H7V4zm4 9h4V3h-4v10zm3-1h-2v-2h2v2zm-2-8h2v4h-2V4z\", style: { fill: fill || theme.colors.blue } }));\n    }));\n}\nfunction PortfolioIcon(_a) {\n    var fill = _a.fill, iconProps = __rest(_a, [\"fill\"]);\n    return (React.createElement(Icon_1.ThemedIcon, __assign({}, iconProps), function (_a) {\n        var theme = _a.theme;\n        return (React.createElement(\"path\", { d: \"M14.97 14.97H1.016V1.015H14.97V14.97zm-1-12.955H2.015V13.97H13.97V2.015zm-.973 10.982H9V9h3.997v3.997zM7 12.996H3.004V9H7v3.996zM11.997 10H10v1.997h1.997V10zM6 10H4.004v1.996H6V10zm1-3H3.006V3.006H7V7zm5.985 0H9V3.015h3.985V7zM6 4.006H4.006V6H6V4.006zm5.985.009H10V6h1.985V4.015z\", style: { fill: fill || theme.colors.blue } }));\n    }));\n}\nfunction ProjectIcon(_a) {\n    var fill = _a.fill, iconProps = __rest(_a, [\"fill\"]);\n    return (React.createElement(Icon_1.ThemedIcon, __assign({}, iconProps), function (_a) {\n        var theme = _a.theme;\n        return (React.createElement(\"path\", { d: \"M14.985 13.988L1 14.005 1.02 5h13.966v8.988h-.001zM1.998 5.995l.006 7.02L14.022 13 14 6.004l-12.002-.01v.001zM3 4.5V4h9.996l.004.5h1l-.005-1.497-11.98.003L2 4.5h1zm1-2v-.504h8.002L12 2.5h1l-.004-1.495H3.003L3 2.5h1z\", style: { fill: fill || theme.colors.blue } }));\n    }));\n}\nfunction SubPortfolioIcon(_a) {\n    var fill = _a.fill, iconProps = __rest(_a, [\"fill\"]);\n    return (React.createElement(Icon_1.ThemedIcon, __assign({}, iconProps), function (_a) {\n        var theme = _a.theme;\n        return (React.createElement(\"path\", { d: \"M14 7h2v9H7v-2H0V0h14v7zM8 8v7h7V8H8zm3 6H9v-2h2v2zm3 0h-2v-2h2v2zm-1-7V1H1v12h6V7h6zm-7 5H2V8h4v4zm5-1H9V9h2v2zm3 0h-2V9h2v2zM5 9H3v2h2V9zm1-3H2V2h4v4zm6 0H8V2h4v4zM5 3H3v2h2V3zm6 0H9v2h2V3z\", style: { fill: fill || theme.colors.blue } }));\n    }));\n}\nfunction SubProjectIcon(_a) {\n    var fill = _a.fill, iconProps = __rest(_a, [\"fill\"]);\n    return (React.createElement(Icon_1.ThemedIcon, __assign({}, iconProps), function (_a) {\n        var theme = _a.theme;\n        return (React.createElement(\"path\", { d: \"M8 9V8h6v1h1v1h1v6H6v-6h1V9h1zm7 2H7v4h8v-4zm-1-7v3h-1V5H1v7h4v1H0V4h14zm-1-2v1.5h-1V3H2v.5H1V2h12zm-1-2v1.5h-1V1H3v.5H2V0h10z\", style: { fill: fill || theme.colors.blue } }));\n    }));\n}\nfunction UnitTestIcon(_a) {\n    var fill = _a.fill, iconProps = __rest(_a, [\"fill\"]);\n    return (React.createElement(Icon_1.ThemedIcon, __assign({}, iconProps), function (_a) {\n        var theme = _a.theme;\n        return (React.createElement(\"path\", { d: \"M14 15H2V1l7.997.02c1.013-.03 1.57.893 2.239 1.555.667.663 1.75 1.47 1.763 2.42H14V15zM9 2H3v12h10V6H9V2zM7 8l-3 2.5L7 13V8zm1 5l3-2.5L8 8v5zm2.012-8h3.008c-.012-.674-.78-1.258-1.27-1.752-.488-.495-.973-1.243-1.75-1.24v2.96l.012.032z\", style: { fill: fill || theme.colors.blue } }));\n    }));\n}\n//# sourceMappingURL=QualifierIcon.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar classNames = require(\"classnames\");\nvar React = require(\"react\");\nvar l10n_1 = require(\"../../helpers/l10n\");\nvar measures_1 = require(\"../../helpers/measures\");\nvar DeferredSpinner_1 = require(\"../ui/DeferredSpinner\");\nvar buttons_1 = require(\"./buttons\");\nfunction ListFooter(props) {\n    var className = props.className, count = props.count, loading = props.loading, needReload = props.needReload, total = props.total, _a = props.ready, ready = _a === void 0 ? true : _a;\n    var hasMore = total && total > count;\n    var button;\n    if (needReload && props.reload) {\n        button = (React.createElement(buttons_1.Button, { className: \"spacer-left\", \"data-test\": \"reload\", disabled: loading, onClick: props.reload }, l10n_1.translate('reload')));\n    }\n    else if (hasMore && props.loadMore) {\n        button = (React.createElement(buttons_1.Button, { className: \"spacer-left\", disabled: loading, \"data-test\": \"show-more\", onClick: props.loadMore }, l10n_1.translate('show_more')));\n    }\n    return (React.createElement(\"footer\", { className: classNames('spacer-top note text-center', { 'new-loading': !ready }, className) },\n        l10n_1.translateWithParameters('x_of_y_shown', measures_1.formatMeasure(count, 'INT', null), measures_1.formatMeasure(total, 'INT', null)),\n        button,\n        loading && React.createElement(DeferredSpinner_1.default, { className: \"text-bottom spacer-left position-absolute\" })));\n}\nexports.default = ListFooter;\n//# sourceMappingURL=ListFooter.js.map","var toNumber = require('./toNumber');\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0,\n    MAX_INTEGER = 1.7976931348623157e+308;\n\n/**\n * Converts `value` to a finite number.\n *\n * @static\n * @memberOf _\n * @since 4.12.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {number} Returns the converted number.\n * @example\n *\n * _.toFinite(3.2);\n * // => 3.2\n *\n * _.toFinite(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toFinite(Infinity);\n * // => 1.7976931348623157e+308\n *\n * _.toFinite('3.2');\n * // => 3.2\n */\nfunction toFinite(value) {\n  if (!value) {\n    return value === 0 ? value : 0;\n  }\n  value = toNumber(value);\n  if (value === INFINITY || value === -INFINITY) {\n    var sign = (value < 0 ? -1 : 1);\n    return sign * MAX_INTEGER;\n  }\n  return value === value ? value : 0;\n}\n\nmodule.exports = toFinite;\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { A11yContext } from './A11yContext';\n\ninterface Props {\n  anchor: string;\n  label?: string;\n  weight?: number;\n}\n\nexport default function A11ySkipTarget(props: Props) {\n  return (\n    <A11yContext.Consumer>\n      {({ addA11ySkipLink, removeA11ySkipLink }) => (\n        <A11ySkipTargetInner\n          addA11ySkipLink={addA11ySkipLink}\n          removeA11ySkipLink={removeA11ySkipLink}\n          {...props}\n        />\n      )}\n    </A11yContext.Consumer>\n  );\n}\n\ninterface InnerProps {\n  addA11ySkipLink: (link: T.A11ySkipLink) => void;\n  removeA11ySkipLink: (link: T.A11ySkipLink) => void;\n}\n\nexport class A11ySkipTargetInner extends React.PureComponent<Props & InnerProps> {\n  componentDidMount() {\n    this.props.addA11ySkipLink(this.getLink());\n  }\n\n  componentWillUnmount() {\n    this.props.removeA11ySkipLink(this.getLink());\n  }\n\n  getLink = (): T.A11ySkipLink => {\n    const { anchor: key, label = translate('skip_to_content'), weight } = this.props;\n    return { key, label, weight };\n  };\n\n  render() {\n    const { anchor } = this.props;\n    return <span id={`a11y_target__${anchor}`} />;\n  }\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar classNames = require(\"classnames\");\nvar React = require(\"react\");\nvar measures_1 = require(\"../../helpers/measures\");\nrequire(\"./Level.css\");\nfunction Level(props) {\n    var formatted = measures_1.formatMeasure(props.level, 'LEVEL');\n    var className = classNames(props.className, 'level', 'level-' + props.level, {\n        'level-small': props.small,\n        'level-muted': props.muted,\n    });\n    return (React.createElement(\"span\", { \"aria-label\": props['aria-label'], \"aria-labelledby\": props['aria-labelledby'], className: className }, formatted));\n}\nexports.default = Level;\n//# sourceMappingURL=Level.js.map","var baseAssignValue = require('./_baseAssignValue'),\n    createAggregator = require('./_createAggregator');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Creates an object composed of keys generated from the results of running\n * each element of `collection` thru `iteratee`. The order of grouped values\n * is determined by the order they occur in `collection`. The corresponding\n * value of each key is an array of elements responsible for generating the\n * key. The iteratee is invoked with one argument: (value).\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} [iteratee=_.identity] The iteratee to transform keys.\n * @returns {Object} Returns the composed aggregate object.\n * @example\n *\n * _.groupBy([6.1, 4.2, 6.3], Math.floor);\n * // => { '4': [4.2], '6': [6.1, 6.3] }\n *\n * // The `_.property` iteratee shorthand.\n * _.groupBy(['one', 'two', 'three'], 'length');\n * // => { '3': ['one', 'two'], '5': ['three'] }\n */\nvar groupBy = createAggregator(function(result, value, key) {\n  if (hasOwnProperty.call(result, key)) {\n    result[key].push(value);\n  } else {\n    baseAssignValue(result, key, [value]);\n  }\n});\n\nmodule.exports = groupBy;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar classNames = require(\"classnames\");\nvar React = require(\"react\");\nrequire(\"./Radio.css\");\nvar Radio = (function (_super) {\n    __extends(Radio, _super);\n    function Radio() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.handleClick = function (event) {\n            event.preventDefault();\n            if (!_this.props.disabled) {\n                _this.props.onCheck(_this.props.value);\n            }\n        };\n        return _this;\n    }\n    Radio.prototype.render = function () {\n        var _a = this.props, className = _a.className, checked = _a.checked, children = _a.children, disabled = _a.disabled;\n        return (React.createElement(\"a\", { \"aria-checked\": checked, className: classNames('display-inline-flex-center link-radio', className, { disabled: disabled }), href: \"#\", onClick: this.handleClick, role: \"radio\" },\n            React.createElement(\"i\", { className: classNames('icon-radio', 'spacer-right', { 'is-checked': checked }) }),\n            children));\n    };\n    return Radio;\n}(React.PureComponent));\nexports.default = Radio;\n//# sourceMappingURL=Radio.js.map","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport SeverityIcon from 'sonar-ui-common/components/icons/SeverityIcon';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\n\ninterface Props {\n  className?: string;\n  severity: string;\n}\n\nexport default function SeverityHelper({ className, severity }: Props) {\n  if (!severity) {\n    return null;\n  }\n  return (\n    <span className={className}>\n      <SeverityIcon className=\"little-spacer-right\" severity={severity} />\n      {translate('severity', severity)}\n    </span>\n  );\n}\n","var api = require(\"!../../../style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../css-loader/dist/cjs.js??ref--6-1!../../../postcss-loader/src/index.js??postcss!./Radio.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar classNames = require(\"classnames\");\nvar React = require(\"react\");\nrequire(\"./RadioToggle.css\");\nvar Tooltip_1 = require(\"./Tooltip\");\nvar RadioToggle = (function (_super) {\n    __extends(RadioToggle, _super);\n    function RadioToggle() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.renderOption = function (option) {\n            var checked = option.value === _this.props.value;\n            var htmlId = _this.props.name + '__' + option.value;\n            return (React.createElement(\"li\", { key: option.value.toString() },\n                React.createElement(\"input\", { checked: checked, disabled: option.disabled, id: htmlId, name: _this.props.name, onChange: function () { return _this.props.onCheck(option.value); }, type: \"radio\" }),\n                React.createElement(Tooltip_1.default, { overlay: option.tooltip || undefined },\n                    React.createElement(\"label\", { htmlFor: htmlId }, option.label))));\n        };\n        return _this;\n    }\n    RadioToggle.prototype.render = function () {\n        return (React.createElement(\"ul\", { className: classNames('radio-toggle', this.props.className) }, this.props.options.map(this.renderOption)));\n    };\n    RadioToggle.defaultProps = {\n        disabled: false,\n        value: null,\n    };\n    return RadioToggle;\n}(React.PureComponent));\nexports.default = RadioToggle;\n//# sourceMappingURL=RadioToggle.js.map","var api = require(\"!../../../style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../css-loader/dist/cjs.js??ref--6-1!../../../postcss-loader/src/index.js??postcss!./RadioToggle.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".radio-toggle{font-size:0;white-space:nowrap}.radio-toggle,.radio-toggle>li{display:inline-block;vertical-align:middle}.radio-toggle>li{font-size:12px}.radio-toggle>li:first-child>label{border-top-left-radius:2px;border-bottom-left-radius:2px}.radio-toggle>li:last-child>label{border-top-right-radius:2px;border-bottom-right-radius:2px}.radio-toggle>li+li>label{border-left:none}.radio-toggle>li>label{display:inline-block;padding:0 12px;margin:0;border:1px solid #236a97;color:#236a97;height:22px;line-height:22px;cursor:pointer;font-weight:600}.radio-toggle input[type=radio]{display:none}.radio-toggle input[type=radio]:checked+label{background-color:#236a97;color:#fff}.radio-toggle input[type=radio]:disabled+label{color:#bbb;border-color:#ddd;background:#ebebeb;cursor:not-allowed}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar classNames = require(\"classnames\");\nvar React = require(\"react\");\nvar l10n_1 = require(\"../../helpers/l10n\");\nvar measures_1 = require(\"../../helpers/measures\");\nrequire(\"./Rating.css\");\nfunction Rating(_a) {\n    var className = _a.className, _b = _a.muted, muted = _b === void 0 ? false : _b, _c = _a.small, small = _c === void 0 ? false : _c, value = _a.value, ariaAttrs = __rest(_a, [\"className\", \"muted\", \"small\", \"value\"]);\n    if (value === undefined) {\n        return (React.createElement(\"span\", __assign({ \"aria-label\": l10n_1.translate('metric.no_rating') }, ariaAttrs), \"\\u2013\"));\n    }\n    var formatted = measures_1.formatMeasure(value, 'RATING');\n    return (React.createElement(\"span\", __assign({ \"aria-label\": l10n_1.translateWithParameters('metric.has_rating_X', formatted), className: classNames('rating', \"rating-\" + formatted, { 'rating-small': small, 'rating-muted': muted }, className) }, ariaAttrs), formatted));\n}\nexports.default = Rating;\n//# sourceMappingURL=Rating.js.map","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".icon-radio{position:relative;display:inline-block;vertical-align:top;width:14px;height:14px;margin:1px;border:1px solid #cdcdcd;border-radius:12px;box-sizing:border-box;transition:border-color .3s ease;flex-shrink:0}.icon-radio:after{position:absolute;top:2px;left:2px;display:block;width:8px;height:8px;border-radius:8px;background-color:#236a97;content:\\\"\\\";opacity:0;transition:opacity .3s ease}.link-radio .icon-radio.is-checked:after{opacity:1}.link-radio{border-bottom:none}.link-radio,.link-radio:not(.disabled):active,.link-radio:not(.disabled):focus,.link-radio:not(.disabled):hover{color:inherit}.link-radio:not(.disabled):hover>.icon-radio{border-color:#4b9fd5}.link-radio.disabled,.link-radio.disabled:hover,.link-radio.disabled label{color:#bbb;cursor:not-allowed}.link-radio.disabled .icon-radio:after{background-color:#ebebeb}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { getRatingTooltip as nextGetRatingTooltip, isDiffMetric } from '../../helpers/measures';\n\nconst KNOWN_RATINGS = [\n  'sqale_rating',\n  'maintainability_rating', // Needed to provide the label for \"new_maintainability_rating\"\n  'reliability_rating',\n  'security_rating',\n  'security_review_rating'\n];\n\nexport function enhanceMeasure(measure: T.Measure, metrics: T.Dict<T.Metric>): T.MeasureEnhanced {\n  return {\n    ...measure,\n    metric: metrics[measure.metric],\n    leak: getLeakValue(measure)\n  };\n}\n\nexport function getLeakValue(measure: T.MeasureIntern | undefined): string | undefined {\n  return measure?.period?.value;\n}\n\nexport function getRatingTooltip(metricKey: string, value: number): string | undefined {\n  const finalMetricKey = isDiffMetric(metricKey) ? metricKey.substr(4) : metricKey;\n  if (KNOWN_RATINGS.includes(finalMetricKey)) {\n    return nextGetRatingTooltip(finalMetricKey, value);\n  }\n  return undefined;\n}\n","var api = require(\"!../../../style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../css-loader/dist/cjs.js??ref--6-1!../../../postcss-loader/src/index.js??postcss!./Level.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".level{display:inline-block;min-width:80px;height:24px;line-height:24px;border-radius:24px;box-sizing:border-box;color:#fff;letter-spacing:.02em;font-size:13px;font-weight:400;text-align:center;text-shadow:0 0 1px rgba(0,0,0,.35)}.level,.level-small{width:auto;padding-left:9px;padding-right:9px}.level-small{min-width:64px;margin-top:-1px;margin-bottom:-1px;height:20px;line-height:20px;font-size:12px}.level-muted{background-color:#bdbdbd!important}a>.level{margin-bottom:-1px;border-bottom:1px solid;transition:all .2s ease}a>.level:hover{opacity:.8}.level-OK{background-color:#0a0}.level-WARN{background-color:#ed7d20}.level-ERROR{background-color:#d4333f}.level-NONE{background-color:#b4b4b4}.level-NOT_COMPUTED{background-color:#404040}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Tooltip from 'sonar-ui-common/components/controls/Tooltip';\nimport Level from 'sonar-ui-common/components/ui/Level';\nimport Rating from 'sonar-ui-common/components/ui/Rating';\nimport { formatMeasure } from 'sonar-ui-common/helpers/measures';\nimport { getRatingTooltip } from './utils';\n\ninterface Props {\n  className?: string;\n  decimals?: number | null;\n  metricKey: string;\n  metricType: string;\n  small?: boolean;\n  value: string | undefined;\n}\n\nexport default function Measure({\n  className,\n  decimals,\n  metricKey,\n  metricType,\n  small,\n  value\n}: Props) {\n  if (value === undefined) {\n    return <span className={className}>–</span>;\n  }\n\n  if (metricType === 'LEVEL') {\n    return <Level className={className} level={value} small={small} />;\n  }\n\n  if (metricType !== 'RATING') {\n    const formattedValue = formatMeasure(value, metricType, {\n      decimals,\n      omitExtraDecimalZeros: metricType === 'PERCENT'\n    });\n    return <span className={className}>{formattedValue != null ? formattedValue : '–'}</span>;\n  }\n\n  const tooltip = getRatingTooltip(metricKey, Number(value));\n  const rating = <Rating small={small} value={value} />;\n  if (tooltip) {\n    return (\n      <Tooltip overlay={tooltip}>\n        <span className={className}>{rating}</span>\n      </Tooltip>\n    );\n  }\n  return rating;\n}\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar React = require(\"react\");\nvar Icon_1 = require(\"./Icon\");\nfunction ChevronDownIcon(_a) {\n    var _b = _a.fill, fill = _b === void 0 ? 'currentColor' : _b, iconProps = __rest(_a, [\"fill\"]);\n    return (React.createElement(Icon_1.default, __assign({}, iconProps),\n        React.createElement(\"path\", { d: \"M7.72 11.596L3.119 6.992A.382.382 0 0 1 3 6.713c0-.108.04-.2.118-.279l1.03-1.03a.382.382 0 0 1 .278-.117c.108 0 .201.04.28.117L8 8.7l3.294-3.295a.382.382 0 0 1 .28-.117c.108 0 .2.04.279.117l1.03 1.03a.382.382 0 0 1 .117.28c0 .107-.04.2-.118.278L8.28 11.596a.382.382 0 0 1-.279.117.382.382 0 0 1-.28-.117z\", style: { fill: fill } })));\n}\nexports.default = ChevronDownIcon;\n//# sourceMappingURL=ChevronDownIcon.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar CLASS_SIDEBAR_PAGE = 'sidebar-page';\nvar CLASS_WHITE_PAGE = 'white-page';\nvar CLASS_NO_FOOTER_PAGE = 'no-footer-page';\nfunction addSideBarClass() {\n    toggleBodyClass(CLASS_SIDEBAR_PAGE, true);\n}\nexports.addSideBarClass = addSideBarClass;\nfunction addWhitePageClass() {\n    toggleBodyClass(CLASS_WHITE_PAGE, true);\n}\nexports.addWhitePageClass = addWhitePageClass;\nfunction addNoFooterPageClass() {\n    console.warn('DEPRECATED: addNoFooterPageClass() was deprecated.');\n    toggleBodyClass(CLASS_NO_FOOTER_PAGE, true);\n}\nexports.addNoFooterPageClass = addNoFooterPageClass;\nfunction removeSideBarClass() {\n    toggleBodyClass(CLASS_SIDEBAR_PAGE, false);\n}\nexports.removeSideBarClass = removeSideBarClass;\nfunction removeWhitePageClass() {\n    toggleBodyClass(CLASS_WHITE_PAGE, false);\n}\nexports.removeWhitePageClass = removeWhitePageClass;\nfunction removeNoFooterPageClass() {\n    console.warn('DEPRECATED: removeNoFooterPageClass() was deprecated.');\n    toggleBodyClass(CLASS_NO_FOOTER_PAGE, false);\n}\nexports.removeNoFooterPageClass = removeNoFooterPageClass;\nfunction toggleBodyClass(className, force) {\n    document.body.classList.toggle(className, force);\n    if (document.documentElement) {\n        document.documentElement.classList.toggle(className, force);\n    }\n}\n//# sourceMappingURL=pages.js.map","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as globalMessages from '../../store/globalMessages';\nimport getStore from './getStore';\n\nexport default function addGlobalSuccessMessage(message: string): void {\n  const store = getStore();\n  store.dispatch(globalMessages.addGlobalSuccessMessage(message));\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { debounce } from 'lodash';\nimport * as React from 'react';\n\ninterface Props {\n  className?: string;\n  children: (position: { top: number; left: number }) => React.ReactElement<any>;\n}\n\nexport default class ScreenPositionHelper extends React.PureComponent<Props> {\n  container?: HTMLDivElement;\n  debouncedOnResize: () => void;\n\n  constructor(props: Props) {\n    super(props);\n    this.debouncedOnResize = debounce(() => this.forceUpdate(), 250);\n  }\n\n  componentDidMount() {\n    this.forceUpdate();\n    window.addEventListener('resize', this.debouncedOnResize);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('resize', this.debouncedOnResize);\n  }\n\n  getPosition = () => {\n    const containerPos = this.container && this.container.getBoundingClientRect();\n    if (!containerPos) {\n      return { top: 0, left: 0 };\n    }\n    return {\n      top: window.pageYOffset + containerPos.top,\n      left: window.pageXOffset + containerPos.left\n    };\n  };\n\n  render() {\n    return (\n      <div\n        className={this.props.className}\n        ref={container => (this.container = container as HTMLDivElement)}>\n        {this.props.children(this.getPosition())}\n      </div>\n    );\n  }\n}\n","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./TagsList.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport HelpTooltip from 'sonar-ui-common/components/controls/HelpTooltip';\nimport DetachIcon from 'sonar-ui-common/components/icons/DetachIcon';\nimport { isWebUri } from 'valid-url';\n\nexport interface DocumentationTooltipProps {\n  children?: React.ReactNode;\n  className?: string;\n  content?: React.ReactNode;\n  links?: Array<{ href: string; label: string; inPlace?: boolean }>;\n  title?: string;\n}\n\nexport default function DocumentationTooltip(props: DocumentationTooltipProps) {\n  const { className, content, links, title } = props;\n\n  return (\n    <HelpTooltip\n      className={className}\n      overlay={\n        <div className=\"big-padded-top big-padded-bottom\">\n          {title && (\n            <div className=\"spacer-bottom\">\n              <strong>{title}</strong>\n            </div>\n          )}\n\n          {content && <p>{content}</p>}\n\n          {links && (\n            <>\n              <hr className=\"big-spacer-top big-spacer-bottom\" />\n\n              {links.map(({ href, label, inPlace }) => (\n                <div className=\"little-spacer-bottom\" key={label}>\n                  {inPlace ? (\n                    <Link to={href}>\n                      <span>{label}</span>\n                    </Link>\n                  ) : (\n                    <a\n                      className=\"display-inline-flex-center link-with-icon\"\n                      href={href}\n                      rel=\"noopener noreferrer\"\n                      target=\"_blank\">\n                      {isWebUri(href) && <DetachIcon size={14} className=\"spacer-right\" />}\n                      <span>{label}</span>\n                    </a>\n                  )}\n                </div>\n              ))}\n            </>\n          )}\n        </div>\n      }>\n      {props.children}\n    </HelpTooltip>\n  );\n}\n","var createRange = require('./_createRange');\n\n/**\n * Creates an array of numbers (positive and/or negative) progressing from\n * `start` up to, but not including, `end`. A step of `-1` is used if a negative\n * `start` is specified without an `end` or `step`. If `end` is not specified,\n * it's set to `start` with `start` then set to `0`.\n *\n * **Note:** JavaScript follows the IEEE-754 standard for resolving\n * floating-point values which can produce unexpected results.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Util\n * @param {number} [start=0] The start of the range.\n * @param {number} end The end of the range.\n * @param {number} [step=1] The value to increment or decrement by.\n * @returns {Array} Returns the range of numbers.\n * @see _.inRange, _.rangeRight\n * @example\n *\n * _.range(4);\n * // => [0, 1, 2, 3]\n *\n * _.range(-4);\n * // => [0, -1, -2, -3]\n *\n * _.range(1, 5);\n * // => [1, 2, 3, 4]\n *\n * _.range(0, 20, 5);\n * // => [0, 5, 10, 15]\n *\n * _.range(0, -4, -1);\n * // => [0, -1, -2, -3]\n *\n * _.range(1, 4, 0);\n * // => [1, 1, 1]\n *\n * _.range(0);\n * // => []\n */\nvar range = createRange();\n\nmodule.exports = range;\n","var baseRange = require('./_baseRange'),\n    isIterateeCall = require('./_isIterateeCall'),\n    toFinite = require('./toFinite');\n\n/**\n * Creates a `_.range` or `_.rangeRight` function.\n *\n * @private\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {Function} Returns the new range function.\n */\nfunction createRange(fromRight) {\n  return function(start, end, step) {\n    if (step && typeof step != 'number' && isIterateeCall(start, end, step)) {\n      end = step = undefined;\n    }\n    // Ensure the sign of `-0` is preserved.\n    start = toFinite(start);\n    if (end === undefined) {\n      end = start;\n      start = 0;\n    } else {\n      end = toFinite(end);\n    }\n    step = step === undefined ? (start < end ? 1 : -1) : toFinite(step);\n    return baseRange(start, end, step, fromRight);\n  };\n}\n\nmodule.exports = createRange;\n","/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeCeil = Math.ceil,\n    nativeMax = Math.max;\n\n/**\n * The base implementation of `_.range` and `_.rangeRight` which doesn't\n * coerce arguments.\n *\n * @private\n * @param {number} start The start of the range.\n * @param {number} end The end of the range.\n * @param {number} step The value to increment or decrement by.\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {Array} Returns the range of numbers.\n */\nfunction baseRange(start, end, step, fromRight) {\n  var index = -1,\n      length = nativeMax(nativeCeil((end - start) / (step || 1)), 0),\n      result = Array(length);\n\n  while (length--) {\n    result[fromRight ? length : ++index] = start;\n    start += step;\n  }\n  return result;\n}\n\nmodule.exports = baseRange;\n","var api = require(\"!../../../style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../css-loader/dist/cjs.js??ref--6-1!../../../postcss-loader/src/index.js??postcss!./Rating.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".rating{display:inline-block;width:24px;height:24px;line-height:24px;border-radius:24px;box-sizing:border-box;color:#fff;font-size:16px;font-weight:400;text-align:center;text-shadow:0 0 1px rgba(0,0,0,.35)}.rating-muted{background-color:#bdbdbd!important;color:#fff!important;text-shadow:0 0 1px rgba(0,0,0,.35)!important}a>.rating{margin-bottom:-1px;border-bottom:1px solid;transition:all .2s ease}a>.rating:hover{opacity:.8}.rating-A{line-height:23px;background-color:#0a0}a>.rating-A{border-bottom-color:#0a0}.rating-B{background-color:#b0d513}a .rating-B{border-bottom-color:#b0d513}.rating-C{background-color:#eabe06}a .rating-C{border-bottom-color:#eabe06}.rating-D{background-color:#ed7d20}a .rating-D{border-bottom-color:#ed7d20}.rating-E{background-color:#d4333f}a .rating-E{border-bottom-color:#d4333f}.rating-small{width:18px;height:18px;line-height:18px;margin-top:-1px;margin-bottom:-1px;font-size:12px}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport Checkbox from 'sonar-ui-common/components/controls/Checkbox';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\n\nexport interface MultiSelectOptionProps {\n  active?: boolean;\n  custom?: boolean;\n  disabled?: boolean;\n  element: string;\n  onHover: (element: string) => void;\n  onSelectChange: (selected: boolean, element: string) => void;\n  renderLabel: (element: string) => React.ReactNode;\n  selected?: boolean;\n}\n\nexport default function MultiSelectOption(props: MultiSelectOptionProps) {\n  const { active, custom, disabled, element, selected } = props;\n  const onHover = () => props.onHover(element);\n  const className = classNames({ active, disabled });\n  const label = props.renderLabel(element);\n\n  return (\n    <li onFocus={onHover} onMouseOver={onHover}>\n      <Checkbox\n        checked={Boolean(selected)}\n        className={className}\n        disabled={disabled}\n        id={element}\n        onCheck={props.onSelectChange}>\n        {custom ? (\n          <span\n            aria-label={`${translate('create_new_element')}: ${label}`}\n            className=\"little-spacer-left\">\n            <span aria-hidden={true} className=\"little-spacer-right\">\n              +\n            </span>\n            {label}\n          </span>\n        ) : (\n          <span className=\"little-spacer-left\">{label}</span>\n        )}\n      </Checkbox>\n    </li>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport { difference } from 'lodash';\nimport * as React from 'react';\nimport SearchBox from 'sonar-ui-common/components/controls/SearchBox';\nimport { translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport MultiSelectOption from './MultiSelectOption';\n\ninterface Props {\n  allowNewElements?: boolean;\n  allowSelection?: boolean;\n  elements: string[];\n  filterSelected?: (query: string, selectedElements: string[]) => string[];\n  footerNode?: React.ReactNode;\n  listSize?: number;\n  onSearch: (query: string) => Promise<void>;\n  onSelect: (item: string) => void;\n  onUnselect: (item: string) => void;\n  placeholder: string;\n  renderLabel?: (element: string) => React.ReactNode;\n  selectedElements: string[];\n  validateSearchInput?: (value: string) => string;\n}\n\ninterface State {\n  activeIdx: number;\n  loading: boolean;\n  query: string;\n  selectedElements: string[];\n  unselectedElements: string[];\n}\n\ninterface DefaultProps {\n  filterSelected: (query: string, selectedElements: string[]) => string[];\n  listSize: number;\n  renderLabel: (element: string) => React.ReactNode;\n  validateSearchInput: (value: string) => string;\n}\n\ntype PropsWithDefault = Props & DefaultProps;\n\nexport default class MultiSelect extends React.PureComponent<Props, State> {\n  container?: HTMLDivElement | null;\n  searchInput?: HTMLInputElement | null;\n  mounted = false;\n\n  static defaultProps: DefaultProps = {\n    filterSelected: (query: string, selectedElements: string[]) =>\n      selectedElements.filter(elem => elem.includes(query)),\n    listSize: 0,\n    renderLabel: (element: string) => element,\n    validateSearchInput: (value: string) => value\n  };\n\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      activeIdx: 0,\n      loading: true,\n      query: '',\n      selectedElements: [],\n      unselectedElements: []\n    };\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n    this.onSearchQuery('');\n    this.updateSelectedElements(this.props as PropsWithDefault);\n    this.updateUnselectedElements(this.props as PropsWithDefault);\n    if (this.container) {\n      this.container.addEventListener('keydown', this.handleKeyboard, true);\n    }\n  }\n\n  componentWillReceiveProps(nextProps: PropsWithDefault) {\n    if (\n      this.props.elements !== nextProps.elements ||\n      this.props.selectedElements !== nextProps.selectedElements\n    ) {\n      this.updateSelectedElements(nextProps);\n      this.updateUnselectedElements(nextProps);\n\n      const totalElements = this.getAllElements(nextProps, this.state).length;\n      if (this.state.activeIdx >= totalElements) {\n        this.setState({ activeIdx: totalElements - 1 });\n      }\n    }\n  }\n\n  componentDidUpdate() {\n    if (this.searchInput) {\n      this.searchInput.focus();\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n    if (this.container) {\n      this.container.removeEventListener('keydown', this.handleKeyboard);\n    }\n  }\n\n  handleSelectChange = (selected: boolean, item: string) => {\n    if (selected) {\n      this.onSelectItem(item);\n    } else {\n      this.onUnselectItem(item);\n    }\n  };\n\n  handleSearchChange = (value: string) => {\n    this.onSearchQuery((this.props as PropsWithDefault).validateSearchInput(value));\n  };\n\n  handleElementHover = (element: string) => {\n    this.setState((prevState, props) => {\n      return { activeIdx: this.getAllElements(props, prevState).indexOf(element) };\n    });\n  };\n\n  handleKeyboard = (evt: KeyboardEvent) => {\n    switch (evt.keyCode) {\n      case 40: // down\n        evt.stopPropagation();\n        evt.preventDefault();\n        this.setState(this.selectNextElement);\n        break;\n      case 38: // up\n        evt.stopPropagation();\n        evt.preventDefault();\n        this.setState(this.selectPreviousElement);\n        break;\n      case 37: // left\n      case 39: // right\n        evt.stopPropagation();\n        break;\n      case 13: // enter\n        if (this.state.activeIdx >= 0) {\n          this.toggleSelect(this.getAllElements(this.props, this.state)[this.state.activeIdx]);\n        }\n        break;\n    }\n  };\n\n  onSearchQuery = (query: string) => {\n    this.setState({ activeIdx: 0, loading: true, query });\n    this.props.onSearch(query).then(this.stopLoading, this.stopLoading);\n  };\n\n  onSelectItem = (item: string) => {\n    if (this.isNewElement(item, this.props)) {\n      this.onSearchQuery('');\n    }\n    this.props.onSelect(item);\n  };\n\n  onUnselectItem = (item: string) => this.props.onUnselect(item);\n\n  isNewElement = (elem: string, { selectedElements, elements }: Props) =>\n    elem.length > 0 && selectedElements.indexOf(elem) === -1 && elements.indexOf(elem) === -1;\n\n  updateSelectedElements = (props: PropsWithDefault) => {\n    this.setState((state: State) => {\n      if (state.query) {\n        return {\n          selectedElements: props.filterSelected(state.query, props.selectedElements)\n        };\n      } else {\n        return { selectedElements: [...props.selectedElements] };\n      }\n    });\n  };\n\n  updateUnselectedElements = (props: PropsWithDefault) => {\n    this.setState((state: State) => {\n      if (props.listSize === 0) {\n        return { unselectedElements: difference(props.elements, props.selectedElements) };\n      } else if (props.listSize < state.selectedElements.length) {\n        return { unselectedElements: [] };\n      } else {\n        return {\n          unselectedElements: difference(props.elements, props.selectedElements).slice(\n            0,\n            props.listSize - state.selectedElements.length\n          )\n        };\n      }\n    });\n  };\n\n  getAllElements = (props: Props, state: State) => {\n    if (this.isNewElement(state.query, props)) {\n      return [...state.selectedElements, ...state.unselectedElements, state.query];\n    } else {\n      return [...state.selectedElements, ...state.unselectedElements];\n    }\n  };\n\n  setElementActive = (idx: number) => this.setState({ activeIdx: idx });\n\n  selectNextElement = (state: State, props: Props) => {\n    const { activeIdx } = state;\n    const allElements = this.getAllElements(props, state);\n    if (activeIdx < 0 || activeIdx >= allElements.length - 1) {\n      return { activeIdx: 0 };\n    } else {\n      return { activeIdx: activeIdx + 1 };\n    }\n  };\n\n  selectPreviousElement = (state: State, props: Props) => {\n    const { activeIdx } = state;\n    const allElements = this.getAllElements(props, state);\n    if (activeIdx <= 0) {\n      const lastIdx = allElements.length - 1;\n      return { activeIdx: lastIdx };\n    } else {\n      return { activeIdx: activeIdx - 1 };\n    }\n  };\n\n  stopLoading = () => {\n    if (this.mounted) {\n      this.setState({ loading: false });\n    }\n  };\n\n  toggleSelect = (item: string) => {\n    if (this.props.selectedElements.indexOf(item) === -1) {\n      this.onSelectItem(item);\n    } else {\n      this.onUnselectItem(item);\n    }\n  };\n\n  render() {\n    const { allowSelection = true, allowNewElements = true, footerNode = '' } = this.props;\n    const { renderLabel } = this.props as PropsWithDefault;\n    const { query, activeIdx, selectedElements, unselectedElements } = this.state;\n    const activeElement = this.getAllElements(this.props, this.state)[activeIdx];\n    const showNewElement = allowNewElements && this.isNewElement(query, this.props);\n    const infiniteList = this.props.listSize === 0;\n    const listClasses = classNames('menu', {\n      'menu-vertically-limited': infiniteList,\n      'spacer-top': infiniteList,\n      'with-top-separator': infiniteList,\n      'with-bottom-separator': Boolean(footerNode)\n    });\n\n    return (\n      <div className=\"multi-select\" ref={div => (this.container = div)}>\n        <div className=\"menu-search\">\n          <SearchBox\n            autoFocus={true}\n            className=\"little-spacer-top\"\n            loading={this.state.loading}\n            onChange={this.handleSearchChange}\n            placeholder={this.props.placeholder}\n            value={query}\n          />\n        </div>\n        <ul className={listClasses}>\n          {selectedElements.length > 0 &&\n            selectedElements.map(element => (\n              <MultiSelectOption\n                active={activeElement === element}\n                element={element}\n                key={element}\n                onHover={this.handleElementHover}\n                onSelectChange={this.handleSelectChange}\n                renderLabel={renderLabel}\n                selected={true}\n              />\n            ))}\n          {unselectedElements.length > 0 &&\n            unselectedElements.map(element => (\n              <MultiSelectOption\n                active={activeElement === element}\n                disabled={!allowSelection}\n                element={element}\n                key={element}\n                onHover={this.handleElementHover}\n                onSelectChange={this.handleSelectChange}\n                renderLabel={renderLabel}\n              />\n            ))}\n          {showNewElement && (\n            <MultiSelectOption\n              active={activeElement === query}\n              custom={true}\n              element={query}\n              key={query}\n              onHover={this.handleElementHover}\n              onSelectChange={this.handleSelectChange}\n              renderLabel={renderLabel}\n            />\n          )}\n          {!showNewElement && selectedElements.length < 1 && unselectedElements.length < 1 && (\n            <li className=\"spacer-left\">{translateWithParameters('no_results_for_x', query)}</li>\n          )}\n        </ul>\n        {footerNode}\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport DropdownIcon from 'sonar-ui-common/components/icons/DropdownIcon';\nimport TagsIcon from 'sonar-ui-common/components/icons/TagsIcon';\nimport { translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport './TagsList.css';\n\ninterface Props {\n  allowUpdate?: boolean;\n  className?: string;\n  tags: string[];\n}\n\nexport default function TagsList({ allowUpdate = false, className, tags }: Props) {\n  return (\n    <span\n      aria-label={translateWithParameters('tags_list_x', tags.join(', '))}\n      className={classNames('tags-list', className)}>\n      <TagsIcon className=\"text-middle\" />\n      <span aria-hidden={true} className=\"text-ellipsis text-middle\" title={tags.join(', ')}>\n        {tags.join(', ')}\n      </span>\n      {allowUpdate && <DropdownIcon className=\"text-middle\" />}\n    </span>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { getFormattingHelpUrl } from '../../helpers/urls';\n\ninterface Props {\n  className?: string;\n}\n\nexport default class FormattingTips extends React.PureComponent<Props> {\n  handleClick(evt: React.SyntheticEvent<HTMLAnchorElement>) {\n    evt.preventDefault();\n    window.open(\n      getFormattingHelpUrl(),\n      'Formatting',\n      'height=300,width=600,scrollbars=1,resizable=1'\n    );\n  }\n\n  render() {\n    return (\n      <div className={classNames('markdown-tips', this.props.className)}>\n        <a className=\"little-spacer-right\" href=\"#\" onClick={this.handleClick}>\n          {translate('formatting.helplink')}\n        </a>\n        {':'}\n        <span className=\"spacer-left\">*{translate('bold')}*</span>\n        <span className=\"spacer-left\">\n          ``\n          {translate('code')}\n          ``\n        </span>\n        <span className=\"spacer-left\">* {translate('bulleted_point')}</span>\n      </div>\n    );\n  }\n}\n","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".tags-list{white-space:nowrap;line-height:16px}.tags-list i:before{font-size:12px}.tags-list span{display:inline-block;vertical-align:middle;text-align:left;max-width:220px;padding-left:4px;padding-right:4px}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","var baseFlatten = require('./_baseFlatten'),\n    map = require('./map');\n\n/**\n * Creates a flattened array of values by running each element in `collection`\n * thru `iteratee` and flattening the mapped results. The iteratee is invoked\n * with three arguments: (value, index|key, collection).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n * @returns {Array} Returns the new flattened array.\n * @example\n *\n * function duplicate(n) {\n *   return [n, n];\n * }\n *\n * _.flatMap([1, 2], duplicate);\n * // => [1, 1, 2, 2]\n */\nfunction flatMap(collection, iteratee) {\n  return baseFlatten(map(collection, iteratee), 1);\n}\n\nmodule.exports = flatMap;\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { lazyLoadComponent } from 'sonar-ui-common/components/lazyLoadComponent';\nimport { colors } from '../../app/theme';\n\nconst DonutChart = lazyLoadComponent(\n  () => import('sonar-ui-common/components/charts/DonutChart'),\n  'DonutChart'\n);\n\nconst SIZE_TO_WIDTH_MAPPING = { small: 16, normal: 24, big: 40, huge: 60 };\n\nconst SIZE_TO_THICKNESS_MAPPING = { small: 2, normal: 3, big: 3, huge: 4 };\n\nexport interface CoverageRatingProps {\n  muted?: boolean;\n  size?: 'small' | 'normal' | 'big' | 'huge';\n  value: number | string | null | undefined;\n}\n\nexport default function CoverageRating({\n  muted = false,\n  size = 'normal',\n  value\n}: CoverageRatingProps) {\n  let data = [{ value: 100, fill: '#ccc ' }];\n  let padAngle = 0;\n\n  if (value != null) {\n    const numberValue = Number(value);\n    data = [\n      { value: numberValue, fill: muted ? colors.gray71 : colors.green },\n      { value: 100 - numberValue, fill: muted ? colors.barBackgroundColor : colors.lineCoverageRed }\n    ];\n    if (numberValue !== 0 && numberValue < 100) {\n      padAngle = 0.1; // Same for all sizes, because it scales automatically\n    }\n  }\n\n  const width = SIZE_TO_WIDTH_MAPPING[size];\n  const thickness = SIZE_TO_THICKNESS_MAPPING[size];\n\n  return (\n    <DonutChart\n      data={data}\n      height={width}\n      padAngle={padAngle}\n      thickness={thickness}\n      width={width}\n    />\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport MultiSelect from '../common/MultiSelect';\nimport './TagsList.css';\n\ninterface Props {\n  listSize: number;\n  onSearch: (query: string) => Promise<void>;\n  onSelect: (item: string) => void;\n  onUnselect: (item: string) => void;\n  selectedTags: string[];\n  tags: string[];\n}\n\nexport default function TagsSelector(props: Props) {\n  return (\n    <MultiSelect\n      elements={props.tags}\n      listSize={props.listSize}\n      onSearch={props.onSearch}\n      onSelect={props.onSelect}\n      onUnselect={props.onUnselect}\n      placeholder={translate('search.search_for_tags')}\n      selectedElements={props.selectedTags}\n      validateSearchInput={validateTag}\n    />\n  );\n}\n\nexport function validateTag(value: string) {\n  // Allow only a-z, 0-9, '+', '-', '#', '.'\n  return value.toLowerCase().replace(/[^-a-z0-9+#.]/gi, '');\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport './LocationIndex.css';\n\ninterface Props {\n  children?: React.ReactNode;\n  leading?: boolean;\n  onClick?: () => void;\n  selected?: boolean;\n  [x: string]: any;\n}\n\nexport default function LocationIndex(props: Props) {\n  const { children, leading, onClick, selected, ...other } = props;\n  const clickAttributes = onClick ? { onClick, role: 'button', tabIndex: 0 } : {};\n  // put {...others} because Tooltip sets some event handlers\n  return (\n    <div\n      className={classNames('location-index', {\n        'is-leading': leading,\n        selected\n      })}\n      {...clickAttributes}\n      {...other}>\n      {children}\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport StatusIcon from 'sonar-ui-common/components/icons/StatusIcon';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\n\ninterface Props {\n  className?: string;\n  resolution: string | undefined;\n  status: string;\n}\n\nexport default function StatusHelper(props: Props) {\n  const resolution = props.resolution && ` (${translate('issue.resolution', props.resolution)})`;\n  return (\n    <span className={props.className}>\n      <StatusIcon className=\"little-spacer-right\" status={props.status} />\n      {translate('issue.status', props.status)}\n      {resolution}\n    </span>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { Standards } from '../types/security';\n\nexport function getStandards(): Promise<Standards> {\n  return import('./standards.json').then(x => x.default);\n}\n\nexport function renderCWECategory(standards: Standards, category: string): string {\n  const record = standards.cwe[category];\n  if (!record) {\n    return `CWE-${category}`;\n  } else if (category === 'unknown') {\n    return record.title;\n  } else {\n    return `CWE-${category} - ${record.title}`;\n  }\n}\n\nexport function renderOwaspTop10Category(\n  standards: Standards,\n  category: string,\n  withPrefix = false\n): string {\n  const record = standards.owaspTop10[category];\n  if (!record) {\n    return addPrefix(category.toUpperCase(), 'OWASP', withPrefix);\n  } else {\n    return addPrefix(`${category.toUpperCase()} - ${record.title}`, 'OWASP', withPrefix);\n  }\n}\n\nexport function renderSansTop25Category(\n  standards: Standards,\n  category: string,\n  withPrefix = false\n): string {\n  const record = standards.sansTop25[category];\n  return addPrefix(record ? record.title : category, 'SANS', withPrefix);\n}\n\nexport function renderSonarSourceSecurityCategory(\n  standards: Standards,\n  category: string,\n  withPrefix = false\n): string {\n  const record = standards.sonarsourceSecurity[category];\n  if (!record) {\n    return addPrefix(category.toUpperCase(), 'SONAR', withPrefix);\n  } else if (category === 'others') {\n    return record.title;\n  } else {\n    return addPrefix(record.title, 'SONAR', withPrefix);\n  }\n}\n\nfunction addPrefix(title: string, prefix: string, withPrefix: boolean) {\n  return withPrefix ? `${prefix} ${title}` : title;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { flatten } from 'lodash';\nimport { splitByTokens } from './highlight';\nimport { getLinearLocations } from './issueLocations';\n\nexport function issuesByLine(issues: T.Issue[]) {\n  const index: { [line: number]: T.Issue[] } = {};\n  issues.forEach(issue => {\n    const line = issue.textRange ? issue.textRange.endLine : 0;\n    if (!(line in index)) {\n      index[line] = [];\n    }\n    index[line].push(issue);\n  });\n  return index;\n}\n\nexport function issuesByComponentAndLine(\n  issues: T.Issue[] = []\n): { [component: string]: { [line: number]: T.Issue[] } } {\n  return issues.reduce((mapping: { [component: string]: { [line: number]: T.Issue[] } }, issue) => {\n    mapping[issue.component] = mapping[issue.component] || {};\n    const line = issue.textRange ? issue.textRange.endLine : 0;\n    mapping[issue.component][line] = mapping[issue.component][line] || [];\n    mapping[issue.component][line].push(issue);\n    return mapping;\n  }, {});\n}\n\nexport function locationsByLine(issues: Pick<T.Issue, 'textRange'>[]) {\n  const index: { [line: number]: T.LinearIssueLocation[] } = {};\n  issues.forEach(issue => {\n    getLinearLocations(issue.textRange).forEach(location => {\n      if (!(location.line in index)) {\n        index[location.line] = [];\n      }\n      index[location.line].push(location);\n    });\n  });\n  return index;\n}\n\nexport function duplicationsByLine(duplications: T.Duplication[] | undefined) {\n  if (duplications == null) {\n    return {};\n  }\n\n  const duplicationsByLine: { [line: number]: number[] } = {};\n\n  duplications.forEach(({ blocks }, duplicationIndex) => {\n    blocks.forEach(block => {\n      // eslint-disable-next-line no-underscore-dangle\n      if (block._ref === '1') {\n        for (let line = block.from; line < block.from + block.size; line++) {\n          if (!(line in duplicationsByLine)) {\n            duplicationsByLine[line] = [];\n          }\n          duplicationsByLine[line].push(duplicationIndex);\n        }\n      }\n    });\n  });\n\n  return duplicationsByLine;\n}\n\nexport function symbolsByLine(sources: T.SourceLine[]) {\n  const index: { [line: number]: string[] } = {};\n  sources.forEach(line => {\n    const tokens = splitByTokens(line.code || '');\n    const symbols = flatten(\n      tokens.map(token => {\n        const keys = token.className.match(/sym-\\d+/g);\n        return keys != null ? keys : [];\n      })\n    );\n    index[line.line] = symbols.filter(key => key);\n  });\n  return index;\n}\n","\"use strict\";\nvar __makeTemplateObject = (this && this.__makeTemplateObject) || function (cooked, raw) {\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\n    return cooked;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar React = require(\"react\");\nvar theme_1 = require(\"../theme\");\nvar TabContainer = theme_1.styled.div(templateObject_1 || (templateObject_1 = __makeTemplateObject([\"\\n  display: flex;\\n  flex-direction: row;\\n\"], [\"\\n  display: flex;\\n  flex-direction: row;\\n\"])));\nvar baseBorder = function (_a) {\n    var theme = _a.theme;\n    return \"1px solid \" + theme.colors.barBorderColor;\n};\nvar highlightHoverMixin = function (_a) {\n    var theme = _a.theme;\n    return \"\\n  &:hover {\\n    background-color: \" + theme.colors.barBackgroundColorHighlight + \";\\n  }\\n\";\n};\nvar StyledTab = theme_1.styled.button(templateObject_2 || (templateObject_2 = __makeTemplateObject([\"\\n  position: relative;\\n  background-color: \", \";\\n  border-top: \", \";\\n  border-left: \", \";\\n  border-right: none;\\n  border-bottom: none;\\n  margin-bottom: -1px;\\n  min-width: 128px;\\n  min-height: 56px;\\n  \", \"\\n  outline: 0;\\n  padding: calc(2 * \", \");\\n\\n  \", \"\\n\\n  &:last-child {\\n    border-right: \", \";\\n  }\\n\"], [\"\\n  position: relative;\\n  background-color: \", \";\\n  border-top: \", \";\\n  border-left: \", \";\\n  border-right: none;\\n  border-bottom: none;\\n  margin-bottom: -1px;\\n  min-width: 128px;\\n  min-height: 56px;\\n  \", \"\\n  outline: 0;\\n  padding: calc(2 * \", \");\\n\\n  \", \"\\n\\n  &:last-child {\\n    border-right: \", \";\\n  }\\n\"])), function (props) { return (props.active ? 'white' : props.theme.colors.barBackgroundColor); }, baseBorder, baseBorder, function (props) { return !props.active && 'cursor: pointer;'; }, theme_1.themeSize('gridSize'), function (props) { return (!props.active ? highlightHoverMixin : null); }, baseBorder);\nvar ActiveBorder = theme_1.styled.div(templateObject_3 || (templateObject_3 = __makeTemplateObject([\"\\n  display: \", \";\\n  background-color: \", \";\\n  height: 3px;\\n  width: 100%;\\n  position: absolute;\\n  left: 0;\\n  top: -1px;\\n\"], [\"\\n  display: \", \";\\n  background-color: \", \";\\n  height: 3px;\\n  width: 100%;\\n  position: absolute;\\n  left: 0;\\n  top: -1px;\\n\"])), function (props) { return (props.active ? 'block' : 'none'); }, theme_1.themeColor('blue'));\nfunction BoxedTabs(props) {\n    var className = props.className, tabs = props.tabs, selected = props.selected;\n    return (React.createElement(TabContainer, { className: className }, tabs.map(function (_a, i) {\n        var key = _a.key, label = _a.label;\n        return (React.createElement(StyledTab, { active: selected === key, key: i, onClick: function () { return selected !== key && props.onSelect(key); }, type: \"button\" },\n            React.createElement(ActiveBorder, { active: selected === key }),\n            label));\n    })));\n}\nexports.default = BoxedTabs;\nvar templateObject_1, templateObject_2, templateObject_3;\n//# sourceMappingURL=BoxedTabs.js.map"],"sourceRoot":""}