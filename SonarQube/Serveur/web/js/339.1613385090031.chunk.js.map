{"version":3,"sources":["webpack:///./src/main/js/components/hoc/whenLoggedIn.tsx","webpack:///./src/main/js/components/common/ResetPassword.tsx","webpack:///./src/main/js/app/components/ResetPassword.css?7c1c","webpack:///./src/main/js/app/components/ResetPassword.css","webpack:///./src/main/js/app/components/ResetPassword.tsx"],"names":["whenLoggedIn","WrappedComponent","componentDidMount","this","props","currentUser","render","displayName","Wrapper","oldPassword","password","passwordConfirmation","state","success","handleSuccessfulChange","value","setState","errors","undefined","onPasswordChange","setErrors","handleChangePassword","event","preventDefault","user","previousPassword","focus","login","then","className","onSubmit","variant","map","e","i","key","htmlFor","autoComplete","id","name","ref","elem","required","type","api","content","__esModule","default","module","options","exported","locals","exports","___CSS_LOADER_API_IMPORT___","push","ResetPassword","router","replace"],"mappings":"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","file":"js/339.1613385090031.chunk.js","sourcesContent":["/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport handleRequiredAuthentication from 'sonar-ui-common/helpers/handleRequiredAuthentication';\nimport { isLoggedIn } from '../../helpers/users';\nimport { getWrappedDisplayName } from './utils';\nimport { withCurrentUser } from './withCurrentUser';\n\nexport function whenLoggedIn<P>(WrappedComponent: React.ComponentType<P>) {\n  class Wrapper extends React.Component<P & { currentUser: T.CurrentUser }> {\n    static displayName = getWrappedDisplayName(WrappedComponent, 'whenLoggedIn');\n\n    componentDidMount() {\n      if (!isLoggedIn(this.props.currentUser)) {\n        handleRequiredAuthentication();\n      }\n    }\n\n    render() {\n      if (isLoggedIn(this.props.currentUser)) {\n        return <WrappedComponent {...this.props} />;\n      } else {\n        return null;\n      }\n    }\n  }\n\n  return withCurrentUser(Wrapper);\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { SubmitButton } from 'sonar-ui-common/components/controls/buttons';\nimport { Alert } from 'sonar-ui-common/components/ui/Alert';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { changePassword } from '../../api/users';\n\ninterface Props {\n  user: T.LoggedInUser;\n  onPasswordChange?: () => void;\n}\n\ninterface State {\n  errors?: string[];\n  success: boolean;\n}\n\nexport default class ResetPassword extends React.Component<Props, State> {\n  oldPassword: HTMLInputElement | null = null;\n  password: HTMLInputElement | null = null;\n  passwordConfirmation: HTMLInputElement | null = null;\n  state: State = {\n    success: false\n  };\n\n  handleSuccessfulChange = () => {\n    if (!this.oldPassword || !this.password || !this.passwordConfirmation) {\n      return;\n    }\n    this.oldPassword.value = '';\n    this.password.value = '';\n    this.passwordConfirmation.value = '';\n    this.setState({ success: true, errors: undefined });\n    if (this.props.onPasswordChange) {\n      this.props.onPasswordChange();\n    }\n  };\n\n  setErrors = (errors: string[]) => {\n    this.setState({ success: false, errors });\n  };\n\n  handleChangePassword = (event: React.FormEvent) => {\n    event.preventDefault();\n    if (!this.oldPassword || !this.password || !this.passwordConfirmation) {\n      return;\n    }\n    const { user } = this.props;\n    const previousPassword = this.oldPassword.value;\n    const password = this.password.value;\n    const passwordConfirmation = this.passwordConfirmation.value;\n\n    if (password !== passwordConfirmation) {\n      this.password.focus();\n      this.setErrors([translate('user.password_doesnt_match_confirmation')]);\n    } else {\n      changePassword({ login: user.login, password, previousPassword }).then(\n        this.handleSuccessfulChange,\n        () => {\n          // error already reported.\n        }\n      );\n    }\n  };\n\n  render() {\n    const { success, errors } = this.state;\n\n    return (\n      <section className=\"boxed-group\">\n        <h2 className=\"spacer-bottom\">{translate('my_profile.password.title')}</h2>\n\n        <form className=\"boxed-group-inner\" onSubmit={this.handleChangePassword}>\n          {success && <Alert variant=\"success\">{translate('my_profile.password.changed')}</Alert>}\n\n          {errors &&\n            errors.map((e, i) => (\n              /* eslint-disable-next-line react/no-array-index-key */\n              <Alert key={i} variant=\"error\">\n                {e}\n              </Alert>\n            ))}\n\n          <div className=\"form-field\">\n            <label htmlFor=\"old_password\">\n              {translate('my_profile.password.old')}\n              <em className=\"mandatory\">*</em>\n            </label>\n            <input\n              autoComplete=\"off\"\n              id=\"old_password\"\n              name=\"old_password\"\n              ref={elem => (this.oldPassword = elem)}\n              required={true}\n              type=\"password\"\n            />\n          </div>\n          <div className=\"form-field\">\n            <label htmlFor=\"password\">\n              {translate('my_profile.password.new')}\n              <em className=\"mandatory\">*</em>\n            </label>\n            <input\n              autoComplete=\"off\"\n              id=\"password\"\n              name=\"password\"\n              ref={elem => (this.password = elem)}\n              required={true}\n              type=\"password\"\n            />\n          </div>\n          <div className=\"form-field\">\n            <label htmlFor=\"password_confirmation\">\n              {translate('my_profile.password.confirm')}\n              <em className=\"mandatory\">*</em>\n            </label>\n            <input\n              autoComplete=\"off\"\n              id=\"password_confirmation\"\n              name=\"password_confirmation\"\n              ref={elem => (this.passwordConfirmation = elem)}\n              required={true}\n              type=\"password\"\n            />\n          </div>\n          <div className=\"form-field\">\n            <SubmitButton id=\"change-password\">{translate('update_verb')}</SubmitButton>\n          </div>\n        </form>\n      </section>\n    );\n  }\n}\n","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./ResetPassword.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".reset-page{padding-top:10vh}.reset-page h1{line-height:1.5;font-size:24px;font-weight:300;text-align:center}.reset-form{width:300px;margin-left:auto;margin-right:auto}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport ResetPasswordForm from '../../components/common/ResetPassword';\nimport { whenLoggedIn } from '../../components/hoc/whenLoggedIn';\nimport { Router, withRouter } from '../../components/hoc/withRouter';\nimport GlobalMessagesContainer from './GlobalMessagesContainer';\nimport './ResetPassword.css';\n\nexport interface ResetPasswordProps {\n  currentUser: T.LoggedInUser;\n  router: Router;\n}\n\nexport function ResetPassword(props: ResetPasswordProps) {\n  const { router, currentUser } = props;\n  const redirect = () => {\n    router.replace('/');\n  };\n\n  return (\n    <div className=\"reset-page\">\n      <h1 className=\"text-center spacer-bottom\">{translate('my_account.reset_password')}</h1>\n      <h2 className=\"text-center huge-spacer-bottom\">\n        {translate('my_account.reset_password.explain')}\n      </h2>\n      <GlobalMessagesContainer />\n      <div className=\"reset-form\">\n        <ResetPasswordForm user={currentUser} onPasswordChange={redirect} />\n      </div>\n    </div>\n  );\n}\n\nexport default whenLoggedIn(withRouter(ResetPassword));\n"],"sourceRoot":""}