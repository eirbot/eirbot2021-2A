{"version":3,"sources":["webpack:///./src/main/js/components/common/ActivityLink.tsx","webpack:///./src/main/js/components/common/ActivityLink.css?a97d","webpack:///./src/main/js/components/common/ActivityLink.css","webpack:///./src/main/js/components/common/MeasuresLink.css?71dd","webpack:///./src/main/js/components/common/MeasuresLink.css","webpack:///./src/main/js/apps/portfolio/styles.css?d02f","webpack:///./src/main/js/apps/portfolio/styles.css","webpack:///./src/main/js/components/common/MeasuresLink.tsx","webpack:///./src/main/js/apps/portfolio/utils.ts","webpack:///./src/main/js/apps/portfolio/components/Effort.tsx","webpack:///./src/main/js/apps/portfolio/components/MainRating.tsx","webpack:///./src/main/js/apps/portfolio/components/RatingFreshness.tsx","webpack:///./src/main/js/apps/portfolio/components/MetricBox.tsx","webpack:///./src/main/js/api/report.ts","webpack:///./src/main/js/apps/portfolio/components/Subscription.tsx","webpack:///./src/main/js/apps/portfolio/components/Report.tsx","webpack:///./src/main/js/apps/portfolio/components/WorstProjects.tsx","webpack:///./src/main/js/apps/portfolio/components/App.tsx","webpack:///./src/main/js/components/measure/utils.ts","webpack:///./src/main/js/components/measure/Measure.tsx","webpack:///./src/main/js/components/activity-graph/utils.ts","webpack:///./src/main/js/app/utils/addGlobalSuccessMessage.ts","webpack:///./src/main/js/types/project-activity.ts"],"names":["ActivityLink","props","branchLike","component","graph","label","metric","className","to","undefined","size","api","content","__esModule","default","module","i","options","exported","locals","exports","___CSS_LOADER_API_IMPORT___","push","componentKey","PORTFOLIO_METRICS","METRICS_PER_TYPE","releasability","measuresMetric","rating","effort","last_change","reliability","activity","vulnerabilities","security_hotspots","maintainability","SUB_COMPONENTS_METRICS","convertMeasures","measures","result","forEach","measure","value","Effort","metricKey","defaultMessage","id","values","projects","listView","Measure","metricType","String","small","MainRating","RatingFreshness","lastChange","data","JSON","parse","date","MetricBox","keys","lastReliabilityChange","rawEffort","overlay","Number","level","custom","getReportStatus","catch","throwGlobalError","getReportUrl","encodeURIComponent","subscribe","unsubscribe","handleSubscription","subscribed","addGlobalSuccessMessage","getFrequencyText","onSubscribe","handleSubscribe","then","handleUnsubscribe","effectiveFrequency","status","componentFrequency","globalFrequency","render","hasEmail","this","currentUser","email","href","onClick","state","mounted","loading","loadStatus","key","setState","componentDidMount","componentWillUnmount","canSubscribe","download","name","target","rel","tagName","WorstProjects","subComponents","total","count","length","maxLoc","map","projectsPageUrl","pathname","query","refKey","qualifier","Project","renderCell","ncloc","barWidth","Math","max","round","height","width","fill","blue","x","y","renderNcloc","type","isEmpty","isNotComputed","fetchMetrics","fetchData","componentDidUpdate","prevProps","Promise","all","metricKeys","join","ps","s","components","totalSubComponents","paging","renderSpinner","renderEmpty","renderWhenNotComputed","mapDispatchToProps","metrics","KNOWN_RATINGS","enhanceMeasure","leak","getLeakValue","period","getRatingTooltip","finalMetricKey","substr","includes","decimals","formattedValue","omitExtraDecimalZeros","tooltip","DEFAULT_GRAPH","issues","GRAPHS_METRICS_DISPLAYED","bugs","code_smells","coverage","lines_to_cover","uncovered_lines","duplications","duplicated_lines","GRAPHS_METRICS","concat","reliability_rating","security_rating","sqale_rating","duplicated_lines_density","isCustomGraph","getGraphTypes","ignoreCustom","graphs","hasDataValues","serie","some","point","Boolean","hasHistoryData","series","getSeriesMetricType","getDisplayedHistoryMetrics","customMetrics","getHistoryMetrics","splitSeriesInGraphs","maxGraph","maxSeries","slice","generateSeries","measuresHistory","displayedMetrics","filter","indexOf","uncoveredLines","linesToCover","find","history","analysis","idx","translatedName","generateCoveredLinesMetric","Array","isArray","findMetric","saveActivityGraph","namespace","project","getActivityGraph","customGraphs","split","message","dispatch","GraphType"],"mappings":"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","file":"js/307.1613385090031.chunk.js","sourcesContent":["/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport HistoryIcon from 'sonar-ui-common/components/icons/HistoryIcon';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { getActivityUrl, getMeasureHistoryUrl } from '../../helpers/urls';\nimport { BranchLike } from '../../types/branch-like';\nimport { GraphType } from '../../types/project-activity';\nimport { isCustomGraph } from '../activity-graph/utils';\nimport './ActivityLink.css';\n\nexport interface ActivityLinkProps {\n  branchLike?: BranchLike;\n  component: string;\n  graph?: GraphType;\n  label?: string;\n  metric?: string;\n}\n\nexport default function ActivityLink(props: ActivityLinkProps) {\n  const { branchLike, component, graph, label, metric } = props;\n  return (\n    <Link\n      className=\"activity-link\"\n      to={\n        metric !== undefined && graph !== undefined && isCustomGraph(graph)\n          ? getMeasureHistoryUrl(component, metric, branchLike)\n          : getActivityUrl(component, branchLike, graph)\n      }>\n      <HistoryIcon className=\"little-spacer-right\" size={14} />\n      <span>{label || translate('portfolio.activity_link')}</span>\n    </Link>\n  );\n}\n","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./ActivityLink.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"a.activity-link{border:none}.activity-link>span{border-bottom:1px solid #cae3f2}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./MeasuresLink.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".measures-link{border:none}.measures-link>span{border-bottom:1px solid #cae3f2}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./styles.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".portfolio-overview>h1{font-weight:400}.portfolio-overview>.page-actions{margin-bottom:0}.portfolio-measure-secondary-value{line-height:24px;font-size:18px;font-weight:300}.portfolio-grid{position:relative;z-index:10;display:flex;justify-content:space-around;align-items:center}.portfolio-grid>li{vertical-align:top;width:50%;text-align:center}.portfolio-grid>li.text-middle{vertical-align:middle}.portfolio-freshness{line-height:24px;white-space:nowrap}.portfolio-boxes{display:flex;justify-content:space-between;align-items:stretch;margin-bottom:20px;padding:15px 0;width:100%}.portfolio-box{flex:1 0 10%;position:relative;padding:0 16px 66px;margin:0 8px;border:1px solid #e6e6e6;background-color:#fff;box-sizing:border-box}.portfolio-box:first-child{margin-left:0}.portfolio-box:last-child{margin-right:0}.portfolio-box-title{padding:8px 0 16px;margin:8px 0 16px;font-size:16px;line-height:16px;border-bottom:1px solid #e6e6e6;white-space:nowrap}.portfolio-box-title>.button-small>svg{margin-top:0}.portfolio-box>h3{color:#777;font-size:12px;font-weight:400;margin-top:8px}.portfolio-box-rating,.portfolio-box-rating .rating{display:block;width:80px;height:80px;line-height:80px}.portfolio-box-rating{margin:16px auto;border:none}.portfolio-box-rating .rating{border-radius:80px;font-size:48px;text-align:center}.portfolio-box-rating .rating.no-rating{color:#777;font-size:16px}.portfolio-box-links{border-top:1px solid #e6e6e6;text-align:center;position:absolute;bottom:0;left:0;right:0}.portfolio-box-links>div{display:inline-block;padding:12px 0;width:50%;box-sizing:border-box}.portfolio-box-links>div:first-child{border-right:1px solid #e6e6e6}.portfolio-box-links svg,.portfolio-breakdown-box-link svg{vertical-align:middle}.portfolio-breakdown{display:flex}.portfolio-breakdown-box{flex:0 0 auto;display:flex;flex-direction:column;background-color:#fff;border:1px solid #e6e6e6;margin:8px 0 16px}.portfolio-breakdown-box+.portfolio-breakdown-box{margin-left:16px}.portfolio-breakdown-box .portfolio-breakdown-metric,.portfolio-breakdown-box h2{margin:8px 16px 0}.portfolio-breakdown-box-link{margin-top:16px;border-top:1px solid #e6e6e6;padding:16px}.portfolio-sub-components table.data th{font-size:13px;text-transform:none;vertical-align:middle}.portfolio-sub-components-cell{width:110px}.portfolio-meta-header{margin-bottom:4px;color:#444}.portfolio-meta-card{min-width:200px;box-sizing:border-box}.portfolio-meta-card+.portfolio-meta-card{margin-top:16px;padding-top:15px;border-top:1px solid #e6e6e6}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport MeasuresIcon from 'sonar-ui-common/components/icons/MeasuresIcon';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { getComponentDrilldownUrl } from '../../helpers/urls';\nimport { BranchLike } from '../../types/branch-like';\nimport './MeasuresLink.css';\n\nexport interface MeasuresLinkProps {\n  branchLike?: BranchLike;\n  className?: string;\n  component: string;\n  label?: string;\n  metric: string;\n}\n\nexport default function MeasuresLink(props: MeasuresLinkProps) {\n  const { branchLike, className, component, label, metric } = props;\n  return (\n    <Link\n      className={classNames('measures-link', className)}\n      to={getComponentDrilldownUrl({ branchLike, componentKey: component, metric })}>\n      <MeasuresIcon className=\"little-spacer-right\" size={14} />\n      <span>{label || translate('portfolio.measures_link')}</span>\n    </Link>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nexport const PORTFOLIO_METRICS = [\n  'projects',\n  'ncloc',\n  'ncloc_language_distribution',\n\n  'releasability_rating',\n  'releasability_effort',\n\n  'sqale_rating',\n  'maintainability_rating_effort',\n\n  'reliability_rating',\n  'reliability_rating_effort',\n\n  'security_rating',\n  'security_rating_effort',\n\n  'security_review_rating',\n  'security_review_rating_effort',\n\n  'last_change_on_releasability_rating',\n  'last_change_on_maintainability_rating',\n  'last_change_on_security_rating',\n  'last_change_on_security_review_rating',\n  'last_change_on_reliability_rating'\n];\n\nexport interface MetricKeys {\n  activity?: string;\n  effort: string;\n  measuresMetric: string;\n  label: string;\n  last_change: string;\n  rating: string;\n}\n\nexport const METRICS_PER_TYPE: T.Dict<MetricKeys> = {\n  releasability: {\n    measuresMetric: 'Releasability',\n    label: 'metric_domain.Releasability',\n    rating: 'releasability_rating',\n    effort: 'releasability_effort',\n    last_change: 'last_change_on_releasability_rating'\n  },\n  reliability: {\n    measuresMetric: 'Reliability',\n    label: 'metric_domain.Reliability',\n    rating: 'reliability_rating',\n    effort: 'reliability_rating_effort',\n    last_change: 'last_change_on_reliability_rating',\n    activity: 'reliability_rating,bugs'\n  },\n  vulnerabilities: {\n    measuresMetric: 'Security',\n    label: 'portfolio.metric_domain.vulnerabilities',\n    rating: 'security_rating',\n    effort: 'security_rating_effort',\n    last_change: 'last_change_on_security_rating',\n    activity: 'security_rating,vulnerabilities'\n  },\n  security_hotspots: {\n    measuresMetric: 'security_review_rating',\n    label: 'portfolio.metric_domain.security_hotspots',\n    rating: 'security_review_rating',\n    effort: 'security_review_rating_effort',\n    last_change: 'last_change_on_security_review_rating',\n    activity: 'security_review_rating,security_hotspots'\n  },\n  maintainability: {\n    measuresMetric: 'Maintainability',\n    label: 'metric_domain.Maintainability',\n    rating: 'sqale_rating',\n    effort: 'maintainability_rating_effort',\n    last_change: 'last_change_on_maintainability_rating',\n    activity: 'sqale_rating,code_smells'\n  }\n};\n\nexport const SUB_COMPONENTS_METRICS = [\n  'ncloc',\n  'releasability_rating',\n  'security_rating',\n  'security_review_rating',\n  'reliability_rating',\n  'sqale_rating',\n  'alert_status'\n];\n\nexport function convertMeasures(measures: Array<{ metric: string; value?: string }>) {\n  const result: T.Dict<string | undefined> = {};\n  measures.forEach(measure => {\n    result[measure.metric] = measure.value;\n  });\n  return result;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { FormattedMessage } from 'react-intl';\nimport { Link } from 'react-router';\nimport Rating from 'sonar-ui-common/components/ui/Rating';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport Measure from '../../../components/measure/Measure';\nimport { getComponentDrilldownUrl } from '../../../helpers/urls';\n\ninterface Props {\n  component: string;\n  effort: { projects: number; rating: number };\n  metricKey: string;\n}\n\nexport default function Effort({ component, effort, metricKey }: Props) {\n  return (\n    <div className=\"portfolio-effort\">\n      <FormattedMessage\n        defaultMessage={translate('portfolio.x_in_y')}\n        id=\"portfolio.x_in_y\"\n        values={{\n          projects: (\n            <Link\n              to={getComponentDrilldownUrl({\n                componentKey: component,\n                metric: metricKey,\n                listView: true\n              })}>\n              <span>\n                <Measure\n                  className=\"little-spacer-right\"\n                  metricKey=\"projects\"\n                  metricType=\"SHORT_INT\"\n                  value={String(effort.projects)}\n                />\n                {effort.projects === 1\n                  ? translate('project_singular')\n                  : translate('project_plural')}\n              </span>\n            </Link>\n          ),\n          rating: <Rating small={true} value={effort.rating} />\n        }}\n      />\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport Rating from 'sonar-ui-common/components/ui/Rating';\nimport { getMeasureTreemapUrl } from '../../../helpers/urls';\n\ninterface Props {\n  component: string;\n  metric: string;\n  value: string;\n}\n\nexport default function MainRating({ component, metric, value }: Props) {\n  return (\n    <Link className=\"portfolio-box-rating\" to={getMeasureTreemapUrl(component, metric)}>\n      <Rating value={value} />\n    </Link>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { FormattedMessage } from 'react-intl';\nimport DateFromNow from 'sonar-ui-common/components/intl/DateFromNow';\nimport Rating from 'sonar-ui-common/components/ui/Rating';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\n\ninterface Props {\n  lastChange?: string;\n  rating?: string;\n}\n\nexport default function RatingFreshness({ lastChange, rating }: Props) {\n  if (!lastChange) {\n    return (\n      <div className=\"portfolio-freshness\">\n        {rating && (\n          <FormattedMessage\n            defaultMessage={translate('portfolio.has_always_been_x')}\n            id=\"portfolio.has_always_been_x\"\n            values={{ rating: <Rating small={true} value={rating} /> }}\n          />\n        )}\n      </div>\n    );\n  }\n\n  const data = JSON.parse(lastChange);\n\n  return (\n    <div className=\"portfolio-freshness\">\n      <FormattedMessage\n        defaultMessage={translate('portfolio.was_x_y')}\n        id=\"portfolio.was_x_y\"\n        values={{\n          rating: <Rating small={true} value={data.value} />,\n          date: <DateFromNow date={data.date} />\n        }}\n      />\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport HelpTooltip from 'sonar-ui-common/components/controls/HelpTooltip';\nimport Level from 'sonar-ui-common/components/ui/Level';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport ActivityLink from '../../../components/common/ActivityLink';\nimport MeasuresLink from '../../../components/common/MeasuresLink';\nimport Measure from '../../../components/measure/Measure';\nimport { getComponentDrilldownUrl } from '../../../helpers/urls';\nimport { GraphType } from '../../../types/project-activity';\nimport { METRICS_PER_TYPE } from '../utils';\nimport Effort from './Effort';\nimport MainRating from './MainRating';\nimport RatingFreshness from './RatingFreshness';\n\nexport interface MetricBoxProps {\n  component: string;\n  measures: T.Dict<string | undefined>;\n  metricKey: string;\n}\n\nexport default function MetricBox({ component, measures, metricKey }: MetricBoxProps) {\n  const keys = METRICS_PER_TYPE[metricKey];\n  const rating = measures[keys.rating];\n  const lastReliabilityChange = measures[keys.last_change];\n  const rawEffort = measures[keys.effort];\n  const effort = rawEffort ? JSON.parse(rawEffort) : undefined;\n\n  return (\n    <div className=\"portfolio-box\">\n      <h2 className=\"portfolio-box-title\">\n        {translate(keys.label)}\n        <HelpTooltip\n          className=\"little-spacer-left\"\n          overlay={translate('portfolio.metric_domain', metricKey, 'help')}\n        />\n      </h2>\n\n      {rating ? (\n        <MainRating component={component} metric={keys.rating} value={rating} />\n      ) : (\n        <div className=\"portfolio-box-rating\">\n          <span className=\"rating no-rating\">—</span>\n        </div>\n      )}\n\n      {rating && (\n        <>\n          <h3>{translate('portfolio.metric_trend')}</h3>\n          <RatingFreshness lastChange={lastReliabilityChange} rating={rating} />\n        </>\n      )}\n\n      {metricKey === 'releasability'\n        ? Number(effort) > 0 && (\n            <>\n              <h3>{translate('portfolio.lowest_rated_projects')}</h3>\n              <div className=\"portfolio-effort\">\n                <Link\n                  to={getComponentDrilldownUrl({\n                    componentKey: component,\n                    metric: 'alert_status'\n                  })}>\n                  <span>\n                    <Measure\n                      className=\"little-spacer-right\"\n                      metricKey=\"projects\"\n                      metricType=\"SHORT_INT\"\n                      value={effort}\n                    />\n                    {Number(effort) === 1\n                      ? translate('project_singular')\n                      : translate('project_plural')}\n                  </span>\n                </Link>\n                <Level\n                  aria-label={\n                    Number(effort) === 1\n                      ? translate('portfolio.has_qg_status')\n                      : translate('portfolio.have_qg_status')\n                  }\n                  className=\"little-spacer-left\"\n                  level=\"ERROR\"\n                  small={true}\n                />\n              </div>\n            </>\n          )\n        : effort && (\n            <>\n              <h3>{translate('portfolio.lowest_rated_projects')}</h3>\n              <Effort component={component} effort={effort} metricKey={keys.rating} />\n            </>\n          )}\n\n      <div className=\"portfolio-box-links\">\n        <div>\n          <MeasuresLink component={component} metric={keys.measuresMetric} />\n        </div>\n        <div>\n          <ActivityLink\n            component={component}\n            metric={keys.activity || keys.rating}\n            graph={GraphType.custom}\n          />\n        </div>\n      </div>\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { getJSON, post } from 'sonar-ui-common/helpers/request';\nimport throwGlobalError from '../app/utils/throwGlobalError';\nimport { getBaseUrl } from '../helpers/system';\n\nexport interface ReportStatus {\n  canDownload?: boolean;\n  canSubscribe: boolean;\n  componentFrequency?: string;\n  globalFrequency: string;\n  subscribed?: boolean;\n}\n\nexport function getReportStatus(component: string): Promise<ReportStatus> {\n  return getJSON('/api/governance_reports/status', { componentKey: component }).catch(\n    throwGlobalError\n  );\n}\n\nexport function getReportUrl(component: string): string {\n  return `${getBaseUrl()}/api/governance_reports/download?componentKey=${encodeURIComponent(\n    component\n  )}`;\n}\n\nexport function subscribe(component: string): Promise<void | Response> {\n  return post('/api/governance_reports/subscribe', { componentKey: component }).catch(\n    throwGlobalError\n  );\n}\n\nexport function unsubscribe(component: string): Promise<void | Response> {\n  return post('/api/governance_reports/unsubscribe', { componentKey: component }).catch(\n    throwGlobalError\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { connect } from 'react-redux';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { ReportStatus, subscribe, unsubscribe } from '../../../api/report';\nimport addGlobalSuccessMessage from '../../../app/utils/addGlobalSuccessMessage';\nimport throwGlobalError from '../../../app/utils/throwGlobalError';\nimport { isLoggedIn } from '../../../helpers/users';\nimport { getCurrentUser, Store } from '../../../store/rootReducer';\n\ninterface Props {\n  component: string;\n  currentUser: T.CurrentUser;\n  onSubscribe: () => void;\n  status: ReportStatus;\n}\n\nexport class Subscription extends React.PureComponent<Props> {\n  handleSubscription = (subscribed: boolean) => {\n    addGlobalSuccessMessage(\n      subscribed\n        ? translateWithParameters('report.subscribe_x_success', this.getFrequencyText())\n        : translateWithParameters('report.unsubscribe_x_success', this.getFrequencyText())\n    );\n    this.props.onSubscribe();\n  };\n\n  handleSubscribe = () => {\n    subscribe(this.props.component)\n      .then(() => this.handleSubscription(true))\n      .catch(throwGlobalError);\n  };\n\n  handleUnsubscribe = () => {\n    unsubscribe(this.props.component)\n      .then(() => this.handleSubscription(false))\n      .catch(throwGlobalError);\n  };\n\n  getFrequencyText = () => {\n    const effectiveFrequency =\n      this.props.status.componentFrequency || this.props.status.globalFrequency;\n    return translate('report.frequency', effectiveFrequency);\n  };\n\n  render() {\n    const hasEmail = isLoggedIn(this.props.currentUser) && !!this.props.currentUser.email;\n\n    const { status } = this.props;\n\n    if (!hasEmail) {\n      return <span className=\"text-muted-2\">{translate('report.no_email_to_subscribe')}</span>;\n    }\n\n    return status.subscribed ? (\n      <a href=\"#\" onClick={this.handleUnsubscribe}>\n        {translateWithParameters('report.unsubscribe_x', this.getFrequencyText())}\n      </a>\n    ) : (\n      <a href=\"#\" onClick={this.handleSubscribe}>\n        {translateWithParameters('report.subscribe_x', this.getFrequencyText())}\n      </a>\n    );\n  }\n}\n\nconst mapStateToProps = (state: Store) => ({\n  currentUser: getCurrentUser(state)\n});\n\nexport default connect(mapStateToProps)(Subscription);\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Button } from 'sonar-ui-common/components/controls/buttons';\nimport Dropdown from 'sonar-ui-common/components/controls/Dropdown';\nimport DropdownIcon from 'sonar-ui-common/components/icons/DropdownIcon';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { getReportStatus, getReportUrl, ReportStatus } from '../../../api/report';\nimport Subscription from './Subscription';\n\ninterface Props {\n  component: { key: string; name: string };\n}\n\ninterface State {\n  loading: boolean;\n  status?: ReportStatus;\n}\n\nexport default class Report extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { loading: true };\n\n  componentDidMount() {\n    this.mounted = true;\n    this.loadStatus();\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  loadStatus = () => {\n    getReportStatus(this.props.component.key).then(\n      status => {\n        if (this.mounted) {\n          this.setState({ status, loading: false });\n        }\n      },\n      () => {\n        if (this.mounted) {\n          this.setState({ loading: false });\n        }\n      }\n    );\n  };\n\n  render() {\n    const { component } = this.props;\n    const { status, loading } = this.state;\n\n    if (loading || !status) {\n      return null;\n    }\n\n    return status.canSubscribe ? (\n      <Dropdown\n        overlay={\n          <ul className=\"menu\">\n            <li>\n              <a\n                download={component.name + ' - Executive Report.pdf'}\n                href={getReportUrl(component.key)}\n                target=\"_blank\"\n                rel=\"noopener noreferrer\">\n                {translate('report.print')}\n              </a>\n            </li>\n            <li>\n              <Subscription\n                component={component.key}\n                onSubscribe={this.loadStatus}\n                status={status}\n              />\n            </li>\n          </ul>\n        }\n        tagName=\"li\">\n        <Button className=\"dropdown-toggle\">\n          {translate('portfolio.pdf_report')}\n          <DropdownIcon className=\"spacer-left icon-half-transparent\" />\n        </Button>\n      </Dropdown>\n    ) : (\n      <a\n        className=\"button\"\n        download={component.name + ' - Executive Report.pdf'}\n        href={getReportUrl(component.key)}\n        target=\"_blank\"\n        rel=\"noopener noreferrer\">\n        {translate('report.print')}\n      </a>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { max } from 'lodash';\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport QualifierIcon from 'sonar-ui-common/components/icons/QualifierIcon';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { formatMeasure } from 'sonar-ui-common/helpers/measures';\nimport { colors } from '../../../app/theme';\nimport Measure from '../../../components/measure/Measure';\nimport { getComponentOverviewUrl } from '../../../helpers/urls';\nimport { ComponentQualifier } from '../../../types/component';\nimport { SubComponent } from '../types';\n\ninterface Props {\n  component: string;\n  subComponents: SubComponent[];\n  total: number;\n}\n\nexport default function WorstProjects({ component, subComponents, total }: Props) {\n  const count = subComponents.length;\n\n  if (!count) {\n    return null;\n  }\n\n  const maxLoc = max(\n    subComponents.map(component => Number(component.measures['ncloc'] || 0))\n  ) as number;\n\n  const projectsPageUrl = { pathname: '/code', query: { id: component } };\n\n  return (\n    <div className=\"panel panel-white portfolio-sub-components\" id=\"portfolio-sub-components\">\n      <table className=\"data zebra\">\n        <thead>\n          <tr>\n            <th>&nbsp;</th>\n            <th className=\"text-center portfolio-sub-components-cell\">\n              {translate('metric_domain.Releasability')}\n            </th>\n            <th className=\"text-center portfolio-sub-components-cell\">\n              {translate('metric_domain.Reliability')}\n            </th>\n            <th className=\"text-center portfolio-sub-components-cell\">\n              {translate('portfolio.metric_domain.vulnerabilities')}\n            </th>\n            <th className=\"text-center portfolio-sub-components-cell\">\n              {translate('portfolio.metric_domain.security_hotspots')}\n            </th>\n            <th className=\"text-center portfolio-sub-components-cell\">\n              {translate('metric_domain.Maintainability')}\n            </th>\n            <th className=\"text-center portfolio-sub-components-cell\">\n              {translate('metric.ncloc.name')}\n            </th>\n          </tr>\n        </thead>\n        <tbody>\n          {subComponents.map(component => (\n            <tr key={component.key}>\n              <td>\n                <Link\n                  className=\"link-with-icon\"\n                  to={getComponentOverviewUrl(\n                    component.refKey || component.key,\n                    component.qualifier\n                  )}>\n                  <QualifierIcon qualifier={component.qualifier} /> {component.name}\n                </Link>\n              </td>\n              {component.qualifier === ComponentQualifier.Project\n                ? renderCell(component.measures, 'alert_status', 'LEVEL')\n                : renderCell(component.measures, 'releasability_rating', 'RATING')}\n              {renderCell(component.measures, 'reliability_rating', 'RATING')}\n              {renderCell(component.measures, 'security_rating', 'RATING')}\n              {renderCell(component.measures, 'security_review_rating', 'RATING')}\n              {renderCell(component.measures, 'sqale_rating', 'RATING')}\n              {renderNcloc(component.measures, maxLoc)}\n            </tr>\n          ))}\n        </tbody>\n      </table>\n\n      {total > count && (\n        <footer className=\"spacer-top note text-center\">\n          {translateWithParameters(\n            'x_of_y_shown',\n            formatMeasure(count, 'INT'),\n            formatMeasure(total, 'INT')\n          )}\n          <Link className=\"spacer-left\" to={projectsPageUrl}>\n            {translate('show_more')}\n          </Link>\n        </footer>\n      )}\n    </div>\n  );\n}\n\nfunction renderCell(measures: T.Dict<string | undefined>, metric: string, type: string) {\n  return (\n    <td className=\"text-center\">\n      <Measure metricKey={metric} metricType={type} value={measures[metric]} />\n    </td>\n  );\n}\n\nfunction renderNcloc(measures: T.Dict<string | undefined>, maxLoc: number) {\n  const ncloc = Number(measures['ncloc'] || 0);\n  const barWidth = maxLoc > 0 ? Math.max(1, Math.round((ncloc / maxLoc) * 50)) : 0;\n  return (\n    <td className=\"text-right\">\n      <span className=\"note\">\n        <Measure metricKey=\"ncloc\" metricType=\"SHORT_INT\" value={measures['ncloc']} />\n      </span>\n      {maxLoc > 0 && (\n        <svg className=\"spacer-left\" height=\"16\" width=\"50\">\n          <rect\n            className=\"bar-chart-bar\"\n            fill={colors.blue}\n            height=\"10\"\n            width={barWidth}\n            x=\"0\"\n            y=\"3\"\n          />\n        </svg>\n      )}\n    </td>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { connect } from 'react-redux';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { getChildren } from '../../../api/components';\nimport { getMeasures } from '../../../api/measures';\nimport MeasuresLink from '../../../components/common/MeasuresLink';\nimport Measure from '../../../components/measure/Measure';\nimport { fetchMetrics } from '../../../store/rootActions';\nimport { getMetrics, Store } from '../../../store/rootReducer';\nimport '../styles.css';\nimport { SubComponent } from '../types';\nimport { convertMeasures, PORTFOLIO_METRICS, SUB_COMPONENTS_METRICS } from '../utils';\nimport MetricBox from './MetricBox';\nimport Report from './Report';\nimport WorstProjects from './WorstProjects';\n\ninterface OwnProps {\n  component: T.Component;\n}\n\ninterface StateToProps {\n  metrics: T.Dict<T.Metric>;\n}\n\ninterface DispatchToProps {\n  fetchMetrics: () => void;\n}\n\ntype Props = StateToProps & DispatchToProps & OwnProps;\n\ninterface State {\n  loading: boolean;\n  measures?: T.Dict<string | undefined>;\n  subComponents?: SubComponent[];\n  totalSubComponents?: number;\n}\n\nexport class App extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { loading: true };\n\n  componentDidMount() {\n    this.mounted = true;\n    this.props.fetchMetrics();\n    this.fetchData();\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (prevProps.component !== this.props.component) {\n      this.fetchData();\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  fetchData() {\n    this.setState({ loading: true });\n    Promise.all([\n      getMeasures({ component: this.props.component.key, metricKeys: PORTFOLIO_METRICS.join() }),\n      getChildren(this.props.component.key, SUB_COMPONENTS_METRICS, { ps: 20, s: 'qualifier' })\n    ]).then(\n      ([measures, subComponents]) => {\n        if (this.mounted) {\n          this.setState({\n            loading: false,\n            measures: convertMeasures(measures),\n            subComponents: subComponents.components.map((component: any) => ({\n              ...component,\n              measures: convertMeasures(component.measures)\n            })),\n            totalSubComponents: subComponents.paging.total\n          });\n        }\n      },\n      () => {\n        if (this.mounted) {\n          this.setState({ loading: false });\n        }\n      }\n    );\n  }\n\n  isEmpty = () => this.state.measures === undefined || this.state.measures['ncloc'] === undefined;\n\n  isNotComputed = () =>\n    this.state.measures && this.state.measures['reliability_rating'] === undefined;\n\n  renderSpinner() {\n    return (\n      <div className=\"page page-limited\">\n        <div className=\"text-center\">\n          <i className=\"spinner spacer\" />\n        </div>\n      </div>\n    );\n  }\n\n  renderEmpty() {\n    return (\n      <div className=\"page page-limited\">\n        <div className=\"empty-search\">\n          <h3>\n            {!this.state.measures || !this.state.measures['projects']\n              ? translate('portfolio.empty')\n              : translate('portfolio.no_lines_of_code')}\n          </h3>\n        </div>\n      </div>\n    );\n  }\n\n  renderWhenNotComputed() {\n    return (\n      <div className=\"page page-limited\">\n        <div className=\"empty-search\">\n          <h3>{translate('portfolio.not_computed')}</h3>\n        </div>\n      </div>\n    );\n  }\n\n  render() {\n    const { component } = this.props;\n    const { loading, measures, subComponents, totalSubComponents } = this.state;\n\n    if (loading) {\n      return this.renderSpinner();\n    }\n\n    if (this.isEmpty()) {\n      return this.renderEmpty();\n    }\n\n    if (this.isNotComputed()) {\n      return this.renderWhenNotComputed();\n    }\n\n    return (\n      <div className=\"page page-limited portfolio-overview\">\n        <div className=\"page-actions\">\n          <Report component={component} />\n        </div>\n        <h1>{translate('portfolio.health_factors')}</h1>\n        <div className=\"portfolio-boxes\">\n          <MetricBox component={component.key} measures={measures!} metricKey=\"releasability\" />\n          <MetricBox component={component.key} measures={measures!} metricKey=\"reliability\" />\n          <MetricBox component={component.key} measures={measures!} metricKey=\"vulnerabilities\" />\n          <MetricBox component={component.key} measures={measures!} metricKey=\"security_hotspots\" />\n          <MetricBox component={component.key} measures={measures!} metricKey=\"maintainability\" />\n        </div>\n\n        <h1>{translate('portfolio.breakdown')}</h1>\n        <div className=\"portfolio-breakdown\">\n          <div className=\"portfolio-breakdown-box\">\n            <h2 className=\"text-muted small\">{translate('portfolio.number_of_projects')}</h2>\n            <div className=\"portfolio-breakdown-metric huge\">\n              <Measure\n                metricKey=\"projects\"\n                metricType=\"SHORT_INT\"\n                value={(measures && measures.projects) || '0'}\n              />\n            </div>\n            <div className=\"portfolio-breakdown-box-link\">\n              <div>\n                <MeasuresLink component={component.key} metric=\"projects\" />\n              </div>\n            </div>\n          </div>\n          <div className=\"portfolio-breakdown-box\">\n            <h2 className=\"text-muted small\">{translate('portfolio.number_of_lines')}</h2>\n            <div className=\"portfolio-breakdown-metric huge\">\n              <Measure\n                metricKey=\"ncloc\"\n                metricType=\"SHORT_INT\"\n                value={(measures && measures.ncloc) || '0'}\n              />\n            </div>\n            <div className=\"portfolio-breakdown-box-link\">\n              <div>\n                <MeasuresLink\n                  component={component.key}\n                  label={translate('portfolio.language_breakdown_link')}\n                  metric=\"ncloc\"\n                />\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {subComponents !== undefined && totalSubComponents !== undefined && (\n          <WorstProjects\n            component={component.key}\n            subComponents={subComponents}\n            total={totalSubComponents}\n          />\n        )}\n      </div>\n    );\n  }\n}\n\nconst mapDispatchToProps: DispatchToProps = { fetchMetrics };\n\nconst mapStateToProps = (state: Store): StateToProps => ({\n  metrics: getMetrics(state)\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(App);\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { getRatingTooltip as nextGetRatingTooltip, isDiffMetric } from '../../helpers/measures';\n\nconst KNOWN_RATINGS = [\n  'sqale_rating',\n  'maintainability_rating', // Needed to provide the label for \"new_maintainability_rating\"\n  'reliability_rating',\n  'security_rating',\n  'security_review_rating'\n];\n\nexport function enhanceMeasure(measure: T.Measure, metrics: T.Dict<T.Metric>): T.MeasureEnhanced {\n  return {\n    ...measure,\n    metric: metrics[measure.metric],\n    leak: getLeakValue(measure)\n  };\n}\n\nexport function getLeakValue(measure: T.MeasureIntern | undefined): string | undefined {\n  return measure?.period?.value;\n}\n\nexport function getRatingTooltip(metricKey: string, value: number): string | undefined {\n  const finalMetricKey = isDiffMetric(metricKey) ? metricKey.substr(4) : metricKey;\n  if (KNOWN_RATINGS.includes(finalMetricKey)) {\n    return nextGetRatingTooltip(finalMetricKey, value);\n  }\n  return undefined;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Tooltip from 'sonar-ui-common/components/controls/Tooltip';\nimport Level from 'sonar-ui-common/components/ui/Level';\nimport Rating from 'sonar-ui-common/components/ui/Rating';\nimport { formatMeasure } from 'sonar-ui-common/helpers/measures';\nimport { getRatingTooltip } from './utils';\n\ninterface Props {\n  className?: string;\n  decimals?: number | null;\n  metricKey: string;\n  metricType: string;\n  small?: boolean;\n  value: string | undefined;\n}\n\nexport default function Measure({\n  className,\n  decimals,\n  metricKey,\n  metricType,\n  small,\n  value\n}: Props) {\n  if (value === undefined) {\n    return <span className={className}>–</span>;\n  }\n\n  if (metricType === 'LEVEL') {\n    return <Level className={className} level={value} small={small} />;\n  }\n\n  if (metricType !== 'RATING') {\n    const formattedValue = formatMeasure(value, metricType, {\n      decimals,\n      omitExtraDecimalZeros: metricType === 'PERCENT'\n    });\n    return <span className={className}>{formattedValue != null ? formattedValue : '–'}</span>;\n  }\n\n  const tooltip = getRatingTooltip(metricKey, Number(value));\n  const rating = <Rating small={small} value={value} />;\n  if (tooltip) {\n    return (\n      <Tooltip overlay={tooltip}>\n        <span className={className}>{rating}</span>\n      </Tooltip>\n    );\n  }\n  return rating;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { chunk, flatMap, groupBy, sortBy } from 'lodash';\nimport { getLocalizedMetricName, translate } from 'sonar-ui-common/helpers/l10n';\nimport { get, save } from 'sonar-ui-common/helpers/storage';\nimport { localizeMetric } from '../../helpers/measures';\nimport { MetricKey } from '../../types/metrics';\nimport { GraphType, MeasureHistory, Serie } from '../../types/project-activity';\n\nexport const DEFAULT_GRAPH = GraphType.issues;\n\nconst GRAPHS_METRICS_DISPLAYED: T.Dict<string[]> = {\n  [GraphType.issues]: [MetricKey.bugs, MetricKey.code_smells, MetricKey.vulnerabilities],\n  [GraphType.coverage]: [MetricKey.lines_to_cover, MetricKey.uncovered_lines],\n  [GraphType.duplications]: [MetricKey.ncloc, MetricKey.duplicated_lines]\n};\n\nconst GRAPHS_METRICS: T.Dict<string[]> = {\n  [GraphType.issues]: GRAPHS_METRICS_DISPLAYED[GraphType.issues].concat([\n    MetricKey.reliability_rating,\n    MetricKey.security_rating,\n    MetricKey.sqale_rating\n  ]),\n  [GraphType.coverage]: [...GRAPHS_METRICS_DISPLAYED[GraphType.coverage], MetricKey.coverage],\n  [GraphType.duplications]: [\n    ...GRAPHS_METRICS_DISPLAYED[GraphType.duplications],\n    MetricKey.duplicated_lines_density\n  ]\n};\n\nexport function isCustomGraph(graph: GraphType) {\n  return graph === GraphType.custom;\n}\n\nexport function getGraphTypes(ignoreCustom = false) {\n  const graphs = [GraphType.issues, GraphType.coverage, GraphType.duplications];\n  return ignoreCustom ? graphs : [...graphs, GraphType.custom];\n}\n\nexport function hasDataValues(serie: Serie) {\n  return serie.data.some(point => Boolean(point.y || point.y === 0));\n}\n\nexport function hasHistoryData(series: Serie[]) {\n  return series.some(serie => serie.data && serie.data.length > 1);\n}\n\nexport function getSeriesMetricType(series: Serie[]) {\n  return series.length > 0 ? series[0].type : 'INT';\n}\n\nexport function getDisplayedHistoryMetrics(graph: GraphType, customMetrics: string[]) {\n  return isCustomGraph(graph) ? customMetrics : GRAPHS_METRICS_DISPLAYED[graph];\n}\n\nexport function getHistoryMetrics(graph: GraphType, customMetrics: string[]) {\n  return isCustomGraph(graph) ? customMetrics : GRAPHS_METRICS[graph];\n}\n\nexport function hasHistoryDataValue(series: Serie[]) {\n  return series.some(serie => serie.data && serie.data.length > 1 && hasDataValues(serie));\n}\n\nexport function splitSeriesInGraphs(series: Serie[], maxGraph: number, maxSeries: number) {\n  return flatMap(\n    groupBy(series, serie => serie.type),\n    type => chunk(type, maxSeries)\n  ).slice(0, maxGraph);\n}\n\nexport function generateCoveredLinesMetric(\n  uncoveredLines: MeasureHistory,\n  measuresHistory: MeasureHistory[]\n) {\n  const linesToCover = measuresHistory.find(measure => measure.metric === MetricKey.lines_to_cover);\n  return {\n    data: linesToCover\n      ? uncoveredLines.history.map((analysis, idx) => ({\n          x: analysis.date,\n          y: Number(linesToCover.history[idx].value) - Number(analysis.value)\n        }))\n      : [],\n    name: 'covered_lines',\n    translatedName: translate('project_activity.custom_metric.covered_lines'),\n    type: 'INT'\n  };\n}\n\nexport function generateSeries(\n  measuresHistory: MeasureHistory[],\n  graph: GraphType,\n  metrics: T.Metric[] | T.Dict<T.Metric>,\n  displayedMetrics: string[]\n): Serie[] {\n  if (displayedMetrics.length <= 0 || measuresHistory === undefined) {\n    return [];\n  }\n  return sortBy(\n    measuresHistory\n      .filter(measure => displayedMetrics.indexOf(measure.metric) >= 0)\n      .map(measure => {\n        if (measure.metric === MetricKey.uncovered_lines && !isCustomGraph(graph)) {\n          return generateCoveredLinesMetric(measure, measuresHistory);\n        }\n        const metric = findMetric(measure.metric, metrics);\n        return {\n          data: measure.history.map(analysis => ({\n            x: analysis.date,\n            y: metric && metric.type === 'LEVEL' ? analysis.value : Number(analysis.value)\n          })),\n          name: measure.metric,\n          translatedName: metric ? getLocalizedMetricName(metric) : localizeMetric(measure.metric),\n          type: metric ? metric.type : 'INT'\n        };\n      }),\n    serie =>\n      displayedMetrics.indexOf(serie.name === 'covered_lines' ? 'uncovered_lines' : serie.name)\n  );\n}\n\nexport function saveActivityGraph(\n  namespace: string,\n  project: string,\n  graph: GraphType,\n  metrics: string[] = []\n) {\n  save(namespace, graph, project);\n  if (isCustomGraph(graph)) {\n    save(`${namespace}.custom`, metrics.join(','), project);\n  }\n}\n\nexport function getActivityGraph(\n  namespace: string,\n  project: string\n): { graph: GraphType; customGraphs: string[] } {\n  const customGraphs = get(`${namespace}.custom`, project);\n  return {\n    graph: (get(namespace, project) as GraphType) || DEFAULT_GRAPH,\n    customGraphs: customGraphs ? customGraphs.split(',') : []\n  };\n}\n\nfunction findMetric(key: string, metrics: T.Metric[] | T.Dict<T.Metric>) {\n  if (Array.isArray(metrics)) {\n    return metrics.find(metric => metric.key === key);\n  }\n  return metrics[key];\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as globalMessages from '../../store/globalMessages';\nimport getStore from './getStore';\n\nexport default function addGlobalSuccessMessage(message: string): void {\n  const store = getStore();\n  store.dispatch(globalMessages.addGlobalSuccessMessage(message));\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nexport enum GraphType {\n  issues = 'issues',\n  coverage = 'coverage',\n  duplications = 'duplications',\n  custom = 'custom'\n}\n\nexport interface HistoryItem {\n  date: Date;\n  value?: string;\n}\n\nexport interface MeasureHistory {\n  metric: string;\n  history: HistoryItem[];\n}\n\nexport interface Serie {\n  data: Point[];\n  name: string;\n  translatedName: string;\n  type: string;\n}\n\nexport interface Point {\n  x: Date;\n  y: number | string | undefined;\n}\n"],"sourceRoot":""}